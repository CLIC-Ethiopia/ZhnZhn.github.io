"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{8121:(e,t,r)=>{r.r(t),r.d(t,{default:()=>le});var s=r(9679),n=r(2564),i=r(1926),o=r(795);let l;const a=e=>{const t=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(r=t)||r-r!=0||(l||(l=(new Date).getUTCFullYear()))-t<3;var r},c=e=>e.active,d=(e,t)=>{if(e)return"SDN"===t?c:a};var u=r(4488);const p=(0,s.createContext)();var h=r(8190),g=r(8811),f=r(5893);const m={width:240,paddingBottom:8},x=e=>{let{is:t,toggleMenu:r,toggleFilter:s}=e;return(0,f.jsx)(h.Z,{isShow:t,className:"popup-menu charts__menu-more",style:m,onClose:r,children:(0,f.jsx)(g.Z,{caption:"Filter Not Active Topic",onToggle:s})})};var y=r(6462),C=r(2038);const P={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},b=Object.assign,v=e=>{const t=e.text||"",r=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+r}},j=e=>()=>{const{rootUrl:t,id:r,proxy:s,bT:n,lT:i,dU:o,noTime:l,dS:a}=e,c=(e=>{let{rootDimUrl:t,rootUrl:r,id:s,proxy:n="",dfDimQuery:i=""}=e;return""+n+(t||r)+"/"+s+i})(e),d=b({},P,{type:n+"_"+r,...v(e)});b(d.dialogProps,{loadId:i,descrUrl:o,dataSource:a,dfProps:{dimUrl:c,baseMeta:t,dfId:r,proxy:s,noTime:l}}),C.Z.showDialog(n+"_"+r,n,d)},k=Array.isArray,w=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return k(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},I=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=e.id+": "+e.text+", "+(e.firstPeriod||"")+"-"+(e.latestPeriod||""),e))):0!==(r.subjects||[]).length?w(r.subjects,t):w(e,t)},_=e=>(e.forEach((e=>{"t"===e.type&&(e.text=e.id+": "+e.text)})),e),N=Array.isArray,T=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,M={SDN:I,SIR:_},S=function(e,t,r){void 0===e&&(e="");const{rootUrl:s,dfTi:n="",lT:i}=t;return fetch(""+e+s+"/"+r+n,{cache:"default"}).then((e=>e.json())).then((e=>{if(N(e)){const t=M[i];t&&(e=t(e,r)),e.sort(T)}return e}))};var Z=r(554);const F={fontWeight:"bold",fontSize:"16px"},D={color:"#f44336",paddingLeft:12},R={position:"relative",color:"silver",padding:"8px 0 4px 32px",cursor:"pointer"},O={position:"absolute",top:8,left:16},A={color:"#1b2836",padding:8,paddingLeft:12,cursor:"pointer"},U={color:"black",padding:8,cursor:"pointer"},E=e=>{let{innerRef:t,title:r,onClick:s}=e;const n=(0,Z.Z)(s);return(0,f.jsxs)("div",{ref:t,className:"menu-item",style:R,role:"menuitem",tabIndex:"0",onClick:s,onKeyDown:n,children:[r,(0,f.jsx)("span",{style:O,children:"<"})]})};var L=r(2554);const B=e=>{let{innerRef:t,item:r,onClick:s}=e;const{text:n,type:i}=r,o="l"===i?A:U,l=(0,Z.Z)(s,[s]);return(0,f.jsx)("div",{ref:t,className:"menu-item",style:o,tabIndex:"0",role:"menuitem",onClick:s,onKeyDown:l,children:n})},K=[],X=(0,s.memo)((e=>{let{refFirstItem:t,model:r=K,fOnClickItem:n}=e;const i=(e=>{const t=(0,s.useContext)(p);return(0,s.useMemo)((()=>t?e.filter(t):e),[t,e])})(r);return(0,f.jsx)("div",{children:i.map(((e,r)=>(0,f.jsx)(B,{innerRef:0===r?t:void 0,item:e,onClick:n(e)},e.id)))})})),z=e=>{let{errMsg:t}=e;return t?(0,f.jsx)("div",{style:D,children:t}):null},Q=e=>{let{refFirstItem:t,model:r,fOnClickItem:s,errMsg:n}=e;return(0,f.jsxs)(f.Fragment,{children:[!(r||n)&&(0,f.jsx)(L.Z,{}),(0,f.jsx)(X,{refFirstItem:t,model:r,fOnClickItem:s}),(0,f.jsx)(z,{errMsg:n})]})},W=Array.isArray,Y=(e,t,r,s,n,i,o)=>{const{text:l,id:a,type:c}=o,d="SDN"===r.lT?a||t:t?t+"/"+a:a;return"l"===c?n.bind(null,d,l,s):i({id:d,...r,text:l,proxy:e})},q=e=>{let{style:t,store:r,title:n,id:i="",dfProps:o={},pageNumber:l,pageCurrent:a,onClickPrev:c,onClickNext:d,fOnClickItem:u,loadItems:p}=e;const h=(0,s.useRef)(),g=(0,s.useRef)(),[m,x]=(0,s.useState)({}),{model:y,errMsg:C}=m,P=((e,t)=>e.getProxy(t.lT))(r,o),b=(0,s.useCallback)(Y.bind(null,P,i,o,l,d,u),[P]),v=n&&c,j=l===a&&(v||!v&&y);return(0,s.useEffect)((()=>(n&&p(P,o,i).then((e=>{const t=W(e)?{model:e}:{errMsg:"Response is not array"};x(t)})).catch((e=>x({errMsg:e.message}))),()=>{clearTimeout(g.current),h.current=null})),[]),(0,s.useEffect)((()=>{j&&(clearTimeout(g.current),g.current=setTimeout((()=>{const e=h.current;e&&e.focus()}),1e3))}),[j]),(0,f.jsxs)("div",{style:{...F,...t},children:[v&&(0,f.jsx)(E,{innerRef:h,title:n,onClick:c.bind(null,l)}),(0,f.jsx)(Q,{refFirstItem:v?void 0:h,model:y,fOnClickItem:b,errMsg:C})]})},G=e=>{let{pages:t,pageCurrent:r}=e;return t.map(((e,t)=>(0,s.cloneElement)(e,{pageCurrent:r,pageNumber:t+1})))},H={width:300,overflow:"hidden"},J={width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},V={width:300},$=e=>{const t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)};class ee extends s.Component{constructor(e){super(e),this.hPrevPage=e=>{this.setState((t=>{let{pageCurrent:r}=t;return 0===r||r!==e?null:(this._direction=-1,{pageCurrent:e-1})}))},this._addPage=(e,t,r)=>{const{dfProps:s,store:n}=this.props;e.push((0,f.jsx)(q,{id:t,style:V,store:n,title:r,dfProps:s,onClickPrev:this.hPrevPage,onClickNext:this.hNextPage,loadItems:S,fOnClickItem:j},t))},this.hNextPage=(e,t,r)=>{this.setState((s=>{let{pageCurrent:n,pages:i}=s;return r!==n?null:(r<i.length?i[r]&&i[r].key!==e&&(r>0?i.splice(r):i=[],this._addPage(i,e,t)):this._addPage(i,e,t),this._direction=1,{pages:i,pageCurrent:r+1})}))},this._crTransform=()=>{let e="0";const t=this._refMenu.current;if(0!==this._direction&&t){const r=$(t);e=1===this._direction?r-300:r+300,this._direction=0}else 0===this._direction&&t&&(e=$(t));return{transform:"translateX("+e+"px)"}},this.hNextPage=(0,y.Z)(this.hNextPage.bind(this)),this.hPrevPage=(0,y.Z)(this.hPrevPage.bind(this)),this._refMenu=(0,s.createRef)(),this._direction=0,this._fOnClickItem=e=>{let{id:t,text:r}=e;return this.hNextPage.bind(null,t,r,0)},this.state={pageCurrent:0,pages:[]}}render(){const{dfProps:e,store:t}=this.props,{pages:r,pageCurrent:s}=this.state,n=this._crTransform(),i={...J,...n};return(0,f.jsx)("div",{style:H,children:(0,f.jsxs)("div",{ref:this._refMenu,style:i,children:[(0,f.jsx)(q,{style:V,title:"Main Menu",store:t,dfProps:e,pageCurrent:s,pageNumber:0,onClickNext:this.hNextPage,loadItems:S,fOnClickItem:j}),(0,f.jsx)(G,{pages:r,pageCurrent:s})]})})}}const te=ee,re={paddingRight:0},se={paddingLeft:6},ne={position:"relative",top:-4},ie={position:"relative",top:-6,paddingLeft:4},oe={height:"92%"},le=(0,s.memo)((e=>{const{isInitShow:t,caption:r,browserType:l,showAction:a}=e,[c,h,g]=(0,n.Z)(t),[m,y]=(0,i.Z)(),[C,P]=(0,i.Z)(),b=(0,s.useMemo)((()=>d(C,e.dfProps.lT)),[C]);return(0,o.Z)(((e,t)=>{e===a&&t===l&&h()})),(0,f.jsx)(p.Provider,{value:b,children:(0,f.jsxs)(u.Z.Browser,{isShow:c,style:re,children:[(0,f.jsx)(x,{is:m,toggleMenu:y,toggleFilter:P}),(0,f.jsx)(u.Z.BrowserCaption,{style:se,caption:r,captionStyle:ie,svgMoreStyle:ne,onMore:y,onClose:g}),(0,f.jsx)(u.Z.ScrollPane,{className:"scroll-container-y",style:oe,children:(0,f.jsx)(te,{...e})})]})})}))}}]);
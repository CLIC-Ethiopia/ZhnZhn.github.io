(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[861],{7915:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>k});var a,n=o(7154),i=o.n(n),r=o(1506),s=o.n(r),l=o(5354),d=o.n(l),c=o(5893),h=o(9679),u=o(3014),p=o(82),S=p.Z.Decor,T=p.Z.crMenuMore,m={BT_ROOT:{color:"rgb(35, 47, 59)"}},_={INIT:"First Load Meta",SELECT:"Select..."},g="Default Empty",f="Import - Trade (USD)",C="Export - Trade (USD)",w="Re-Import - Trade (USD)",v="Re-Export - Trade (USD)",D=[{caption:"Default : Empty Filter",value:g},{caption:"Import - Trade (USD)",value:"Import - Trade (USD)"},{caption:"Import - Weight (Kg)",value:"Import - Weight (Kg)"},{caption:"Export - Trade (USD)",value:"Export - Trade (USD)"},{caption:"Export - Weight (Kg)",value:"Export - Weight (Kg)"},{caption:"Re-Import - Trade (USD)",value:"Re-Import - Trade (USD)"},{caption:"Re-Export - Trade (USD)",value:"Re-Export - Trade (USD)"}],F=[{caption:"Default : Area",value:u.oX.AREA},{caption:"Semi Donut : Total Top90, On Every Year : Recent 2 Years",value:u.oX.SEMI_DONUT},{caption:"Stacked Area : Total Top90, On Recent Year",value:u.oX.STACKED_AREA},{caption:"Stacked Area Percent : Total Top90, On Recent Year",value:u.oX.STACKED_AREA_PERCENT},{caption:"Stacked Column : Total Top90, On Recent Year",value:u.oX.STACKED_COLUMN},{caption:"Stacked Column Percent : Total Top90, On Recent Year",value:u.oX.STACKED_COLUMN_PERCENT},{caption:"Tree Map : On Recent Year",value:u.oX.TREE_MAP}];const b=(0,S.withToolbar)(a=(0,S.withValidationLoad)(a=(0,S.withInitialState)(a=function(t){function e(e){var o;return(o=t.call(this,e)||this)._initTrade=function(){o.subheading=void 0,o.optionTrades=void 0,o.setState({optionTrades:[],placeholderTrade:_.INIT,isLoadingTradeFailed:!1})},o._filterTrade=function(){var t;if(o.tradeFilter&&o.optionTrades){var e=o.tradeFilter.value;e!==g?(t=o.optionTrades.filter((function(t,o){return-1!==t.caption.indexOf(e)})),e===f&&(t=t.filter((function(t,e){return-1===t.caption.indexOf(w)}))),e===C&&(t=t.filter((function(t,e){return-1===t.caption.indexOf(v)})))):t=o.optionTrades}else t=o.optionTrades;return t},o._handlerClickAll=function(){var t=o.state,e=t.isShowFilter,a=t.isShowDate,n=t.isShowChartType,i=!(e||a||n);o.setState({isShowFilter:i,isShowDate:i,isShowChartType:i})},o._handlerClickFilter=function(){o.setState({isShowFilter:!o.state.isShowFilter})},o._handlerClickDate=function(){o.setState({isShowDate:!o.state.isShowDate})},o._handlerClickChartType=function(){o.setState({isShowChartType:!o.state.isShowChartType})},o._handlerSelectCountry=function(t){o.country=t,o._initTrade()},o._handlerSelectChapter=function(t){o.chapter=t,o._initTrade()},o._handlerSelectTradeFilter=function(t){o.tradeFilter=t,o.setState({optionTrades:o._filterTrade()})},o._handlerSelectTrade=function(t){o.subheading=t},o._handlerSelectChartType=function(t){o.chartType=t},o._handlerLoadMeta=function(){o._handleWithValidationLoad(o._createMetaValidationMessages(),o._createLoadMetaOption,o._loadMeta)},o._loadMeta=function(t){o.props.onLoad(t),o.setState({isLoadingTrade:!0})},o._createMetaValidationMessages=function(){var t=[];o.country||t.push(o.props.msgOnNotSelected("Country")),o.chapter||t.push(o.props.msgOnNotSelected("Subheading"));var e=o.datesFragment.getValidation(),a=e.isValid,n=e.datesMsg;return a||(t=t.concat(n)),t.isValid=0===t.length,t},o._createLoadMetaOption=function(){var t=o.datesFragment.getValues(),e=t.fromDate,a=t.toDate,n=o.props,i=n.loadId;return{value:(0,n.fnValue)(o.chapter.value,o.country.value),fromDate:e,toDate:a,isLoadMeta:!0,onLoad:o._setOptionTrades,onCancel:o._loadMetaOptionCancel,onFailed:o._loadMetaOptionFailed,loadId:i}},o._setOptionTrades=function(t){o.optionTrades=t,o.setState({optionTrades:o._filterTrade(),isLoadingTrade:!1,isLoadingTradeFailed:!1,placeholderTrade:_.SELECT})},o._loadMetaOptionCancel=function(){o.setState({isLoadingTrade:!1,isLoadingTradeFailed:!1,placeholderTrade:_.SELECT})},o._loadMetaOptionFailed=function(){o.setState({isLoadingTrade:!1,isLoadingTradeFailed:!0})},o._handlerLoadData=function(){o._handleWithValidationLoad(o._createDataValidationMessages(),o._createLoadDataOption)},o._createDataValidationMessages=function(){var t=[];o.chartType&&o.chartType.value!==u.oX.AREA?(o.state.placeholderTrade===_.INIT&&t.push(_.INIT),o.tradeFilter||t.push(o.props.msgOnNotSelected("Trade Filter"))):o.subheading||t.push(o.props.msgOnNotSelected("Subheading"));return t.isValid=0===t.length,t},o._createLoadDataOption=function(){var t=o.datesFragment.getValues(),e=t.fromDate,a=t.toDate,n=o.subheading?o.subheading.value:o.props.dataColumn,i=o.props,r=i.loadId,s=i.fnValue,l=i.dataSource,d=o.chartType?o.chartType.value:u.oX.AREA,c=o.tradeFilter?o.country.caption+":"+o.tradeFilter.caption:""+o.country.caption,h=o.chartType&&o.chartType.value!==u.oX.AREA?o._createSpliceItems():void 0;return{value:s(o.chapter.value,o.country.value),fromDate:e,toDate:a,dataColumn:n,seriaType:d,sliceItems:h,title:c,subtitle:o.chapter.caption,loadId:r,dataSource:l}},o._createSpliceItems=function(){var t=o.tradeFilter.value.length+2;return o.state.optionTrades.map((function(e,o){var a=e.value,n=e.caption;return{caption:n=n.substring(0,n.length-t),value:a}}))},o._handlerClose=function(){o._handleWithValidationClose()},o._refDates=function(t){return o.datesFragment=t},o._menuMore=T(s()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o.toolbarButtons.push({caption:"A",title:"Toggle All Input",onClick:o._handlerClickAll},{caption:"F",title:"Toggle Filter Input",onClick:o._handlerClickFilter},{caption:"D",title:"Toggle Date Input",onClick:o._handlerClickDate},{caption:"C",title:"Toggle ChartType Input",onClick:o._handlerClickChartType}),o._commandButtons=[(0,c.jsx)(p.Z.Button.Flat,{rootStyle:m.BT_ROOT,caption:"Load Meta",title:"First Load Meta, then Load Item",onClick:o._handlerLoadMeta},"meta"),(0,c.jsx)(p.Z.Button.Load,{onClick:o._handlerLoadData},"load")],o.state=i()({},o._isWithInitialState(),{isShowFilter:!1,isShowChartType:!1,isLoadingTrade:!1,isLoadingTradeFailed:!1,optionTrades:[],placeholderTrade:_.INIT}),o}d()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.onShow,a=t.onFront,n=t.countryURI,i=t.countryJsonProp,r=t.commodityURI,s=t.commodityJsonProp,l=t.initFromDate,d=t.initToDate,h=t.msgOnNotValidFormat,u=t.onTestDate,S=this.state,T=S.isToolbar,m=S.isShowLabels,_=S.isShowFilter,g=S.isShowDate,f=S.isShowChartType,C=S.isLoadingTrade,w=S.isLoadingTradeFailed,v=S.optionTrades,b=S.placeholderTrade,y=S.validationMessages;return(0,c.jsxs)(p.Z.DraggableDialog,{isShow:e,caption:"United Nations Commodity Trade",menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:o,onFront:a,onClose:this._handlerClose,children:[(0,c.jsx)(p.Z.Toolbar,{isShow:T,buttons:this.toolbarButtons}),(0,c.jsx)(p.Z.SelectWithLoad,{isShow:e,isShowLabels:m,uri:n,jsonProp:i,caption:"Country:",optionNames:"Countries",onSelect:this._handlerSelectCountry}),(0,c.jsx)(p.Z.SelectWithLoad,{isShow:e,isShowLabels:m,uri:r,jsonProp:s,caption:"Chapter:",optionNames:"Chapters",onSelect:this._handlerSelectChapter}),(0,c.jsx)(p.Z.ShowHide,{isShow:_,children:(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:m,caption:"Filter Trade:",options:D,placeholder:"Filter...",onSelect:this._handlerSelectTradeFilter})}),(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:m,caption:"Subheading:",options:v,optionNames:"Meta",isLoading:C,isLoadingFailed:w,placeholder:b,onLoadOption:this._handlerLoadMeta,onSelect:this._handlerSelectTrade}),(0,c.jsx)(p.Z.ShowHide,{isShow:g,children:(0,c.jsx)(p.Z.DatesFragment,{ref:this._refDates,isShowLabels:m,initFromDate:l,initToDate:d,msgOnNotValidFormat:h,onTestDate:u})}),(0,c.jsx)(p.Z.ShowHide,{isShow:f,children:(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:m,caption:"Chart Type:",options:F,onSelect:this._handlerSelectChartType})}),(0,c.jsx)(p.Z.ValidationMessages,{validationMessages:y})]})},e}(h.Component))||a)||a)||a;var y,L=p.Z.Decor,M=p.Z.crMenuMore,O=[{caption:"2020",value:2020},{caption:"2019",value:2019},{caption:"2018",value:2018},{caption:"2017",value:2017},{caption:"2016",value:2016},{caption:"2015",value:2015},{caption:"2014",value:2014},{caption:"2013",value:2013},{caption:"2012",value:2012}];const I=(0,L.dialog)(y=function(t){function e(e){var o;return(o=t.call(this,e)||this)._handleSelectYear=function(t){o.year=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.msgOnNotSelected,a=t.msgOnNotValidFormat,n=t.isFd,i=[],r=o._refItemMonth.current.getValidation(),s=r.isValid,l=r.msg;return s||(i=i.concat(l)),o.year||i.push(e("Year")),n&&!o._refFromDate.current.isValid()&&i.push(a("From Date")),i.isValid=0===i.length,i},o._createLoadOption=function(){var t=o._refItemMonth.current.getValues(),e=t.one,a=t.two,n=o.props.isFd?o._refFromDate.current.getValue():void 0;return o.props.loadFn(o.props,{item:e,month:a,year:o.year,fromDate:n})},o._handleClose=function(){o._handleWithValidationClose()},o._menuMore=M(s()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o._refItemMonth=(0,h.createRef)(),o._refFromDate=(0,h.createRef)(),o._commandButtons=o._crCommandsWithLoad(s()(o)),o.state=i()({},o._isWithInitialState()),o}d()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.caption,a=t.onShow,n=t.onFront,i=t.futuresURI,r=t.msgOnNotSelected,s=t.isFd,l=t.initFromDate,d=t.isYmdOrEmpty,h=t.errNotYmdOrEmpty,u=this.state,S=u.isToolbar,T=u.isShowLabels,m=u.validationMessages;return(0,c.jsxs)(p.Z.DraggableDialog,{isShow:e,caption:o,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose,children:[(0,c.jsx)(p.Z.Toolbar,{isShow:S,buttons:this.toolbarButtons}),(0,c.jsx)(p.Z.SelectOneTwo,{ref:this._refItemMonth,isShow:e,isShowLabels:T,uri:i,oneCaption:"Futures",oneOptionNames:"Futures",oneJsonProp:"futures",twoCaption:"Month",msgOnNotSelected:r}),(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:T,caption:"Year",options:O,onSelect:this._handleSelectYear}),s&&(0,c.jsx)(p.Z.RowDate,{innerRef:this._refFromDate,isShowLabels:T,labelTitle:"From Date:",initValue:l,errorMsg:h,onTestDate:d}),(0,c.jsx)(p.Z.ValidationMessages,{validationMessages:m})]})},e}(h.Component))||y;var V,x=p.Z.Decor,E=p.Z.crMenuMore,R=[{caption:"Continuous Contract #1",value:1},{caption:"Continuous Contract #2",value:2},{caption:"Continuous Contract #3",value:3},{caption:"Continuous Contract #4",value:4},{caption:"Continuous Contract #5",value:5}];const Z=(0,x.dialog)(V=function(t){function e(e){var o;return(o=t.call(this,e)||this)._handleSelectType=function(t){o.type=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.msgOnNotSelected,a=t.msgOnNotValidFormat,n=t.isFd,i=[],r=o._refExchangeItem.current.getValidation(),s=r.isValid,l=r.msg;return s||(i=i.concat(l)),o.type||i.push(e("Type")),n&&!o._refFromDate.current.isValid()&&i.push(a("From Date")),i.isValid=0===i.length,i},o._createLoadOption=function(){var t=o._refExchangeItem.current.getValues(),e=t.one,a=t.two,n=o.props.isFd?o._refFromDate.current.getValue():void 0;return o.props.loadFn(o.props,{exchange:e,item:a,type:o.type,fromDate:n})},o._handleClose=function(){o._handleWithValidationClose()},o._menuMore=E(s()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o._refExchangeItem=(0,h.createRef)(),o._refFromDate=(0,h.createRef)(),o._commandButtons=o._crCommandsWithLoad(s()(o)),o.state=i()({},o._isWithInitialState()),o}d()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.caption,a=t.onShow,n=t.onFront,i=t.futuresURI,r=t.msgOnNotSelected,s=t.isFd,l=t.initFromDate,d=t.isYmdOrEmpty,h=t.errNotYmdOrEmpty,u=this.state,S=u.isToolbar,T=u.isShowLabels,m=u.validationMessages;return(0,c.jsxs)(p.Z.DraggableDialog,{isShow:e,caption:o,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose,children:[(0,c.jsx)(p.Z.Toolbar,{isShow:S,buttons:this.toolbarButtons}),(0,c.jsx)(p.Z.SelectOneTwo,{ref:this._refExchangeItem,isShow:e,isShowLabels:T,uri:i,oneCaption:"Exchange",oneOptionNames:"Exchanges",oneJsonProp:"futures",twoCaption:"Asset",msgOnNotSelected:r}),(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:T,caption:"Type",options:R,onSelect:this._handleSelectType}),s&&(0,c.jsx)(p.Z.RowDate,{innerRef:this._refFromDate,isShowLabels:T,labelTitle:"From Date:",initValue:l,errorMsg:h,onTestDate:d}),(0,c.jsx)(p.Z.ValidationMessages,{validationMessages:m})]})},e}(h.Component))||V;var j,N=p.Z.Decor,W=p.Z.crMenuMore,A=[{caption:"Thousand Barrels per day (kb/d)",value:"KD"},{caption:"Thousand Barrels (kbbl)",value:"KB"},{caption:"Thousand Kilolitres (kl)",value:"KL"},{caption:"Thousand Metric Tons (kmt)",value:"KT"},{caption:"Conversion factor barrels/ktons",value:"BK"}],B=[{caption:"AreaSpline",value:"AREA"},{caption:"Yearly by Month",value:"YEARLY"}];const k={UNCommodityTrade:b,Futures3:I,FuturesWiki:Z,JodiWorldOil:(0,N.dialog)(j=function(t){function e(e){var o;return(o=t.call(this,e)||this)._hSelectCountry=function(t){o.country=t},o._hSelectUnits=function(t){o.units=t},o._hSelectChartType=function(t){o.chartType=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props.msgOnNotSelected,e=[];o.country||e.push(t("Country"));var a=o.productFlow.getValidation(),n=a.isValid,i=a.msg;n||(e=e.concat(i)),o.units||(o.units=A[0]);var r=o.datesFragment.getValidation(),s=r.isValid,l=r.datesMsg;return s||(e=e.concat(l)),e.isValid=0===e.length,e},o._createLoadOption=function(){var t=o.productFlow.getValues(),e=t.one,a=t.two,n=o.datesFragment.getValues(),i=n.fromDate,r=n.toDate,s=o.chartType?o.chartType.value:void 0,l=o.props,d=l.fnValue,c=l.dataColumn,h=l.loadId,u=l.dataSource;return{value:d(o.country.value,e.value,a.value,o.units.value),title:o.country.caption+": "+e.caption,subtitle:a.caption+": "+o.units.caption,fromDate:i,toDate:r,dataColumn:c,seriaType:s,loadId:h,dataSource:u}},o._handleClose=function(){o._handleWithValidationClose()},o._refProductFlow=function(t){return o.productFlow=t},o._refDates=function(t){return o.datesFragment=t},o._menuMore=W(s()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{isShowOptions:!0}),o._commandButtons=o._crCommandsWithLoad(s()(o)),o.state=i()({},o._isWithInitialState(),{isShowDate:!1,isShowOptions:!1}),o}d()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.caption,o=t.isShow,a=t.onShow,n=t.onFront,i=t.oneCaption,r=t.oneURI,s=t.oneJsonProp,l=t.parentCaption,d=t.parentChildURI,h=t.parentJsonProp,u=t.childCaption,S=t.msgOnNotSelected,T=t.initFromDate,m=t.initToDate,_=t.msgOnNotValidFormat,g=t.onTestDate,f=this.state,C=f.isToolbar,w=f.isShowLabels,v=f.isShowDate,D=f.isShowOptions,F=f.validationMessages;return(0,c.jsxs)(p.Z.DraggableDialog,{isShow:o,caption:e,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose,children:[(0,c.jsx)(p.Z.Toolbar,{isShow:C,buttons:this.toolbarButtons}),(0,c.jsx)(p.Z.SelectWithLoad,{isShow:o,isShowLabels:w,uri:r,jsonProp:s,caption:i,optionNames:"Items",onSelect:this._hSelectCountry}),(0,c.jsx)(p.Z.SelectOneTwo,{ref:this._refProductFlow,isShow:o,isShowLabels:w,uri:d,oneCaption:l,oneJsonProp:h,twoCaption:u,msgOnNotSelected:S}),(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:w,caption:"Units",options:A,onSelect:this._hSelectUnits}),(0,c.jsx)(p.Z.ShowHide,{isShow:v,children:(0,c.jsx)(p.Z.DatesFragment,{ref:this._refDates,isShowLabels:w,initFromDate:T,initToDate:m,msgOnNotValidFormat:_,onTestDate:g})}),(0,c.jsx)(p.Z.ShowHide,{isShow:D,children:(0,c.jsx)(p.Z.RowInputSelect,{isShowLabels:w,caption:"Chart Type",placeholder:"Default: AreaSpline",options:B,onSelect:this._hSelectChartType})}),(0,c.jsx)(p.Z.ValidationMessages,{validationMessages:F})]})},e}(h.Component))||j}}}]);
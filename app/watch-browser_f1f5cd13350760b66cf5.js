"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[341],{238:(t,e,r)=>{r.r(e),r.d(e,{default:()=>ot});var i=r(9679),n=r(3513),o=r(2038),s=r(3218),a=r(6645),d=r(4832),h=r(5893);const l="bt__watch__bar",p={ROOT:{marginBottom:10},BT_LIST:{marginLeft:20}},c=t=>{let{isShow:e,onClickGroup:r,onClickList:i}=t;return e?(0,h.jsxs)("div",{style:p.ROOT,children:[(0,h.jsx)(d.Z,{caption:"GROUP",className:l,onClick:r}),(0,h.jsx)(d.Z,{caption:"LIST",className:l,style:p.BT_LIST,onClick:i})]}):null};var g=r(2306),D=r(8636);const u={ITEM_DIV:{position:"relative",paddingRight:40,paddingTop:5,paddingBottom:5},ITEM_SPAN:{display:"inline-block",width:"100%",maxWidth:250,height:28,verticalAlign:"middle",textOverflow:"ellipsis",overflow:"hidden"},SVG_CLOSE:{position:"absolute",top:10,right:0}},_="Not Found",S=t=>{let{item:e,className:r,isModeEdit:n,option:o,onClick:s,onClose:a,onDragStart:d,onDragEnter:l,onDragOver:p,onDragLeave:c,onDrop:S}=t;const{caption:f=_}=e||{},v=n?(0,h.jsx)(D.Z,{style:u.SVG_CLOSE,onClose:a.bind(null,o)}):null,I=(0,i.useCallback)((()=>s(e)),[e]),L=(0,i.useCallback)((t=>{(0,g.Z)(t)&&I()}),[I]),T=n?{draggable:!0,onDragStart:d.bind(null,o),onDrop:S.bind(null,o),onDragOver:p,onDragEnter:l,onDragLeave:c}:void 0;return(0,h.jsxs)("div",{role:"menuitem",tabIndex:"0",className:r,style:u.ITEM_DIV,onClick:I,...T,onKeyUp:L,children:[(0,h.jsx)("span",{style:u.ITEM_SPAN,children:f}),v]})},f="border-bottom",v="border-left";let I,L,T,y;const b=function(t,e){t.persist(),L=t.currentTarget;const r=t.currentTarget.style;T=r.getPropertyValue(f),I=e},m=function(t){const e=L.style;t.currentTarget.style.removeProperty(v),e.removeProperty("border"),e.setProperty(f,T)},E=function(t,e,r){const i=t.currentTarget.style;y=i.getPropertyValue(v),-1!==I.indexOf(e)?i.setProperty(v,function(t){return void 0===t&&(t="green"),"4px solid "+t}(r)):i.setProperty(v,"4px solid red")},C=function(t){const e=t.currentTarget.style;e.removeProperty(v),e.setProperty(v,y)},O=t=>{Object.assign(t.prototype,{dragStartWithDnDStyle:b,dropWithDnDStyle:m,dragEnterWithDnDStyle:E,dragLeaveWithDnDStyle:C})},x={setTransferTo:t=>{let{event:e,dragId:r,xType:i}=t;Object.assign(e.dataTransfer,{effectAllowed:"move",dropEffect:"move"}).setData("text",JSON.stringify({dragId:r,xType:i}))}},w=t=>function(e,r){let{caption:i}=e;this.dragStartWithDnDStyle(r,[t.GROUP]),x.setTransferTo({event:r,dragId:i+";",xType:t.GROUP})},G=(t,e)=>function(r,i){let{caption:n}=r;this.dropWithDnDStyle(i);const o=JSON.parse(i.dataTransfer.getData("text")),{xType:s,dragId:a}=o,d=n+";";if(s===t.GROUP){if(a===d)return;i.preventDefault(),e.dragDropGroup({dragId:a,dropId:d})}else s===t.LIST&&(i.preventDefault(),e.dragDropList({dragId:a,dropId:d}))},M=t=>function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.GROUP,t.C_GROUP_ENTER)},W=function(t){t.preventDefault()},j=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},k=function(t,e){Object.assign(this,{_hDragStartGroup:w(t).bind(this),_hDropGroup:G(t,e).bind(this),_hDragEnterGroup:M(t).bind(this),_hDragOverGroup:W,_hDragLeaveGroup:j.bind(this)})},P=t=>{Object.assign(t.prototype,{_bindDnDGroup:k})},R=t=>function(e,r){let{groupCaption:i,caption:n}=e;this.dragStartWithDnDStyle(r,[t.GROUP,t.LIST]),x.setTransferTo({event:r,dragId:i+";"+n,xType:t.LIST})},N=(t,e)=>function(r,i){let{groupCaption:n,caption:o}=r;this.dropWithDnDStyle(i);const s=JSON.parse(i.dataTransfer.getData("text")),{xType:a,dragId:d}=s,h=n+";"+o+";";if(a===t.LIST){if(d===h)return;i.preventDefault(),e.dragDropList({dragId:d,dropId:h})}else a===t.ITEM&&(i.preventDefault(),e.dragDropItem({dragId:d,dropId:h}))},U=t=>function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.LIST,t.C_LIST_ENTER)},Z=function(t){t.preventDefault()},B=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},V=function(t,e){Object.assign(this,{_hDragStartList:R(t).bind(this),_hDropList:N(t,e).bind(this),_hDragEnterList:U(t).bind(this),_hDragOverList:Z,_hDragLeaveList:B.bind(this)})},A=t=>{Object.assign(t.prototype,{_bindDnDList:V})},H=t=>function(e,r){let{groupCaption:i,listCaption:n,caption:o}=e;this.dragStartWithDnDStyle(r,[t.LIST,t.ITEM]),x.setTransferTo({event:r,dragId:i+";"+n+";"+o,xType:t.ITEM})},J=(t,e)=>function(r,i){let{groupCaption:n,listCaption:o,caption:s}=r;this.dropWithDnDStyle(i);const a=JSON.parse(i.dataTransfer.getData("text")),{xType:d,dragId:h}=a,l=n+";"+o+";"+s;if(d===t.ITEM){if(h===l)return;i.preventDefault(),e.dragDropItem({dragId:h,dropId:l})}},z=t=>function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.ITEM,t.C_LIST_ENTER)},F=function(t){t.preventDefault()},K=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},Q=function(t,e){Object.assign(this,{_hDragStartItem:H(t).bind(this),_hDropItem:J(t,e).bind(this),_hDragEnterItem:z(t).bind(this),_hDragOverItem:F,_hDragLeaveItem:K.bind(this)})},q=t=>{Object.assign(t.prototype,{_bindDnDItem:Q})};var X;const Y="#80c040",$={paddingRight:0},tt={position:"relative",top:-4,marginLeft:20},et={lineHeight:2},rt={marginLeft:8,paddingLeft:2,borderLeftStyle:"solid",borderLeftWidth:2,borderLeftColor:"inherit",lineHeight:2},it={marginRight:10},nt={GROUP:"GROUP",C_GROUP_ENTER:"#1b75bb",LIST:"LIST",C_LIST_ENTER:Y,ITEM:"ITEM"};const ot=(t=>{O(t),P(t),A(t),q(t)})(X=class extends i.Component{constructor(t){super(t),this._onStore=(t,e)=>{const{browserType:r,showAction:i,updateAction:n}=this.props;t===i&&e===r?this._handlerShow():t===n&&this.setState({watchList:e})},this._handlerHide=()=>{this.setState({isShow:!1})},this._handlerShow=()=>{this.setState({isShow:!0})},this._handlerToggleEditMode=()=>{this.setState({isModeEdit:!this.state.isModeEdit})},this._renderWatchList=t=>{const{isModeEdit:e}=this.state;return t.groups.map(((t,r)=>{const{caption:i,lists:n}=t;return(0,h.jsx)(a.Z.OpenClose2,{style:et,caption:i,isDraggable:e,option:{caption:i},onDragStart:this._hDragStartGroup,onDragEnter:this._hDragEnterGroup,onDragOver:this._hDragOverGroup,onDragLeave:this._hDragLeaveGroup,onDrop:this._hDropGroup,children:n&&this._renderLists(n,i)},r)}))},this._renderLists=(t,e)=>{const{isModeEdit:r}=this.state;return t.map(((t,i)=>{const{caption:n,items:o}=t;return(0,h.jsx)(a.Z.OpenClose2,{style:rt,notSelectedStyle:it,openColor:Y,caption:n,isDraggable:r,option:{groupCaption:e,caption:n},onDragStart:this._hDragStartList,onDragEnter:this._hDragEnterList,onDragOver:this._hDragOverList,onDragLeave:this._hDragLeaveList,onDrop:this._hDropList,children:o&&this._renderItems(o,e,n)},i)}))},this._renderItems=(t,e,r)=>{const{isModeEdit:i}=this.state;return t.map(((t,n)=>{const{id:o,caption:s}=t;return(0,h.jsx)(S,{className:"row__type2-topic not-selected",isModeEdit:i,item:t,option:{groupCaption:e,listCaption:r,caption:s},onClick:this._handlerClickItem,onClose:this._handlerRemoveItem,onDragStart:this._hDragStartItem,onDragOver:this._hDragOverItem,onDragEnter:this._hDragEnterItem,onDragLeave:this._hDragLeaveItem,onDrop:this._hDropItem},o)}))},this._bindDnDGroup(nt,s.e4),this._bindDnDList(nt,s.e4),this._bindDnDItem(nt,s.e4),this.state={isShow:!!t.isInitShow,isModeEdit:!1,watchList:t.store.getWatchList()}}componentDidMount(){this.unsubscribe=this.props.store.listen(this._onStore)}componentWillUnmount(){this.unsubscribe()}_handlerSaveWatch(){s.e4.saveWatch()}_handlerEditGroup(){o.Ck.showModalDialog(n.Tz)}_handlerEditList(){o.Ck.showModalDialog(n.pQ)}_handlerClickItem(t){o.Ck.showModalDialog(n.LA,t)}_handlerRemoveItem(t,e){e.stopPropagation(),s.e4.removeItem(t)}render(){const{caption:t}=this.props,{isShow:e,isModeEdit:r,watchList:i}=this.state,n=r?"V":"E";return(0,h.jsxs)(a.Z.Browser,{isShow:e,style:$,children:[(0,h.jsxs)(a.Z.BrowserCaption,{caption:t,onClose:this._handlerHide,children:[(0,h.jsx)(a.Z.ButtonCircle,{caption:"S",title:"Save to LocalStorage",style:tt,onClick:this._handlerSaveWatch}),(0,h.jsx)(a.Z.ButtonCircle,{caption:n,title:"Toggle Edit Mode: E/V",style:tt,onClick:this._handlerToggleEditMode})]}),(0,h.jsx)(c,{isShow:r,onClickGroup:this._handlerEditGroup,onClickList:this._handlerEditList}),(0,h.jsx)(a.Z.ScrollPane,{className:"scroll-container-y scroll-watch",children:i&&this._renderWatchList(i)})]})}})||X}}]);
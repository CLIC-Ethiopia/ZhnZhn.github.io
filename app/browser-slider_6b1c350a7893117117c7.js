(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"SE/H":function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),o=r.n(n),a=r("ds6M"),i=r("jXBw"),l=r("pVnL"),s=r.n(l),c=r("PJYZ"),u=r.n(c),f=r("VbXa"),d=r.n(f),p=r("XNJZ"),m=r("+xHe"),g={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2a",dfProps:{},isProxy:!0}},v=function(e){return function(){var t=e.rootUrl,r=e.id,n=e.proxy,o=e.bT,a=e.lT,i=e.dU,l=e.noTime,c=e.dS,u=function(e){var t=e.rootUrl,r=e.id,n=e.proxy,o=t+"/"+r;return n?""+n+o:o}(e),f=Object.assign({},g,s()({type:o+"_"+r},function(e){var t=e.text||"",r=t.length>35?t.substr(0,35)+"...":t;return{menuTitle:t.substr(0,27),contFullCaption:e.sP+": "+r}}(e)));Object.assign(f.dialogProps,{loadId:a,descrUrl:i,dataSource:c,dfProps:{metaUrl:u,baseMeta:t,dfId:r,proxy:n,noTime:l}}),m.b.showDialog(o+"_"+r,o,f)}},b=function(e,t){return e.text<t.text?-1:e.text>t.text?1:0},h=function(e,t){return fetch(t?t+e:e,{cache:"default"}).then((function(e){return e.json()})).then((function(e){return Array.isArray(e)&&e.sort(b),e}))},y=r("JyE6"),E={MSG_ERR:{paddingLeft:"12px",color:"#f44336",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px"},TITLE:{position:"relative",color:"silver",paddingLeft:"32px",paddingTop:"8px",paddingBottom:"4px",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",cursor:"pointer"},TITLE_ARROW:{position:"absolute",top:"8px",left:"16px"},ITEM_L:{color:"#1b2836",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",paddingLeft:"12px",cursor:"pointer"},ITEM_T:{color:"black",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",cursor:"pointer"}},x="menu-item",P=function(e){var t=e.innerRef,r=e.title,n=e.onClick;return o.a.createElement("div",{ref:t,className:x,style:E.TITLE,role:"menuitem",tabIndex:"0",onClick:n,onKeyDown:function(e){Object(y.a)(e)&&(e.preventDefault(),n())}},r,o.a.createElement("span",{style:E.TITLE_ARROW},"<"))},C="menu-item",_=function(e){var t=e.innerRef,r=e.item,a=e.onClick,i=r.text,l="l"===r.type?E.ITEM_L:E.ITEM_T,s=Object(n.useCallback)((function(e){Object(y.a)(e)&&(e.preventDefault(),a())}),[a]);return o.a.createElement("div",{ref:t,className:C,style:l,tabIndex:"0",role:"menuitem",onClick:a,onKeyDown:s},i)},I=o.a.memo((function(e){var t=e.refFirstItem,r=e.model,n=void 0===r?[]:r,a=e.fOnClickItem;return o.a.createElement("div",null,n.map((function(e,r){return o.a.createElement(_,{innerRef:0===r?t:void 0,key:e.id,item:e,onClick:a(e)})})))})),O=function(e){var t=e.errMsg;return t?o.a.createElement("div",{style:E.MSG_ERR},t):null},T=Array.isArray,R=function(e,t,r,n,o,a,i){var l=i.text,c=i.id;return"l"===i.type?o.bind(null,t+"/"+c,l,n):a(s()({id:t+"/"+c},r,{text:l,proxy:e}))},S=function(e){var t=e.refFirstItem,r=e.style,a=e.store,i=e.title,l=e.id,s=void 0===l?"":l,c=e.dfProps,u=void 0===c?{}:c,f=e.pageNumber,d=e.pageCurrent,p=e.onClickPrev,m=e.onClickNext,g=e.fOnClickItem,v=e.loadItems,b=Object(n.useRef)(),h=Object(n.useRef)(),y=Object(n.useState)({model:[],errMsg:null}),E=y[0],x=y[1],C=E.model,_=E.errMsg,S=function(e,t){return e.getProxy(t.lT)}(a,u),w=Object(n.useCallback)(R.bind(null,S,s,u,f,m,g),[S]);Object(n.useEffect)((function(){return i&&v(u.rootUrl+"/"+s,S).then((function(e){if(!T(e))throw new Error("Response is not array");x({model:e,errMsg:null})})).catch((function(e){return x({model:[],errMsg:e.message})})),function(){clearTimeout(h.current),b.current=null}}),[]),Object(n.useEffect)((function(){f===d&&(h.current=setTimeout((function(){var e=b.current;e&&e.focus()}),1e3))}),[f,d]);var k=i&&p;return o.a.createElement("div",{style:r},k&&o.a.createElement(P,{innerRef:b,title:i,onClick:p.bind(null,f)}),o.a.createElement(I,{refFirstItem:t,model:C,fOnClickItem:w}),o.a.createElement(O,{errMsg:_}))},w=function(e){var t=e.pages,r=e.pageCurrent;return t.map((function(e,t){return o.a.cloneElement(e,{pageCurrent:r,pageNumber:t+1})}))},k={ROOT:{width:300,overflow:"hidden"},PAGES:{width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},PAGE:{width:300}},M=function(e){var t=e.style.transform.substr(11).replace("px","").replace(")","");return parseInt(t,10)},A=function(e){function t(t){var r;return(r=e.call(this,t)||this)._loadItems=function(){var e=r.props,t=e.dfProps,n=void 0===t?{}:t,o=e.store,a=n.lT,i=o.getProxy(a);h(n.rootUrl,i).then((function(e){if(!Array.isArray(e))throw new Error("Response is not array");r.setState({model:e,errMsg:void 0})})).catch((function(e){r.setState({errMsg:e.message})}))},r.hPrevPage=function(e){r.setState((function(t){var n=t.pageCurrent;return 0===n||n!==e?null:(r._direction=-1,{pageCurrent:e-1})}))},r._addPage=function(e,t,n){var a=r.props,i=a.dfProps,l=a.store;e.push(o.a.createElement(S,{key:t,id:t,style:k.PAGE,store:l,title:n,dfProps:i,onClickPrev:r.hPrevPage,onClickNext:r.hNextPage,loadItems:h,fOnClickItem:v}))},r.hNextPage=function(e,t,n){r.setState((function(o){var a=o.pageCurrent,i=o.pages;return n!==a?null:(n<i.length?i[n]&&i[n].key!==e&&(n>0?i.splice(n):i=[],r._addPage(i,e,t)):r._addPage(i,e,t),r._direction=1,{pages:i,pageCurrent:n+1})}))},r._crTransform=function(){var e="0";if(0!==r._direction&&r._menuNode){var t=M(r._menuNode);e=1===r._direction?t-300:t+300,r._direction=0}else 0===r._direction&&r._menuNode&&(e=M(r._menuNode));return{transform:"translateX("+e+"px)"}},r._refMenu=function(e){return r._menuNode=e},r.focusFirst=function(){var e=r._refFirstItem.current;e&&e.focus()},r.hNextPage=Object(p.a)(r.hNextPage.bind(u()(r))),r.hPrevPage=Object(p.a)(r.hPrevPage.bind(u()(r))),r._direction=0,r._refFirstItem=o.a.createRef(),r._fOnClickItem=function(e){var t=e.id,n=e.text;return r.hNextPage.bind(null,t,n,0)},r.state={model:[],pageCurrent:0,pages:[]},r}d()(t,e);var r=t.prototype;return r.componentDidMount=function(){this._loadItems()},r.render=function(){var e=this.state,t=e.model,r=e.errMsg,n=e.pages,a=e.pageCurrent,i=this._crTransform(),l=s()({},k.PAGES,{},i);return o.a.createElement("div",{style:k.ROOT},o.a.createElement("div",{ref:this._refMenu,style:l},o.a.createElement("div",{style:k.PAGE},o.a.createElement(I,{refFirstItem:this._refFirstItem,model:t,fOnClickItem:this._fOnClickItem}),o.a.createElement(O,{errMsg:r})),o.a.createElement(w,{pages:n,pageCurrent:a})))},r.componentDidUpdate=function(){0===this.state.pageCurrent&&setTimeout(this.focusFirst,1e3)},t}(n.Component),N={BROWSER:{paddingRight:0},SCROLL_PANE:{height:"92%"}},j=o.a.memo((function(e){var t=e.isInitShow,r=e.caption,l=e.store,s=e.browserType,c=e.showAction,u=Object(n.useState)(!!t),f=u[0],d=u[1],p=Object(n.useCallback)((function(){d(!1)}),[]);return Object(a.a)(l,(function(e,t){e===c&&t===s&&d(!0)})),o.a.createElement(i.a.Browser,{isShow:f,style:N.BROWSER},o.a.createElement(i.a.BrowserCaption,{caption:r,onClose:p}),o.a.createElement(i.a.ScrollPane,{className:"scroll-container-y",style:N.SCROLL_PANE},o.a.createElement(A,e)))}));t.default=j}}]);
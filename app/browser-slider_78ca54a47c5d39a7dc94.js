"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{8121:(e,t,r)=>{r.r(t),r.d(t,{default:()=>pe});var o=r(1768),s=r(2564),n=r(1926),i=r(795);let l;const a=e=>{const t=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(r=t)||r-r!=0||(l||(l=(new Date).getUTCFullYear()))-t<3;var r},c=e=>e.active,d=(e,t)=>e?"SDN"===t?c:a:void 0;var p=r(7894),u=r(752),g=r(9902);const m=(0,o.kr)();var f=r(8190),x=r(5255),h=r(5893);const y={width:240,paddingBottom:8},v=e=>{let{is:t,toggleMenu:r,toggleFilter:o}=e;return(0,h.jsx)(f.Z,{isShow:t,className:"popup-menu charts__menu-more",style:y,onClose:r,children:(0,h.jsx)(x.Z,{caption:"Filter Not Active Topic",onToggle:o})})};var C=r(7815),j=r(2038);const k={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},b=Object.assign,w=e=>{const t=e.text||"";return{menuTitle:t.slice(0,27),contFullCaption:e.sP+": "+(r=t,r.length>35?r.slice(0,35)+"...":r)};var r},I=e=>()=>{const{rootUrl:t,id:r,proxy:o,bT:s,lT:n,dU:i,noTime:l,dS:a}=e,c=(e=>{let{rootDimUrl:t,rootUrl:r,id:o,proxy:s="",dfDimQuery:n=""}=e;return""+s+(t||r)+"/"+o+n})(e),d=b({},k,{type:s+"_"+r,...w(e)});b(d.dialogProps,{loadId:n,descrUrl:i,dataSource:a,dfProps:{dimUrl:c,baseMeta:t,dfId:r,proxy:o,noTime:l}}),j.Ck.showDialog(s+"_"+r,s,d)},T=Array.isArray,P=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return T(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},O=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=e.id+": "+e.text+", "+(e.firstPeriod||"")+"-"+(e.latestPeriod||""),e))):0!==(r.subjects||[]).length?P(r.subjects,t):P(e,t)},S=e=>(e.forEach((e=>{"t"===e.type&&(e.text=e.id+": "+e.text)})),e),Z=Array.isArray,M=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,N={SDN:O,SIR:S},A=function(e,t,r){void 0===e&&(e="");const{rootUrl:o,dfTi:s="",lT:n}=t;return fetch(""+e+o+"/"+r+s,{cache:"default"}).then((e=>e.json())).then((e=>{if(Z(e)){const t=N[n];t&&(e=t(e,r)),e.sort(M)}return e}))};var F=r(554);const D={fontWeight:"bold",fontSize:"16px"},U={color:"#f44336",paddingLeft:12},_={position:"relative",color:"silver",padding:"8px 0 4px 32px",cursor:"pointer"},R={position:"absolute",top:8,left:16},Y={color:"#1b2836",padding:8,paddingLeft:12,cursor:"pointer"},L={color:"black",padding:8,cursor:"pointer"},X=e=>{let{innerRef:t,title:r,onClick:o}=e;const s=(0,F.Z)(o);return(0,h.jsxs)("div",{ref:t,className:"menu-item",style:_,role:"menuitem",tabIndex:"0",onClick:o,onKeyDown:s,children:[r,(0,h.jsx)("span",{style:R,children:"<"})]})};var E=r(2554);const B=e=>{let{innerRef:t,item:r,onClick:o}=e;const{text:s,type:n}=r,i="l"===n?Y:L,l=(0,F.Z)(o,[o]);return(0,h.jsx)("div",{ref:t,className:"menu-item",style:i,tabIndex:"0",role:"menuitem",onClick:o,onKeyDown:l,children:s})},J=[],K=(0,o.X$)((e=>{let{refFirstItem:t,model:r=J,fOnClickItem:s}=e;const n=(e=>{const t=(0,o.qp)(m);return(0,o.Ye)((()=>t?e.filter(t):e),[t,e])})(r);return(0,h.jsx)("div",{children:n.map(((e,r)=>(0,h.jsx)(B,{innerRef:0===r?t:void 0,item:e,onClick:s(e)},e.id)))})})),$=e=>{let{errMsg:t}=e;return t?(0,h.jsx)("div",{style:U,children:t}):null},q=e=>{let{refFirstItem:t,model:r,fOnClickItem:o,errMsg:s}=e;return(0,h.jsxs)(h.Fragment,{children:[!(r||s)&&(0,h.jsx)(E.Z,{}),(0,h.jsx)(K,{refFirstItem:t,model:r,fOnClickItem:o}),(0,h.jsx)($,{errMsg:s})]})},z=Array.isArray,Q=(e,t,r,s,n,i,l)=>{const{text:a,id:c,type:d}=l,p=((e,t,r)=>"SDN"===e.lT?r||t:t?t+"/"+r:r)(r,t,c);return"l"===d?(0,o.YO)(n,p,a,s):i({id:p,...r,text:a,proxy:e})},W=e=>{let{style:t,store:r,title:s,id:n="",dfProps:i={},pageNumber:l,pageCurrent:a,onClickPrev:c,onClickNext:d,fOnClickItem:p,loadItems:u}=e;const g=(0,o.sO)(),m=(0,o.sO)(),[f,x]=(0,o.eJ)({}),{model:y,errMsg:v}=f,C=((e,t)=>e.getProxy(t.lT))(r,i),j=(0,o.I4)((0,o.YO)(Q,C,n,i,l,d,p),[C]),k=0!==l&&s&&c,b=l===a&&(k||!k&&y);return(0,o.d4)((()=>(s&&u(C,i,n).then((e=>{const t=z(e)?{model:e}:{errMsg:"Response is not array"};x(t)})).catch((e=>x({errMsg:e.message}))),()=>{clearTimeout((0,o.eA)(m)),(0,o.oe)(g,null)})),[]),(0,o.d4)((()=>{b&&(clearTimeout((0,o.eA)(m)),(0,o.oe)(m,setTimeout((()=>{(0,o.Bd)(g)}),1e3)))}),[b]),(0,h.jsxs)("div",{style:{...D,...t},children:[k&&(0,h.jsx)(X,{innerRef:g,title:s,onClick:(0,o.YO)(c,l)}),(0,h.jsx)(q,{refFirstItem:k?void 0:g,model:y,fOnClickItem:j,errMsg:v})]})};var G=r(9679);const H=e=>{let{pages:t,onClickPrev:r,...o}=e;return t.map(((e,t)=>(0,G.createElement)(W,{...o,...e,key:e.id,pageNumber:t,onClickPrev:0===t?void 0:r})))},V=300,ee={width:V,overflow:"hidden"},te={width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},re={width:V},oe=e=>{const t=e.style.transform.trim().slice(11).replace("px","").replace(")","");return parseInt(t,10)},se={pageCurrent:0,pages:[{id:"",title:"Menu"}]},ne=e=>{let{dfProps:t,store:r}=e;const s=(0,o.sO)(),n=(0,o.sO)(0),[{pageCurrent:i,pages:l},a]=(0,o.eJ)(se),c=(0,C.Z)((e=>{a((t=>{const{pageCurrent:r}=t;return 0===r||r!==e||(0,o.oe)(n,-1),{...t,pageCurrent:e-1}}))})),d=(0,C.Z)(((e,t,r)=>{a((s=>{const{pageCurrent:i,pages:l}=s;if(r!==i)return s;const a=r+1,{id:c}=l[a]||{};return e&&c!==e&&(l.splice(a),l.push({id:e,title:t})),(0,o.oe)(n,1),{pages:l,pageCurrent:r+1}}))}),[c]),p=((e,t)=>{const r=(0,o.eA)(e),s=(0,o.eA)(t),n=0!==s&&r?((0,o.oe)(t,0),oe(r)-1*s*V):0===s&&r?oe(r):0;return{...te,transform:"translateX("+n+"px)"}})(s,n);return(0,h.jsx)("div",{style:ee,children:(0,h.jsx)("div",{ref:s,style:p,children:(0,h.jsx)(H,{pages:l,pageCurrent:i,style:re,store:r,dfProps:t,onClickPrev:c,onClickNext:d,loadItems:A,fOnClickItem:I})})})},ie={paddingRight:0},le={paddingLeft:6},ae={position:"relative",top:-4},ce={position:"relative",top:-3,paddingLeft:4},de={height:"92%"},pe=(0,o.X$)((e=>{const{isInitShow:t,caption:r,browserType:l,showAction:a}=e,[c,f,x]=(0,s.Z)(t),[y,C]=(0,n.Z)(),[j,k]=(0,n.Z)(),b=(0,o.Ye)((()=>d(j,e.dfProps.lT)),[j]);return(0,i.Z)(((e,t)=>{e===a&&t===l&&f()})),(0,h.jsx)(m.Provider,{value:b,children:(0,h.jsxs)(p.Z,{isShow:c,style:ie,children:[(0,h.jsx)(v,{is:y,toggleMenu:C,toggleFilter:k}),(0,h.jsx)(u.Z,{style:le,caption:r,captionStyle:ce,svgMoreStyle:ae,onMore:C,onClose:x}),(0,h.jsx)(g.Z,{className:"scroll-container-y",style:de,children:(0,h.jsx)(ne,{...e})})]})})}))}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{QjmX:function(t,e,o){"use strict";o.r(e);var n,a,i,r,s,l,c,h,p,u,d,_,S=o("pVnL"),C=o.n(S),f=o("PJYZ"),m=o.n(f),g=o("VbXa"),w=o.n(g),T=o("q1tI"),y=o.n(T),D=o("4Fsi"),b=o("/plH"),O=o("H9NR"),v=(0,O.a.dialog)((i=a=function(t){function e(e){var o;return(o=t.call(this,e)||this)._handleSelectOne=function(t){o.one=t},o._handleSelectTwo=function(t){o.two=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.oneCaption,n=t.twoCaption,a=[];return o.one||a.push(o.props.msgOnNotSelected(e)),o.two||a.push(o.props.msgOnNotSelected(n)),a.isValid=0===a.length,a},o._createLoadOption=function(){return o.props.loadFn(o.props,{one:o.one,two:o.two})},o._handleClose=function(){o._handleWithValidationClose()},o._menuMore=Object(b.a)(m()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o._commandButtons=o._crCommandsWithLoad(m()(o)),o.state=C()({},o._isWithInitialState()),o}w()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.caption,o=t.isShow,n=t.onShow,a=t.onFront,i=t.oneCaption,r=t.oneURI,s=t.oneJsonProp,l=t.twoCaption,c=t.twoURI,h=t.twoJsonProp,p=this.state,u=p.isToolbar,d=p.isShowLabels,_=p.validationMessages;return y.a.createElement(D.a.DraggableDialog,{caption:e,isShow:o,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:n,onFront:a,onClose:this._handleClose},y.a.createElement(D.a.Toolbar,{isShow:u,buttons:this.toolbarButtons}),y.a.createElement(D.a.SelectWithLoad,{isShow:o,isShowLabels:d,uri:r,jsonProp:s,caption:i,optionNames:"Items",onSelect:this._handleSelectOne}),y.a.createElement(D.a.SelectWithLoad,{isShow:o,isShowLabels:d,uri:c,jsonProp:h,caption:l,optionNames:"Items",onSelect:this._handleSelectTwo}),y.a.createElement(D.a.ValidationMessages,{validationMessages:_}))},e}(T.Component),a.defaultProps={oneCaption:"Item",oneJsonProp:"items",twoCaption:"Metric",twoJsonProp:"metrics"},n=i))||n,M="Before Select Metric",E=12,L=24,B=4,F=3,I=function(t,e){return(t[e]||{}).value},R=function(t,e){var o,n,a=(new Date).getUTCMonth();for(n=0;n<12;n++)(a-=1)>-1?o=e+"M"+(a+1>9?a+1:"0"+(a+1)):(a=11,o=(e-=1)+"M12"),t.push({caption:o,value:o})},W=function(t,e,o){var n,a=(new Date).getUTCMonth(),i=Math.floor((a+1)/3),r=4===i?3:i;for(n=0;n<4;n++)r<1&&(e-=1,r=4),t.push({caption:""+e+o+r,value:""+e+o+r}),r-=1},P=function(t,e){return{dateOptions:t,dateDefault:I(t,e)}},A=function(t){void 0===t&&(t=1);for(var e=[],o=(new Date).getUTCFullYear(),n=0;n<E;n++)e.push({caption:""+o,value:""+o}),o-=1;return P(e,t)},k=function(t,e){switch(void 0===t&&(t="M"),t){case"M":return function(t){void 0===t&&(t=2);for(var e=[],o=(new Date).getUTCFullYear(),n=0;n<F;n++)R(e,o-n);return P(e,t)}(e);case"Q":case"K":return function(t,e){void 0===t&&(t=1),void 0===e&&(e="Q");for(var o=[],n=(new Date).getUTCFullYear(),a=0;a<B;a++)W(o,n-a,e);return P(o,t)}(e,t);case"S":return function(t){void 0===t&&(t=3);for(var e=[],o=(new Date).getUTCFullYear(),n=0;n<L;n++)e.push({caption:o+"S2",value:o+"S2"},{caption:o+"S1",value:o+"S1"}),o-=1;return P(e,t)}();case"Y":return A(e);case"EMPTY":return{dateDefault:M,dateOptions:[]};default:return A(e)}},N=function(){if(this.date&&this.date.value)return this.date.value;var t=this.state,e=t.dateOptions,o=t.dateDefault;return Array.isArray(e)&&0!==e.length?o:""},U=function(t){Object.assign(t.prototype,{_getDateWithForDate:N})},V=o("0TwO"),Y={A:"AREA",A_Y:"AREA_YEARLY",S:"SPLINE",L:"LINE",S_C:"COLUMN",M:"MAP",C:"COLUMN_SET",C_C:"COLUMN_CLUSTER",C_2:"COLUMN_BY_2",B:"BAR_SET",B_C:"BAR_CLUSTER",B_2:"BAR_BY_2",B_L:"BAR_WITH_LABELS",D:"DOT_SET",TM:"TREE_MAP",TM_C:"TREE_MAP_CLUSTER",TM_2:"TREE_MAP_2",TM_2_C:"TREE_MAP_2_CLUSTER"},x=[Y.M,Y.C,Y.C_C,Y.C_2,Y.B,Y.B_C,Y.B_2,Y.B_L,Y.D,Y.TM,Y.TM_C,Y.TM_2,Y.TM_2_C],j="",q=function(t){return{caption:t[0],value:t[1],dim:t[2],compType:t[3]}},H=function(t){return t.map(q)},J=function(t){return!t||"M"===t},G=function(t){return H([["Default: Spline",Y.S],["Line",Y.L],J(t)&&["Yearly by Months",Y.A_Y],["Area",Y.A],["Column",Y.S_C],["Bar: All Countries",Y.B],["Bar+Labels: All Countries",Y.B_L],["Column: All Countries",Y.C],["Dots: All Countries",Y.D]].filter(Boolean))},Z=function(){return[q(["Default: Spline",Y.S]),q(["Line",Y.L]),q(["Area",Y.A]),q(["Column",Y.S_C])]},Q=function(t){return H([["Column: By "+t,Y.C,t],["Column: By "+t+": Cluster",Y.C_C,t],["Bar: By "+t,Y.B,t],["Bar: By "+t+": Cluster",Y.B_C,t]])},X=function(t){var e=t[0];return[q(["Default: Spline",Y.A])].concat(Q(e))},z=function(t){var e=t[0];return[].concat(X([e]),[q(["TreeMap: By "+e,Y.TM,e]),q(["TreeMap: By "+e+": Cluster",Y.TM_C,e])])},K={DF:function(t,e){return G(e).concat(H([["Map: All Countries",Y.M,void 0,V.c.EUROSTAT_MAP]]))},t1:function(){return[q(["Default: Spline",Y.S])]},t2:Z,t2a:function(){return[].concat(Z(),[q(["Yearly by Months",Y.A_Y])])},t3:X,t3b:function(t){var e=t[0];return[q(["Default: Spline",Y.A]),q(["Yearly by Months",Y.A_Y])].concat(Q(e))},t3a:z,t3a2:function(t){var e=t[0];return[].concat(z([e]),[q(["TreeMap: By "+e+": Depth 2",Y.TM_2,e]),q(["TreeMap: By "+e+": Depth 2: Cluster",Y.TM_2_C,e])])},t4:function(t){var e=t[0],o=t[1];return[].concat(X([e]),[q(["Column: By "+o,Y.C_2,o]),q(["Bar: By "+o,Y.B_2,o])])},df3:G},$={crOptions:function(t){var e,o,n,a,i,r,s=t.chartsType,l=t.mapFrequency,c=t.dfProps,h=l||(void 0===c?{}:c).mapFrequency,p=(o=(e=t).dims,n=e.oneCaption,a=void 0===n?j:n,i=e.twoCaption,r=void 0===i?j:i,Array.isArray(o)?o.map((function(t){return t.c||j})):[a,r]);return(K[s]||K.DF)(p,h)},isCategory:function(t){return!!t&&-1!==x.indexOf(t.value)}},tt=o("DA9w"),et={CL:"popup-menu",ROOT:{left:8,zIndex:100,padding:"8px 12px",lineHeight:1.7},ROW_CB:{paddingLeft:0}},ot=function(t){var e=t.isShow,o=t.style,n=t.className,a=void 0===n?et.CL:n,i=t.toggleOption,r=t.onClose,s=i.bind(null,"isNotZoomToMinMax"),l=i.bind(null,"isFilterZero");return y.a.createElement(tt.a,{isShow:e,style:C()({},et.ROOT,{},o),className:a,onClose:r},y.a.createElement(D.a.RowCheckBox,{initValue:!1,rootStyle:et.ROW_CB,caption:"Not Zoom to Min-Max",onToggle:s}),y.a.createElement(D.a.RowCheckBox,{initValue:!1,rootStyle:et.ROW_CB,caption:"Filter Trim Zero Values",onToggle:l}))},nt=function(t){return $.isCategory(t)},at=(0,O.a.dialog)(r=U((l=s=function(t){function e(e){var o;return(o=t.call(this,e)||this)._updateForDate=function(t){o.date=null;var e=o.two?o.props.mapFrequency?o.props.mapFrequency:o.two.mapFrequency?o.two.mapFrequency:"M":null,n=o.props.mapDateDf,a=e?k(e,n):k("EMPTY");o.setState(C()({isShowDate:!0},a,{chartType:t}))},o._handleSelectOne=function(t){o.one=t},o._handleSelectTwo=function(t){o.two=t;var e=o.state.chartType;nt(e)&&o._updateForDate(e)},o._handleSelectChartType=function(t){nt(t)?o._updateForDate(t):o.setState({chartType:t,isShowDate:!1})},o._onRegColor=function(t){o.colorComp=t},o._handleSelectDate=function(t){o.date=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.oneCaption,n=t.twoCaption,a=o.state.chartType,i=[];return nt(a)||o.one||i.push(o.props.msgOnNotSelected(e)),o.two||i.push(o.props.msgOnNotSelected(n)),i.isValid=0===i.length,i},o._createLoadOption=function(){var t=m()(o),e=t.one,n=t.two,a=t.dialogOptions,i=t.colorComp,r=t.compSelect1,s=t.compSelect2,l=o.state.chartType,c=i?i.getConf():{},h=c.seriaColor,p=c.seriaWidth,u=o._getDateWithForDate();return o.props.loadFn(o.props,{one:e,two:n,dialogOptions:a,chartType:l,seriaColor:h,seriaWidth:p,date:u,selectOptions:[r.getOptions(),s.getOptions()]})},o._handleClose=function(){o._handleWithValidationClose()},o._refSelect1=function(t){o.compSelect1=t},o._refSelect2=function(t){o.compSelect2=t},o._menuMore=Object(b.a)(m()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{isOptions:!0}),o._commandButtons=o._crCommandsWithLoad(m()(o)),o._chartOptions=$.crOptions(e),o.state=C()({},o._isWithInitialState(),{isOptions:!1,isShowDate:!1},k("EMPTY")),o}w()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.noDate,o=t.caption,n=t.isShow,a=t.onShow,i=t.onFront,r=t.oneCaption,s=t.oneURI,l=t.oneJsonProp,c=t.twoCaption,h=t.twoURI,p=t.twoJsonProp,u=this.state,d=u.chartType,_=u.isToolbar,S=u.isOptions,C=u.isShowLabels,f=u.isShowDate,m=u.dateDefault,g=u.dateOptions,w=u.validationMessages;return y.a.createElement(D.a.DraggableDialog,{isShow:n,caption:o,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:i,onClose:this._handleClose},y.a.createElement(D.a.Toolbar,{isShow:_,buttons:this.toolbarButtons}),y.a.createElement(ot,{isShow:S,toggleOption:this._toggleOptionWithToolbar,onClose:this._hideOptionsWithToolbar}),y.a.createElement(D.a.SelectWithLoad,{ref:this._refSelect1,isShow:n,isShowLabels:C,uri:s,jsonProp:l,caption:r,optionNames:"Items",onSelect:this._handleSelectOne}),y.a.createElement(D.a.SelectWithLoad,{ref:this._refSelect2,isShow:n,isShowLabels:C,uri:h,jsonProp:p,caption:c,optionNames:"Metrics",onSelect:this._handleSelectTwo}),y.a.createElement(D.a.RowChart,{chartType:d,isShowLabels:C,options:this._chartOptions,onSelectChart:this._handleSelectChartType,onRegColor:this._onRegColor}),!e&&y.a.createElement(D.a.ShowHide,{isShow:f},y.a.createElement(D.a.RowInputSelect,{isShowLabels:C,caption:"For Date",placeholder:m,options:g,onSelect:this._handleSelectDate})),y.a.createElement(D.a.ValidationMessages,{validationMessages:w}))},e}(T.Component),s.defaultProps={oneCaption:"Item",oneJsonProp:"items",twoCaption:"Metric",twoJsonProp:"metrics"},r=l))||r)||r,it=o("8OQS"),rt=o.n(it),st={ROW:{display:"flex",justifyContent:"space-between"},INLINE:{display:"inline-block"},CAPTION:{maxWidth:150},CHB_CAPTION:{display:"inline-block",paddingLeft:40}},lt=function(t){var e=t.selectProps,o=t.crIsId,n=t.onToggle,a=t.onCheckCaption,i=t.onUnCheckCaption;return e.map((function(t,e){return y.a.createElement("div",{style:st.ROW,key:t.id},y.a.createElement(D.a.RowCheckBox,{initValue:!0,rootStyle:C()({},et.ROW_CB,{},st.INLINE),checkedColor:"#1b75bb",caption:t.caption,captionStyle:st.CAPTION,onToggle:function(){return n(o(t.id))}}),y.a.createElement(D.a.RowCheckBox,{initValue:0===e,rootStyle:st.CHB_CAPTION,checkedColor:"#a487d4",onCheck:function(){return a(e)},onUnCheck:function(){return i(e)}}))}))},ct=function(t){var e=t.isShow,o=t.style,n=t.className,a=void 0===n?et.CL:n,i=t.selectProps,r=void 0===i?[]:i,s=t.isShowDate,l=t.isShowChart,c=t.noForDate,h=void 0!==c&&c,p=t.crIsId,u=t.onToggle,d=t.onCheckCaption,_=t.onUnCheckCaption,S=t.onClose,f=Object(T.useCallback)(u.bind(null,"isShowChart"),[]),m=Object(T.useCallback)(u.bind(null,"isShowDate"),[]);return y.a.createElement(D.a.ModalPopup,{isShow:e,style:C()({},et.ROOT,{},o),className:a,onClose:S},y.a.createElement(lt,{selectProps:r,crIsId:p,onToggle:u,onCheckCaption:d,onUnCheckCaption:_}),y.a.createElement(D.a.RowCheckBox,{key:"isShowChart",value:l,rootStyle:et.ROW_CB,checkedColor:"#1b75bb",caption:"Chart",onToggle:f}),!h&&y.a.createElement(D.a.RowCheckBox,{key:"isForDate",value:s,rootStyle:et.ROW_CB,checkedColor:"#1b75bb",caption:"For Date",onToggle:m}))},ht=function(t){var e=t.chartType,o=t.isShowLabels,n=t.isShowChart,a=t.chartOptions,i=t.onSelectChart,r=t.onRegColor,s=t.isShowDate,l=t.noDate,c=void 0!==l&&l,h=t.dateDefault,p=t.dateOptions,u=t.onSelecDate;return y.a.createElement(y.a.Fragment,null,y.a.createElement(D.a.ShowHide,{isShow:n},y.a.createElement(D.a.RowChart,{chartType:e,isShowLabels:o,options:a,onSelectChart:i,onRegColor:r})),!c&&y.a.createElement(D.a.ShowHide,{isShow:s},y.a.createElement(D.a.RowInputSelect,{isShowLabels:o,caption:"For Date",placeholder:h,options:p,onSelect:u})))},pt=function(t){return"is"+t+"Select"},ut=function(t){return $.isCategory(t)},dt=(0,O.a.dialog)(c=U((p=h=function(t){function e(e){var o,n,a;return(o=t.call(this,e)||this)._toggleStateBy=function(t){o.setState((function(e){var o;return(o={})[t]=!e[t],o}))},o._checkCaptionBy=function(t){o._titles.push(t)},o._uncheckCaption=function(t){o._titles=o._titles.filter((function(e){return e!==t}))},o._updateForDate=function(t){o.date=void 0;var e=o.props.dfProps,n=void 0===e?{}:e,a=n.mapFrequency,i=n.mapDateDf,r=k(a||"M",i);o.setState(C()({isShowDate:!0,chartType:t},r))},o._hSelectChartType=function(t){ut(t)?o._updateForDate(t):o.setState({chartType:t,isShowDate:!1})},o._onRegColor=function(t){o.colorComp=t},o._hSelectDate=function(t){o.date=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){for(var t=o.props,e=t.msgOnNotSelected,n=t.selectProps,a=o.state.chartType,i=n.length,r=[],s=ut(a)?1:0;s<i;s++)o._items[s]||r.push(e(n[s].caption));return r.isValid=0===r.length,r},o._createLoadOption=function(){var t=m()(o),e=t.colorComp,n=t.dialogOptions,a=o.state.chartType,i=e?e.getConf():{},r=i.seriaColor,s=i.seriaWidth,l=o._getDateWithForDate(),c=ut(a),h=c?o._items.slice(1):o._items;return o.props.loadFn(o.props,{items:h,titles:o._titles,dialogOptions:n,chartType:a,seriaColor:r,seriaWidth:s,isCategory:c,date:l})},o._hClose=function(){o._handleWithValidationClose()},o._hSelect=function(t,e,n){n&&(n.id=t),o._items[e]=n},o._refSelect=function(t,e){o._compSelect[t]=e},o._renderSelects=function(t,e,n){return t.map((function(t,a){var i=t.id,r=rt()(t,["id"]),s=o.state[pt(i)];return y.a.createElement(D.a.ShowHide,{key:i,isShow:s},y.a.createElement(D.a.SelectWithLoad,C()({},r,{ref:o._refSelect.bind(null,i),isShow:e,isShowLabels:n,onSelect:o._hSelect.bind(null,i,a)})))}))},o._items=[],o._titles=[0],o._compSelect={},o._menuMore=Object(b.a)(m()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0,isOptions:!0,isToggle:!0}),o._commandButtons=o._crCommandsWithLoad(m()(o)),o._chartOptions=$.crOptions(e),o.state=C()({},o._isWithInitialState(),{isOptions:!1,isToggle:!1,isShowChart:!0,isShowDate:!1},k("EMPTY"),{},(n=e.selectProps,a={},n.forEach((function(t){a[pt(t.id)]=!0})),a)),o}w()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.caption,o=t.isShow,n=t.onShow,a=t.onFront,i=t.selectProps,r=t.noDate,s=t.noForDate,l=this.state,c=l.chartType,h=l.isToolbar,p=l.isOptions,u=l.isToggle,d=l.isShowLabels,_=l.isShowChart,S=l.isShowDate,C=l.dateDefault,f=l.dateOptions,m=l.validationMessages;return y.a.createElement(D.a.DraggableDialog,{isShow:o,caption:e,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:n,onFront:a,onClose:this._hClose},y.a.createElement(D.a.Toolbar,{isShow:h,buttons:this.toolbarButtons}),y.a.createElement(ot,{isShow:p,toggleOption:this._toggleOptionWithToolbar,onClose:this._hideOptionsWithToolbar}),y.a.createElement(ct,{isShow:u,noForDate:s,selectProps:i,isShowChart:_,isShowDate:S,crIsId:pt,onToggle:this._toggleStateBy,onCheckCaption:this._checkCaptionBy,onUnCheckCaption:this._uncheckCaption,onClose:this._hideToggleWithToolbar}),this._renderSelects(i,o,d),y.a.createElement(ht,{chartType:c,isShowLabels:d,isShowChart:_,chartOptions:this._chartOptions,onSelectChart:this._hSelectChartType,onRegColor:this._onRegColor,noDate:r,isShowDate:S,dateDefault:C,dateOptions:f,onSelecDate:this._hSelectDate}),y.a.createElement(D.a.ValidationMessages,{validationMessages:m}))},e}(T.Component),h.defaultProps={selectProps:[]},c=p))||c)||c,_t=o("CrGp"),St=o("uYGB"),Ct=o.n(St),ft={selection:{filter:"all",values:["*"]}},mt={code:"Tid",selection:{filter:"top",values:["1"]}},gt=function(t,e){var o=t.map((function(t){return e=t.v,C()({code:e},ft);var e}));return e||o.push(mt),{method:"POST",body:JSON.stringify({query:o,response:{format:"json-stat"}})}},wt=function(t,e){for(var o=[],n=e.v,a=t.Dimension(n),i=a.length,r=0;r<i;r++){var s;o.push({caption:a.Category(r).label,slice:(s={},s[n]=a.id[r],s)})}return o},Tt=!1,yt=function(t){u=t,d=setTimeout(function(t){return function(){t===u&&(Tt=!1)}}(t),5e3),Tt=!0},Dt=function(){Tt=!1,clearTimeout(d)},bt=function(t){var e=t.proxy,o=t.baseMeta,n=t.id,a=t.dims,i=t.noTime;if(Tt)return Promise.resolve({errMsg:"Another dims are still loading"});var r=function(t,e,o){return t?""+t+e+"/"+o:e+"/"+o}(e,o,n),s=gt(a,i);return yt(r),fetch(r,s).then((function(t){var e=t.status;if(e>=200&&e<400)return t.json();if(403===e)throw Error("HTTP Code 403: Forbitten.\nMaybe, require API key.");throw Error("HTTP Code: "+e)})).then((function(t){var e=Ct()(t).Dataset(0),o=a.map((function(t){return{id:t.v,caption:t.c,options:wt(e,t)}}));return Dt(),{configs:o}})).catch((function(t){return Dt(),{errMsg:t.message}}))},Ot={SPINNER_LOADING:{position:"relative",display:"block",textAlign:"middle",margin:"16px auto 32px",width:32,height:32},SPINNER_FAILED:{borderColor:"#f44336",animation:"none"}},vt=function(t){return"is"+t+"Select"},Mt={Eurostat:v,Eurostat2:at,SelectN:dt,StatN:(0,O.a.dialog)(_=function(t){function e(e){var o;return(o=t.call(this,e)||this)._toggleStateBy=function(t){o.setState((function(e){var o;return(o={})[t]=!e[t],o}))},o._checkCaptionBy=function(t){o._titles.push(t)},o._uncheckCaption=function(t){o._titles=o._titles.filter((function(e){return e!==t}))},o._loadDims=function(){var t=o.props,e=t.proxy,n=t.baseMeta,a=t.dims,i=t.timeId,r=t.dfProps,s=void 0===r?{}:r,l=t.noTime,c=s.dfId;bt({id:c,proxy:e,baseMeta:n,dims:a,noTime:l,timeId:i}).then((function(t){var e=t.configs,n=t.errMsg;if(e){var a=e.filter(function(t){return function(e){return e.id!==t}}(i));o._selectOptions=a.map((function(t){return t.options})),o.setState({isLoading:!1,isLoadFailed:!1,configs:a,captions:a.map((function(t){return{id:t.id,caption:t.caption}}))})}else o.setState({isLoading:!1,isLoadFailed:!0,validationMessages:[n]})}))},o._updateForDate=function(t){o.date=null;var e=o._items[1]?o.props.mapFrequency?o.props.mapFrequency:o.two.mapFrequency?o.two.mapFrequency:"M":null,n=o.props.mapDateDf,a=k(e||"Y",n);o.setState(C()({isShowDate:!0},a,{chartType:t}))},o._handleLoad=function(){var t=o._crValidationMessages();if(0===t.length){var e=m()(o),n=e._items,a=e.dialogOptions,i=e.colorComp,r=e.date,s=o.state.chartType,l=i?i.getConf():{},c=l.seriaColor,h=l.seriaWidth,p=o.state.dateDefault,u=o.props.loadFn(o.props,{dialogOptions:a,chartType:s,seriaColor:c,seriaWidth:h,date:r,dateDefault:p,items:n,titles:o._titles,selectOptions:o._selectOptions});o.props.onLoad(u)}o.setState({validationMessages:t})},o._crValidationMessages=function(){var t=[],e=o.state,n=e.configs;return e.isLoadFailed?t.push("Dims for request haven't been loaded.\nClose, open dialog for trying load again."):n.forEach((function(e,n){var a=e.caption;o._items[n]||t.push(o.props.msgOnNotSelected(a))})),t},o._handleClose=function(){o._handleWithValidationClose()},o._hSelectChartType=function(t){!function(t){return $.isCategory(t)}(t)?o.setState({chartType:t,isShowDate:!1}):o._updateForDate(t)},o._onRegColor=function(t){o.colorComp=t},o._fSelect=function(t){return function(e){this._items[t]=e}},o._hSelectDate=function(t){o.date=t},o._renderSelectInputs=function(){var t=o.state,e=t.isShowLabels;return t.configs.map((function(t,n){var a=t.id,i=t.caption,r=t.options,s={isShowLabels:e,caption:i,options:r},l=!o.state[vt(a)];return y.a.createElement(D.a.ShowHide,{key:a,isShow:l},y.a.createElement(D.a.RowInputSelect,C()({},s,{onSelect:o._fSelect(n).bind(m()(o))})))}))},o._menuMore=Object(b.a)(m()(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0,isOptions:!0,isToggle:!0}),o._commandButtons=o._crCommandsWithLoad(m()(o)),o._chartOptions=$.crOptions(e),o._items=[],o._titles=[],o._selectOptions=[],o.state=C()({},o._isWithInitialState(),{isLoading:!0,isLoadFailed:!1,isShowChart:!0,isShowDate:!1},k("EMPTY"),{isOptions:!1,isToggle:!1,captions:[]}),o}w()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.componentDidMount=function(){this._loadDims()},o.componentDidUpdate=function(t){(function(t,e,o){return e!==t&&!t.isShow&&e.isShow&&o.isLoadFailed})(t,this.props,this.state)&&(this.setState({isLoading:!0,isLoadFailed:!1}),this._loadDims())},o.render=function(){var t=this.props,e=t.caption,o=t.isShow,n=t.onShow,a=t.onFront,i=this.state,r=i.chartType,s=i.isToolbar,l=i.isOptions,c=i.isToggle,h=i.isShowLabels,p=i.isLoading,u=i.isLoadFailed,d=i.isShowChart,_=i.isShowDate,S=i.dateDefault,f=i.dateOptions,m=i.captions,g=i.validationMessages,w=u?C()({},Ot.SPINNER_LOADING,{},Ot.SPINNER_FAILED):Ot.SPINNER_LOADING;return y.a.createElement(D.a.DraggableDialog,{isShow:o,caption:e,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:n,onFront:a,onClose:this._handleClose},y.a.createElement(D.a.Toolbar,{isShow:s,buttons:this.toolbarButtons}),y.a.createElement(ot,{isShow:l,toggleOption:this._toggleOptionWithToolbar,onClose:this._hideOptionsWithToolbar}),y.a.createElement(ct,{isShow:c,selectProps:m,isShowChart:d,isShowDate:_,crIsId:vt,onToggle:this._toggleStateBy,onCheckCaption:this._checkCaptionBy,onUnCheckCaption:this._uncheckCaption,onClose:this._hideToggleWithToolbar}),(p||u)&&y.a.createElement(_t.a,{style:w}),!p&&!u&&this._renderSelectInputs(),y.a.createElement(ht,{chartType:r,isShowLabels:h,isShowChart:d,chartOptions:this._chartOptions,onSelectChart:this._hSelectChartType,onRegColor:this._onRegColor,isShowDate:_,dateDefault:S,dateOptions:f,onSelecDate:this._hSelectDate}),y.a.createElement(D.a.ValidationMessages,{validationMessages:g}))},e}(T.Component))||_};e.default=Mt}}]);
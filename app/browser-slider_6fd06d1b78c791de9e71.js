(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"SE/H":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),i=n("ds6M"),a=n("jXBw"),l=n("pVnL"),s=n.n(l),c=n("PJYZ"),u=n.n(c),f=n("VbXa"),d=n.n(f),p=n("XNJZ"),m=n("+xHe"),g={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2a",dfProps:{},isProxy:!0}},v=function(e){return function(){var t=e.rootUrl,n=e.id,r=e.proxy,o=e.bT,i=e.lT,a=e.dU,l=e.noTime,c=e.dS,u=function(e){var t=e.rootUrl,n=e.id,r=e.proxy,o=t+"/"+n;return r?""+r+o:o}(e),f=Object.assign({},g,s()({type:o+"_"+n},function(e){var t=e.text||"",n=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+n}}(e)));Object.assign(f.dialogProps,{loadId:i,descrUrl:a,dataSource:c,dfProps:{metaUrl:u,baseMeta:t,dfId:n,proxy:r,noTime:l}}),m.b.showDialog(o+"_"+n,o,f)}},b=function(e,t){return e.text<t.text?-1:e.text>t.text?1:0},h=function(e,t){return fetch(t?t+e:e,{cache:"default"}).then((function(e){return e.json()})).then((function(e){return Array.isArray(e)&&e.sort(b),e}))},y=n("JyE6"),E={MSG_ERR:{paddingLeft:"12px",color:"#f44336",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px"},TITLE:{position:"relative",color:"silver",paddingLeft:"32px",paddingTop:"8px",paddingBottom:"4px",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",cursor:"pointer"},TITLE_ARROW:{position:"absolute",top:"8px",left:"16px"},ITEM_L:{color:"#1b2836",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",paddingLeft:"12px",cursor:"pointer"},ITEM_T:{color:"black",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",cursor:"pointer"}},x="menu-item",P=function(e){var t=e.innerRef,n=e.title,r=e.onClick;return o.a.createElement("div",{ref:t,className:x,style:E.TITLE,role:"menuitem",tabIndex:"0",onClick:r,onKeyDown:function(e){Object(y.a)(e)&&(e.preventDefault(),r())}},n,o.a.createElement("span",{style:E.TITLE_ARROW},"<"))},C="menu-item",_=function(e){var t=e.innerRef,n=e.item,i=e.onClick,a=n.text,l="l"===n.type?E.ITEM_L:E.ITEM_T,s=Object(r.useCallback)((function(e){Object(y.a)(e)&&(e.preventDefault(),i())}),[i]);return o.a.createElement("div",{ref:t,className:C,style:l,tabIndex:"0",role:"menuitem",onClick:i,onKeyDown:s},a)},I=o.a.memo((function(e){var t=e.refFirstItem,n=e.model,r=void 0===n?[]:n,i=e.fOnClickItem;return o.a.createElement("div",null,r.map((function(e,n){return o.a.createElement(_,{innerRef:0===n?t:void 0,key:e.id,item:e,onClick:i(e)})})))})),O=function(e){var t=e.errMsg;return t?o.a.createElement("div",{style:E.MSG_ERR},t):null},T=Array.isArray,R=function(e,t,n,r,o,i,a){var l=a.text,c=a.id;return"l"===a.type?o.bind(null,t+"/"+c,l,r):i(s()({id:t+"/"+c},n,{text:l,proxy:e}))},S=function(e){var t=e.refFirstItem,n=e.style,i=e.store,a=e.title,l=e.id,s=void 0===l?"":l,c=e.dfProps,u=void 0===c?{}:c,f=e.pageNumber,d=e.pageCurrent,p=e.onClickPrev,m=e.onClickNext,g=e.fOnClickItem,v=e.loadItems,b=Object(r.useRef)(),h=Object(r.useRef)(),y=Object(r.useState)({model:[],errMsg:null}),E=y[0],x=y[1],C=E.model,_=E.errMsg,S=function(e,t){return e.getProxy(t.lT)}(i,u),w=Object(r.useCallback)(R.bind(null,S,s,u,f,m,g),[S]);Object(r.useEffect)((function(){return a&&v(u.rootUrl+"/"+s,S).then((function(e){if(!T(e))throw new Error("Response is not array");x({model:e,errMsg:null})})).catch((function(e){return x({model:[],errMsg:e.message})})),function(){clearTimeout(h.current),b.current=null}}),[]),Object(r.useEffect)((function(){f===d&&(h.current=setTimeout((function(){var e=b.current;e&&e.focus()}),1e3))}),[f,d]);var k=a&&p;return o.a.createElement("div",{style:n},k&&o.a.createElement(P,{innerRef:b,title:a,onClick:p.bind(null,f)}),o.a.createElement(I,{refFirstItem:t,model:C,fOnClickItem:w}),o.a.createElement(O,{errMsg:_}))},w=function(e){var t=e.pages,n=e.pageCurrent;return t.map((function(e,t){return o.a.cloneElement(e,{pageCurrent:n,pageNumber:t+1})}))},k={ROOT:{width:300,overflow:"hidden"},PAGES:{width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},PAGE:{width:300}},M=function(e){var t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)},A=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadItems=function(){var e=n.props,t=e.dfProps,r=void 0===t?{}:t,o=e.store,i=r.lT,a=o.getProxy(i);h(r.rootUrl,a).then((function(e){if(!Array.isArray(e))throw new Error("Response is not array");n.setState({model:e,errMsg:void 0})})).catch((function(e){n.setState({errMsg:e.message})}))},n.hPrevPage=function(e){n.setState((function(t){var r=t.pageCurrent;return 0===r||r!==e?null:(n._direction=-1,{pageCurrent:e-1})}))},n._addPage=function(e,t,r){var i=n.props,a=i.dfProps,l=i.store;e.push(o.a.createElement(S,{key:t,id:t,style:k.PAGE,store:l,title:r,dfProps:a,onClickPrev:n.hPrevPage,onClickNext:n.hNextPage,loadItems:h,fOnClickItem:v}))},n.hNextPage=function(e,t,r){n.setState((function(o){var i=o.pageCurrent,a=o.pages;return r!==i?null:(r<a.length?a[r]&&a[r].key!==e&&(r>0?a.splice(r):a=[],n._addPage(a,e,t)):n._addPage(a,e,t),n._direction=1,{pages:a,pageCurrent:r+1})}))},n._crTransform=function(){var e="0";if(0!==n._direction&&n._menuNode){var t=M(n._menuNode);e=1===n._direction?t-300:t+300,n._direction=0}else 0===n._direction&&n._menuNode&&(e=M(n._menuNode));return{transform:"translateX("+e+"px)"}},n._refMenu=function(e){return n._menuNode=e},n.focusFirst=function(){var e=n._refFirstItem.current;e&&e.focus()},n.hNextPage=Object(p.a)(n.hNextPage.bind(u()(n))),n.hPrevPage=Object(p.a)(n.hPrevPage.bind(u()(n))),n._direction=0,n._refFirstItem=o.a.createRef(),n._fOnClickItem=function(e){var t=e.id,r=e.text;return n.hNextPage.bind(null,t,r,0)},n.state={model:[],pageCurrent:0,pages:[]},n}d()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadItems()},n.render=function(){var e=this.state,t=e.model,n=e.errMsg,r=e.pages,i=e.pageCurrent,a=this._crTransform(),l=s()({},k.PAGES,a);return o.a.createElement("div",{style:k.ROOT},o.a.createElement("div",{ref:this._refMenu,style:l},o.a.createElement("div",{style:k.PAGE},o.a.createElement(I,{refFirstItem:this._refFirstItem,model:t,fOnClickItem:this._fOnClickItem}),o.a.createElement(O,{errMsg:n})),o.a.createElement(w,{pages:r,pageCurrent:i})))},n.componentDidUpdate=function(){0===this.state.pageCurrent&&setTimeout(this.focusFirst,1e3)},t}(r.Component),N={BROWSER:{paddingRight:0},SCROLL_PANE:{height:"92%"}},j=o.a.memo((function(e){var t=e.isInitShow,n=e.caption,l=e.store,s=e.browserType,c=e.showAction,u=Object(r.useState)(!!t),f=u[0],d=u[1],p=Object(r.useCallback)((function(){d(!1)}),[]);return Object(i.a)(l,(function(e,t){e===c&&t===s&&d(!0)})),o.a.createElement(a.a.Browser,{isShow:f,style:N.BROWSER},o.a.createElement(a.a.BrowserCaption,{caption:n,onClose:p}),o.a.createElement(a.a.ScrollPane,{className:"scroll-container-y",style:N.SCROLL_PANE},o.a.createElement(A,e)))}));t.default=j}}]);
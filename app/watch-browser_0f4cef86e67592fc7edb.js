"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[341],{238:(t,e,n)=>{n.r(e),n.d(e,{default:()=>ot});var r=n(1721),i=n(9679),o=n(3014),a=n(2038),s=n(3218),d=n(4488),p=n(4832),l=n(5893),c="bt__watch__bar",u={ROOT:{marginBottom:10},BT_LIST:{marginLeft:20}};const h=function(t){var e=t.isShow,n=t.onClickGroup,r=t.onClickList;return e?(0,l.jsxs)("div",{style:u.ROOT,children:[(0,l.jsx)(p.Z,{caption:"GROUP",className:c,onClick:n}),(0,l.jsx)(p.Z,{caption:"LIST",className:c,style:u.BT_LIST,onClick:r})]}):null};var g=n(2306),D=n(8636),f={ITEM_DIV:{position:"relative",paddingRight:40,paddingTop:5,paddingBottom:5},ITEM_SPAN:{display:"inline-block",width:"100%",maxWidth:250,height:28,verticalAlign:"middle",textOverflow:"ellipsis",overflow:"hidden"},SVG_CLOSE:{position:"absolute",top:10,right:0}};const v=function(t){var e=t.item,n=t.className,r=t.isModeEdit,o=t.option,a=t.onClick,s=t.onClose,d=t.onDragStart,p=t.onDragEnter,c=t.onDragOver,u=t.onDragLeave,h=t.onDrop,v=(e||{}).caption,_=void 0===v?"Not Found":v,S=r?(0,l.jsx)(D.Z,{style:f.SVG_CLOSE,onClose:s.bind(null,o)}):null,I=(0,i.useCallback)((function(){return a(e)}),[e]),L=(0,i.useCallback)((function(t){(0,g.Z)(t)&&I()}),[I]),T=r?{draggable:!0,onDragStart:d.bind(null,o),onDrop:h.bind(null,o),onDragOver:c,onDragEnter:p,onDragLeave:u}:void 0;return(0,l.jsxs)("div",Object.assign({role:"menuitem",tabIndex:"0",className:n,style:f.ITEM_DIV,onClick:I},T,{onKeyUp:L,children:[(0,l.jsx)("span",{style:f.ITEM_SPAN,children:_}),S]}))};var _,S,I,L,T="border-bottom",y="border-left",E=function(t,e){t.persist(),S=t.currentTarget;var n=t.currentTarget.style;I=n.getPropertyValue(T),_=e},b=function(t){var e=S.style;t.currentTarget.style.removeProperty(y),e.removeProperty("border"),e.setProperty(T,I)},m=function(t,e,n){var r=t.currentTarget.style;L=r.getPropertyValue(y),-1!==_.indexOf(e)?r.setProperty(y,function(t){return void 0===t&&(t="green"),"4px solid "+t}(n)):r.setProperty(y,"4px solid red")},C=function(t){var e=t.currentTarget.style;e.removeProperty(y),e.setProperty(y,L)};const O=function(t){Object.assign(t.prototype,{dragStartWithDnDStyle:E,dropWithDnDStyle:b,dragEnterWithDnDStyle:m,dragLeaveWithDnDStyle:C})};const x={setTransferTo:function(t){var e=t.event,n=t.dragId,r=t.xType;Object.assign(e.dataTransfer,{effectAllowed:"move",dropEffect:"move"}).setData("text",JSON.stringify({dragId:n,xType:r}))}};var w=function(t){return function(e,n){var r=e.caption;this.dragStartWithDnDStyle(n,[t.GROUP]),x.setTransferTo({event:n,dragId:r+";",xType:t.GROUP})}},G=function(t,e){return function(n,r){var i=n.caption;this.dropWithDnDStyle(r);var o=JSON.parse(r.dataTransfer.getData("text")),a=o.xType,s=o.dragId,d=i+";";if(a===t.GROUP){if(s===d)return;r.preventDefault(),e.dragDropGroup({dragId:s,dropId:d})}else a===t.LIST&&(r.preventDefault(),e.dragDropList({dragId:s,dropId:d}))}},M=function(t){return function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.GROUP,t.C_GROUP_ENTER)}},W=function(t){t.preventDefault()},j=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},P=function(t,e){Object.assign(this,{_hDragStartGroup:w(t).bind(this),_hDropGroup:G(t,e).bind(this),_hDragEnterGroup:M(t).bind(this),_hDragOverGroup:W,_hDragLeaveGroup:j.bind(this)})};const R=function(t){Object.assign(t.prototype,{_bindDnDGroup:P})};var k=function(t){return function(e,n){var r=e.groupCaption,i=e.caption;this.dragStartWithDnDStyle(n,[t.GROUP,t.LIST]),x.setTransferTo({event:n,dragId:r+";"+i,xType:t.LIST})}},Z=function(t,e){return function(n,r){var i=n.groupCaption,o=n.caption;this.dropWithDnDStyle(r);var a=JSON.parse(r.dataTransfer.getData("text")),s=a.xType,d=a.dragId,p=i+";"+o+";";if(s===t.LIST){if(d===p)return;r.preventDefault(),e.dragDropList({dragId:d,dropId:p})}else s===t.ITEM&&(r.preventDefault(),e.dragDropItem({dragId:d,dropId:p}))}},N=function(t){return function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.LIST,t.C_LIST_ENTER)}},U=function(t){t.preventDefault()},A=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},B=function(t,e){Object.assign(this,{_hDragStartList:k(t).bind(this),_hDropList:Z(t,e).bind(this),_hDragEnterList:N(t).bind(this),_hDragOverList:U,_hDragLeaveList:A.bind(this)})};const V=function(t){Object.assign(t.prototype,{_bindDnDList:B})};var H=function(t){return function(e,n){var r=e.groupCaption,i=e.listCaption,o=e.caption;this.dragStartWithDnDStyle(n,[t.LIST,t.ITEM]),x.setTransferTo({event:n,dragId:r+";"+i+";"+o,xType:t.ITEM})}},J=function(t,e){return function(n,r){var i=n.groupCaption,o=n.listCaption,a=n.caption;this.dropWithDnDStyle(r);var s=JSON.parse(r.dataTransfer.getData("text")),d=s.xType,p=s.dragId,l=i+";"+o+";"+a;if(d===t.ITEM){if(p===l)return;r.preventDefault(),e.dragDropItem({dragId:p,dropId:l})}}},F=function(t){return function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.ITEM,t.C_LIST_ENTER)}},K=function(t){t.preventDefault()},q=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},z=function(t,e){Object.assign(this,{_hDragStartItem:H(t).bind(this),_hDropItem:J(t,e).bind(this),_hDragEnterItem:F(t).bind(this),_hDragOverItem:K,_hDragLeaveItem:q.bind(this)})};const Q=function(t){Object.assign(t.prototype,{_bindDnDItem:z})};var X,Y="#80c040",$={paddingRight:0},tt={position:"relative",top:-4,marginLeft:20},et={lineHeight:2},nt={marginLeft:8,paddingLeft:2,borderLeftStyle:"solid",borderLeftWidth:2,borderLeftColor:"inherit",lineHeight:2},rt={marginRight:10},it={GROUP:"GROUP",C_GROUP_ENTER:"#1b75bb",LIST:"LIST",C_LIST_ENTER:Y,ITEM:"ITEM"};const ot=function(t){O(t),R(t),V(t),Q(t)}(X=function(t){function e(e){var n;return(n=t.call(this,e)||this)._onStore=function(t,e){var r=n.props,i=r.browserType,o=r.showAction,a=r.updateAction;t===o&&e===i?n._handlerShow():t===a&&n.setState({watchList:e})},n._handlerHide=function(){n.setState({isShow:!1})},n._handlerShow=function(){n.setState({isShow:!0})},n._handlerToggleEditMode=function(){n.setState({isModeEdit:!n.state.isModeEdit})},n._renderWatchList=function(t){var e=n.state.isModeEdit;return t.groups.map((function(t,r){var i=t.caption,o=t.lists;return(0,l.jsx)(d.Z.OpenClose2,{style:et,caption:i,isDraggable:e,option:{caption:i},onDragStart:n._hDragStartGroup,onDragEnter:n._hDragEnterGroup,onDragOver:n._hDragOverGroup,onDragLeave:n._hDragLeaveGroup,onDrop:n._hDropGroup,children:o&&n._renderLists(o,i)},r)}))},n._renderLists=function(t,e){var r=n.state.isModeEdit;return t.map((function(t,i){var o=t.caption,a=t.items;return(0,l.jsx)(d.Z.OpenClose2,{style:nt,notSelectedStyle:rt,openColor:Y,caption:o,isDraggable:r,option:{groupCaption:e,caption:o},onDragStart:n._hDragStartList,onDragEnter:n._hDragEnterList,onDragOver:n._hDragOverList,onDragLeave:n._hDragLeaveList,onDrop:n._hDropList,children:a&&n._renderItems(a,e,o)},i)}))},n._renderItems=function(t,e,r){var i=n.state.isModeEdit;return t.map((function(t,o){var a=t.id,s=t.caption;return(0,l.jsx)(v,{className:"row__type2-topic not-selected",isModeEdit:i,item:t,option:{groupCaption:e,listCaption:r,caption:s},onClick:n._handlerClickItem,onClose:n._handlerRemoveItem,onDragStart:n._hDragStartItem,onDragOver:n._hDragOverItem,onDragEnter:n._hDragEnterItem,onDragLeave:n._hDragLeaveItem,onDrop:n._hDropItem},a)}))},n._bindDnDGroup(it,s.Z),n._bindDnDList(it,s.Z),n._bindDnDItem(it,s.Z),n.state={isShow:!!e.isInitShow,isModeEdit:!1,watchList:e.store.getWatchList()},n}(0,r.Z)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},n.componentWillUnmount=function(){this.unsubscribe()},n._handlerSaveWatch=function(){s.Z.saveWatch()},n._handlerEditGroup=function(){a.Z.showModalDialog(o.pL.EDIT_WATCH_GROUP)},n._handlerEditList=function(){a.Z.showModalDialog(o.pL.EDIT_WATCH_LIST)},n._handlerClickItem=function(t){a.Z.showModalDialog(o.pL.LOAD_ITEM,t)},n._handlerRemoveItem=function(t,e){e.stopPropagation(),s.Z.removeItem(t)},n.render=function(){var t=this.props.caption,e=this.state,n=e.isShow,r=e.isModeEdit,i=e.watchList,o=r?"V":"E";return(0,l.jsxs)(d.Z.Browser,{isShow:n,style:$,children:[(0,l.jsxs)(d.Z.BrowserCaption,{caption:t,onClose:this._handlerHide,children:[(0,l.jsx)(d.Z.ButtonCircle,{caption:"S",title:"Save to LocalStorage",style:tt,onClick:this._handlerSaveWatch}),(0,l.jsx)(d.Z.ButtonCircle,{caption:o,title:"Toggle Edit Mode: E/V",style:tt,onClick:this._handlerToggleEditMode})]}),(0,l.jsx)(h,{isShow:r,onClickGroup:this._handlerEditGroup,onClickList:this._handlerEditList}),(0,l.jsx)(d.Z.ScrollPane,{className:"scroll-container-y scroll-watch",children:i&&this._renderWatchList(i)})]})},e}(i.Component))||X}}]);
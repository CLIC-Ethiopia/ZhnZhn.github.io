"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[437],{600:(e,t,o)=>{o.r(t),o.d(t,{default:()=>pe});var s=o(9999),n=o(6016),i=o(1926),a=o(1398),r=o(7020),l=o(9468),c=o(4490),u=o(3115),p=o(4485),d=o(5138),m=o(8910),x=o(6235),C=o(2276),h=o(5893);const g={width:365},j={width:265},f={display:"inline-block",maxWidth:250,height:32,verticalAlign:"middle"},y=e=>"number"==typeof e&&e-e==0,w=l.Z.wideWidth(),S={},T=(0,a.QS)(2),R=(0,a.TP)(),Z=(0,n.Z)((e=>{let{isShow:t,data:o=S,onClose:n}=e;const l=(0,s.sO)(),{caption:Z,fromDate:G,initToDate:L,onTestDate:b,itemConf:v}=o,{dataSource:k,x:N,y:I}=v||{},[O,A]=(0,i.Z)(w),[D,V]=(0,i.Z)(y(N)),[W,B]=(0,i.Z)(),E=(0,s.eA)((0,s.sO)([{caption:"L",title:"Click to toggle input labels",onClick:A},{caption:"V",title:"Click to toggle row value",onClick:V},{caption:"D",title:"Click to toggle date input",onClick:B}])),[M,F]=(0,s.eJ)([]),P=[(0,h.jsx)(x.T,{onClick:()=>{const e=(0,s.eA)(l),{isValid:t,datesMsg:i}=e.getValidation(),a=t?[]:i;if(0===a.length){const{id:t,title:s,subtitle:i,caption:a,columnName:r,dataColumn:l,seriaColumnNames:d,itemConf:m={}}=o,{fromDate:x,toDate:C}=e.getValues(),h={id:t,title:s,subtitle:i,value:a,item:a,fromDate:x,toDate:C,columnName:r,dataColumn:l,seriaColumnNames:d,loadId:m.loadId||u.O8,...m};c.LX[c.SX]({chartType:u.e9,browserType:p.lx},h),n(),F((e=>e.length>0?[]:e))}else F(a)}},"load")];(0,s.d4)((()=>{V(y(N))}),[N,V]);const $=G||T,H=L||R,_=b||a.RB,U=O?g:j,X=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),((0,r.Z)(t)+" "+(0,a.P9)(e)).trim()}(N,I);return(0,h.jsxs)(d.Z,{style:U,isShow:t,caption:"Load Item",commandButtons:P,onClose:()=>{n(),F([])},children:[(0,h.jsx)(m.Z.Toolbar,{isShow:!0,buttons:E}),(0,h.jsx)(m.Z.RowText,{isShowLabels:O,textStyle:f,caption:"Item:",text:Z}),(0,h.jsx)(m.Z.ShowHide,{isShow:D,children:(0,h.jsx)(m.Z.RowText,{isShowLabels:O,textStyle:f,caption:"Value:",text:X})}),(0,h.jsx)(m.Z.ShowHide,{isShow:W,children:(0,h.jsx)(m.Z.DatesFragment,{ref:l,isShowLabels:O,initFromDate:$,initToDate:H,onTestDate:_})}),(0,h.jsx)(m.Z.RowText,{isShowLabels:O,textStyle:f,caption:"Source:",text:k}),(0,h.jsx)(C.Z,{validationMessages:M})]})}));var G=o(3218),L=o(2125),b=o(5854),v=o(3297),k=o(9679),N=o(795),I=o(5313),O=o(7376);const A={...O.UR,lineHeight:2},D={...O.m9,width:120},V={width:250,height:30,paddingLeft:10,marginLeft:0,marginRight:0},W=(0,k.forwardRef)(((e,t)=>{let{caption:o}=e;return(0,h.jsxs)("div",{style:A,children:[(0,h.jsx)("span",{style:D,children:o}),(0,h.jsx)(I.Z,{ref:t,style:V})]})}));var B=o(6614);const E={...O.m9,width:120},M=e=>{let{caption:t,options:o,onSelect:s}=e;return(0,h.jsxs)("div",{style:O.UR,children:[(0,h.jsx)("span",{style:E,children:t}),(0,h.jsx)(B.Z,{width:"250",options:o,onSelect:s})]})};var F=o(5868);const P=()=>{const e=(0,k.useRef)(),t=(0,k.useCallback)((t=>{const{caption:o}=t||{};e.current=o}),[]);return[e,t]},$=(0,k.forwardRef)(((e,t)=>{const[o,s]=(0,F.Z)(e),{store:n,groupCaption:i,groupOptions:a,listCaption:r}=e,l=(0,k.useRef)(),[c,u]=P(),[p,d]=(0,k.useState)([]),m=(0,k.useCallback)((e=>{const{caption:t}=e||{};e&&t?(l.current=t,c.current=null,d(e.lists||[])):l.current=null}),[]);return(0,k.useEffect)((()=>{const t=s();if(t!==e){if(t.groupOptions!==a)l.current=null,c.current=null,d([]);else if(l.current){const e=n.getWatchListsByGroup(l.current);e!==p&&(c.current=null,d(e))}o(e)}}),[e]),(0,k.useImperativeHandle)(t,(()=>({getValue:()=>({captionGroup:l.current,captionList:c.current})}))),(0,h.jsxs)("div",{children:[(0,h.jsx)(M,{caption:i,options:a,onSelect:m}),(0,h.jsx)(M,{caption:r,options:p,onSelect:u})]})}));var H=o(481);const _={...o(390).x,margin:"8px 4px 10px 0"},U=e=>{let{Primary:t,withoutClear:o,onClear:s,onClose:n}=e;return(0,h.jsxs)("div",{style:_,children:[t,!o&&(0,h.jsx)(H.Z.Clear,{onClick:s}),(0,h.jsx)(H.Z.Close,{onClick:n})]})},X={RowInputText:W,RowInputSelect:M,SelectGroupList:$,Button:H.Z,RowButtons:U,ValidationMessages:C.Z},J=e=>{let{actionCompleted:t,actionFailed:o,forActionType:s,onCreate:n,msgOnIsEmptyName:i,onClose:a}=e;const r=(0,k.useRef)(),[l,c]=(0,k.useState)([]),u=((e,t,o,s)=>(0,h.jsx)(X.Button.Primary,{caption:"Create",title:"Create New Group",onClick:()=>{const n=e.current.getValue();n?o({caption:n}):(e.current.setValue(""),t([s("Group")]))}}))(r,c,n,i),p=()=>{r.current.setValue(""),c([])};return(0,N.Z)(((e,n)=>{e===t&&n.forActionType===s?p():e===o&&n.forActionType===s&&c(n.messages)})),(0,h.jsxs)("div",{children:[(0,h.jsx)(X.RowInputText,{ref:r,caption:"Group:"}),(0,h.jsx)(X.ValidationMessages,{validationMessages:l}),(0,h.jsx)(X.RowButtons,{Primary:u,onClear:p,onClose:a})]})},Q=e=>{const t=(0,k.useRef)(),o=(0,k.useCallback)((()=>{const{current:o}=t;o&&(o.setValue(""),e([]))}),[]);return[t,o]},q=e=>{let{store:t,actionCompleted:o,actionFailed:s,forActionType:n,onRename:i,msgOnNotSelect:a,msgOnIsEmptyName:r,onClose:l}=e;const[c,u]=(0,k.useState)((()=>t.getWatchGroups())),[p,d]=(0,k.useState)([]),[m,x]=Q(d),[C,g]=P(),j=(0,k.useCallback)((()=>{const e=m.current.getValue(),t=C.current;if(e&&t)i({captionFrom:t,captionTo:e});else{const o=[];t||o.push(a("Group From")),e||o.push(r("Group To")),d(o)}}),[]),f=(0,k.useMemo)((()=>(0,h.jsx)(X.Button.Primary,{caption:"Edit",title:"Edit Group Name",onClick:j})),[j]);return(0,N.Z)(((e,i)=>{e===o?(i.forActionType===n&&x(),u(t.getWatchGroups())):e===s&&i.forActionType===n&&d(i.messages)})),(0,h.jsxs)("div",{children:[(0,h.jsx)(X.RowInputSelect,{caption:"Group From:",options:c,onSelect:g}),(0,h.jsx)(X.RowInputText,{ref:m,caption:"Group To:"}),(0,h.jsx)(X.ValidationMessages,{validationMessages:p}),(0,h.jsx)(X.RowButtons,{Primary:f,onClear:x,onClose:l})]})},z=e=>({groups:e.getWatchGroups,errs:[]}),K=(e,t)=>({type:e,payload:t}),Y=(e,t)=>{let{type:o,payload:s}=t;switch(o){case"a":return{groups:s,errs:[]};case"b":return{...e,errs:s};default:return e}},ee=e=>{let{store:t,actionCompleted:o,forActionType:s,onDelete:n,msgOnNotSelect:i,onClose:a}=e;const r=(0,k.useRef)(null),[l,c,u,p]=((e,t)=>{const[{groups:o,errs:s},n]=(0,k.useReducer)(Y,e,z);return[o,s,e=>n(K("a",e)),()=>n(K("b",[t("Group")]))]})(t,i),d=((e,t,o)=>(0,h.jsx)(X.Button.Primary,{caption:"Delete",title:"Delete Group",onClick:()=>{const{current:s}=e;s?(t({caption:s}),e.current=null):o()}}))(r,n,p);return(0,N.Z)(((e,s)=>{e===o&&u(t.getWatchGroups())})),(0,h.jsxs)("div",{children:[(0,h.jsx)(X.RowInputSelect,{caption:"Group:",options:l,onSelect:e=>{r.current=e&&e.caption||null}}),(0,h.jsx)(X.ValidationMessages,{validationMessages:c}),(0,h.jsx)(X.RowButtons,{Primary:d,withoutClear:!0,onClose:a})]})},te=G.e4[G.R2],oe=G.e4[G.Bv],se=G.e4[G.E2],ne=(0,n.Z)((e=>{let{isShow:t,store:o,onClose:s}=e;return(0,h.jsx)(d.Z,{caption:"Watch Groups Edit",isShow:t,isWithButton:!1,onClose:s,children:(0,h.jsxs)(b.Z,{width:380,children:[(0,h.jsx)(v.Z,{title:"Create",children:(0,h.jsx)(J,{store:o,actionCompleted:G.$0,actionFailed:G.db,forActionType:G.R2,msgOnIsEmptyName:L.eT,onCreate:te,onClose:s})}),(0,h.jsx)(v.Z,{title:"Rename",children:(0,h.jsx)(q,{store:o,actionCompleted:G.$0,actionFailed:G.db,forActionType:G.Bv,msgOnNotSelect:L.xW,msgOnIsEmptyName:L.eT,onRename:oe,onClose:s})}),(0,h.jsx)(v.Z,{title:"Delete",children:(0,h.jsx)(ee,{store:o,actionCompleted:G.$0,forActionType:G.E2,msgOnNotSelect:L.xW,onDelete:se,onClose:s})})]})})})),ie=e=>{let{store:t,onCreate:o,msgOnNotSelect:s,msgOnIsEmptyName:n,actionCompleted:i,actionFailed:a,forActionType:r,onClose:l}=e;const[c,u]=(0,k.useState)((()=>t.getWatchGroups())),[p,d]=(0,k.useState)([]),[m,x]=Q(d),[C,g]=P(),j=(0,k.useCallback)((()=>{const e=m.current.getValue(),t=C.current;if(t&&e)o({captionGroup:t,captionList:e});else{const o=[];t||o.push(s("In Group")),e||o.push(n("List")),d(o)}}),[]),f=(0,k.useMemo)((()=>(0,h.jsx)(X.Button.Primary,{caption:"Create",title:"Create New List",onClick:j})),[j]);return(0,N.Z)(((e,o)=>{e===i?(o.forActionType===r&&x(),u(t.getWatchGroups())):e===a&&o.forActionType===r&&d(o.messages)})),(0,h.jsxs)("div",{children:[(0,h.jsx)(X.RowInputSelect,{caption:"In Group:",options:c,onSelect:g}),(0,h.jsx)(X.RowInputText,{ref:m,caption:"List:"}),(0,h.jsx)(X.ValidationMessages,{validationMessages:p}),(0,h.jsx)(X.RowButtons,{Primary:f,onClear:x,onClose:l})]})},ae=e=>{let{store:t,onRename:o,msgOnIsEmptyName:s,msgOnNotSelect:n,actionCompleted:i,actionFailed:a,forActionType:r,onClose:l}=e;const[c,u]=(0,k.useState)((()=>t.getWatchGroups())),[p,d]=(0,k.useState)([]),m=(0,k.useRef)(),[x,C]=Q(d),g=(0,k.useCallback)((()=>{const{captionGroup:e,captionList:t}=m.current.getValue(),i=x.current.getValue();if(e&&t&&i)o({captionGroup:e,captionListFrom:t,captionListTo:i});else{const o=[];e||o.push(n("Group")),t||o.push(n("List From")),i||o.push(s("List To")),d(o)}}),[]),j=(0,k.useMemo)((()=>(0,h.jsx)(X.Button.Primary,{caption:"Edit",title:"Edit List Name",onClick:g})),[g]);return(0,N.Z)(((e,o)=>{e===i?(o.forActionType===r&&C(),u(t.getWatchGroups())):e===a&&o.forActionType===r&&d(o.messages)})),(0,h.jsxs)("div",{children:[(0,h.jsx)(X.SelectGroupList,{ref:m,store:t,groupCaption:"In Group:",groupOptions:c,listCaption:"List From:"}),(0,h.jsx)(X.RowInputText,{ref:x,caption:"List To:"}),(0,h.jsx)(X.ValidationMessages,{validationMessages:p}),(0,h.jsx)(X.RowButtons,{Primary:j,onClear:C,onClose:l})]})},re=e=>{let{store:t,actionCompleted:o,forActionType:s,onDelete:n,msgOnNotSelect:i,onClose:a}=e;const[r,l]=(0,k.useState)((()=>t.getWatchGroups())),[c,u]=(0,k.useState)([]),p=(0,k.useRef)(),d=(0,k.useCallback)((()=>u([])),[]),m=(0,k.useCallback)((()=>{const{captionGroup:e,captionList:t}=p.current.getValue();if(e&&t)n({captionGroup:e,captionList:t});else{const o=[];e||o.push(i("Group")),t||o.push(i("List")),u(o)}}),[]),x=(0,k.useMemo)((()=>(0,h.jsx)(X.Button.Primary,{caption:"Delete",title:"Delete List",onClick:m})),[m]);return(0,N.Z)(((e,n)=>{e===o&&(n.forActionType===s&&d(),l(t.getWatchGroups()))})),(0,h.jsxs)("div",{children:[(0,h.jsx)(X.SelectGroupList,{ref:p,store:t,groupCaption:"In Group:",groupOptions:r,listCaption:"List:"}),(0,h.jsx)(X.ValidationMessages,{validationMessages:c}),(0,h.jsx)(X.RowButtons,{Primary:x,onClear:d,onClose:a})]})},le=G.e4[G.Nf],ce=G.e4[G.gm],ue=G.e4[G.of],pe={LoadItem:Z,EditGroup:ne,EditList:(0,n.Z)((e=>{let{isShow:t,store:o,onClose:s}=e;return(0,h.jsx)(d.Z,{caption:"Watch Lists Edit",isShow:t,isWithButton:!1,onClose:s,children:(0,h.jsxs)(b.Z,{width:380,children:[(0,h.jsx)(v.Z,{title:"Create",children:(0,h.jsx)(ie,{store:o,actionCompleted:G.$0,actionFailed:G.db,forActionType:G.Nf,msgOnNotSelect:L.xW,msgOnIsEmptyName:L.eT,onCreate:le,onClose:s})}),(0,h.jsx)(v.Z,{title:"Rename",children:(0,h.jsx)(ae,{store:o,actionCompleted:G.$0,actionFailed:G.db,forActionType:G.gm,msgOnNotSelect:L.xW,msgOnIsEmptyName:L.eT,onRename:ce,onClose:s})}),(0,h.jsx)(v.Z,{title:"Delete",children:(0,h.jsx)(re,{store:o,actionCompleted:G.$0,actionFailed:G.db,forActionType:G.of,msgOnNotSelect:L.xW,onDelete:ue,onClose:s})})]})})}))}}}]);
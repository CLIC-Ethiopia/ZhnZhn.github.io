"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{8121:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ae});var n=r(9679),s=r(2564),o=r(1926),l=r(795);let i;const a=e=>{const t=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(r=t)||r-r!=0||(i||(i=(new Date).getUTCFullYear()))-t<3;var r},c=e=>e.active,u=(e,t)=>{if(e)return"SDN"===t?c:a};var d=r(6645);const p=(0,n.createContext)();var g=r(8190),f=r(8811),m=r(5893);const x={width:240,paddingBottom:8},h=e=>{let{is:t,toggleMenu:r,toggleFilter:n}=e;return(0,m.jsx)(g.Z,{isShow:t,className:"popup-menu charts__menu-more",style:x,onClose:r,children:(0,m.jsx)(f.Z,{caption:"Filter Not Active Topic",onToggle:n})})};var y=r(6462),C=r(2038);const b={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},j=Object.assign,v=e=>{const t=e.text||"",r=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+r}},k=e=>()=>{const{rootUrl:t,id:r,proxy:n,bT:s,lT:o,dU:l,noTime:i,dS:a}=e,c=(e=>{let{rootDimUrl:t,rootUrl:r,id:n,proxy:s="",dfDimQuery:o=""}=e;return""+s+(t||r)+"/"+n+o})(e),u=j({},b,{type:s+"_"+r,...v(e)});j(u.dialogProps,{loadId:o,descrUrl:l,dataSource:a,dfProps:{dimUrl:c,baseMeta:t,dfId:r,proxy:n,noTime:i}}),C.Ck.showDialog(s+"_"+r,s,u)},w=Array.isArray,I=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(e=>{let{tables:t}=e;return w(t)&&0===t.length})(e))&&(e.type="l"),r.push(e))})),r},T=(e,t)=>{const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=e.id+": "+e.text+", "+(e.firstPeriod||"")+"-"+(e.latestPeriod||""),e))):0!==(r.subjects||[]).length?I(r.subjects,t):I(e,t)},P=e=>(e.forEach((e=>{"t"===e.type&&(e.text=e.id+": "+e.text)})),e),S=Array.isArray,M=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,N={SDN:T,SIR:P},Z=function(e,t,r){void 0===e&&(e="");const{rootUrl:n,dfTi:s="",lT:o}=t;return fetch(""+e+n+"/"+r+s,{cache:"default"}).then((e=>e.json())).then((e=>{if(S(e)){const t=N[o];t&&(e=t(e,r)),e.sort(M)}return e}))};var F=r(554);const R={fontWeight:"bold",fontSize:"16px"},D={color:"#f44336",paddingLeft:12},A={position:"relative",color:"silver",padding:"8px 0 4px 32px",cursor:"pointer"},O={position:"absolute",top:8,left:16},U={color:"#1b2836",padding:8,paddingLeft:12,cursor:"pointer"},_={color:"black",padding:8,cursor:"pointer"},E=e=>{let{innerRef:t,title:r,onClick:n}=e;const s=(0,F.Z)(n);return(0,m.jsxs)("div",{ref:t,className:"menu-item",style:A,role:"menuitem",tabIndex:"0",onClick:n,onKeyDown:s,children:[r,(0,m.jsx)("span",{style:O,children:"<"})]})};var L=r(2554);const B=e=>{let{innerRef:t,item:r,onClick:n}=e;const{text:s,type:o}=r,l="l"===o?U:_,i=(0,F.Z)(n,[n]);return(0,m.jsx)("div",{ref:t,className:"menu-item",style:l,tabIndex:"0",role:"menuitem",onClick:n,onKeyDown:i,children:s})},K=[],X=(0,n.memo)((e=>{let{refFirstItem:t,model:r=K,fOnClickItem:s}=e;const o=(e=>{const t=(0,n.useContext)(p);return(0,n.useMemo)((()=>t?e.filter(t):e),[t,e])})(r);return(0,m.jsx)("div",{children:o.map(((e,r)=>(0,m.jsx)(B,{innerRef:0===r?t:void 0,item:e,onClick:s(e)},e.id)))})})),z=e=>{let{errMsg:t}=e;return t?(0,m.jsx)("div",{style:D,children:t}):null},Q=e=>{let{refFirstItem:t,model:r,fOnClickItem:n,errMsg:s}=e;return(0,m.jsxs)(m.Fragment,{children:[!(r||s)&&(0,m.jsx)(L.Z,{}),(0,m.jsx)(X,{refFirstItem:t,model:r,fOnClickItem:n}),(0,m.jsx)(z,{errMsg:s})]})},W=Array.isArray,Y=(e,t,r,n,s,o,l)=>{const{text:i,id:a,type:c}=l,u="SDN"===r.lT?a||t:t?t+"/"+a:a;return"l"===c?s.bind(null,u,i,n):o({id:u,...r,text:i,proxy:e})},q=e=>{let{style:t,store:r,title:s,id:o="",dfProps:l={},pageNumber:i,pageCurrent:a,onClickPrev:c,onClickNext:u,fOnClickItem:d,loadItems:p}=e;const g=(0,n.useRef)(),f=(0,n.useRef)(),[x,h]=(0,n.useState)({}),{model:y,errMsg:C}=x,b=((e,t)=>e.getProxy(t.lT))(r,l),j=(0,n.useCallback)(Y.bind(null,b,o,l,i,u,d),[b]),v=s&&c,k=i===a&&(v||!v&&y);return(0,n.useEffect)((()=>(s&&p(b,l,o).then((e=>{const t=W(e)?{model:e}:{errMsg:"Response is not array"};h(t)})).catch((e=>h({errMsg:e.message}))),()=>{clearTimeout(f.current),g.current=null})),[]),(0,n.useEffect)((()=>{k&&(clearTimeout(f.current),f.current=setTimeout((()=>{const e=g.current;e&&e.focus()}),1e3))}),[k]),(0,m.jsxs)("div",{style:{...R,...t},children:[v&&(0,m.jsx)(E,{innerRef:g,title:s,onClick:c.bind(null,i)}),(0,m.jsx)(Q,{refFirstItem:v?void 0:g,model:y,fOnClickItem:j,errMsg:C})]})},G=e=>{let{pages:t,pageCurrent:r}=e;return t.map(((e,t)=>(0,n.cloneElement)(e,{pageCurrent:r,pageNumber:t+1})))},H={width:300,overflow:"hidden"},J={width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},V={width:300},$=e=>e.current,ee=(e,t)=>e.current=t,te=e=>{const t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)},re=e=>{let{dfProps:t,store:r}=e;const s=(0,n.useRef)(),o=(0,n.useRef)(0),[l,i]=(0,n.useState)({pageCurrent:0,pages:[]}),{pageCurrent:a,pages:c}=l,u=(0,n.useCallback)((0,y.Z)((e=>{i((t=>{const{pageCurrent:r}=t;return 0===r||r!==e||ee(o,-1),{...t,pageCurrent:e-1}}))})),[]),d=(0,n.useCallback)((0,y.Z)(((e,n,s)=>{const l=(e,n,s)=>{e.push((0,m.jsx)(q,{id:n,style:V,store:r,title:s,dfProps:t,onClickPrev:u,onClickNext:d,loadItems:Z,fOnClickItem:k},n))};i((t=>{let{pageCurrent:r,pages:i}=t;if(s!==r)return t;if(s<i.length){const t=i[s];t&&t.key!==e&&(s>0?i.splice(s):i=[],l(i,e,n))}else l(i,e,n);return ee(o,1),{pages:i,pageCurrent:s+1}}))})),[u,t,r]),p=((e,t)=>{let r="0";const n=$(e),s=$(t);if(0!==s&&n){const e=te(n);r=1===s?e-300:e+300,ee(t,0)}else 0===s&&n&&(r=te(n));return{...J,transform:"translateX("+r+"px)"}})(s,o);return(0,m.jsx)("div",{style:H,children:(0,m.jsxs)("div",{ref:s,style:p,children:[(0,m.jsx)(q,{style:V,title:"Main Menu",store:r,dfProps:t,pageCurrent:a,pageNumber:0,onClickNext:d,loadItems:Z,fOnClickItem:k}),(0,m.jsx)(G,{pages:c,pageCurrent:a})]})})},ne={paddingRight:0},se={paddingLeft:6},oe={position:"relative",top:-4},le={position:"relative",top:-6,paddingLeft:4},ie={height:"92%"},ae=(0,n.memo)((e=>{const{isInitShow:t,caption:r,browserType:i,showAction:a}=e,[c,g,f]=(0,s.Z)(t),[x,y]=(0,o.Z)(),[C,b]=(0,o.Z)(),j=(0,n.useMemo)((()=>u(C,e.dfProps.lT)),[C]);return(0,l.Z)(((e,t)=>{e===a&&t===i&&g()})),(0,m.jsx)(p.Provider,{value:j,children:(0,m.jsxs)(d.Z.Browser,{isShow:c,style:ne,children:[(0,m.jsx)(h,{is:x,toggleMenu:y,toggleFilter:b}),(0,m.jsx)(d.Z.BrowserCaption,{style:se,caption:r,captionStyle:le,svgMoreStyle:oe,onMore:y,onClose:f}),(0,m.jsx)(d.Z.ScrollPane,{className:"scroll-container-y",style:ie,children:(0,m.jsx)(re,{...e})})]})})}))}}]);
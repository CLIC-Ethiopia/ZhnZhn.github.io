(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[341],{238:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>it});var n=r(3552),i=r(5893),o=r(9679),a=r(3014),s=r(2038),d=r(3218),p=r(8685),l=r(4832),c="bt__watch__bar",u={ROOT:{marginBottom:10},BT_LIST:{marginLeft:20}};const h=function(t){var e=t.isShow,r=t.onClickGroup,n=t.onClickList;return e?(0,i.jsxs)("div",{style:u.ROOT,children:[(0,i.jsx)(l.Z,{caption:"GROUP",className:c,onClick:r}),(0,i.jsx)(l.Z,{caption:"LIST",className:c,style:u.BT_LIST,onClick:n})]}):null};var D=r(2122),g=r(2306),f=r(8636),_={ITEM_DIV:{position:"relative",paddingRight:40,paddingTop:5,paddingBottom:5},ITEM_SPAN:{display:"inline-block",width:"100%",maxWidth:250,height:28,verticalAlign:"middle",textOverflow:"ellipsis",overflow:"hidden"},SVG_CLOSE:{position:"absolute",top:10,right:0}};const v=function(t){var e=t.item,r=t.className,n=t.isModeEdit,a=t.option,s=t.onClick,d=t.onClose,p=t.onDragStart,l=t.onDragEnter,c=t.onDragOver,u=t.onDragLeave,h=t.onDrop,v=(e||{}).caption,S=void 0===v?"Not Found":v,I=n?(0,i.jsx)(f.Z,{style:_.SVG_CLOSE,onClose:d.bind(null,a)}):null,T=(0,o.useCallback)((function(){return s(e)}),[e]),L=(0,o.useCallback)((function(t){(0,g.Z)(t)&&T()}),[T]),E=n?{draggable:!0,onDragStart:p.bind(null,a),onDrop:h.bind(null,a),onDragOver:c,onDragEnter:l,onDragLeave:u}:void 0;return(0,i.jsxs)("div",(0,D.Z)({role:"menuitem",tabIndex:"0",className:r,style:_.ITEM_DIV,onClick:T},E,{onKeyUp:L,children:[(0,i.jsx)("span",{style:_.ITEM_SPAN,children:S}),I]}))};var S,I,T,L,E="border-bottom",y="border-left",b=function(t,e){t.persist(),I=t.currentTarget;var r=t.currentTarget.style;T=r.getPropertyValue(E),S=e},m=function(t){var e=I.style;t.currentTarget.style.removeProperty(y),e.removeProperty("border"),e.setProperty(E,T)},C=function(t,e,r){var n=t.currentTarget.style;L=n.getPropertyValue(y),-1!==S.indexOf(e)?n.setProperty(y,function(t){return void 0===t&&(t="green"),"4px solid "+t}(r)):n.setProperty(y,"4px solid red")},O=function(t){var e=t.currentTarget.style;e.removeProperty(y),e.setProperty(y,L)};const x=function(t){Object.assign(t.prototype,{dragStartWithDnDStyle:b,dropWithDnDStyle:m,dragEnterWithDnDStyle:C,dragLeaveWithDnDStyle:O})};const G={setTransferTo:function(t){var e=t.event,r=t.dragId,n=t.xType;Object.assign(e.dataTransfer,{effectAllowed:"move",dropEffect:"move"}).setData("text",JSON.stringify({dragId:r,xType:n}))}};var R=function(t){return function(e,r){var n=e.caption;this.dragStartWithDnDStyle(r,[t.GROUP]),G.setTransferTo({event:r,dragId:n+";",xType:t.GROUP})}},w=function(t,e){return function(r,n){var i=r.caption;this.dropWithDnDStyle(n);var o=JSON.parse(n.dataTransfer.getData("text")),a=o.xType,s=o.dragId,d=i+";";if(a===t.GROUP){if(s===d)return;n.preventDefault(),e.dragDropGroup({dragId:s,dropId:d})}else a===t.LIST&&(n.preventDefault(),e.dragDropList({dragId:s,dropId:d}))}},M=function(t){return function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.GROUP,t.C_GROUP_ENTER)}},W=function(t){t.preventDefault()},P=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},j=function(t,e){Object.assign(this,{_hDragStartGroup:R(t).bind(this),_hDropGroup:w(t,e).bind(this),_hDragEnterGroup:M(t).bind(this),_hDragOverGroup:W,_hDragLeaveGroup:P.bind(this)})};const Z=function(t){Object.assign(t.prototype,{_bindDnDGroup:j})};var k=function(t){return function(e,r){var n=e.groupCaption,i=e.caption;this.dragStartWithDnDStyle(r,[t.GROUP,t.LIST]),G.setTransferTo({event:r,dragId:n+";"+i,xType:t.LIST})}},N=function(t,e){return function(r,n){var i=r.groupCaption,o=r.caption;this.dropWithDnDStyle(n);var a=JSON.parse(n.dataTransfer.getData("text")),s=a.xType,d=a.dragId,p=i+";"+o+";";if(s===t.LIST){if(d===p)return;n.preventDefault(),e.dragDropList({dragId:d,dropId:p})}else s===t.ITEM&&(n.preventDefault(),e.dragDropItem({dragId:d,dropId:p}))}},U=function(t){return function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.LIST,t.C_LIST_ENTER)}},B=function(t){t.preventDefault()},V=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},A=function(t,e){Object.assign(this,{_hDragStartList:k(t).bind(this),_hDropList:N(t,e).bind(this),_hDragEnterList:U(t).bind(this),_hDragOverList:B,_hDragLeaveList:V.bind(this)})};const H=function(t){Object.assign(t.prototype,{_bindDnDList:A})};var J=function(t){return function(e,r){var n=e.groupCaption,i=e.listCaption,o=e.caption;this.dragStartWithDnDStyle(r,[t.LIST,t.ITEM]),G.setTransferTo({event:r,dragId:n+";"+i+";"+o,xType:t.ITEM})}},F=function(t,e){return function(r,n){var i=r.groupCaption,o=r.listCaption,a=r.caption;this.dropWithDnDStyle(n);var s=JSON.parse(n.dataTransfer.getData("text")),d=s.xType,p=s.dragId,l=i+";"+o+";"+a;if(d===t.ITEM){if(p===l)return;n.preventDefault(),e.dragDropItem({dragId:p,dropId:l})}}},K=function(t){return function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.ITEM,t.C_LIST_ENTER)}},q=function(t){t.preventDefault()},z=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},Q=function(t,e){Object.assign(this,{_hDragStartItem:J(t).bind(this),_hDropItem:F(t,e).bind(this),_hDragEnterItem:K(t).bind(this),_hDragOverItem:q,_hDragLeaveItem:z.bind(this)})};const X=function(t){Object.assign(t.prototype,{_bindDnDItem:Q})};var Y,$="scroll-container-y scroll-watch",tt="row__type2-topic not-selected",et="#80c040",rt={BROWSER:{paddingRight:0},BT_CIRCLE:{position:"relative",top:3,marginLeft:20},GROUP_DIV:{lineHeight:2},LIST_DIV:{marginLeft:8,paddingLeft:2,borderLeftStyle:"solid",borderLeftWidth:2,borderLeftColor:"inherit",lineHeight:2},ITEM_NOT_SELECTED:{marginRight:10}},nt={GROUP:"GROUP",C_GROUP_ENTER:"#1b75bb",LIST:"LIST",C_LIST_ENTER:et,ITEM:"ITEM"};const it=function(t){x(t),Z(t),H(t),X(t)}(Y=function(t){function e(e){var r;return(r=t.call(this,e)||this)._onStore=function(t,e){var n=r.props,i=n.browserType,o=n.showAction,a=n.updateAction;t===o&&e===i?r._handlerShow():t===a&&r.setState({watchList:e})},r._handlerHide=function(){r.setState({isShow:!1})},r._handlerShow=function(){r.setState({isShow:!0})},r._handlerToggleEditMode=function(){r.setState({isModeEdit:!r.state.isModeEdit})},r._renderWatchList=function(t){var e=r.state.isModeEdit;return t.groups.map((function(t,n){var o=t.caption,a=t.lists;return(0,i.jsx)(p.Z.OpenClose2,{style:rt.GROUP_DIV,caption:o,isDraggable:e,option:{caption:o},onDragStart:r._hDragStartGroup,onDragEnter:r._hDragEnterGroup,onDragOver:r._hDragOverGroup,onDragLeave:r._hDragLeaveGroup,onDrop:r._hDropGroup,children:a&&r._renderLists(a,o)},n)}))},r._renderLists=function(t,e){var n=r.state.isModeEdit;return t.map((function(t,o){var a=t.caption,s=t.items;return(0,i.jsx)(p.Z.OpenClose2,{style:rt.LIST_DIV,notSelectedStyle:rt.ITEM_NOT_SELECTED,openColor:et,caption:a,isDraggable:n,option:{groupCaption:e,caption:a},onDragStart:r._hDragStartList,onDragEnter:r._hDragEnterList,onDragOver:r._hDragOverList,onDragLeave:r._hDragLeaveList,onDrop:r._hDropList,children:s&&r._renderItems(s,e,a)},o)}))},r._renderItems=function(t,e,n){var o=r.state.isModeEdit;return t.map((function(t,a){var s=t.id,d=t.caption;return(0,i.jsx)(v,{className:tt,isModeEdit:o,item:t,option:{groupCaption:e,listCaption:n,caption:d},onClick:r._handlerClickItem,onClose:r._handlerRemoveItem,onDragStart:r._hDragStartItem,onDragOver:r._hDragOverItem,onDragEnter:r._hDragEnterItem,onDragLeave:r._hDragLeaveItem,onDrop:r._hDropItem},s)}))},r._bindDnDGroup(nt,d.Z),r._bindDnDList(nt,d.Z),r._bindDnDItem(nt,d.Z),r.state={isShow:!!e.isInitShow,isModeEdit:!1,watchList:e.store.getWatchList()},r}(0,n.Z)(e,t);var r=e.prototype;return r.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},r.componentWillUnmount=function(){this.unsubscribe()},r._handlerSaveWatch=function(){d.Z.saveWatch()},r._handlerEditGroup=function(){s.Z.showModalDialog(a.pL.EDIT_WATCH_GROUP)},r._handlerEditList=function(){s.Z.showModalDialog(a.pL.EDIT_WATCH_LIST)},r._handlerClickItem=function(t){s.Z.showModalDialog(a.pL.LOAD_ITEM,t)},r._handlerRemoveItem=function(t,e){e.stopPropagation(),d.Z.removeItem(t)},r.render=function(){var t=this.props.caption,e=this.state,r=e.isShow,n=e.isModeEdit,o=e.watchList,a=n?"V":"E";return(0,i.jsxs)(p.Z.Browser,{isShow:r,style:rt.BROWSER,children:[(0,i.jsxs)(p.Z.BrowserCaption,{caption:t,onClose:this._handlerHide,children:[(0,i.jsx)(p.Z.ButtonCircle,{caption:"S",title:"Save to LocalStorage",style:rt.BT_CIRCLE,onClick:this._handlerSaveWatch}),(0,i.jsx)(p.Z.ButtonCircle,{caption:a,title:"Toggle Edit Mode: E/V",style:rt.BT_CIRCLE,onClick:this._handlerToggleEditMode})]}),(0,i.jsx)(h,{isShow:n,onClickGroup:this._handlerEditGroup,onClickList:this._handlerEditList}),(0,i.jsx)(p.Z.ScrollPane,{className:$,children:o&&this._renderWatchList(o)})]})},e}(o.Component))||Y}}]);
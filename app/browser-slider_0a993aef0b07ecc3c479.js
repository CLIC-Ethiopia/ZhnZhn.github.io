(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{1438:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var s=r(9679),n=r(2564),i=r(1926),o=r(795);let l;const a=e=>{const t=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(r=t)||r-r!=0||(l||(l=(new Date).getUTCFullYear()))-t<3;var r},c=e=>e.active,d=(e,t)=>{if(e)return"SDN"===t?c:a};var p=r(4488);const u=(0,s.createContext)();var h=r(8190),f=r(8811),g=r(5893);const x={width:240,paddingBottom:8},m=({is:e,toggleMenu:t,toggleFilter:r})=>(0,g.jsx)(h.Z,{isShow:e,className:"popup-menu charts__menu-more",style:x,onClose:t,children:(0,g.jsx)(f.Z,{caption:"Filter Not Active Topic",onToggle:r})});var C=r(6462),P=r(2038);const y={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2a",dfProps:{},isProxy:!0}},b=Object.assign,T=e=>{const t=e.text||"",r=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+r}},_=e=>()=>{const{rootUrl:t,id:r,proxy:s,bT:n,lT:i,dU:o,noTime:l,dS:a}=e,c=(({rootMeta:e,rootUrl:t,id:r,proxy:s="",dfMeta:n=""})=>""+s+(e||t)+"/"+r+n)(e),d=b({},y,{type:n+"_"+r,...T(e)});b(d.dialogProps,{loadId:i,descrUrl:o,dataSource:a,dfProps:{metaUrl:c,baseMeta:t,dfId:r,proxy:s,noTime:l}}),P.Z.showDialog(n+"_"+r,n,d)},I=Array.isArray,v=(e,t)=>e.text<t.text?-1:e.text>t.text?1:0,j=(e,t)=>{const r=[];return e.forEach((e=>{e.id!==t&&(e.text=e.description,(e.hasSubjects||(({tables:e})=>I(e)&&0===e.length)(e))&&(e.type="l"),r.push(e))})),r},R=(e="",t,r)=>{const{rootUrl:s,dfTi:n="",lT:i}=t;return fetch(""+e+s+"/"+r+n,{cache:"default"}).then((e=>e.json())).then((e=>(I(e)&&(e=((e,t,r)=>{if("SDN"===r){const r=e[0];return 0!==(r.tables||[]).length?r.tables.map((e=>(e.text=e.id+": "+e.text+", "+(e.firstPeriod||"")+"-"+(e.latestPeriod||""),e))):0!==(r.subjects||[]).length?j(r.subjects,t):j(e,t)}return e})(e,r,i)).sort(v),e)))};var S=r(2306);const M={MSG_ERR:{paddingLeft:"12px",color:"#f44336",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px"},TITLE:{position:"relative",color:"silver",paddingLeft:"32px",paddingTop:"8px",paddingBottom:"4px",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",cursor:"pointer"},TITLE_ARROW:{position:"absolute",top:"8px",left:"16px"},ITEM_L:{color:"#1b2836",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",paddingLeft:"12px",cursor:"pointer"},ITEM_T:{color:"black",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",cursor:"pointer"}},k="menu-item",A=({innerRef:e,title:t,onClick:r})=>(0,g.jsxs)("div",{ref:e,className:k,style:M.TITLE,role:"menuitem",tabIndex:"0",onClick:r,onKeyDown:e=>{(0,S.Z)(e)&&(e.preventDefault(),r())},children:[t,(0,g.jsx)("span",{style:M.TITLE_ARROW,children:"<"})]});var N=r(2554);const w="menu-item",E=({innerRef:e,item:t,onClick:r})=>{const{text:n,type:i}=t,o="l"===i?M.ITEM_L:M.ITEM_T,l=(0,s.useCallback)((e=>{(0,S.Z)(e)&&(e.preventDefault(),r())}),[r]);return(0,g.jsx)("div",{ref:e,className:w,style:o,tabIndex:"0",role:"menuitem",onClick:r,onKeyDown:l,children:n})},O=[],F=(0,s.memo)((({refFirstItem:e,model:t=O,fOnClickItem:r})=>{const n=(e=>{const t=(0,s.useContext)(u);return(0,s.useMemo)((()=>t?e.filter(t):e),[t,e])})(t);return(0,g.jsx)("div",{children:n.map(((t,s)=>(0,g.jsx)(E,{innerRef:0===s?e:void 0,item:t,onClick:r(t)},t.id)))})})),L=({errMsg:e})=>e?(0,g.jsx)("div",{style:M.MSG_ERR,children:e}):null,Z=({refFirstItem:e,model:t,fOnClickItem:r,errMsg:s})=>(0,g.jsxs)(g.Fragment,{children:[!(t||s)&&(0,g.jsx)(N.Z,{}),(0,g.jsx)(F,{refFirstItem:e,model:t,fOnClickItem:r}),(0,g.jsx)(L,{errMsg:s})]}),U=Array.isArray,D=(e,t,r,s,n,i,o)=>{const{text:l,id:a,type:c}=o,d="SDN"===r.lT?a||t:t?t+"/"+a:a;return"l"===c?n.bind(null,d,l,s):i({id:d,...r,text:l,proxy:e})},B=({style:e,store:t,title:r,id:n="",dfProps:i={},pageNumber:o,pageCurrent:l,onClickPrev:a,onClickNext:c,fOnClickItem:d,loadItems:p})=>{const u=(0,s.useRef)(),h=(0,s.useRef)(),[f,x]=(0,s.useState)({}),{model:m,errMsg:C}=f,P=((e,t)=>e.getProxy(t.lT))(t,i),y=(0,s.useCallback)(D.bind(null,P,n,i,o,c,d),[P]),b=r&&a,T=o===l&&(b||!b&&m);return(0,s.useEffect)((()=>(r&&p(P,i,n).then((e=>{const t=U(e)?{model:e}:{errMsg:"Response is not array"};x(t)})).catch((e=>x({errMsg:e.message}))),()=>{clearTimeout(h.current),u.current=null})),[]),(0,s.useEffect)((()=>{T&&(clearTimeout(h.current),h.current=setTimeout((()=>{const e=u.current;e&&e.focus()}),1e3))}),[T]),(0,g.jsxs)("div",{style:e,children:[b&&(0,g.jsx)(A,{innerRef:u,title:r,onClick:a.bind(null,o)}),(0,g.jsx)(Z,{refFirstItem:b?void 0:u,model:m,fOnClickItem:y,errMsg:C})]})},W=({pages:e,pageCurrent:t})=>e.map(((e,r)=>(0,s.cloneElement)(e,{pageCurrent:t,pageNumber:r+1}))),G={ROOT:{width:300,overflow:"hidden"},PAGES:{width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},PAGE:{width:300}},z=e=>{const t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)};class K extends s.Component{constructor(e){super(e),this.hPrevPage=e=>{this.setState((({pageCurrent:t})=>0===t||t!==e?null:(this._direction=-1,{pageCurrent:e-1})))},this._addPage=(e,t,r)=>{const{dfProps:s,store:n}=this.props;e.push((0,g.jsx)(B,{id:t,style:G.PAGE,store:n,title:r,dfProps:s,onClickPrev:this.hPrevPage,onClickNext:this.hNextPage,loadItems:R,fOnClickItem:_},t))},this.hNextPage=(e,t,r)=>{this.setState((({pageCurrent:s,pages:n})=>r!==s?null:(r<n.length?n[r]&&n[r].key!==e&&(r>0?n.splice(r):n=[],this._addPage(n,e,t)):this._addPage(n,e,t),this._direction=1,{pages:n,pageCurrent:r+1})))},this._crTransform=()=>{let e="0";const t=this._refMenu.current;if(0!==this._direction&&t){const r=z(t);e=1===this._direction?r-300:r+300,this._direction=0}else 0===this._direction&&t&&(e=z(t));return{transform:"translateX("+e+"px)"}},this.hNextPage=(0,C.Z)(this.hNextPage.bind(this)),this.hPrevPage=(0,C.Z)(this.hPrevPage.bind(this)),this._refMenu=(0,s.createRef)(),this._direction=0,this._fOnClickItem=({id:e,text:t})=>this.hNextPage.bind(null,e,t,0),this.state={pageCurrent:0,pages:[]}}render(){const{dfProps:e,store:t}=this.props,{pages:r,pageCurrent:s}=this.state,n=this._crTransform(),i={...G.PAGES,...n};return(0,g.jsx)("div",{style:G.ROOT,children:(0,g.jsxs)("div",{ref:this._refMenu,style:i,children:[(0,g.jsx)(B,{style:G.PAGE,title:"Main Menu",store:t,dfProps:e,pageCurrent:s,pageNumber:0,onClickNext:this.hNextPage,loadItems:R,fOnClickItem:_}),(0,g.jsx)(W,{pages:r,pageCurrent:s})]})})}}const X=K,Y={BROWSER:{paddingRight:0},BR_CAPTION:{paddingLeft:6},CAPTION:{top:0,paddingLeft:4},SCROLL_PANE:{height:"92%"}},q=(0,s.memo)((e=>{const{isInitShow:t,caption:r,store:l,browserType:a,showAction:c}=e,[h,f,x]=(0,n.Z)(t),[C,P]=(0,i.Z)(),[y,b]=(0,i.Z)(),T=(0,s.useMemo)((()=>d(y,e.dfProps.lT)),[y]);return(0,o.Z)(l,((e,t)=>{e===c&&t===a&&f()})),(0,g.jsx)(u.Provider,{value:T,children:(0,g.jsxs)(p.Z.Browser,{isShow:h,style:Y.BROWSER,children:[(0,g.jsx)(m,{is:C,toggleMenu:P,toggleFilter:b}),(0,g.jsx)(p.Z.BrowserCaption,{style:Y.BR_CAPTION,caption:r,captionStyle:Y.CAPTION,onMore:P,onClose:x}),(0,g.jsx)(p.Z.ScrollPane,{className:"scroll-container-y",style:Y.SCROLL_PANE,children:(0,g.jsx)(X,{...e})})]})})}))}}]);
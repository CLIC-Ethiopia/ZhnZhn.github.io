(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[861],{7915:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>W});var a,n=o(2122),i=o(7866),r=o(3552),s=o(5893),l=o(9679),d=o(3014),c=o(377),h=c.Z.Decor,u=c.Z.crMenuMore,p={BT_ROOT:{color:"rgb(35, 47, 59)"}},S={INIT:"First Load Meta",SELECT:"Select..."},T="Default Empty",m="Import - Trade (USD)",_="Export - Trade (USD)",g="Re-Import - Trade (USD)",f="Re-Export - Trade (USD)",C=[{caption:"Default : Empty Filter",value:T},{caption:"Import - Trade (USD)",value:"Import - Trade (USD)"},{caption:"Import - Weight (Kg)",value:"Import - Weight (Kg)"},{caption:"Export - Trade (USD)",value:"Export - Trade (USD)"},{caption:"Export - Weight (Kg)",value:"Export - Weight (Kg)"},{caption:"Re-Import - Trade (USD)",value:"Re-Import - Trade (USD)"},{caption:"Re-Export - Trade (USD)",value:"Re-Export - Trade (USD)"}],w=[{caption:"Default : Area",value:d.oX.AREA},{caption:"Semi Donut : Total Top90, On Every Year : Recent 2 Years",value:d.oX.SEMI_DONUT},{caption:"Stacked Area : Total Top90, On Recent Year",value:d.oX.STACKED_AREA},{caption:"Stacked Area Percent : Total Top90, On Recent Year",value:d.oX.STACKED_AREA_PERCENT},{caption:"Stacked Column : Total Top90, On Recent Year",value:d.oX.STACKED_COLUMN},{caption:"Stacked Column Percent : Total Top90, On Recent Year",value:d.oX.STACKED_COLUMN_PERCENT},{caption:"Tree Map : On Recent Year",value:d.oX.TREE_MAP}];const v=(0,h.withToolbar)(a=(0,h.withValidationLoad)(a=(0,h.withInitialState)(a=function(t){function e(e){var o;return(o=t.call(this,e)||this)._initTrade=function(){o.subheading=void 0,o.optionTrades=void 0,o.setState({optionTrades:[],placeholderTrade:S.INIT,isLoadingTradeFailed:!1})},o._filterTrade=function(){var t;if(o.tradeFilter&&o.optionTrades){var e=o.tradeFilter.value;e!==T?(t=o.optionTrades.filter((function(t,o){return-1!==t.caption.indexOf(e)})),e===m&&(t=t.filter((function(t,e){return-1===t.caption.indexOf(g)}))),e===_&&(t=t.filter((function(t,e){return-1===t.caption.indexOf(f)})))):t=o.optionTrades}else t=o.optionTrades;return t},o._handlerClickAll=function(){var t=o.state,e=t.isShowFilter,a=t.isShowDate,n=t.isShowChartType,i=!(e||a||n);o.setState({isShowFilter:i,isShowDate:i,isShowChartType:i})},o._handlerClickFilter=function(){o.setState({isShowFilter:!o.state.isShowFilter})},o._handlerClickDate=function(){o.setState({isShowDate:!o.state.isShowDate})},o._handlerClickChartType=function(){o.setState({isShowChartType:!o.state.isShowChartType})},o._handlerSelectCountry=function(t){o.country=t,o._initTrade()},o._handlerSelectChapter=function(t){o.chapter=t,o._initTrade()},o._handlerSelectTradeFilter=function(t){o.tradeFilter=t,o.setState({optionTrades:o._filterTrade()})},o._handlerSelectTrade=function(t){o.subheading=t},o._handlerSelectChartType=function(t){o.chartType=t},o._handlerLoadMeta=function(){o._handleWithValidationLoad(o._createMetaValidationMessages(),o._createLoadMetaOption,o._loadMeta)},o._loadMeta=function(t){o.props.onLoad(t),o.setState({isLoadingTrade:!0})},o._createMetaValidationMessages=function(){var t=[];o.country||t.push(o.props.msgOnNotSelected("Country")),o.chapter||t.push(o.props.msgOnNotSelected("Subheading"));var e=o.datesFragment.getValidation(),a=e.isValid,n=e.datesMsg;return a||(t=t.concat(n)),t.isValid=0===t.length,t},o._createLoadMetaOption=function(){var t=o.datesFragment.getValues(),e=t.fromDate,a=t.toDate,n=o.props,i=n.loadId;return{value:(0,n.fnValue)(o.chapter.value,o.country.value),fromDate:e,toDate:a,isLoadMeta:!0,onLoad:o._setOptionTrades,onCancel:o._loadMetaOptionCancel,onFailed:o._loadMetaOptionFailed,loadId:i}},o._setOptionTrades=function(t){o.optionTrades=t,o.setState({optionTrades:o._filterTrade(),isLoadingTrade:!1,isLoadingTradeFailed:!1,placeholderTrade:S.SELECT})},o._loadMetaOptionCancel=function(){o.setState({isLoadingTrade:!1,isLoadingTradeFailed:!1,placeholderTrade:S.SELECT})},o._loadMetaOptionFailed=function(){o.setState({isLoadingTrade:!1,isLoadingTradeFailed:!0})},o._handlerLoadData=function(){o._handleWithValidationLoad(o._createDataValidationMessages(),o._createLoadDataOption)},o._createDataValidationMessages=function(){var t=[];o.chartType&&o.chartType.value!==d.oX.AREA?(o.state.placeholderTrade===S.INIT&&t.push(S.INIT),o.tradeFilter||t.push(o.props.msgOnNotSelected("Trade Filter"))):o.subheading||t.push(o.props.msgOnNotSelected("Subheading"));return t.isValid=0===t.length,t},o._createLoadDataOption=function(){var t=o.datesFragment.getValues(),e=t.fromDate,a=t.toDate,n=o.subheading?o.subheading.value:o.props.dataColumn,i=o.props,r=i.loadId,s=i.fnValue,l=i.dataSource,c=o.chartType?o.chartType.value:d.oX.AREA,h=o.tradeFilter?o.country.caption+":"+o.tradeFilter.caption:""+o.country.caption,u=o.chartType&&o.chartType.value!==d.oX.AREA?o._createSpliceItems():void 0;return{value:s(o.chapter.value,o.country.value),fromDate:e,toDate:a,dataColumn:n,seriaType:c,sliceItems:u,title:h,subtitle:o.chapter.caption,loadId:r,dataSource:l}},o._createSpliceItems=function(){var t=o.tradeFilter.value.length+2;return o.state.optionTrades.map((function(e,o){var a=e.value,n=e.caption;return{caption:n=n.substring(0,n.length-t),value:a}}))},o._handlerClose=function(){o._handleWithValidationClose()},o._refDates=function(t){return o.datesFragment=t},o._menuMore=u((0,i.Z)(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o.toolbarButtons.push({caption:"A",title:"Toggle All Input",onClick:o._handlerClickAll},{caption:"F",title:"Toggle Filter Input",onClick:o._handlerClickFilter},{caption:"D",title:"Toggle Date Input",onClick:o._handlerClickDate},{caption:"C",title:"Toggle ChartType Input",onClick:o._handlerClickChartType}),o._commandButtons=[(0,s.jsx)(c.Z.Button.Flat,{rootStyle:p.BT_ROOT,caption:"Load Meta",title:"First Load Meta, then Load Item",onClick:o._handlerLoadMeta},"meta"),(0,s.jsx)(c.Z.Button.Load,{onClick:o._handlerLoadData},"load")],o.state=(0,n.Z)({},o._isWithInitialState(),{isShowFilter:!1,isShowChartType:!1,isLoadingTrade:!1,isLoadingTradeFailed:!1,optionTrades:[],placeholderTrade:S.INIT}),o}(0,r.Z)(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.onShow,a=t.onFront,n=t.countryURI,i=t.countryJsonProp,r=t.commodityURI,l=t.commodityJsonProp,d=t.initFromDate,h=t.initToDate,u=t.msgOnNotValidFormat,p=t.onTestDate,S=this.state,T=S.isToolbar,m=S.isShowLabels,_=S.isShowFilter,g=S.isShowDate,f=S.isShowChartType,v=S.isLoadingTrade,D=S.isLoadingTradeFailed,F=S.optionTrades,b=S.placeholderTrade,y=S.validationMessages;return(0,s.jsxs)(c.Z.DraggableDialog,{isShow:e,caption:"United Nations Commodity Trade",menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:o,onFront:a,onClose:this._handlerClose,children:[(0,s.jsx)(c.Z.Toolbar,{isShow:T,buttons:this.toolbarButtons}),(0,s.jsx)(c.Z.SelectWithLoad,{isShow:e,isShowLabels:m,uri:n,jsonProp:i,caption:"Country:",optionNames:"Countries",onSelect:this._handlerSelectCountry}),(0,s.jsx)(c.Z.SelectWithLoad,{isShow:e,isShowLabels:m,uri:r,jsonProp:l,caption:"Chapter:",optionNames:"Chapters",onSelect:this._handlerSelectChapter}),(0,s.jsx)(c.Z.ShowHide,{isShow:_,children:(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:m,caption:"Filter Trade:",options:C,placeholder:"Filter...",onSelect:this._handlerSelectTradeFilter})}),(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:m,caption:"Subheading:",options:F,optionNames:"Meta",isLoading:v,isLoadingFailed:D,placeholder:b,onLoadOption:this._handlerLoadMeta,onSelect:this._handlerSelectTrade}),(0,s.jsx)(c.Z.ShowHide,{isShow:g,children:(0,s.jsx)(c.Z.DatesFragment,{ref:this._refDates,isShowLabels:m,initFromDate:d,initToDate:h,msgOnNotValidFormat:u,onTestDate:p})}),(0,s.jsx)(c.Z.ShowHide,{isShow:f,children:(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:m,caption:"Chart Type:",options:w,onSelect:this._handlerSelectChartType})}),(0,s.jsx)(c.Z.ValidationMessages,{validationMessages:y})]})},e}(l.Component))||a)||a)||a;var D,F=c.Z.Decor,b=c.Z.crMenuMore,y=[{caption:"2021",value:2021},{caption:"2020",value:2020},{caption:"2019",value:2019},{caption:"2018",value:2018},{caption:"2017",value:2017},{caption:"2016",value:2016},{caption:"2015",value:2015},{caption:"2014",value:2014},{caption:"2013",value:2013},{caption:"2012",value:2012}];const L=(0,F.dialog)(D=function(t){function e(e){var o;return(o=t.call(this,e)||this)._handleSelectYear=function(t){o.year=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.msgOnNotSelected,a=t.msgOnNotValidFormat,n=t.isFd,i=[],r=o._refItemMonth.current.getValidation(),s=r.isValid,l=r.msg;return s||(i=i.concat(l)),o.year||i.push(e("Year")),n&&!o._refFromDate.current.isValid()&&i.push(a("From Date")),i.isValid=0===i.length,i},o._createLoadOption=function(){var t=o._refItemMonth.current.getValues(),e=t.one,a=t.two,n=o.props.isFd?o._refFromDate.current.getValue():void 0;return o.props.loadFn(o.props,{item:e,month:a,year:o.year,fromDate:n})},o._handleClose=function(){o._handleWithValidationClose()},o._menuMore=b((0,i.Z)(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o._refItemMonth=(0,l.createRef)(),o._refFromDate=(0,l.createRef)(),o._commandButtons=o._crCommandsWithLoad((0,i.Z)(o)),o.state=(0,n.Z)({},o._isWithInitialState()),o}(0,r.Z)(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.caption,a=t.onShow,n=t.onFront,i=t.futuresURI,r=t.msgOnNotSelected,l=t.isFd,d=t.initFromDate,h=t.isYmdOrEmpty,u=t.errNotYmdOrEmpty,p=this.state,S=p.isToolbar,T=p.isShowLabels,m=p.validationMessages;return(0,s.jsxs)(c.Z.DraggableDialog,{isShow:e,caption:o,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose,children:[(0,s.jsx)(c.Z.Toolbar,{isShow:S,buttons:this.toolbarButtons}),(0,s.jsx)(c.Z.SelectOneTwo,{ref:this._refItemMonth,isShow:e,isShowLabels:T,uri:i,oneCaption:"Futures",oneOptionNames:"Futures",oneJsonProp:"futures",twoCaption:"Month",msgOnNotSelected:r}),(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:T,caption:"Year",options:y,onSelect:this._handleSelectYear}),l&&(0,s.jsx)(c.Z.RowDate,{innerRef:this._refFromDate,isShowLabels:T,title:"From Date:",initialValue:d,errorMsg:u,onTest:h}),(0,s.jsx)(c.Z.ValidationMessages,{validationMessages:m})]})},e}(l.Component))||D;var M,O=c.Z.Decor,I=c.Z.crMenuMore,V=[{caption:"Continuous Contract #1",value:1},{caption:"Continuous Contract #2",value:2},{caption:"Continuous Contract #3",value:3},{caption:"Continuous Contract #4",value:4},{caption:"Continuous Contract #5",value:5}];const Z=(0,O.dialog)(M=function(t){function e(e){var o;return(o=t.call(this,e)||this)._handleSelectType=function(t){o.type=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.msgOnNotSelected,a=t.msgOnNotValidFormat,n=t.isFd,i=[],r=o._refExchangeItem.current.getValidation(),s=r.isValid,l=r.msg;return s||(i=i.concat(l)),o.type||i.push(e("Type")),n&&!o._refFromDate.current.isValid()&&i.push(a("From Date")),i.isValid=0===i.length,i},o._createLoadOption=function(){var t=o._refExchangeItem.current.getValues(),e=t.one,a=t.two,n=o.props.isFd?o._refFromDate.current.getValue():void 0;return o.props.loadFn(o.props,{exchange:e,item:a,type:o.type,fromDate:n})},o._handleClose=function(){o._handleWithValidationClose()},o._menuMore=I((0,i.Z)(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{noDate:!0}),o._refExchangeItem=(0,l.createRef)(),o._refFromDate=(0,l.createRef)(),o._commandButtons=o._crCommandsWithLoad((0,i.Z)(o)),o.state=(0,n.Z)({},o._isWithInitialState()),o}(0,r.Z)(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.caption,a=t.onShow,n=t.onFront,i=t.futuresURI,r=t.msgOnNotSelected,l=t.isFd,d=t.initFromDate,h=t.isYmdOrEmpty,u=t.errNotYmdOrEmpty,p=this.state,S=p.isToolbar,T=p.isShowLabels,m=p.validationMessages;return(0,s.jsxs)(c.Z.DraggableDialog,{isShow:e,caption:o,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose,children:[(0,s.jsx)(c.Z.Toolbar,{isShow:S,buttons:this.toolbarButtons}),(0,s.jsx)(c.Z.SelectOneTwo,{ref:this._refExchangeItem,isShow:e,isShowLabels:T,uri:i,oneCaption:"Exchange",oneOptionNames:"Exchanges",oneJsonProp:"futures",twoCaption:"Asset",msgOnNotSelected:r}),(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:T,caption:"Type",options:V,onSelect:this._handleSelectType}),l&&(0,s.jsx)(c.Z.RowDate,{innerRef:this._refFromDate,isShowLabels:T,title:"From Date:",initialValue:d,errorMsg:u,onTest:h}),(0,s.jsx)(c.Z.ValidationMessages,{validationMessages:m})]})},e}(l.Component))||M;var x,E=c.Z.Decor,R=c.Z.crMenuMore,j=[{caption:"Thousand Barrels per day (kb/d)",value:"KD"},{caption:"Thousand Barrels (kbbl)",value:"KB"},{caption:"Thousand Kilolitres (kl)",value:"KL"},{caption:"Thousand Metric Tons (kmt)",value:"KT"},{caption:"Conversion factor barrels/ktons",value:"BK"}],N=[{caption:"AreaSpline",value:"AREA"},{caption:"Yearly by Month",value:"YEARLY"}];const W={UNCommodityTrade:v,Futures3:L,FuturesWiki:Z,JodiWorldOil:(0,E.dialog)(x=function(t){function e(e){var o;return(o=t.call(this,e)||this)._hSelectCountry=function(t){o.country=t},o._hSelectUnits=function(t){o.units=t},o._hSelectChartType=function(t){o.chartType=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props.msgOnNotSelected,e=[];o.country||e.push(t("Country"));var a=o.productFlow.getValidation(),n=a.isValid,i=a.msg;n||(e=e.concat(i)),o.units||(o.units=j[0]);var r=o.datesFragment.getValidation(),s=r.isValid,l=r.datesMsg;return s||(e=e.concat(l)),e.isValid=0===e.length,e},o._createLoadOption=function(){var t=o.productFlow.getValues(),e=t.one,a=t.two,n=o.datesFragment.getValues(),i=n.fromDate,r=n.toDate,s=o.chartType?o.chartType.value:void 0,l=o.props,d=l.fnValue,c=l.dataColumn,h=l.loadId,u=l.dataSource;return{value:d(o.country.value,e.value,a.value,o.units.value),title:o.country.caption+": "+e.caption,subtitle:a.caption+": "+o.units.caption,fromDate:i,toDate:r,dataColumn:c,seriaType:s,loadId:h,dataSource:u}},o._handleClose=function(){o._handleWithValidationClose()},o._refProductFlow=function(t){return o.productFlow=t},o._refDates=function(t){return o.datesFragment=t},o._menuMore=R((0,i.Z)(o),{toggleToolBar:o._toggleWithToolbar,onAbout:o._clickInfoWithToolbar}),o.toolbarButtons=o._createType2WithToolbar(e,{isShowOptions:!0}),o._commandButtons=o._crCommandsWithLoad((0,i.Z)(o)),o.state=(0,n.Z)({},o._isWithInitialState(),{isShowDate:!1,isShowOptions:!1}),o}(0,r.Z)(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return this.props===t||this.props.isShow!==t.isShow},o.render=function(){var t=this.props,e=t.caption,o=t.isShow,a=t.onShow,n=t.onFront,i=t.oneCaption,r=t.oneURI,l=t.oneJsonProp,d=t.parentCaption,h=t.parentChildURI,u=t.parentJsonProp,p=t.childCaption,S=t.msgOnNotSelected,T=t.initFromDate,m=t.initToDate,_=t.msgOnNotValidFormat,g=t.onTestDate,f=this.state,C=f.isToolbar,w=f.isShowLabels,v=f.isShowDate,D=f.isShowOptions,F=f.validationMessages;return(0,s.jsxs)(c.Z.DraggableDialog,{isShow:o,caption:e,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose,children:[(0,s.jsx)(c.Z.Toolbar,{isShow:C,buttons:this.toolbarButtons}),(0,s.jsx)(c.Z.SelectWithLoad,{isShow:o,isShowLabels:w,uri:r,jsonProp:l,caption:i,optionNames:"Items",onSelect:this._hSelectCountry}),(0,s.jsx)(c.Z.SelectOneTwo,{ref:this._refProductFlow,isShow:o,isShowLabels:w,uri:h,oneCaption:d,oneJsonProp:u,twoCaption:p,msgOnNotSelected:S}),(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:w,caption:"Units",options:j,onSelect:this._hSelectUnits}),(0,s.jsx)(c.Z.ShowHide,{isShow:v,children:(0,s.jsx)(c.Z.DatesFragment,{ref:this._refDates,isShowLabels:w,initFromDate:T,initToDate:m,msgOnNotValidFormat:_,onTestDate:g})}),(0,s.jsx)(c.Z.ShowHide,{isShow:D,children:(0,s.jsx)(c.Z.RowInputSelect,{isShowLabels:w,caption:"Chart Type",placeholder:"Default: AreaSpline",options:N,onSelect:this._hSelectChartType})}),(0,s.jsx)(c.Z.ValidationMessages,{validationMessages:F})]})},e}(l.Component))||x}}}]);
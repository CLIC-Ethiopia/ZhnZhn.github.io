(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var r=n(7154),o=n.n(r),i=n(5893),s=n(9679),a=n(795),l=n(8685),c=n(1506),u=n.n(c),f=n(5354),d=n.n(f),p=n(6462),g=n(2038),x={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2a",dfProps:{},isProxy:!0}};const m=function(e){return function(){var t=e.rootUrl,n=e.id,r=e.proxy,i=e.bT,s=e.lT,a=e.dU,l=e.noTime,c=e.dS,u=function(e){var t=e.rootUrl,n=e.id,r=e.proxy,o=t+"/"+n;return r?""+r+o:o}(e),f=Object.assign({},x,o()({type:i+"_"+n},function(e){var t=e.text||"",n=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+n}}(e)));Object.assign(f.dialogProps,{loadId:s,descrUrl:a,dataSource:c,dfProps:{metaUrl:u,baseMeta:t,dfId:n,proxy:r,noTime:l}}),g.Z.showDialog(i+"_"+n,i,f)}};var h=function(e,t){return e.text<t.text?-1:e.text>t.text?1:0};const v=function(e,t){return fetch(t?t+e:e,{cache:"default"}).then((function(e){return e.json()})).then((function(e){return Array.isArray(e)&&e.sort(h),e}))};var C=n(2306);const y={MSG_ERR:{paddingLeft:"12px",color:"#f44336",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px"},TITLE:{position:"relative",color:"silver",paddingLeft:"32px",paddingTop:"8px",paddingBottom:"4px",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",cursor:"pointer"},TITLE_ARROW:{position:"absolute",top:"8px",left:"16px"},ITEM_L:{color:"#1b2836",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",paddingLeft:"12px",cursor:"pointer"},ITEM_T:{color:"black",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",cursor:"pointer"}};var P="menu-item";const b=function(e){var t=e.innerRef,n=e.title,r=e.onClick;return(0,i.jsxs)("div",{ref:t,className:P,style:y.TITLE,role:"menuitem",tabIndex:"0",onClick:r,onKeyDown:function(e){(0,C.Z)(e)&&(e.preventDefault(),r())},children:[n,(0,i.jsx)("span",{style:y.TITLE_ARROW,children:"<"})]})};var _=n(2554),T="menu-item";const I=function(e){var t=e.innerRef,n=e.item,r=e.onClick,o=n.text,a="l"===n.type?y.ITEM_L:y.ITEM_T,l=(0,s.useCallback)((function(e){(0,C.Z)(e)&&(e.preventDefault(),r())}),[r]);return(0,i.jsx)("div",{ref:t,className:T,style:a,tabIndex:"0",role:"menuitem",onClick:r,onKeyDown:l,children:o})};const R=(0,s.memo)((function(e){var t=e.refFirstItem,n=e.model,r=void 0===n?[]:n,o=e.fOnClickItem;return(0,i.jsx)("div",{children:r.map((function(e,n){return(0,i.jsx)(I,{innerRef:0===n?t:void 0,item:e,onClick:o(e)},e.id)}))})}));const k=function(e){var t=e.errMsg;return t?(0,i.jsx)("div",{style:y.MSG_ERR,children:t}):null};const S=function(e){var t=e.refFirstItem,n=e.model,r=e.fOnClickItem,o=e.errMsg;return(0,i.jsxs)(i.Fragment,{children:[!(n||o)&&(0,i.jsx)(_.Z,{}),(0,i.jsx)(R,{refFirstItem:t,model:n,fOnClickItem:r}),(0,i.jsx)(k,{errMsg:o})]})};var j=Array.isArray,M=function(e,t,n,r,i,s,a){var l=a.text,c=a.id;return"l"===a.type?i.bind(null,t+"/"+c,l,r):s(o()({id:t+"/"+c},n,{text:l,proxy:e}))};const A=function(e){var t=e.style,n=e.store,r=e.title,o=e.id,a=void 0===o?"":o,l=e.dfProps,c=void 0===l?{}:l,u=e.pageNumber,f=e.pageCurrent,d=e.onClickPrev,p=e.onClickNext,g=e.fOnClickItem,x=e.loadItems,m=(0,s.useRef)(),h=(0,s.useRef)(),v=(0,s.useState)({}),C=v[0],y=v[1],P=C.model,_=C.errMsg,T=function(e,t){return e.getProxy(t.lT)}(n,c),I=(0,s.useCallback)(M.bind(null,T,a,c,u,p,g),[T]),R=r&&d,k=u===f&&(R||!R&&P);return(0,s.useEffect)((function(){return r&&x(c.rootUrl+"/"+a,T).then((function(e){var t=j(e)?{model:e}:{errMsg:"Response is not array"};y(t)})).catch((function(e){return y({errMsg:e.message})})),function(){clearTimeout(h.current),m.current=null}}),[]),(0,s.useEffect)((function(){k&&(clearTimeout(h.current),h.current=setTimeout((function(){var e=m.current;e&&e.focus()}),1e3))}),[k]),(0,i.jsxs)("div",{style:t,children:[R&&(0,i.jsx)(b,{innerRef:m,title:r,onClick:d.bind(null,u)}),(0,i.jsx)(S,{refFirstItem:R?void 0:m,model:P,fOnClickItem:I,errMsg:_})]})};const E=function(e){var t=e.pages,n=e.pageCurrent;return t.map((function(e,t){return(0,s.cloneElement)(e,{pageCurrent:n,pageNumber:t+1})}))};var w={ROOT:{width:300,overflow:"hidden"},PAGES:{width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},PAGE:{width:300}},O=function(e){var t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)};const N=function(e){function t(t){var n;return(n=e.call(this,t)||this).hPrevPage=function(e){n.setState((function(t){var r=t.pageCurrent;return 0===r||r!==e?null:(n._direction=-1,{pageCurrent:e-1})}))},n._addPage=function(e,t,r){var o=n.props,s=o.dfProps,a=o.store;e.push((0,i.jsx)(A,{id:t,style:w.PAGE,store:a,title:r,dfProps:s,onClickPrev:n.hPrevPage,onClickNext:n.hNextPage,loadItems:v,fOnClickItem:m},t))},n.hNextPage=function(e,t,r){n.setState((function(o){var i=o.pageCurrent,s=o.pages;return r!==i?null:(r<s.length?s[r]&&s[r].key!==e&&(r>0?s.splice(r):s=[],n._addPage(s,e,t)):n._addPage(s,e,t),n._direction=1,{pages:s,pageCurrent:r+1})}))},n._crTransform=function(){var e="0",t=n._refMenu.current;if(0!==n._direction&&t){var r=O(t);e=1===n._direction?r-300:r+300,n._direction=0}else 0===n._direction&&t&&(e=O(t));return{transform:"translateX("+e+"px)"}},n.hNextPage=(0,p.Z)(n.hNextPage.bind(u()(n))),n.hPrevPage=(0,p.Z)(n.hPrevPage.bind(u()(n))),n._refMenu=(0,s.createRef)(),n._direction=0,n._fOnClickItem=function(e){var t=e.id,r=e.text;return n.hNextPage.bind(null,t,r,0)},n.state={pageCurrent:0,pages:[]},n}return d()(t,e),t.prototype.render=function(){var e=this.props,t=e.dfProps,n=e.store,r=this.state,s=r.pages,a=r.pageCurrent,l=this._crTransform(),c=o()({},w.PAGES,l);return(0,i.jsx)("div",{style:w.ROOT,children:(0,i.jsxs)("div",{ref:this._refMenu,style:c,children:[(0,i.jsx)(A,{style:w.PAGE,title:"Main Menu",store:n,dfProps:t,pageCurrent:a,pageNumber:0,onClickNext:this.hNextPage,loadItems:v,fOnClickItem:m}),(0,i.jsx)(E,{pages:s,pageCurrent:a})]})})},t}(s.Component);var L={BROWSER:{paddingRight:0},SCROLL_PANE:{height:"92%"}};const F=(0,s.memo)((function(e){var t=e.isInitShow,n=e.caption,r=e.store,c=e.browserType,u=e.showAction,f=(0,s.useState)(!!t),d=f[0],p=f[1],g=(0,s.useCallback)((function(){p(!1)}),[]);return(0,a.Z)(r,(function(e,t){e===u&&t===c&&p(!0)})),(0,i.jsxs)(l.Z.Browser,{isShow:d,style:L.BROWSER,children:[(0,i.jsx)(l.Z.BrowserCaption,{caption:n,onClose:g}),(0,i.jsx)(l.Z.ScrollPane,{className:"scroll-container-y",style:L.SCROLL_PANE,children:(0,i.jsx)(N,o()({},e))})]})}))}}]);
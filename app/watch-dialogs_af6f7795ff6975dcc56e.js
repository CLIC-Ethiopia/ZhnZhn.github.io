(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[437],{3662:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>Ct});var n,s,i,a=o(7154),r=o.n(a),l=o(5354),p=o.n(l),u=o(5893),c=o(9679),h=o(1398),d=o(7020),m=o(9761),g=o(3014),C=o(6485),f=o(5138),v=o(377),T=o(2276),_=o(8806),x=h.Z.getFromDate,S=h.Z.getToDate,y=h.Z.isYmd,M=h.Z.mlsToDmy,j={DIALOG:{width:365},DIALOG_SHORT:{width:265},ITEM_TEXT:{display:"inline-block",maxWidth:250,height:32,verticalAlign:"middle",textOverflow:"ellipsis",overflow:"hidden"}};const O=(0,_.Z.dialog)((i=s=function(t){function e(e){var o;(o=t.call(this,e)||this)._handleLoad=function(){var t=o._createValidationMessages();if(t.isValid){var e=o.props,n=e.data,s=e.onClose,i=n.id,a=n.title,l=n.subtitle,p=n.caption,u=n.columnName,c=n.dataColumn,h=n.seriaColumnNames,d=n.itemConf,f=void 0===d?{}:d,v=o.datesFragment.getValues(),T=v.fromDate,_=v.toDate,x=r()({id:i,title:a,subtitle:l,value:p,item:p,fromDate:T,toDate:_,columnName:u,dataColumn:c,seriaColumnNames:h,loadId:f.loadId||g.L2.WL},f);m.Z.loadStock({chartType:C.Z.WATCH_LIST,browserType:g.Aq.WATCH_LIST},x),s()}o._updateValidationMessages(t)},o._createValidationMessages=function(){var t=[],e=o.datesFragment.getValidation(),n=e.isValid,s=e.datesMsg;return n||(t=t.concat(s)),t.isValid=0===t.length,t},o._handleClose=function(){o._handleWithValidationClose(o._createValidationMessages),o.props.onClose()},o._refDates=function(t){return o.datesFragment=t};var n=e.data,s=n.fromDate,i=n.initToDate,a=n.onTestDate,l=n.itemConf,p=!!(void 0===l?{}:l).x;return o.toolbarButtons=o._createType2WithToolbar(e,{isValue:p}),o._commandButtons=[(0,u.jsx)(v.Z.Button.Load,{onClick:o._handleLoad},"load")],o.state=r()({},o._isWithInitialState(),{isShowDate:!1,isValue:p,initFromDate:s||x(2),initToDate:i||S(),onTestDate:a||y}),o}p()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return t===this.props||t.isShow!==this.props.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.data,n=o.caption,s=o.itemConf,i=void 0===s?{}:s,a=i.dataSource,r=i.x,l=i.y,p=this.state,c=p.isShowLabels,h=p.isShowDate,m=p.isValue,g=p.initFromDate,C=p.initToDate,_=p.onTestDate,x=p.validationMessages,S=c?j.DIALOG:j.DIALOG_SHORT,y=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),((0,d.Z)(e)+" "+M(t)).trim()}(r,l);return(0,u.jsxs)(f.Z,{style:S,isShow:e,caption:"Load Item",commandButtons:this._commandButtons,onClose:this._handleClose,children:[(0,u.jsx)(v.Z.Toolbar,{isShow:!0,buttons:this.toolbarButtons}),(0,u.jsx)(v.Z.Row.Text,{isShowLabels:c,styleText:j.ITEM_TEXT,caption:"Item:",text:n}),(0,u.jsx)(v.Z.ShowHide,{isShow:m,children:(0,u.jsx)(v.Z.Row.Text,{isShowLabels:c,styleText:j.ITEM_TEXT,caption:"Value:",text:y})}),(0,u.jsx)(v.Z.ShowHide,{isShow:h,children:(0,u.jsx)(v.Z.DatesFragment,{ref:this._refDates,isShowLabels:c,initFromDate:g,initToDate:C,onTestDate:_})}),(0,u.jsx)(v.Z.Row.Text,{isShowLabels:c,styleText:j.ITEM_TEXT,caption:"Source:",text:a}),(0,u.jsx)(T.Z,{validationMessages:x})]})},e}(c.Component),s.defaultProps={data:{}},n=i))||n;var G=o(3218),D=o(2125),w=o(8580),L=o(2302),I=o(5313),A=o(7376),E={ROW:r()({},A.Z.ROW,{lineHeight:2}),CAPTION:r()({},A.Z.CAPTION,{width:120}),INPUT_TEXT:{width:250,height:30,paddingLeft:10,marginLeft:0,marginRight:0}};const Z=(0,c.forwardRef)((function(t,e){var o=t.caption;return(0,u.jsxs)("div",{style:E.ROW,children:[(0,u.jsx)("span",{style:E.CAPTION,children:o}),(0,u.jsx)(I.Z,{ref:e,style:E.INPUT_TEXT})]})}));var R=o(4298),b={CAPTION:r()({},A.Z.CAPTION,{width:120})};const N=function(t){var e=t.caption,o=t.options,n=t.onSelect;return(0,u.jsxs)("div",{style:A.Z.ROW,children:[(0,u.jsx)("span",{style:b.CAPTION,children:e}),(0,u.jsx)(R.Z,{width:"250",options:o,onSelect:n})]})};const W=function(t){function e(e){var o;return(o=t.call(this)||this)._handleSelectGroup=function(t){t&&t.caption?(o.groupCaption=t.caption,t.lists?o.setState({listOptions:t.lists}):o.setState({listOptions:[]})):o.groupCaption=null},o._handleSelectList=function(t){o.listCaption=t&&t.caption||null},o.groupCaption=null,o.listCaption=null,o.state={listOptions:[]},o}p()(e,t);var o=e.prototype;return o.UNSAFE_componentWillReceiveProps=function(t){if(t!==this.props)if(t.groupOptions!==this.props.groupOptions)this.groupCaption=null,this.listCaption=null,this.setState({listOptions:[]});else if(this.groupCaption){var e=this.props.store.getWatchListsByGroup(this.groupCaption);e!==this.state.listOptions&&(this.listCaption=null),this.setState({listOptions:e})}},o.render=function(){var t=this.props,e=t.groupCaption,o=t.groupOptions,n=t.listCaption,s=this.state.listOptions;return(0,u.jsxs)("div",{children:[(0,u.jsx)(N,{caption:e,options:o,onSelect:this._handleSelectGroup}),(0,u.jsx)(N,{caption:n,options:s,onSelect:this._handleSelectList})]})},o.getValue=function(){return{captionGroup:this.groupCaption,captionList:this.listCaption}},o.setValueNull=function(){this.groupCaption=null,this.listCaption=null},e}(c.Component);var B=o(481);const V={COMMAND_DIV:{cursor:"default",float:"right",marginTop:"8px",marginBottom:"10px",marginRight:"4px"}};const F=function(t){var e=t.Primary,o=t.withoutClear,n=t.onClear,s=t.onClose;return(0,u.jsxs)("div",{style:V.COMMAND_DIV,children:[e,!o&&(0,u.jsx)(B.Z.Clear,{onClick:n}),(0,u.jsx)(B.Z.Close,{onClick:s})]})};const P={RowInputText:Z,RowInputSelect:N,FragmentSelectGroupList:W,Button:B.Z,RowButtons:F,ValidationMessages:T.Z};const k=function(t){function e(e){var o;return(o=t.call(this)||this)._onStore=function(t,e){var n=o.props,s=n.actionCompleted,i=n.actionFailed,a=n.forActionType;t===s&&e.forActionType===a?o._handleClear():t===i&&e.forActionType===a&&o.setState({validationMessages:e.messages})},o._handleClear=function(){o.inputText.setValue(""),o.state.validationMessages.length>0&&o.setState({validationMessages:[]})},o._handleCreate=function(){var t=o.props,e=t.onCreate,n=t.msgOnIsEmptyName,s=o.inputText.getValue();s?e({caption:s}):(o.inputText.setValue(""),o.setState({validationMessages:[n("Group")]}))},o._primaryBt=(0,u.jsx)(P.Button.Primary,{caption:"Create",title:"Create New Group",onClick:o._handleCreate}),o.state={validationMessages:[]},o}p()(e,t);var o=e.prototype;return o.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},o.componentWillUnmount=function(){this.unsubscribe()},o.render=function(){var t=this,e=this.props.onClose,o=this.state.validationMessages;return(0,u.jsxs)("div",{children:[(0,u.jsx)(P.RowInputText,{ref:function(e){return t.inputText=e},caption:"Group:"}),(0,u.jsx)(P.ValidationMessages,{validationMessages:o}),(0,u.jsx)(P.RowButtons,{Primary:this._primaryBt,onClear:this._handleClear,onClose:e})]})},e}(c.Component);const U=function(t){function e(e){var o;return(o=t.call(this)||this)._onStore=function(t,e){var n=o.props,s=n.actionCompleted,i=n.actionFailed,a=n.forActionType,r=n.store;t===s?(e.forActionType===a&&o._handleClear(),o.setState({groupOptions:r.getWatchGroups()})):t===i&&e.forActionType===a&&o.setState({validationMessages:e.messages})},o._handleSelectGroup=function(t){o.captionFrom=t&&t.caption||null},o._handleClear=function(){o.inputText.setValue(""),o.state.validationMessages.length>0&&o.setState({validationMessages:[]})},o._handleRename=function(){var t=o.props,e=t.onRename,n=t.msgOnNotSelect,s=t.msgOnIsEmptyName,i=o.inputText.getValue();if(i&&o.captionFrom)e({captionFrom:o.captionFrom,captionTo:i});else{var a=[];o.captionFrom||a.push(n("Group From")),i||a.push(s("Group To")),o.setState({validationMessages:a})}},o._refInputText=function(t){return o.inputText=t},o.captionFrom=null,o._primaryBt=(0,u.jsx)(P.Button.Primary,{caption:"Edit",title:"Edit Group Name",onClick:o._handleRename}),o.state={groupOptions:e.store.getWatchGroups(),validationMessages:[]},o}p()(e,t);var o=e.prototype;return o.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},o.componentWillUnmount=function(){this.unsubscribe()},o.render=function(){var t=this.props.onClose,e=this.state,o=e.groupOptions,n=e.validationMessages;return(0,u.jsxs)("div",{children:[(0,u.jsx)(P.RowInputSelect,{caption:"Group From:",options:o,onSelect:this._handleSelectGroup}),(0,u.jsx)(P.RowInputText,{ref:this._refInputText,caption:"Group To:"}),(0,u.jsx)(P.ValidationMessages,{validationMessages:n}),(0,u.jsx)(P.RowButtons,{Primary:this._primaryBt,onClear:this._handleClear,onClose:t})]})},e}(c.Component);const H=function(t){function e(e){var o;return(o=t.call(this)||this)._onStore=function(t,e){var n=o.props,s=n.actionCompleted,i=n.forActionType,a=n.store;t===s&&(e.forActionType===i&&o._handleClear(),o.setState({groupOptions:a.getWatchGroups()}))},o._handleSelectGroup=function(t){o.caption=t&&t.caption||null},o._handleClear=function(){o.state.validationMessages.length>0&&o.setState({validationMessages:[]})},o._handleDeleteGroup=function(){var t=o.props,e=t.onDelete,n=t.msgOnNotSelect;o.caption?e({caption:o.caption}):o.setState({validationMessages:[n("Group")]})},o.caption=null,o._primaryBt=(0,u.jsx)(P.Button.Primary,{caption:"Delete",title:"Delete Group",onClick:o._handleDeleteGroup}),o.state={groupOptions:e.store.getWatchGroups(),validationMessages:[]},o}p()(e,t);var o=e.prototype;return o.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},o.componentWillUnmount=function(){this.unsubscribe()},o.render=function(){var t=this.props.onClose,e=this.state,o=e.groupOptions,n=e.validationMessages;return(0,u.jsxs)("div",{children:[(0,u.jsx)(P.RowInputSelect,{caption:"Group:",options:o,onSelect:this._handleSelectGroup}),(0,u.jsx)(P.ValidationMessages,{validationMessages:n}),(0,u.jsx)(P.RowButtons,{Primary:this._primaryBt,withoutClear:!0,onClose:t})]})},e}(c.Component);var J=G.Z.addGroup,X=G.Z.renameGroup,q=G.Z.deleteGroup,Y=G.J.EDIT_WATCH_COMPLETED,z=G.J.EDIT_WATCH_FAILED,K=G.J.ADD_GROUP,Q=G.J.RENAME_GROUP,$=G.J.DELETE_GROUP,tt=D.Z.notSelected,et=D.Z.emptyName;const ot=function(t){function e(){return t.apply(this,arguments)||this}p()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return t===this.props||t.isShow!==this.props.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.store,n=t.onClose;return(0,u.jsx)(f.Z,{caption:"Watch Groups Edit",isShow:e,isWithButton:!1,onClose:n,children:(0,u.jsxs)(w.Z,{width:380,children:[(0,u.jsx)(L.Z,{title:"Create",children:(0,u.jsx)(k,{store:o,actionCompleted:Y,actionFailed:z,forActionType:K,msgOnIsEmptyName:et,onCreate:J,onClose:n})}),(0,u.jsx)(L.Z,{title:"Rename",children:(0,u.jsx)(U,{store:o,actionCompleted:Y,actionFailed:z,forActionType:Q,msgOnNotSelect:tt,msgOnIsEmptyName:et,onRename:X,onClose:n})}),(0,u.jsx)(L.Z,{title:"Delete",children:(0,u.jsx)(H,{store:o,actionCompleted:Y,forActionType:$,msgOnNotSelect:tt,onDelete:q,onClose:n})})]})})},e}(c.Component);const nt=function(t){function e(e){var o;return(o=t.call(this)||this)._onStore=function(t,e){var n=o.props,s=n.actionCompleted,i=n.actionFailed,a=n.forActionType,r=n.store;t===s?(e.forActionType===a&&o._handleClear(),o.setState({groupOptions:r.getWatchGroups()})):t===i&&e.forActionType===a&&o.setState({validationMessages:e.messages})},o._handleSelectGroup=function(t){o.captionGroup=t&&t.caption||null},o._handleClear=function(){o.inputText.setValue(""),o.state.validationMessages.length>0&&o.setState({validationMessages:[]})},o._handleCreate=function(){var t=o.props,e=t.onCreate,n=t.msgOnNotSelect,s=t.msgOnIsEmptyName,i=o.inputText.getValue();if(o.captionGroup&&i)e({captionGroup:o.captionGroup,captionList:i});else{var a=[];o.captionGroup||a.push(n("In Group")),i||a.push(s("List")),o.setState({validationMessages:a})}},o._refInputText=function(t){return o.inputText=t},o.captionGroup=null,o._primaryBt=(0,u.jsx)(P.Button.Primary,{caption:"Create",title:"Create New List",onClick:o._handleCreate}),o.state={groupOptions:e.store.getWatchGroups(),validationMessages:[]},o}p()(e,t);var o=e.prototype;return o.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},o.componentWillUnmount=function(){this.unsubscribe()},o.render=function(){var t=this.props.onClose,e=this.state,o=e.groupOptions,n=e.validationMessages;return(0,u.jsxs)("div",{children:[(0,u.jsx)(P.RowInputSelect,{caption:"In Group:",options:o,onSelect:this._handleSelectGroup}),(0,u.jsx)(P.RowInputText,{ref:this._refInputText,caption:"List:"}),(0,u.jsx)(P.ValidationMessages,{validationMessages:n}),(0,u.jsx)(P.RowButtons,{Primary:this._primaryBt,onClear:this._handleClear,onClose:t})]})},e}(c.Component);const st=function(t){function e(e){var o;return(o=t.call(this)||this)._onStore=function(t,e){var n=o.props,s=n.actionCompleted,i=n.actionFailed,a=n.forActionType,r=n.store;t===s?(e.forActionType===a&&o._handleClear(),o.setState({groupOptions:r.getWatchGroups()})):t===i&&e.forActionType===a&&o.setState({validationMessages:e.messages})},o._handleClear=function(){o.inputText.setValue(""),o.state.validationMessages.length>0&&o.setState({validationMessages:[]})},o._handleRename=function(){var t=o.props,e=t.onRename,n=t.msgOnIsEmptyName,s=t.msgOnNotSelect,i=o.selectGroupList.getValue(),a=i.captionGroup,r=i.captionList,l=o.inputText.getValue();if(a&&r&&l)e({captionGroup:a,captionListFrom:r,captionListTo:l});else{var p=[];a||p.push(s("Group")),r||p.push(s("List From")),l||p.push(n("List To")),o.setState({validationMessages:p})}},o._primaryBt=(0,u.jsx)(P.Button.Primary,{caption:"Edit",title:"Edit List Name",onClick:o._handleRename}),o.state={groupOptions:e.store.getWatchGroups(),listOptions:[],validationMessages:[]},o}p()(e,t);var o=e.prototype;return o.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},o.componentWillUnmount=function(){this.unsubscribe()},o.render=function(){var t=this,e=this.props,o=e.store,n=e.onClose,s=this.state,i=s.groupOptions,a=s.validationMessages;return(0,u.jsxs)("div",{children:[(0,u.jsx)(P.FragmentSelectGroupList,{ref:function(e){return t.selectGroupList=e},store:o,groupCaption:"In Group:",groupOptions:i,listCaption:"List From:"}),(0,u.jsx)(P.RowInputText,{ref:function(e){return t.inputText=e},caption:"List To:"}),(0,u.jsx)(P.ValidationMessages,{validationMessages:a}),(0,u.jsx)(P.RowButtons,{Primary:this._primaryBt,onClear:this._handleClear,onClose:n})]})},e}(c.Component);const it=function(t){function e(e){var o;return(o=t.call(this)||this)._onStore=function(t,e){var n=o.props,s=n.actionCompleted,i=n.forActionType,a=n.store;t===s&&(e.forActionType===i&&o._handleClear(),o.setState({groupOptions:a.getWatchGroups()}))},o._handleClear=function(){o.state.validationMessages.length>0&&o.setState({validationMessages:[]})},o._handleDelete=function(){var t=o.props,e=t.onDelete,n=t.msgOnNotSelect,s=o.selectGroupList.getValue(),i=s.captionGroup,a=s.captionList;if(i&&a)e({captionGroup:i,captionList:a});else{var r=[];i||r.push(n("Group")),a||r.push(n("List")),o.setState({validationMessages:r})}},o._primaryBt=(0,u.jsx)(P.Button.Primary,{caption:"Delete",title:"Delete List",onClick:o._handleDelete}),o.state={groupOptions:e.store.getWatchGroups(),validationMessages:[]},o}p()(e,t);var o=e.prototype;return o.componentDidMount=function(){this.unsubscribe=this.props.store.listen(this._onStore)},o.componentWillUnmount=function(){this.unsubscribe()},o.render=function(){var t=this,e=this.props,o=e.store,n=e.onClose,s=this.state,i=s.groupOptions,a=s.validationMessages;return(0,u.jsxs)("div",{children:[(0,u.jsx)(P.FragmentSelectGroupList,{ref:function(e){return t.selectGroupList=e},store:o,groupCaption:"In Group:",groupOptions:i,listCaption:"List:"}),(0,u.jsx)(P.ValidationMessages,{validationMessages:a}),(0,u.jsx)(P.RowButtons,{Primary:this._primaryBt,onClear:this._handleClear,onClose:n})]})},e}(c.Component);var at=G.Z.createList,rt=G.Z.renameList,lt=G.Z.deleteList,pt=G.J.EDIT_WATCH_COMPLETED,ut=G.J.EDIT_WATCH_FAILED,ct=G.J.CREATE_LIST,ht=G.J.RENAME_LIST,dt=G.J.DELETE_LIST,mt=D.Z.notSelected,gt=D.Z.emptyName;const Ct={LoadItem:O,EditGroup:ot,EditList:function(t){function e(){return t.apply(this,arguments)||this}p()(e,t);var o=e.prototype;return o.shouldComponentUpdate=function(t,e){return t===this.props||t.isShow!==this.props.isShow},o.render=function(){var t=this.props,e=t.isShow,o=t.store,n=t.onClose;return(0,u.jsx)(f.Z,{caption:"Watch Lists Edit",isShow:e,isWithButton:!1,onClose:n,children:(0,u.jsxs)(w.Z,{width:380,children:[(0,u.jsx)(L.Z,{title:"Create",children:(0,u.jsx)(nt,{store:o,actionCompleted:pt,actionFailed:ut,forActionType:ct,msgOnNotSelect:mt,msgOnIsEmptyName:gt,onCreate:at,onClose:n})}),(0,u.jsx)(L.Z,{title:"Rename",children:(0,u.jsx)(st,{store:o,actionCompleted:pt,actionFailed:ut,forActionType:ht,msgOnNotSelect:mt,msgOnIsEmptyName:gt,onRename:rt,onClose:n})}),(0,u.jsx)(L.Z,{title:"Delete",children:(0,u.jsx)(it,{store:o,actionCompleted:pt,actionFailed:ut,forActionType:dt,msgOnNotSelect:mt,onDelete:lt,onClose:n})})]})})},e}(c.Component)}}}]);
webpackJsonp([3],{369:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(404),i=a(n),l=o(405),s=a(l),r=o(406),u=a(r),d=o(407),c=a(d),p={Eurostat:i.default,Eurostat2:s.default,Eurostat3:u.default,StatN:c.default};e.default=p},378:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(78),n=function(t){return t&&t.__esModule?t:{default:t}}(a),i=o(8),l={T2:"t2",T3:"t3",T3A:"t3a",T3A2:"t3a2",T4:"t4"},s={A:"AREA",A_Y:"AREA_YEARLY",M:"MAP",C:"COLUMN",C_C:"COLUMN_CLUSTER",C_2:"COLUMN_BY_2",B:"BAR",B_C:"BAR_CLUSTER",B_2:"BAR_BY_2",TM:"TREE_MAP",TM_C:"TREE_MAP_CLUSTER",TM_2:"TREE_MAP_2",TM_2_C:"TREE_MAP_2_CLUSTER"},r={EMPTY:""},u=function(){return[{caption:"Default: Area",value:s.A},{caption:"Map: All Countries",value:s.M,compType:i.CompItemType.EUROSTAT_MAP},{caption:"Column: All Countries",value:s.C},{caption:"Bar: All Countries",value:s.B}]},d=function(){return[{caption:"Default: Area",value:s.A},{caption:"Yearly by Months",value:s.A_Y}]},c=function(t){return[{caption:"Default: Spline",value:s.A},{caption:"Column: By "+t,value:s.C,dim:t},{caption:"Column: By "+t+": Cluster",value:s.C_C,dim:t},{caption:"Bar: By "+t,value:s.B,dim:t},{caption:"Bar: By "+t+": Cluster",value:s.B_C,dim:t}]},p=function(t){return[].concat((0,n.default)(c(t)),[{caption:"TreeMap: By "+t,value:s.TM,dim:t},{caption:"TreeMap: By "+t+": Cluster",value:s.TM_C,dim:t}])},f=function(t){return[].concat((0,n.default)(p(t)),[{caption:"TreeMap: By "+t+": Depth 2",value:s.TM_2,dim:t},{caption:"TreeMap: By "+t+": Depth 2: Cluster",value:s.TM_2_C,dim:t}])},h=function(t,e){return[].concat((0,n.default)(c(t)),[{caption:"Column: By "+e,value:s.C_2,dim:e},{caption:"Bar: By "+e,value:s.B_2,dim:e}])},_=[s.M,s.C,s.C_C,s.C_2,s.B,s.B_C,s.B_2,s.TM,s.TM_C,s.TM_2,s.TM_2_C],m=function(t){var e=t.dims,o=t.oneCaption,a=void 0===o?r.EMPTY:o,n=t.twoCaption,i=void 0===n?r.EMPTY:n;return Array.isArray(e)?e.map(function(t){return t.c||r.EMPTY}):[a,i]},S={crOptions:function(t){var e=t.chartsType,o=m(t);switch(e){case l.T2:return d();case l.T3:return c(o[0]);case l.T3A:return p(o[0]);case l.T3A2:return f(o[0]);case l.T4:return h(o[0],o[1]);default:return u()}},isCategory:function(t){return!!t&&-1!==_.indexOf(t.value)}};e.default=S},404:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n,i,l,s,r,u=o(1),d=a(u),c=o(2),p=a(c),f=o(3),h=a(f),_=o(4),m=a(_),S=o(0),C=a(S),v=o(15),g=a(v),w=o(28),M=a(w),T=(n=M.default.withToolbar,i=M.default.withValidationLoad,n(l=i((r=s=function(t){function e(t){(0,d.default)(this,e);var o=(0,h.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o._handleSelectOne=function(t){o.one=t},o._handleSelectTwo=function(t){o.two=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.oneCaption,a=t.twoCaption,n=[];return o.one||n.push(o.props.msgOnNotSelected(e)),o.two||n.push(o.props.msgOnNotSelected(a)),n.isValid=0===n.length,n},o._createLoadOption=function(){return o.props.loadFn(o.props,{one:o.one,two:o.two})},o._handleClose=function(){o._handleWithValidationClose(o._createValidationMessages),o.props.onClose()},o.one=void 0,o.two=void 0,o.toolbarButtons=[{caption:"I",onClick:o._clickInfoWithToolbar.bind(o)}],o._commandButtons=[C.default.createElement(g.default.Button.Load,{onClick:o._handleLoad})],o.state={validationMessages:[]},o}return(0,m.default)(e,t),(0,p.default)(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.props===t||this.props.isShow!==t.isShow}},{key:"render",value:function(){var t=this.props,e=t.caption,o=t.isShow,a=t.onShow,n=t.onFront,i=t.oneCaption,l=t.oneURI,s=t.oneJsonProp,r=t.twoCaption,u=t.twoURI,d=t.twoJsonProp,c=this.state.validationMessages;return C.default.createElement(g.default.DraggableDialog,{caption:e,isShow:o,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose},C.default.createElement(g.default.ToolbarButtonCircle,{buttons:this.toolbarButtons}),C.default.createElement(g.default.SelectWithLoad,{isShow:o,uri:l,jsonProp:s,caption:i,optionNames:"Items",onSelect:this._handleSelectOne}),C.default.createElement(g.default.SelectWithLoad,{isShow:o,uri:u,jsonProp:d,caption:r,optionNames:"Items",onSelect:this._handleSelectTwo}),C.default.createElement(g.default.ValidationMessages,{validationMessages:c}))}}]),e}(S.Component),s.defaultProps={oneCaption:"Item",oneJsonProp:"items",twoCaption:"Metric",twoJsonProp:"metrics"},l=r))||l)||l);e.default=T},405:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n,i,l,s,r,u=o(1),d=a(u),c=o(2),p=a(c),f=o(3),h=a(f),_=o(4),m=a(_),S=o(0),C=a(S),v=o(21),g=a(v),w=o(15),M=a(w),T=o(28),y=a(T),O=o(378),E=a(O),D="Before Select Metric",L="M",B=(n=y.default.withToolbar,i=y.default.withValidationLoad,n(l=i((r=s=function(t){function e(t){(0,d.default)(this,e);var o=(0,h.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o._isCategory=function(){return E.default.isCategory(o.chartType)},o._updateForDate=function(){o.date=null;var t=o.two?o.props.mapFrequency?o.props.mapFrequency:o.two.mapFrequency?o.two.mapFrequency:L:null,e=o.props.mapDateDf,a=t?g.default.createEurostatSelect(t,e):{dateDefault:D,options:[]};o.setState({isShowDate:!0,dateDefault:a.dateDefault,dateOptions:a.options})},o._handleSelectOne=function(t){o.one=t},o._handleSelectTwo=function(t){o.two=t,o._isCategory()&&o._updateForDate()},o._handleSelectChartType=function(t){o.chartType=t,o._isCategory()?o._updateForDate():o.setState({isShowDate:!1})},o._handleSelectDate=function(t){o.date=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props,e=t.oneCaption,a=t.twoCaption,n=[];return o._isCategory()||o.one||n.push(o.props.msgOnNotSelected(e)),o.two||n.push(o.props.msgOnNotSelected(a)),n.isValid=0===n.length,n},o._createLoadOption=function(){var t=o.one,e=o.two,a=o.chartType,n=o.date,i=o.compSelect1,l=o.compSelect2,s=o.state.dateDefault;return o.props.loadFn(o.props,{one:t,two:e,chartType:a,date:n,dateDefault:s,selectOptions:[i.getOptions(),l.getOptions()]})},o._handleClose=function(){o._handleWithValidationClose(o._createValidationMessages),o.props.onClose()},o._refSelect1=function(t){o.compSelect1=t},o._refSelect2=function(t){o.compSelect2=t},o.one=void 0,o.two=void 0,o.date=void 0,o.chartType=void 0,o.toolbarButtons=[{caption:"I",onClick:o._clickInfoWithToolbar.bind(o)}],o._commandButtons=[C.default.createElement(M.default.Button.Load,{onClick:o._handleLoad})],o._chartOptions=E.default.crOptions(t),o.state={isShowDate:!1,dateDefault:D,dateOptions:[],validationMessages:[]},o}return(0,m.default)(e,t),(0,p.default)(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.props===t||this.props.isShow!==t.isShow}},{key:"render",value:function(){var t=this.props,e=t.caption,o=t.isShow,a=t.onShow,n=t.onFront,i=t.oneCaption,l=t.oneURI,s=t.oneJsonProp,r=t.twoCaption,u=t.twoURI,d=t.twoJsonProp,c=this.state,p=c.isShowDate,f=c.dateDefault,h=c.dateOptions,_=c.validationMessages;return C.default.createElement(M.default.DraggableDialog,{caption:e,isShow:o,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose},C.default.createElement(M.default.ToolbarButtonCircle,{buttons:this.toolbarButtons}),C.default.createElement(M.default.SelectWithLoad,{ref:this._refSelect1,isShow:o,uri:l,jsonProp:s,caption:i,optionNames:"Items",onSelect:this._handleSelectOne}),C.default.createElement(M.default.SelectWithLoad,{ref:this._refSelect2,isShow:o,uri:u,jsonProp:d,caption:r,optionNames:"Metrics",onSelect:this._handleSelectTwo}),C.default.createElement(M.default.RowInputSelect,{caption:"Chart",placeholder:"Default: Area",options:this._chartOptions,onSelect:this._handleSelectChartType}),C.default.createElement(M.default.ShowHide,{isShow:p},C.default.createElement(M.default.RowInputSelect,{caption:"For Date",placeholder:f,options:h,onSelect:this._handleSelectDate})),C.default.createElement(M.default.ValidationMessages,{validationMessages:_}))}}]),e}(S.Component),s.defaultProps={oneCaption:"Item",oneJsonProp:"items",twoCaption:"Metric",twoJsonProp:"metrics"},l=r))||l)||l);e.default=B},406:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n,i,l,s=o(1),r=a(s),u=o(2),d=a(u),c=o(3),p=a(c),f=o(4),h=a(f),_=o(0),m=a(_),S=o(15),C=a(S),v=o(28),g=a(v),w=(n=g.default.withToolbar,i=g.default.withValidationLoad,n(l=i(l=function(t){function e(t){(0,r.default)(this,e);var o=(0,p.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o._handleSelectOne=function(t){o.one=t},o._handleLoad=function(){o._handleWithValidationLoad(o._createValidationMessages(),o._createLoadOption)},o._createValidationMessages=function(){var t=o.props.oneCaption,e=[];o.one||e.push(o.props.msgOnNotSelected(t));var a=o.parentChild.getValidation(),n=a.isValid,i=a.msg;return n||(e=e.concat(i)),e.isValid=0===e.length,e},o._createLoadOption=function(){var t=o.parentChild.getValues(),e=t.parent,a=t.child;return o.props.loadFn(o.props,{one:o.one,group:e,metric:a})},o._handleClose=function(){o._handleWithValidationClose(o._createValidationMessages),o.props.onClose()},o.one=void 0,o.toolbarButtons=[{caption:"I",onClick:o._clickInfoWithToolbar.bind(o)}],o._commandButtons=[m.default.createElement(C.default.Button.Load,{onClick:o._handleLoad})],o.state={validationMessages:[]},o}return(0,h.default)(e,t),(0,d.default)(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.props===t||this.props.isShow!==t.isShow}},{key:"render",value:function(){var t=this,e=this.props,o=e.caption,a=e.isShow,n=e.onShow,i=e.onFront,l=e.oneCaption,s=e.oneURI,r=e.oneJsonProp,u=e.twoCaption,d=e.twoURI,c=e.twoJsonProp,p=e.threeCaption,f=e.msgOnNotSelected,h=this.state.validationMessages;return m.default.createElement(C.default.DraggableDialog,{caption:o,isShow:a,commandButtons:this._commandButtons,onShowChart:n,onFront:i,onClose:this._handleClose},m.default.createElement(C.default.ToolbarButtonCircle,{buttons:this.toolbarButtons}),m.default.createElement(C.default.SelectWithLoad,{isShow:a,uri:s,jsonProp:r,caption:l,optionNames:"Items",onSelect:this._handleSelectOne}),m.default.createElement(C.default.SelectParentChild,{ref:function(e){return t.parentChild=e},isShow:a,uri:d,parentCaption:u,parentOptionNames:"Items",parentJsonProp:c,childCaption:p,msgOnNotSelected:f}),m.default.createElement(C.default.ValidationMessages,{validationMessages:h}))}}]),e}(_.Component))||l)||l);e.default=w},407:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n,i,l=o(5),s=a(l),r=o(1),u=a(r),d=o(2),c=a(d),p=o(3),f=a(p),h=o(4),_=a(h),m=o(0),S=a(m),C=o(21),v=a(C),g=o(15),w=a(g),M=o(28),T=a(M),y=o(79),O=a(y),E=o(378),D=a(E),L=o(408),B=a(L),b="Before Select Metric",P="M",I="Dims for request haven't been loaded.\nClose, open dialog for trying load again.",A={SPINNER_LOADING:{position:"relative",display:"block",textAlign:"middle",margin:"16px auto 32px",width:"32px",height:"32px"},SPINNER_FAILED:{borderColor:"#f44336",animation:"none"}},F=(n=T.default.withToolbar)(i=function(t){function e(t){(0,u.default)(this,e);var o=(0,f.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o._loadDims=function(){var t=o.props,e=t.proxy,a=t.baseMeta,n=t.dims,i=t.dfProps,l=void 0===i?{}:i,s=l.dfId;(0,B.default)({id:s,proxy:e,baseMeta:a,dims:n}).then(function(t){var e=t.configs,a=t.errMsg;e?(o._selectOptions=e.map(function(t){return t.options}),o.setState({isLoading:!1,isLoadFailed:!1,configs:e})):o.setState({isLoading:!1,isLoadFailed:!0,validationMessages:[a]})})},o._isCategory=function(){return D.default.isCategory(o.chartType)},o._updateForDate=function(){o.date=null;var t=o._items[1]?o.props.mapFrequency?o.props.mapFrequency:o.two.mapFrequency?o.two.mapFrequency:P:null,e=o.props.mapDateDf,a=t?v.default.createEurostatSelect(t,e):v.default.createEurostatSelect("Y",e);o.setState({isShowDate:!0,dateDefault:a.dateDefault,dateOptions:a.options})},o._handleLoad=function(){var t=o._crValidationMessages();if(0===t.length){var e=o._items,a=o.chartType,n=o.date,i=o.state.dateDefault,l=o.props.loadFn(o.props,{chartType:a,date:n,dateDefault:i,items:e,selectOptions:o._selectOptions});o.props.onLoad(l)}o.setState({validationMessages:t})},o._crValidationMessages=function(){var t=[],e=o.state,a=e.configs;return e.isLoadFailed?t.push(I):a.forEach(function(e,a){var n=e.caption;o._items[a]||t.push(o.props.msgOnNotSelected(n))}),t},o._handleClose=function(){o.props.onClose(),o.setState(function(t){return t.validationMessages=[],t})},o._hSelectChartType=function(t){o.chartType=t,o._isCategory()?o._updateForDate():o.setState({isShowDate:!1})},o._fSelect=function(t){return function(e){this._items[t]=e}},o._hSelectDate=function(t){o.date=t},o._renderSelectInputs=function(){return o.state.configs.map(function(t,e){var a=t.id,n=t.caption,i=t.options;return S.default.createElement(w.default.RowInputSelect,{key:a,caption:n,options:i,onSelect:o._fSelect(e).bind(o)})})},o._commandButtons=[S.default.createElement(w.default.Button.Load,{onClick:o._handleLoad})],o.toolbarButtons=[{caption:"I",onClick:o._clickInfoWithToolbar.bind(o)}],o._chartOptions=D.default.crOptions(t),o._items=[],o._selectOptions=[],o.state={isLoading:!0,isLoadFailed:!1,isShowDate:!1,dateDefault:b,dateOptions:[],validationMessages:[]},o}return(0,_.default)(e,t),(0,c.default)(e,[{key:"componentWillReceiveProps",value:function(t){this.props!==t&&!this.props.isShow&&t.isShow&&this.state.isLoadFailed&&(this.setState({isLoading:!0,isLoadFailed:!1}),this._loadDims())}},{key:"shouldComponentUpdate",value:function(t,e){return this.props===t||this.props.isShow!==t.isShow}},{key:"componentDidMount",value:function(){this._loadDims()}},{key:"render",value:function(){var t=this.props,e=t.caption,o=t.isShow,a=t.onShow,n=t.onFront,i=this.state,l=i.isLoading,r=i.isLoadFailed,u=i.isShowDate,d=i.dateDefault,c=i.dateOptions,p=i.validationMessages,f=r?(0,s.default)({},A.SPINNER_LOADING,A.SPINNER_FAILED):A.SPINNER_LOADING;return S.default.createElement(w.default.DraggableDialog,{caption:e,isShow:o,commandButtons:this._commandButtons,onShowChart:a,onFront:n,onClose:this._handleClose},S.default.createElement(w.default.ToolbarButtonCircle,{buttons:this.toolbarButtons}),(l||r)&&S.default.createElement(O.default,{style:f}),!l&&!r&&this._renderSelectInputs(),S.default.createElement(w.default.RowInputSelect,{caption:"Chart",placeholder:"Default: Area",options:this._chartOptions,onSelect:this._hSelectChartType}),S.default.createElement(w.default.ShowHide,{isShow:u},S.default.createElement(w.default.RowInputSelect,{caption:"For Date",placeholder:d,options:c,onSelect:this._hSelectDate})),S.default.createElement(w.default.ValidationMessages,{validationMessages:p}))}}]),e}(m.Component))||i;e.default=F},408:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(10),i=a(n),l=o(5),s=a(l),r=o(43),u=a(r),d={ROOT_URL:"http://data.ssb.no/api/v0/en/table",SELECTION_ALL:{selection:{filter:"all",values:["*"]}},TID_DIM:{code:"Tid",selection:{filter:"top",values:["1"]}}},c=function(t,e,o){return t?""+t+e+"/"+o:e+"/"+o},p=function(t){return(0,s.default)({code:t},d.SELECTION_ALL)},f=function(t){var e=t.map(function(t){return p(t.v)});return e.push(d.TID_DIM),{method:"POST",body:JSON.stringify({query:e,response:{format:"json-stat"}})}},h=function(t,e){for(var o=[],a=e.v,n=t.Dimension(a),l=n.length,s=0;s<l;s++)o.push({caption:n.Category(s).label,slice:(0,i.default)({},a,n.id[s])});return o},_=!1,m=void 0,S=void 0,C=function(t){return function(){t===m&&(_=!1)}},v=function(t){m=t,S=setTimeout(C(t),5e3),_=!0},g=function(){_=!1,clearTimeout(S)},w=function(t){var e=t.proxy,o=t.baseMeta,a=t.id,n=t.dims;if(_)return Promise.resolve({errMsg:"Another dims are still loading."});var i=c(e,o,a),l=f(n);return v(i),fetch(i,l).then(function(t){return t.json()}).then(function(t){var e=(0,u.default)(t).Dataset(0),o=n.map(function(t){return{id:t.v,caption:t.c,options:h(e,t)}});return g(),{configs:o}}).catch(function(t){return g(),{errMsg:t.message}})};e.default=w}});
"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[341],{238:(t,e,r)=>{r.r(e),r.d(e,{default:()=>ht});var i=r(9679),n=r(3513),o=r(2038),s=r(3218),a=r(6645),d=r(4832),h=r(5893);const l="bt__watch__bar",p={marginBottom:10},c={marginLeft:20},g=t=>{let{isShow:e,onClickGroup:r,onClickList:i}=t;return e?(0,h.jsxs)("div",{style:p,children:[(0,h.jsx)(d.Z,{caption:"GROUP",className:l,onClick:r}),(0,h.jsx)(d.Z,{caption:"LIST",className:l,style:c,onClick:i})]}):null};var D=r(2306),u=r(8636),_=r(773);const S={position:"relative",paddingRight:40,paddingTop:5,paddingBottom:5},f={width:"100%",maxWidth:250,height:28,verticalAlign:"middle"},v={position:"absolute",top:10,right:0},L="Not Found",I=t=>{let{item:e,className:r,isModeEdit:n,option:o,onClick:s,onClose:a,onDragStart:d,onDragEnter:l,onDragOver:p,onDragLeave:c,onDrop:g}=t;const{caption:I=L}=e||{},y=n?(0,h.jsx)(u.Z,{style:v,onClose:a.bind(null,o)}):null,b=(0,i.useCallback)((()=>s(e)),[e]),m=(0,i.useCallback)((t=>{(0,D.Z)(t)&&b()}),[b]),T=n?{draggable:!0,onDragStart:d.bind(null,o),onDrop:g.bind(null,o),onDragOver:p,onDragEnter:l,onDragLeave:c}:void 0;return(0,h.jsxs)("div",{role:"menuitem",tabIndex:"0",className:r,style:S,onClick:b,...T,onKeyUp:m,children:[(0,h.jsx)(_.Z,{style:f,text:I}),y]})},y="border-bottom",b="border-left";let m,T,E,C;const O=function(t,e){t.persist(),T=t.currentTarget;const r=t.currentTarget.style;E=r.getPropertyValue(y),m=e},x=function(t){const e=T.style;t.currentTarget.style.removeProperty(b),e.removeProperty("border"),e.setProperty(y,E)},w=function(t,e,r){const i=t.currentTarget.style;C=i.getPropertyValue(b),-1!==m.indexOf(e)?i.setProperty(b,function(t){return void 0===t&&(t="green"),"4px solid "+t}(r)):i.setProperty(b,"4px solid red")},G=function(t){const e=t.currentTarget.style;e.removeProperty(b),e.setProperty(b,C)},W=t=>{Object.assign(t.prototype,{dragStartWithDnDStyle:O,dropWithDnDStyle:x,dragEnterWithDnDStyle:w,dragLeaveWithDnDStyle:G})},j={setTransferTo:t=>{let{event:e,dragId:r,xType:i}=t;Object.assign(e.dataTransfer,{effectAllowed:"move",dropEffect:"move"}).setData("text",JSON.stringify({dragId:r,xType:i}))}},M=t=>function(e,r){let{caption:i}=e;this.dragStartWithDnDStyle(r,[t.GROUP]),j.setTransferTo({event:r,dragId:i+";",xType:t.GROUP})},k=(t,e)=>function(r,i){let{caption:n}=r;this.dropWithDnDStyle(i);const o=JSON.parse(i.dataTransfer.getData("text")),{xType:s,dragId:a}=o,d=n+";";if(s===t.GROUP){if(a===d)return;i.preventDefault(),e.dragDropGroup({dragId:a,dropId:d})}else s===t.LIST&&(i.preventDefault(),e.dragDropList({dragId:a,dropId:d}))},P=t=>function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.GROUP,t.C_GROUP_ENTER)},R=function(t){t.preventDefault()},N=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},U=function(t,e){Object.assign(this,{_hDragStartGroup:M(t).bind(this),_hDropGroup:k(t,e).bind(this),_hDragEnterGroup:P(t).bind(this),_hDragOverGroup:R,_hDragLeaveGroup:N.bind(this)})},Z=t=>{Object.assign(t.prototype,{_bindDnDGroup:U})},B=t=>function(e,r){let{groupCaption:i,caption:n}=e;this.dragStartWithDnDStyle(r,[t.GROUP,t.LIST]),j.setTransferTo({event:r,dragId:i+";"+n,xType:t.LIST})},A=(t,e)=>function(r,i){let{groupCaption:n,caption:o}=r;this.dropWithDnDStyle(i);const s=JSON.parse(i.dataTransfer.getData("text")),{xType:a,dragId:d}=s,h=n+";"+o+";";if(a===t.LIST){if(d===h)return;i.preventDefault(),e.dragDropList({dragId:d,dropId:h})}else a===t.ITEM&&(i.preventDefault(),e.dragDropItem({dragId:d,dropId:h}))},H=t=>function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.LIST,t.C_LIST_ENTER)},J=function(t){t.preventDefault()},V=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},z=function(t,e){Object.assign(this,{_hDragStartList:B(t).bind(this),_hDropList:A(t,e).bind(this),_hDragEnterList:H(t).bind(this),_hDragOverList:J,_hDragLeaveList:V.bind(this)})},F=t=>{Object.assign(t.prototype,{_bindDnDList:z})},K=t=>function(e,r){let{groupCaption:i,listCaption:n,caption:o}=e;this.dragStartWithDnDStyle(r,[t.LIST,t.ITEM]),j.setTransferTo({event:r,dragId:i+";"+n+";"+o,xType:t.ITEM})},Q=(t,e)=>function(r,i){let{groupCaption:n,listCaption:o,caption:s}=r;this.dropWithDnDStyle(i);const a=JSON.parse(i.dataTransfer.getData("text")),{xType:d,dragId:h}=a,l=n+";"+o+";"+s;if(d===t.ITEM){if(h===l)return;i.preventDefault(),e.dragDropItem({dragId:h,dropId:l})}},q=t=>function(e){e.preventDefault(),this.dragEnterWithDnDStyle(e,t.ITEM,t.C_LIST_ENTER)},X=function(t){t.preventDefault()},Y=function(t){t.preventDefault(),this.dragLeaveWithDnDStyle(t)},$=function(t,e){Object.assign(this,{_hDragStartItem:K(t).bind(this),_hDropItem:Q(t,e).bind(this),_hDragEnterItem:q(t).bind(this),_hDragOverItem:X,_hDragLeaveItem:Y.bind(this)})},tt=t=>{Object.assign(t.prototype,{_bindDnDItem:$})};var et;const rt="#80c040",it={paddingRight:0},nt={position:"relative",top:-4,marginLeft:20},ot={lineHeight:2},st={marginLeft:8,paddingLeft:2,borderLeftStyle:"solid",borderLeftWidth:2,borderLeftColor:"inherit",lineHeight:2},at={marginRight:10},dt={GROUP:"GROUP",C_GROUP_ENTER:"#1b75bb",LIST:"LIST",C_LIST_ENTER:rt,ITEM:"ITEM"};const ht=(t=>{W(t),Z(t),F(t),tt(t)})(et=class extends i.Component{constructor(t){super(t),this._onStore=(t,e)=>{const{browserType:r,showAction:i,updateAction:n}=this.props;t===i&&e===r?this._handlerShow():t===n&&this.setState({watchList:e})},this._handlerHide=()=>{this.setState({isShow:!1})},this._handlerShow=()=>{this.setState({isShow:!0})},this._handlerToggleEditMode=()=>{this.setState({isModeEdit:!this.state.isModeEdit})},this._renderWatchList=t=>{const{isModeEdit:e}=this.state;return t.groups.map(((t,r)=>{const{caption:i,lists:n}=t;return(0,h.jsx)(a.Z.OpenClose2,{style:ot,caption:i,isDraggable:e,option:{caption:i},onDragStart:this._hDragStartGroup,onDragEnter:this._hDragEnterGroup,onDragOver:this._hDragOverGroup,onDragLeave:this._hDragLeaveGroup,onDrop:this._hDropGroup,children:n&&this._renderLists(n,i)},r)}))},this._renderLists=(t,e)=>{const{isModeEdit:r}=this.state;return t.map(((t,i)=>{const{caption:n,items:o}=t;return(0,h.jsx)(a.Z.OpenClose2,{style:st,notSelectedStyle:at,openColor:rt,caption:n,isDraggable:r,option:{groupCaption:e,caption:n},onDragStart:this._hDragStartList,onDragEnter:this._hDragEnterList,onDragOver:this._hDragOverList,onDragLeave:this._hDragLeaveList,onDrop:this._hDropList,children:o&&this._renderItems(o,e,n)},i)}))},this._renderItems=(t,e,r)=>{const{isModeEdit:i}=this.state;return t.map(((t,n)=>{const{id:o,caption:s}=t;return(0,h.jsx)(I,{className:"row__type2-topic not-selected",isModeEdit:i,item:t,option:{groupCaption:e,listCaption:r,caption:s},onClick:this._handlerClickItem,onClose:this._handlerRemoveItem,onDragStart:this._hDragStartItem,onDragOver:this._hDragOverItem,onDragEnter:this._hDragEnterItem,onDragLeave:this._hDragLeaveItem,onDrop:this._hDropItem},o)}))},this._bindDnDGroup(dt,s.e4),this._bindDnDList(dt,s.e4),this._bindDnDItem(dt,s.e4),this.state={isShow:!!t.isInitShow,isModeEdit:!1,watchList:t.store.getWatchList()}}componentDidMount(){this.unsubscribe=this.props.store.listen(this._onStore)}componentWillUnmount(){this.unsubscribe()}_handlerSaveWatch(){s.e4.saveWatch()}_handlerEditGroup(){o.Ck.showModalDialog(n.Tz)}_handlerEditList(){o.Ck.showModalDialog(n.pQ)}_handlerClickItem(t){o.Ck.showModalDialog(n.LA,t)}_handlerRemoveItem(t,e){e.stopPropagation(),s.e4.removeItem(t)}render(){const{caption:t}=this.props,{isShow:e,isModeEdit:r,watchList:i}=this.state,n=r?"V":"E";return(0,h.jsxs)(a.Z.Browser,{isShow:e,style:it,children:[(0,h.jsxs)(a.Z.BrowserCaption,{caption:t,onClose:this._handlerHide,children:[(0,h.jsx)(a.Z.ButtonCircle,{caption:"S",title:"Save to LocalStorage",style:nt,onClick:this._handlerSaveWatch}),(0,h.jsx)(a.Z.ButtonCircle,{caption:n,title:"Toggle Edit Mode: E/V",style:nt,onClick:this._handlerToggleEditMode})]}),(0,h.jsx)(g,{isShow:r,onClickGroup:this._handlerEditGroup,onClickList:this._handlerEditList}),(0,h.jsx)(a.Z.ScrollPane,{className:"scroll-container-y scroll-watch",children:i&&this._renderWatchList(i)})]})}})||et}}]);
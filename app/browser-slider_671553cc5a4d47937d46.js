"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{8121:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ae});var n,i=r(9679),o=r(2564),s=r(1926),a=r(795),c=function(e){var t,r=parseInt((""+e.updated).trim().slice(0,4),10);return"number"!=typeof(t=r)||t-t!=0||(n||(n=(new Date).getUTCFullYear()))-r<3},l=function(e){return e.active};const u=function(e,t){if(e)return"SDN"===t?l:c};var d=r(4488);const f=(0,i.createContext)();var p=r(8190),g=r(8811),v=r(5893),m={width:240,paddingBottom:8};const x=function(e){var t=e.is,r=e.toggleMenu,n=e.toggleFilter;return(0,v.jsx)(p.Z,{isShow:t,className:"popup-menu charts__menu-more",style:m,onClose:r,children:(0,v.jsx)(g.Z,{caption:"Filter Not Active Topic",onToggle:n})})};var h=r(7326),y=r(1721),C=r(6462),b=r(2038),j={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2ae",dfProps:{}}},P=Object.assign;const k=function(e){return function(){var t=e.rootUrl,r=e.id,n=e.proxy,i=e.bT,o=e.lT,s=e.dU,a=e.noTime,c=e.dS,l=function(e){var t=e.rootDimUrl,r=e.rootUrl,n=e.id,i=e.proxy,o=void 0===i?"":i,s=e.dfDimQuery;return""+o+(t||r)+"/"+n+(void 0===s?"":s)}(e),u=P({},j,Object.assign({type:i+"_"+r},function(e){var t=e.text||"",r=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+r}}(e)));P(u.dialogProps,{loadId:o,descrUrl:s,dataSource:c,dfProps:{dimUrl:l,baseMeta:t,dfId:r,proxy:n,noTime:a}}),b.Z.showDialog(i+"_"+r,i,u)}};var w=Array.isArray,I=function(e,t){var r=[];return e.forEach((function(e){var n;e.id!==t&&(e.text=e.description,(e.hasSubjects||(n=e.tables,w(n)&&0===n.length))&&(e.type="l"),r.push(e))})),r};const _=function(e,t){var r=e[0];return 0!==(r.tables||[]).length?r.tables.map((function(e){return e.text=e.id+": "+e.text+", "+(e.firstPeriod||"")+"-"+(e.latestPeriod||""),e})):0!==(r.subjects||[]).length?I(r.subjects,t):I(e,t)};const N=function(e){return e.forEach((function(e){"t"===e.type&&(e.text=e.id+": "+e.text)})),e};var T=Array.isArray,M=function(e,t){return e.text<t.text?-1:e.text>t.text?1:0},S={SDN:_,SIR:N};const Z=function(e,t,r){void 0===e&&(e="");var n=t.rootUrl,i=t.dfTi,o=void 0===i?"":i,s=t.lT;return fetch(""+e+n+"/"+r+o,{cache:"default"}).then((function(e){return e.json()})).then((function(e){if(T(e)){var t=S[s];t&&(e=t(e,r)),e.sort(M)}return e}))};var O=r(554),F={fontWeight:"bold",fontSize:"16px"},D={color:"#f44336",paddingLeft:12},R={position:"relative",color:"silver",padding:"8px 0 4px 32px",cursor:"pointer"},A={position:"absolute",top:8,left:16},U={color:"#1b2836",padding:8,paddingLeft:12,cursor:"pointer"},E={color:"black",padding:8,cursor:"pointer"};const L=function(e){var t=e.innerRef,r=e.title,n=e.onClick,i=(0,O.Z)(n);return(0,v.jsxs)("div",{ref:t,className:"menu-item",style:R,role:"menuitem",tabIndex:"0",onClick:n,onKeyDown:i,children:[r,(0,v.jsx)("span",{style:A,children:"<"})]})};var B=r(2554);const K=function(e){var t=e.innerRef,r=e.item,n=e.onClick,i=r.text,o="l"===r.type?U:E,s=(0,O.Z)(n,[n]);return(0,v.jsx)("div",{ref:t,className:"menu-item",style:o,tabIndex:"0",role:"menuitem",onClick:n,onKeyDown:s,children:i})};var X=[];const z=(0,i.memo)((function(e){var t=e.refFirstItem,r=e.model,n=void 0===r?X:r,o=e.fOnClickItem,s=function(e){var t=(0,i.useContext)(f);return(0,i.useMemo)((function(){return t?e.filter(t):e}),[t,e])}(n);return(0,v.jsx)("div",{children:s.map((function(e,r){return(0,v.jsx)(K,{innerRef:0===r?t:void 0,item:e,onClick:o(e)},e.id)}))})}));const Q=function(e){var t=e.errMsg;return t?(0,v.jsx)("div",{style:D,children:t}):null};const W=function(e){var t=e.refFirstItem,r=e.model,n=e.fOnClickItem,i=e.errMsg;return(0,v.jsxs)(v.Fragment,{children:[!(r||i)&&(0,v.jsx)(B.Z,{}),(0,v.jsx)(z,{refFirstItem:t,model:r,fOnClickItem:n}),(0,v.jsx)(Q,{errMsg:i})]})};var Y=Array.isArray,q=function(e,t,r,n,i,o,s){var a=s.text,c=s.id,l=s.type,u="SDN"===r.lT?c||t:t?t+"/"+c:c;return"l"===l?i.bind(null,u,a,n):o(Object.assign({id:u},r,{text:a,proxy:e}))};const G=function(e){var t=e.style,r=e.store,n=e.title,o=e.id,s=void 0===o?"":o,a=e.dfProps,c=void 0===a?{}:a,l=e.pageNumber,u=e.pageCurrent,d=e.onClickPrev,f=e.onClickNext,p=e.fOnClickItem,g=e.loadItems,m=(0,i.useRef)(),x=(0,i.useRef)(),h=(0,i.useState)({}),y=h[0],C=h[1],b=y.model,j=y.errMsg,P=function(e,t){return e.getProxy(t.lT)}(r,c),k=(0,i.useCallback)(q.bind(null,P,s,c,l,f,p),[P]),w=n&&d,I=l===u&&(w||!w&&b);return(0,i.useEffect)((function(){return n&&g(P,c,s).then((function(e){var t=Y(e)?{model:e}:{errMsg:"Response is not array"};C(t)})).catch((function(e){return C({errMsg:e.message})})),function(){clearTimeout(x.current),m.current=null}}),[]),(0,i.useEffect)((function(){I&&(clearTimeout(x.current),x.current=setTimeout((function(){var e=m.current;e&&e.focus()}),1e3))}),[I]),(0,v.jsxs)("div",{style:Object.assign({},F,t),children:[w&&(0,v.jsx)(L,{innerRef:m,title:n,onClick:d.bind(null,l)}),(0,v.jsx)(W,{refFirstItem:w?void 0:m,model:b,fOnClickItem:k,errMsg:j})]})};const H=function(e){var t=e.pages,r=e.pageCurrent;return t.map((function(e,t){return(0,i.cloneElement)(e,{pageCurrent:r,pageNumber:t+1})}))};var J={width:300,overflow:"hidden"},V={width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},$={width:300},ee=function(e){var t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)};const te=function(e){function t(t){var r;return(r=e.call(this,t)||this).hPrevPage=function(e){r.setState((function(t){var n=t.pageCurrent;return 0===n||n!==e?null:(r._direction=-1,{pageCurrent:e-1})}))},r._addPage=function(e,t,n){var i=r.props,o=i.dfProps,s=i.store;e.push((0,v.jsx)(G,{id:t,style:$,store:s,title:n,dfProps:o,onClickPrev:r.hPrevPage,onClickNext:r.hNextPage,loadItems:Z,fOnClickItem:k},t))},r.hNextPage=function(e,t,n){r.setState((function(i){var o=i.pageCurrent,s=i.pages;return n!==o?null:(n<s.length?s[n]&&s[n].key!==e&&(n>0?s.splice(n):s=[],r._addPage(s,e,t)):r._addPage(s,e,t),r._direction=1,{pages:s,pageCurrent:n+1})}))},r._crTransform=function(){var e="0",t=r._refMenu.current;if(0!==r._direction&&t){var n=ee(t);e=1===r._direction?n-300:n+300,r._direction=0}else 0===r._direction&&t&&(e=ee(t));return{transform:"translateX("+e+"px)"}},r.hNextPage=(0,C.Z)(r.hNextPage.bind((0,h.Z)(r))),r.hPrevPage=(0,C.Z)(r.hPrevPage.bind((0,h.Z)(r))),r._refMenu=(0,i.createRef)(),r._direction=0,r._fOnClickItem=function(e){var t=e.id,n=e.text;return r.hNextPage.bind(null,t,n,0)},r.state={pageCurrent:0,pages:[]},r}return(0,y.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.dfProps,r=e.store,n=this.state,i=n.pages,o=n.pageCurrent,s=this._crTransform(),a=Object.assign({},V,s);return(0,v.jsx)("div",{style:J,children:(0,v.jsxs)("div",{ref:this._refMenu,style:a,children:[(0,v.jsx)(G,{style:$,title:"Main Menu",store:r,dfProps:t,pageCurrent:o,pageNumber:0,onClickNext:this.hNextPage,loadItems:Z,fOnClickItem:k}),(0,v.jsx)(H,{pages:i,pageCurrent:o})]})})},t}(i.Component);var re={paddingRight:0},ne={paddingLeft:6},ie={position:"relative",top:-4},oe={position:"relative",top:-6,paddingLeft:4},se={height:"92%"};const ae=(0,i.memo)((function(e){var t=e.isInitShow,r=e.caption,n=e.store,c=e.browserType,l=e.showAction,p=(0,o.Z)(t),g=p[0],m=p[1],h=p[2],y=(0,s.Z)(),C=y[0],b=y[1],j=(0,s.Z)(),P=j[0],k=j[1],w=(0,i.useMemo)((function(){return u(P,e.dfProps.lT)}),[P]);return(0,a.Z)(n,(function(e,t){e===l&&t===c&&m()})),(0,v.jsx)(f.Provider,{value:w,children:(0,v.jsxs)(d.Z.Browser,{isShow:g,style:re,children:[(0,v.jsx)(x,{is:C,toggleMenu:b,toggleFilter:k}),(0,v.jsx)(d.Z.BrowserCaption,{style:ne,caption:r,captionStyle:oe,svgMoreStyle:ie,onMore:b,onClose:h}),(0,v.jsx)(d.Z.ScrollPane,{className:"scroll-container-y",style:se,children:(0,v.jsx)(te,Object.assign({},e))})]})})}))}}]);
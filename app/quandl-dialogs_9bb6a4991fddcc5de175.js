"use strict";(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[861],{7915:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Z});var a,i=o(9679),s=o(3014),n=o(4827),r=o(5893);const{Decor:h,crMenuMore:l}=n.Z,d={BT_ROOT:{color:"rgb(35, 47, 59)"}},c={INIT:"First Load Meta",SELECT:"Select..."},p="Default Empty",u="Import - Trade (USD)",S="Export - Trade (USD)",T="Re-Import - Trade (USD)",m="Re-Export - Trade (USD)",_=[{caption:"Default : Empty Filter",value:p},{caption:"Import - Trade (USD)",value:"Import - Trade (USD)"},{caption:"Import - Weight (Kg)",value:"Import - Weight (Kg)"},{caption:"Export - Trade (USD)",value:"Export - Trade (USD)"},{caption:"Export - Weight (Kg)",value:"Export - Weight (Kg)"},{caption:"Re-Import - Trade (USD)",value:"Re-Import - Trade (USD)"},{caption:"Re-Export - Trade (USD)",value:"Re-Export - Trade (USD)"}],g=[{caption:"Default : Area",value:s.oX.AREA},{caption:"Semi Donut : Total Top90, On Every Year : Recent 2 Years",value:s.oX.SEMI_DONUT},{caption:"Stacked Area : Total Top90, On Recent Year",value:s.oX.STACKED_AREA},{caption:"Stacked Area Percent : Total Top90, On Recent Year",value:s.oX.STACKED_AREA_PERCENT},{caption:"Stacked Column : Total Top90, On Recent Year",value:s.oX.STACKED_COLUMN},{caption:"Stacked Column Percent : Total Top90, On Recent Year",value:s.oX.STACKED_COLUMN_PERCENT},{caption:"Tree Map : On Recent Year",value:s.oX.TREE_MAP}];const C=(0,h.withToolbar)(a=(0,h.withValidationLoad)(a=(0,h.withInitialState)(a=class extends i.Component{constructor(t){super(t),this._initTrade=()=>{this.subheading=void 0,this.optionTrades=void 0,this.setState({optionTrades:[],placeholderTrade:c.INIT,isLoadingTradeFailed:!1})},this._filterTrade=()=>{let t;if(this.tradeFilter&&this.optionTrades){const e=this.tradeFilter.value;e!==p?(t=this.optionTrades.filter(((t,o)=>-1!==t.caption.indexOf(e))),e===u&&(t=t.filter(((t,e)=>-1===t.caption.indexOf(T)))),e===S&&(t=t.filter(((t,e)=>-1===t.caption.indexOf(m))))):t=this.optionTrades}else t=this.optionTrades;return t},this._handlerClickAll=()=>{const{isShowFilter:t,isShowDate:e,isShowChartType:o}=this.state,a=!(t||e||o);this.setState({isShowFilter:a,isShowDate:a,isShowChartType:a})},this._handlerClickFilter=()=>{this.setState({isShowFilter:!this.state.isShowFilter})},this._handlerClickDate=()=>{this.setState({isShowDate:!this.state.isShowDate})},this._handlerClickChartType=()=>{this.setState({isShowChartType:!this.state.isShowChartType})},this._handlerSelectCountry=t=>{this.country=t,this._initTrade()},this._handlerSelectChapter=t=>{this.chapter=t,this._initTrade()},this._handlerSelectTradeFilter=t=>{this.tradeFilter=t,this.setState({optionTrades:this._filterTrade()})},this._handlerSelectTrade=t=>{this.subheading=t},this._handlerSelectChartType=t=>{this.chartType=t},this._handlerLoadMeta=()=>{this._handleWithValidationLoad(this._createMetaValidationMessages(),this._createLoadMetaOption,this._loadMeta)},this._loadMeta=t=>{this.props.onLoad(t),this.setState({isLoadingTrade:!0})},this._createMetaValidationMessages=()=>{let t=[];this.country||t.push(this.props.msgOnNotSelected("Country")),this.chapter||t.push(this.props.msgOnNotSelected("Subheading"));const{isValid:e,datesMsg:o}=this.datesFragment.getValidation();return e||(t=t.concat(o)),t.isValid=0===t.length,t},this._createLoadMetaOption=()=>{const{fromDate:t,toDate:e}=this.datesFragment.getValues(),{loadId:o,fnValue:a}=this.props;return{value:a(this.chapter.value,this.country.value),fromDate:t,toDate:e,isLoadMeta:!0,onLoad:this._setOptionTrades,onCancel:this._loadMetaOptionCancel,onFailed:this._loadMetaOptionFailed,loadId:o}},this._setOptionTrades=t=>{this.optionTrades=t,this.setState({optionTrades:this._filterTrade(),isLoadingTrade:!1,isLoadingTradeFailed:!1,placeholderTrade:c.SELECT})},this._loadMetaOptionCancel=()=>{this.setState({isLoadingTrade:!1,isLoadingTradeFailed:!1,placeholderTrade:c.SELECT})},this._loadMetaOptionFailed=()=>{this.setState({isLoadingTrade:!1,isLoadingTradeFailed:!0})},this._handlerLoadData=()=>{this._handleWithValidationLoad(this._createDataValidationMessages(),this._createLoadDataOption)},this._createDataValidationMessages=()=>{let t=[];if(this.chartType&&this.chartType.value!==s.oX.AREA){const{placeholderTrade:e}=this.state;e===c.INIT&&t.push(c.INIT),this.tradeFilter||t.push(this.props.msgOnNotSelected("Trade Filter"))}else this.subheading||t.push(this.props.msgOnNotSelected("Subheading"));return t.isValid=0===t.length,t},this._createLoadDataOption=()=>{const{fromDate:t,toDate:e}=this.datesFragment.getValues(),o=this.subheading?this.subheading.value:this.props.dataColumn,{loadId:a,fnValue:i,dataSource:n}=this.props,r=this.chartType?this.chartType.value:s.oX.AREA,h=this.tradeFilter?this.country.caption+":"+this.tradeFilter.caption:""+this.country.caption,l=this.chartType&&this.chartType.value!==s.oX.AREA?this._createSpliceItems():void 0;return{value:i(this.chapter.value,this.country.value),fromDate:t,toDate:e,dataColumn:o,seriaType:r,sliceItems:l,title:h,subtitle:this.chapter.caption,loadId:a,dataSource:n}},this._createSpliceItems=()=>{const t=this.tradeFilter.value.length+2;return this.state.optionTrades.map(((e,o)=>{let{value:a,caption:i}=e;return i=i.substring(0,i.length-t),{caption:i,value:a}}))},this._handlerClose=()=>{this._handleWithValidationClose()},this._refDates=t=>this.datesFragment=t,this._menuMore=l(this,{toggleToolBar:this._toggleWithToolbar,onAbout:this._clickInfoWithToolbar}),this.toolbarButtons=this._createType2WithToolbar(t,{noDate:!0}),this.toolbarButtons.push({caption:"A",title:"Toggle All Input",onClick:this._handlerClickAll},{caption:"F",title:"Toggle Filter Input",onClick:this._handlerClickFilter},{caption:"D",title:"Toggle Date Input",onClick:this._handlerClickDate},{caption:"C",title:"Toggle ChartType Input",onClick:this._handlerClickChartType}),this._commandButtons=[(0,r.jsx)(n.Z.Button.Flat,{rootStyle:d.BT_ROOT,caption:"Load Meta",title:"First Load Meta, then Load Item",onClick:this._handlerLoadMeta},"meta"),(0,r.jsx)(n.Z.Button.Load,{onClick:this._handlerLoadData},"load")],this.state={...this._isWithInitialState(),isShowFilter:!1,isShowChartType:!1,isLoadingTrade:!1,isLoadingTradeFailed:!1,optionTrades:[],placeholderTrade:c.INIT}}shouldComponentUpdate(t,e){return this.props===t||this.props.isShow!==t.isShow}render(){const{isShow:t,onShow:e,onFront:o,countryURI:a,countryJsonProp:i,commodityURI:s,commodityJsonProp:h,initFromDate:l,initToDate:d,msgOnNotValidFormat:c,onTestDate:p}=this.props,{isToolbar:u,isShowLabels:S,isShowFilter:T,isShowDate:m,isShowChartType:C,isLoadingTrade:w,isLoadingTradeFailed:D,optionTrades:F,placeholderTrade:b,validationMessages:L}=this.state;return(0,r.jsxs)(n.Z.DraggableDialog,{isShow:t,caption:"United Nations Commodity Trade",menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:e,onFront:o,onClose:this._handlerClose,children:[(0,r.jsx)(n.Z.Toolbar,{isShow:u,buttons:this.toolbarButtons}),(0,r.jsx)(n.Z.SelectWithLoad,{isShow:t,isShowLabels:S,uri:a,jsonProp:i,caption:"Country:",optionNames:"Countries",onSelect:this._handlerSelectCountry}),(0,r.jsx)(n.Z.SelectWithLoad,{isShow:t,isShowLabels:S,uri:s,jsonProp:h,caption:"Chapter:",optionNames:"Chapters",onSelect:this._handlerSelectChapter}),(0,r.jsx)(n.Z.ShowHide,{isShow:T,children:(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:S,caption:"Filter Trade:",options:_,placeholder:"Filter...",onSelect:this._handlerSelectTradeFilter})}),(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:S,caption:"Subheading:",options:F,optionNames:"Meta",isLoading:w,isLoadingFailed:D,placeholder:b,onLoadOption:this._handlerLoadMeta,onSelect:this._handlerSelectTrade}),(0,r.jsx)(n.Z.ShowHide,{isShow:m,children:(0,r.jsx)(n.Z.DatesFragment,{ref:this._refDates,isShowLabels:S,initFromDate:l,initToDate:d,msgOnNotValidFormat:c,onTestDate:p})}),(0,r.jsx)(n.Z.ShowHide,{isShow:C,children:(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:S,caption:"Chart Type:",options:g,onSelect:this._handlerSelectChartType})}),(0,r.jsx)(n.Z.ValidationMessages,{validationMessages:L})]})}})||a)||a)||a;var w;const{Decor:D,crMenuMore:F}=n.Z,b=[{caption:"2021",value:2021},{caption:"2020",value:2020},{caption:"2019",value:2019},{caption:"2018",value:2018},{caption:"2017",value:2017},{caption:"2016",value:2016},{caption:"2015",value:2015},{caption:"2014",value:2014},{caption:"2013",value:2013},{caption:"2012",value:2012}];const L=(0,D.dialog)(w=class extends i.Component{constructor(t){super(t),this._handleSelectYear=t=>{this.year=t},this._handleLoad=()=>{this._handleWithValidationLoad(this._createValidationMessages(),this._createLoadOption)},this._createValidationMessages=()=>{const{msgOnNotSelected:t,msgOnNotValidFormat:e,isFd:o}=this.props;let a=[];const{isValid:i,msg:s}=this._refItemMonth.current.getValidation();return i||(a=a.concat(s)),this.year||a.push(t("Year")),o&&!this._refFromDate.current.isValid()&&a.push(e("From Date")),a.isValid=0===a.length,a},this._createLoadOption=()=>{const{one:t,two:e}=this._refItemMonth.current.getValues(),o=this.props.isFd?this._refFromDate.current.getValue():void 0;return this.props.loadFn(this.props,{item:t,month:e,year:this.year,fromDate:o})},this._handleClose=()=>{this._handleWithValidationClose()},this._menuMore=F(this,{toggleToolBar:this._toggleWithToolbar,onAbout:this._clickInfoWithToolbar}),this.toolbarButtons=this._createType2WithToolbar(t,{noDate:!0}),this._refItemMonth=(0,i.createRef)(),this._refFromDate=(0,i.createRef)(),this._commandButtons=this._crCommandsWithLoad(this),this.state={...this._isWithInitialState()}}shouldComponentUpdate(t,e){return this.props===t||this.props.isShow!==t.isShow}render(){const{isShow:t,caption:e,onShow:o,onFront:a,futuresURI:i,msgOnNotSelected:s,isFd:h,initFromDate:l,isYmdOrEmpty:d,errNotYmdOrEmpty:c}=this.props,{isToolbar:p,isShowLabels:u,validationMessages:S}=this.state;return(0,r.jsxs)(n.Z.DraggableDialog,{isShow:t,caption:e,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:o,onFront:a,onClose:this._handleClose,children:[(0,r.jsx)(n.Z.Toolbar,{isShow:p,buttons:this.toolbarButtons}),(0,r.jsx)(n.Z.SelectOneTwo,{ref:this._refItemMonth,isShow:t,isShowLabels:u,uri:i,oneCaption:"Futures",oneOptionNames:"Futures",oneJsonProp:"futures",twoCaption:"Month",msgOnNotSelected:s}),(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:u,caption:"Year",options:b,onSelect:this._handleSelectYear}),h&&(0,r.jsx)(n.Z.RowDate,{innerRef:this._refFromDate,isShowLabels:u,title:"From Date:",initialValue:l,errorMsg:c,onTest:d}),(0,r.jsx)(n.Z.ValidationMessages,{validationMessages:S})]})}})||w;var y;const{Decor:v,crMenuMore:M}=n.Z,f=[{caption:"Continuous Contract #1",value:1},{caption:"Continuous Contract #2",value:2},{caption:"Continuous Contract #3",value:3},{caption:"Continuous Contract #4",value:4},{caption:"Continuous Contract #5",value:5}];const O=(0,v.dialog)(y=class extends i.Component{constructor(t){super(t),this._handleSelectType=t=>{this.type=t},this._handleLoad=()=>{this._handleWithValidationLoad(this._createValidationMessages(),this._createLoadOption)},this._createValidationMessages=()=>{const{msgOnNotSelected:t,msgOnNotValidFormat:e,isFd:o}=this.props;let a=[];const{isValid:i,msg:s}=this._refExchangeItem.current.getValidation();return i||(a=a.concat(s)),this.type||a.push(t("Type")),o&&!this._refFromDate.current.isValid()&&a.push(e("From Date")),a.isValid=0===a.length,a},this._createLoadOption=()=>{const{one:t,two:e}=this._refExchangeItem.current.getValues(),o=this.props.isFd?this._refFromDate.current.getValue():void 0;return this.props.loadFn(this.props,{exchange:t,item:e,type:this.type,fromDate:o})},this._handleClose=()=>{this._handleWithValidationClose()},this._menuMore=M(this,{toggleToolBar:this._toggleWithToolbar,onAbout:this._clickInfoWithToolbar}),this.toolbarButtons=this._createType2WithToolbar(t,{noDate:!0}),this._refExchangeItem=(0,i.createRef)(),this._refFromDate=(0,i.createRef)(),this._commandButtons=this._crCommandsWithLoad(this),this.state={...this._isWithInitialState()}}shouldComponentUpdate(t,e){return this.props===t||this.props.isShow!==t.isShow}render(){const{isShow:t,caption:e,onShow:o,onFront:a,futuresURI:i,msgOnNotSelected:s,isFd:h,initFromDate:l,isYmdOrEmpty:d,errNotYmdOrEmpty:c}=this.props,{isToolbar:p,isShowLabels:u,validationMessages:S}=this.state;return(0,r.jsxs)(n.Z.DraggableDialog,{isShow:t,caption:e,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:o,onFront:a,onClose:this._handleClose,children:[(0,r.jsx)(n.Z.Toolbar,{isShow:p,buttons:this.toolbarButtons}),(0,r.jsx)(n.Z.SelectOneTwo,{ref:this._refExchangeItem,isShow:t,isShowLabels:u,uri:i,oneCaption:"Exchange",oneOptionNames:"Exchanges",oneJsonProp:"futures",twoCaption:"Asset",msgOnNotSelected:s}),(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:u,caption:"Type",options:f,onSelect:this._handleSelectType}),h&&(0,r.jsx)(n.Z.RowDate,{innerRef:this._refFromDate,isShowLabels:u,title:"From Date:",initialValue:l,errorMsg:c,onTest:d}),(0,r.jsx)(n.Z.ValidationMessages,{validationMessages:S})]})}})||y;var I;const{Decor:V,crMenuMore:x}=n.Z,E=[{caption:"Thousand Barrels per day (kb/d)",value:"KD"},{caption:"Thousand Barrels (kbbl)",value:"KB"},{caption:"Thousand Kilolitres (kl)",value:"KL"},{caption:"Thousand Metric Tons (kmt)",value:"KT"},{caption:"Conversion factor barrels/ktons",value:"BK"}],R=[{caption:"AreaSpline",value:"AREA"},{caption:"Yearly by Month",value:"YEARLY"}];const Z={UNCommodityTrade:C,Futures3:L,FuturesWiki:O,JodiWorldOil:(0,V.dialog)(I=class extends i.Component{constructor(t){super(t),this._hSelectCountry=t=>{this.country=t},this._hSelectUnits=t=>{this.units=t},this._hSelectChartType=t=>{this.chartType=t},this._handleLoad=()=>{this._handleWithValidationLoad(this._createValidationMessages(),this._createLoadOption)},this._createValidationMessages=()=>{const{msgOnNotSelected:t}=this.props;let e=[];this.country||e.push(t("Country"));const{isValid:o,msg:a}=this.productFlow.getValidation();o||(e=e.concat(a)),this.units||(this.units=E[0]);const{isValid:i,datesMsg:s}=this.datesFragment.getValidation();return i||(e=e.concat(s)),e.isValid=0===e.length,e},this._createLoadOption=()=>{const{one:t,two:e}=this.productFlow.getValues(),{fromDate:o,toDate:a}=this.datesFragment.getValues(),i=this.chartType?this.chartType.value:void 0,{fnValue:s,dataColumn:n,loadId:r,dataSource:h}=this.props;return{value:s(this.country.value,t.value,e.value,this.units.value),title:this.country.caption+": "+t.caption,subtitle:e.caption+": "+this.units.caption,fromDate:o,toDate:a,dataColumn:n,seriaType:i,loadId:r,dataSource:h}},this._handleClose=()=>{this._handleWithValidationClose()},this._refProductFlow=t=>this.productFlow=t,this._refDates=t=>this.datesFragment=t,this._menuMore=x(this,{toggleToolBar:this._toggleWithToolbar,onAbout:this._clickInfoWithToolbar}),this.toolbarButtons=this._createType2WithToolbar(t,{isShowOptions:!0}),this._commandButtons=this._crCommandsWithLoad(this),this.state={...this._isWithInitialState(),isShowDate:!1,isShowOptions:!1}}shouldComponentUpdate(t,e){return this.props===t||this.props.isShow!==t.isShow}render(){const{caption:t,isShow:e,onShow:o,onFront:a,oneCaption:i,oneURI:s,oneJsonProp:h,parentCaption:l,parentChildURI:d,parentJsonProp:c,childCaption:p,msgOnNotSelected:u,initFromDate:S,initToDate:T,msgOnNotValidFormat:m,onTestDate:_}=this.props,{isToolbar:g,isShowLabels:C,isShowDate:w,isShowOptions:D,validationMessages:F}=this.state;return(0,r.jsxs)(n.Z.DraggableDialog,{isShow:e,caption:t,menuModel:this._menuMore,commandButtons:this._commandButtons,onShowChart:o,onFront:a,onClose:this._handleClose,children:[(0,r.jsx)(n.Z.Toolbar,{isShow:g,buttons:this.toolbarButtons}),(0,r.jsx)(n.Z.SelectWithLoad,{isShow:e,isShowLabels:C,uri:s,jsonProp:h,caption:i,optionNames:"Items",onSelect:this._hSelectCountry}),(0,r.jsx)(n.Z.SelectOneTwo,{ref:this._refProductFlow,isShow:e,isShowLabels:C,uri:d,oneCaption:l,oneJsonProp:c,twoCaption:p,msgOnNotSelected:u}),(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:C,caption:"Units",options:E,onSelect:this._hSelectUnits}),(0,r.jsx)(n.Z.ShowHide,{isShow:w,children:(0,r.jsx)(n.Z.DatesFragment,{ref:this._refDates,isShowLabels:C,initFromDate:S,initToDate:T,msgOnNotValidFormat:m,onTestDate:_})}),(0,r.jsx)(n.Z.ShowHide,{isShow:D,children:(0,r.jsx)(n.Z.RowInputSelect,{isShowLabels:C,caption:"Chart Type",placeholder:"Default: AreaSpline",options:R,onSelect:this._hSelectChartType})}),(0,r.jsx)(n.Z.ValidationMessages,{validationMessages:F})]})}})||I}}}]);
(self.webpackChunkweb_app_erc=self.webpackChunkweb_app_erc||[]).push([[30],{817:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(2122),o=r(5893),i=r(9679),s=r(795),a=r(8685),l=r(7866),c=r(3552),u=r(6462),f=r(2038),d={dialogConf:!0,dialogType:"DialogStatN",dialogProps:{chartsType:"t2a",dfProps:{},isProxy:!0}};const p=function(e){return function(){var t=e.rootUrl,r=e.id,o=e.proxy,i=e.bT,s=e.lT,a=e.dU,l=e.noTime,c=e.dS,u=function(e){var t=e.rootUrl,r=e.id,n=e.proxy,o=t+"/"+r;return n?""+n+o:o}(e),p=Object.assign({},d,(0,n.Z)({type:i+"_"+r},function(e){var t=e.text||"",r=t.length>35?t.substring(0,35)+"...":t;return{menuTitle:t.substring(0,27),contFullCaption:e.sP+": "+r}}(e)));Object.assign(p.dialogProps,{loadId:s,descrUrl:a,dataSource:c,dfProps:{metaUrl:u,baseMeta:t,dfId:r,proxy:o,noTime:l}}),f.Z.showDialog(i+"_"+r,i,p)}};var g=function(e,t){return e.text<t.text?-1:e.text>t.text?1:0};const x=function(e,t){return fetch(t?t+e:e,{cache:"default"}).then((function(e){return e.json()})).then((function(e){return Array.isArray(e)&&e.sort(g),e}))};var m=r(2306);const h={MSG_ERR:{paddingLeft:"12px",color:"#f44336",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px"},TITLE:{position:"relative",color:"silver",paddingLeft:"32px",paddingTop:"8px",paddingBottom:"4px",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",cursor:"pointer"},TITLE_ARROW:{position:"absolute",top:"8px",left:"16px"},ITEM_L:{color:"#1b2836",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",paddingLeft:"12px",cursor:"pointer"},ITEM_T:{color:"black",fontFamily:'Roboto, "Arial Unicode MS", Arial, sans-serif',fontWeight:"bold",fontSize:"16px",padding:"8px",cursor:"pointer"}};var v="menu-item";const C=function(e){var t=e.innerRef,r=e.title,n=e.onClick;return(0,o.jsxs)("div",{ref:t,className:v,style:h.TITLE,role:"menuitem",tabIndex:"0",onClick:n,onKeyDown:function(e){(0,m.Z)(e)&&(e.preventDefault(),n())},children:[r,(0,o.jsx)("span",{style:h.TITLE_ARROW,children:"<"})]})};var y=r(2554),P="menu-item";const b=function(e){var t=e.innerRef,r=e.item,n=e.onClick,s=r.text,a="l"===r.type?h.ITEM_L:h.ITEM_T,l=(0,i.useCallback)((function(e){(0,m.Z)(e)&&(e.preventDefault(),n())}),[n]);return(0,o.jsx)("div",{ref:t,className:P,style:a,tabIndex:"0",role:"menuitem",onClick:n,onKeyDown:l,children:s})};const _=(0,i.memo)((function(e){var t=e.refFirstItem,r=e.model,n=void 0===r?[]:r,i=e.fOnClickItem;return(0,o.jsx)("div",{children:n.map((function(e,r){return(0,o.jsx)(b,{innerRef:0===r?t:void 0,item:e,onClick:i(e)},e.id)}))})}));const T=function(e){var t=e.errMsg;return t?(0,o.jsx)("div",{style:h.MSG_ERR,children:t}):null};const I=function(e){var t=e.refFirstItem,r=e.model,n=e.fOnClickItem,i=e.errMsg;return(0,o.jsxs)(o.Fragment,{children:[!(r||i)&&(0,o.jsx)(y.Z,{}),(0,o.jsx)(_,{refFirstItem:t,model:r,fOnClickItem:n}),(0,o.jsx)(T,{errMsg:i})]})};var R=Array.isArray,k=function(e,t,r,o,i,s,a){var l=a.text,c=a.id;return"l"===a.type?i.bind(null,t+"/"+c,l,o):s((0,n.Z)({id:t+"/"+c},r,{text:l,proxy:e}))};const S=function(e){var t=e.style,r=e.store,n=e.title,s=e.id,a=void 0===s?"":s,l=e.dfProps,c=void 0===l?{}:l,u=e.pageNumber,f=e.pageCurrent,d=e.onClickPrev,p=e.onClickNext,g=e.fOnClickItem,x=e.loadItems,m=(0,i.useRef)(),h=(0,i.useRef)(),v=(0,i.useState)({}),y=v[0],P=v[1],b=y.model,_=y.errMsg,T=function(e,t){return e.getProxy(t.lT)}(r,c),S=(0,i.useCallback)(k.bind(null,T,a,c,u,p,g),[T]),j=n&&d,M=u===f&&(j||!j&&b);return(0,i.useEffect)((function(){return n&&x(c.rootUrl+"/"+a,T).then((function(e){var t=R(e)?{model:e}:{errMsg:"Response is not array"};P(t)})).catch((function(e){return P({errMsg:e.message})})),function(){clearTimeout(h.current),m.current=null}}),[]),(0,i.useEffect)((function(){M&&(clearTimeout(h.current),h.current=setTimeout((function(){var e=m.current;e&&e.focus()}),1e3))}),[M]),(0,o.jsxs)("div",{style:t,children:[j&&(0,o.jsx)(C,{innerRef:m,title:n,onClick:d.bind(null,u)}),(0,o.jsx)(I,{refFirstItem:j?void 0:m,model:b,fOnClickItem:S,errMsg:_})]})};const j=function(e){var t=e.pages,r=e.pageCurrent;return t.map((function(e,t){return(0,i.cloneElement)(e,{pageCurrent:r,pageNumber:t+1})}))};var M={ROOT:{width:300,overflow:"hidden"},PAGES:{width:1500,overflowX:"hidden",display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",transition:"all 750ms ease-out"},PAGE:{width:300}},A=function(e){var t=e.style.transform.substring(11).replace("px","").replace(")","");return parseInt(t,10)};const E=function(e){function t(t){var r;return(r=e.call(this,t)||this).hPrevPage=function(e){r.setState((function(t){var n=t.pageCurrent;return 0===n||n!==e?null:(r._direction=-1,{pageCurrent:e-1})}))},r._addPage=function(e,t,n){var i=r.props,s=i.dfProps,a=i.store;e.push((0,o.jsx)(S,{id:t,style:M.PAGE,store:a,title:n,dfProps:s,onClickPrev:r.hPrevPage,onClickNext:r.hNextPage,loadItems:x,fOnClickItem:p},t))},r.hNextPage=function(e,t,n){r.setState((function(o){var i=o.pageCurrent,s=o.pages;return n!==i?null:(n<s.length?s[n]&&s[n].key!==e&&(n>0?s.splice(n):s=[],r._addPage(s,e,t)):r._addPage(s,e,t),r._direction=1,{pages:s,pageCurrent:n+1})}))},r._crTransform=function(){var e="0",t=r._refMenu.current;if(0!==r._direction&&t){var n=A(t);e=1===r._direction?n-300:n+300,r._direction=0}else 0===r._direction&&t&&(e=A(t));return{transform:"translateX("+e+"px)"}},r.hNextPage=(0,u.Z)(r.hNextPage.bind((0,l.Z)(r))),r.hPrevPage=(0,u.Z)(r.hPrevPage.bind((0,l.Z)(r))),r._refMenu=(0,i.createRef)(),r._direction=0,r._fOnClickItem=function(e){var t=e.id,n=e.text;return r.hNextPage.bind(null,t,n,0)},r.state={pageCurrent:0,pages:[]},r}return(0,c.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.dfProps,r=e.store,i=this.state,s=i.pages,a=i.pageCurrent,l=this._crTransform(),c=(0,n.Z)({},M.PAGES,l);return(0,o.jsx)("div",{style:M.ROOT,children:(0,o.jsxs)("div",{ref:this._refMenu,style:c,children:[(0,o.jsx)(S,{style:M.PAGE,title:"Main Menu",store:r,dfProps:t,pageCurrent:a,pageNumber:0,onClickNext:this.hNextPage,loadItems:x,fOnClickItem:p}),(0,o.jsx)(j,{pages:s,pageCurrent:a})]})})},t}(i.Component);var w={BROWSER:{paddingRight:0},SCROLL_PANE:{height:"92%"}};const O=(0,i.memo)((function(e){var t=e.isInitShow,r=e.caption,l=e.store,c=e.browserType,u=e.showAction,f=(0,i.useState)(!!t),d=f[0],p=f[1],g=(0,i.useCallback)((function(){p(!1)}),[]);return(0,s.Z)(l,(function(e,t){e===u&&t===c&&p(!0)})),(0,o.jsxs)(a.Z.Browser,{isShow:d,style:w.BROWSER,children:[(0,o.jsx)(a.Z.BrowserCaption,{caption:r,onClose:g}),(0,o.jsx)(a.Z.ScrollPane,{className:"scroll-container-y",style:w.SCROLL_PANE,children:(0,o.jsx)(E,(0,n.Z)({},e))})]})}))}}]);
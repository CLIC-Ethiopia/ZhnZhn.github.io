{"version":3,"sources":["../../../src/adapters/bea/BeaApi.js"],"names":["C","URL","_isArr","Array","isArray","_assign","Object","assign","_crSubtitle","title","subtitle","_setCaptionTo","option","dfTitle","itemCaption","BeaApi","getRequestUrl","TableID","DataSetName","apiKey","ValueName","items","value","oneCaption","caption","_Frequncy","indexOf","checkResponse","json","BEAAPI","Results","Error","ResError","ErrorDetail","APIErrorCode","Description","APIErrorDescription","Data"],"mappings":";;;;;AAAA;;AAEA,MAAMA,CAAC,GAAG;AACRC,EAAAA,GAAG,EAAE;AADG,CAAV;AAIA,MAAMC,MAAM,GAAGC,KAAK,CAACC,OAArB;AAAA,MACEC,OAAO,GAAGC,MAAM,CAACC,MADnB;;AAGA,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqBA,QAAQ,GAC3CD,KAD2C,UACjCC,QADiC,GAE9CD,KAFH;;AAIA,MAAME,aAAa,GAAGC,MAAM,IAAI;AAC9B,QAAM;AAAEH,IAAAA,KAAF;AAASC,IAAAA,QAAT;AAAmBG,IAAAA;AAAnB,MAA+BD,MAArC;;AACAP,EAAAA,OAAO,CAACO,MAAD,EAAS;AACdE,IAAAA,WAAW,EAAEL,KADC;AAEdA,IAAAA,KAAK,EAAEI,OAFO;AAGdH,IAAAA,QAAQ,EAAEF,WAAW,CAACC,KAAD,EAAQC,QAAR;AAHP,GAAT,CAAP;AAKD,CAPD;;AASA,MAAMK,MAAM,GAAG;AACbC,EAAAA,aAAa,CAACJ,MAAD,EAAQ;AACnB,UAAM;AACJK,MAAAA,OADI;AACKC,MAAAA,WADL;AAEJC,MAAAA,MAFI;AAGJC,MAAAA,SAHI;AAIJC,MAAAA,KAAK,GAAC;AAJF,QAKFT,MALJ;AAAA,UAMEU,KAAK,GAAGD,KAAK,CAAC,CAAD,CAAL,CAASC,KANnB;AAAA,UAOEC,UAAU,GAAGF,KAAK,CAAC,CAAD,CAAL,CAASG,OAPxB;AAAA,UAQEC,SAAS,GAAGF,UAAU,CAACG,OAAX,CAAmB,OAAnB,MAAgC,CAAC,CAAjC,GACP,GADO,GACD,GATb;;AAUAf,IAAAA,aAAa,CAACC,MAAD,CAAb;;AACA,WAAUZ,CAAC,CAACC,GAAZ,SAAmBkB,MAAnB,iBAAqCF,OAArC,qBAA4DC,WAA5D,mBAAqFO,SAArF,SAAkGL,SAAlG,SAA+GE,KAA/G;AACD,GAdY;;AAgBbK,EAAAA,aAAa,CAACC,IAAD,EAAM;AACjB,UAAM;AAAEC,MAAAA;AAAF,QAAaD,IAAnB;AAAA,UACE;AAAEE,MAAAA,OAAO,GAAC,EAAV;AAAcC,MAAAA,KAAK,EAACC;AAApB,QAAiCH,MAAM,IAAI,EAD7C;;AAEA,QAAIG,QAAJ,EAAc;AACZ,YAAM;AAAEC,QAAAA;AAAF,UAAkBD,QAAxB;AACA,YAAM,mBACJA,QAAQ,CAACE,YADL,EAEJD,WAAW,CAACE,WAAZ,IACKH,QAAQ,CAACI,mBAHV,CAAN;AAKD;;AACD,QAAKN,OAAO,CAACC,KAAR,IAAiB,CAAC7B,MAAM,CAAC4B,OAAO,CAACO,IAAT,CAA7B,EAA8C;AAC5C,aAAO,oBAAP;AACD;;AACD,WAAO,IAAP;AACD;;AA/BY,CAAf;eAmCetB,M","sourcesContent":["import { crError } from '../crFn';\r\n\r\nconst C = {\r\n  URL: 'https://apps.bea.gov/api/data/?Year=ALL&ResultFormat=JSON&method=GETDATA&UserID'\r\n};\r\n\r\nconst _isArr = Array.isArray\r\n, _assign = Object.assign;\r\n\r\nconst _crSubtitle = (title, subtitle) => subtitle\r\n ? `${title}: ${subtitle}`\r\n : title;\r\n\r\nconst _setCaptionTo = option => {\r\n  const { title, subtitle, dfTitle } = option;\r\n  _assign(option, {\r\n    itemCaption: title,\r\n    title: dfTitle,\r\n    subtitle: _crSubtitle(title, subtitle)\r\n  })\r\n};\r\n\r\nconst BeaApi = {\r\n  getRequestUrl(option){\r\n    const {\r\n      TableID, DataSetName,\r\n      apiKey,\r\n      ValueName,\r\n      items=[],\r\n    } = option\r\n    , value = items[0].value\r\n    , oneCaption = items[0].caption\r\n    , _Frequncy = oneCaption.indexOf('(A,Q)') === -1\r\n         ? 'A' : 'Q';\r\n    _setCaptionTo(option)\r\n    return `${C.URL}=${apiKey}&TableID=${TableID}&DataSetName=${DataSetName}&Frequency=${_Frequncy}&${ValueName}=${value}`;\r\n  },\r\n\r\n  checkResponse(json){\r\n    const { BEAAPI } = json\r\n    , { Results={}, Error:ResError } = BEAAPI || {};\r\n    if (ResError) {\r\n      const { ErrorDetail } = ResError;\r\n      throw crError(\r\n        ResError.APIErrorCode,\r\n        ErrorDetail.Description\r\n          || ResError.APIErrorDescription\r\n      );\r\n    }\r\n    if ( Results.Error || !_isArr(Results.Data) ) {\r\n      return crError();\r\n    }\r\n    return true;\r\n  }\r\n\r\n};\r\n\r\nexport default BeaApi\r\n"],"file":"BeaApi.js"}
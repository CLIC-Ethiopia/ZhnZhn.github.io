{"version":3,"sources":["../../../src/adapters/eurostat/EuroStatApi.js"],"names":["rootUrl","queryTail","REQUEST_ERROR","MESSAGE_HEADER","_crDetailMsg","option","alertGeo","alertMetric","_categoryTypes","EuroStatApi","getRequestUrl","group","metric","geo","mapValue","time","seriaType","isStrInArr","_param","_group","indexOf","checkResponse","json","error","label","errCaption","message"],"mappings":";;;;;;AACA;;;;;;AAEA,IAAMA,UAAU,4DAAhB;AAAA,IACMC,YAAY,sCADlB;;AAIA,IAAMC,gBAAgB,eAAtB;AAAA,IACMC,iBAAiB,qBADvB;;AAGA,IAAMC,eAAe,SAAfA,YAAe,CAASC,MAAT,EAAgB;AAAA,yBACGA,MADH,CAC5BC,QAD4B;AAAA,MAC5BA,QAD4B,oCACnB,EADmB;AAAA,4BACGD,MADH,CACfE,WADe;AAAA,MACfA,WADe,uCACH,EADG;;AAEnC,4DAAwDD,QAAxD,SAAoEC,WAApE;AACD,CAHD;;AAKA,IAAMC,iBAAiB,CAAE,KAAF,EAAS,QAAT,EAAmB,KAAnB,CAAvB;;AAGA,IAAMC,cAAc;AAElBC,eAFkB,yBAEJL,MAFI,EAEG;AAAA,QAEXM,KAFW,GAKTN,MALS,CAEXM,KAFW;AAAA,QAEJC,MAFI,GAKTP,MALS,CAEJO,MAFI;AAAA,QAEIC,GAFJ,GAKTR,MALS,CAEIQ,GAFJ;AAAA,QAGXC,QAHW,GAKTT,MALS,CAGXS,QAHW;AAAA,QAGDC,IAHC,GAKTV,MALS,CAGDU,IAHC;AAAA,QAIXC,SAJW,GAKTX,MALS,CAIXW,SAJW;;;AAOnB,QAAI,CAAC,oBAAUC,UAAV,CAAqBD,SAArB,EAAgCR,cAAhC,CAAL,EAAqD;AACnD,UAAIU,kBAAgBL,GAApB;AAAA,UACIM,eADJ;AAEA,UAAIR,KAAJ,EAAU;AACRQ,iBAAYR,KAAZ;AACA,YAAIC,MAAJ,EAAW;AACTM,mBAAYA,MAAZ,eAA4BN,MAA5B;AACD;AACF,OALD,MAKO;AACLO,iBAAUP,OAAOQ,OAAP,CAAe,GAAf,MAAwB,CAAC,CAA1B,GACDR,MADC,SAEJA,MAFL;AAGAM,uBAAaA,MAAb;AACD;;AAED,kBAAUlB,OAAV,GAAoBmB,MAApB,GAA6BD,MAA7B,GAAsCjB,SAAtC;AACH,KAhBC,MAgBK,IAAIe,cAAc,QAAlB,EAA4B;AACjC,kBAAUhB,OAAV,GAAoBc,QAApB,yBAAgDC,IAAhD;AACD,KAFM,MAEA,IAAIC,cAAc,KAAlB,EAAyB;AAC7B,kBAAUhB,OAAV,GAAoBc,QAApB;AACF,KAFM,MAEA;AACL;AACA,kBAAUd,OAAV,GAAoBc,QAApB,cAAqCC,IAArC;AACA;AACD;AACA,GAlCiB;AAoClBM,eApCkB,yBAoCJC,IApCI,EAoCEjB,MApCF,EAoCU;AAAA,QAClBkB,KADkB,GACRD,IADQ,CAClBC,KADkB;;AAE1B,QAAIA,KAAJ,EAAU;AACP,UAAIA,MAAMC,KAAV,EAAiB;AACd,cAAM;AACJC,sBAAavB,aADT;AAEJwB,mBAAUvB,iBAAiBoB,MAAMC,KAAvB,GAA+BpB,aAAaC,MAAb;AAFrC,SAAN;AAIF,OALD,MAKO;AACJ,cAAM,EAAEoB,YAAavB,aAAf,EAA8BwB,SAAU,EAAxC,EAAN;AACF;AACH;AACD,WAAO,IAAP;AACD;AAjDiB,CAApB;;kBAqDejB,W","file":"EuroStatApi.js","sourcesContent":["\r\nimport ArrayUtil from '../../utils/ArrayUtil';\r\n\r\nconst rootUrl = \"https://ec.europa.eu/eurostat/wdds/rest/data/v2.1/json/en/\"\r\n    , queryTail = \"&precision=1&sinceTimePeriod=1996M01\";\r\n\r\n\r\nconst REQUEST_ERROR = 'Request Error'\r\n    , MESSAGE_HEADER = '400 : Bad Request\\n';\r\n\r\nconst _crDetailMsg = function(option){\r\n  const {alertGeo='', alertMetric=''} = option\r\n  return `\\n\\nIt seems country-dataset doesn't exsist.\\n${alertGeo}:${alertMetric}\\n\\nIf you use For Date input field in Dialog\\ntry to use more late date.`\r\n}\r\n\r\nconst _categoryTypes = [ 'MAP', 'COLUMN', 'BAR' ];\r\n\r\n\r\nconst EuroStatApi = {\r\n\r\n  getRequestUrl(option){\r\n    const {\r\n            group, metric, geo,\r\n            mapValue, time,\r\n            seriaType\r\n          } = option;\r\n\r\n    if (!ArrayUtil.isStrInArr(seriaType)(_categoryTypes)){\r\n      let _param = `geo=${geo}`\r\n        , _group;\r\n      if (group){\r\n        _group = `${group}?`;\r\n        if (metric){\r\n          _param = `${_param}&indic=${metric}`;\r\n        }\r\n      } else {\r\n        _group = (metric.indexOf('?') === -1)\r\n           ? `${metric}?`\r\n           : metric ;\r\n        _param = `&${_param}`;\r\n      }\r\n\r\n      return `${rootUrl}${_group}${_param}${queryTail}`;\r\n  } else if (seriaType === 'COLUMN') {\r\n    return `${rootUrl}${mapValue}&sinceTimePeriod=${time}`;\r\n  } else if (seriaType === 'MAP') {\r\n     return `${rootUrl}${mapValue}`;\r\n  } else {\r\n    //return `${rootUrl}ei_lmhr_m?precision=1&lastTimePeriod=1&s_adj=NSA&time=2016M08`;\r\n    return `${rootUrl}${mapValue}&time=${time}`;\r\n    //return `${rootUrl}${mapValue}&sinceTimePeriod=${time}`;\r\n  }\r\n  },\r\n\r\n  checkResponse(json, option) {\r\n    const { error } = json\r\n    if (error){\r\n       if (error.label) {\r\n          throw {\r\n            errCaption : REQUEST_ERROR,\r\n            message : MESSAGE_HEADER + error.label + _crDetailMsg(option)\r\n          };\r\n       } else {\r\n          throw { errCaption : REQUEST_ERROR, message : '' };\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\nexport default EuroStatApi\r\n"]}
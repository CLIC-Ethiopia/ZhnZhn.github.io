{"version":3,"sources":["../../../src/adapters/eurostat/EuroStatFn.js"],"names":["calcMinY","setPlotLinesMinMax","ChartFn","COLOR_EU","COLOR_EA","COLOR_NOT_EU_MEMBER","C","EU_CODES","EA_CODES","EU_MEMBER","_getKeys","Object","keys","_crDescr","extension","_ext","datasetId","subTitle","_id","_sub","_d","description","trim","_crDatasetInfo","label","updated","name","toDate","fromDate","_colorSeriaIn","config","codes","color","data","series","forEach","p","indexOf","c","_colorSeriaNotIn","_isLineSeria","type","_filterZeroCategories","categories","_data","_arrC","y","push","length","filter","_isYearOrMapFrequencyKey","key","mapFrequency","_crPoint","x","status","_setZoomMinMaxTo","isNotZoomToMinMax","min","yAxis","zhNotZoomToMinMax","_setHeightIfBarTo","seriaType","height","chart","_height","_getTableId","dfId","dfTable","EuroStatFn","joinBy","findMinY","crData","json","isFilterZero","timeIndex","value","crTimeIndexAndValue","_valueIndex","convertToUTC","sort","compareByDate","max","toPointArr","map","replace","setDataAndInfo","option","title","subtitle","Chart","setDefaultTitle","zhConfig","crZhConfig","info","valueMoving","setInfo","setCategories","tooltip","Tooltip","category","time","xAxis","fTooltip","itemCaption","crItemCaption","itemTime","colorSeries","addToCategoryConfig","_r","setTooltip","crCategoryTooltip","categorySimple","str","_period","toUpperCase","arrDate","split","_month","parseInt","_day","Date","UTC","_arrS","setLineExtrems","plotLines","crDataSource","dfProps","_ds","dataSource","_prefix","crLinkConf","linkFn","item","dataset","url","itemConf","_itemKey","id","dimension","index"],"mappings":"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","sourcesContent":["import Chart from '../../charts/Chart';\r\nimport ChartFn from '../../charts/ChartFn';\r\nimport Tooltip from '../../charts/Tooltip';\r\n\r\nimport {\r\n  valueMoving,\r\n  findMinY,\r\n  findMaxY,\r\n  filterTrimZero,\r\n  joinBy\r\n} from '../AdapterFn';\r\nimport { compareByDate } from '../compareByFn';\r\nimport { crItemConf } from '../crFn';\r\n\r\nconst {\r\n  calcMinY,\r\n  setPlotLinesMinMax\r\n} = ChartFn;\r\n\r\nconst COLOR_EU = \"#0088ff\"\r\n, COLOR_EA = \"#ff5800\"\r\n, COLOR_NOT_EU_MEMBER = '#8085e9';\r\n\r\nconst C = {\r\n  EU_CODES: [\"EU\", \"EU28\", \"EU27_2020\", \"G20\", \"Group of Twenty\" ],\r\n  EA_CODES: [\"EA\", \"EA11\", \"EA12\", \"EA13\", \"EA15\", \"EA16\", \"EA17\", \"EA18\", \"EA19\"],\r\n  EU_MEMBER: [\r\n    \"Austria\", \"Belgium\", \"Bulgaria\", \"Croatia\", \"Cyprus\",\r\n    \"Czechia\", \"Denmark\", \"Estonia\", \"Finland\", \"France\",\r\n    \"Germany\", \"Greece\", \"Hungary\", \"Ireland\", \"Italy\",\r\n    \"Latvia\", \"Lithuania\", \"Luxembourg\", \"Malta\", \"Netherlands\",\r\n    \"Poland\", \"Portugal\", \"Romania\", \"Slovakia\", \"Slovenia\",\r\n    \"Spain\", \"Sweden\"\r\n  ]\r\n};\r\n\r\nconst _getKeys = Object.keys;\r\n\r\nconst _crDescr = (extension) => {\r\n  const _ext = extension || {}\r\n    , { datasetId, subTitle } = _ext\r\n    , _id = `Dataset: ${datasetId}`\r\n    , _sub = subTitle ? `Metric: ${subTitle}` : ''\r\n    , _d = _ext.description || '';\r\n   return (`${_d} ${_id} ${_sub}`).trim();\r\n};\r\n\r\nconst _crDatasetInfo = ({\r\n  label,\r\n  updated,\r\n  extension\r\n}) => ({\r\n  name: label,\r\n  description: _crDescr(extension),\r\n  toDate: updated,\r\n  fromDate: '1996-01-30'\r\n});\r\n\r\nconst _colorSeriaIn = (config, codes, color) => {\r\n  const data = config.series[0].data;\r\n  data.forEach(p => {\r\n     if (codes.indexOf(p.c) !== -1 && !p.color) {\r\n       p.color = color\r\n     }\r\n  })\r\n};\r\nconst _colorSeriaNotIn = (config, codes, color) => {\r\n  const data = config.series[0].data;\r\n  data.forEach(p => {\r\n     if (codes.indexOf(p.c) === -1 && !p.color) {\r\n       p.color = color\r\n     }\r\n  })\r\n};\r\n\r\n\r\nconst _isLineSeria = type => type\r\n  && (type === 'AREA' || type === 'SPLINE');\r\n\r\nconst _filterZeroCategories = (data, categories) => {\r\n  const _data = [], _arrC = [];\r\n  data.forEach(p => {\r\n    if (p.y !== 0) { _data.push(p) }\r\n    else { _arrC.push(p.c) }\r\n  })\r\n  if (_arrC.length !== 0) {\r\n    categories = categories\r\n       .filter(c => _arrC.indexOf(c) === -1)\r\n  }\r\n  return { data: _data, categories };\r\n};\r\n\r\nconst _isYearOrMapFrequencyKey = (key, mapFrequency) => !mapFrequency\r\n  || mapFrequency === \"Y\"\r\n  || key.indexOf(mapFrequency) !== -1;\r\n\r\nconst _crPoint = (x, y, status) => status\r\n  && status !== ':' && status.length === 1\r\n   ? [ x, y, status ]\r\n   : [ x, y ];\r\n\r\nconst _setZoomMinMaxTo = (config, isNotZoomToMinMax, min) => {\r\n  if (isNotZoomToMinMax) {\r\n    config.yAxis.zhNotZoomToMinMax = true\r\n  } else {\r\n    config.yAxis.min = min\r\n  }\r\n}\r\nconst _setHeightIfBarTo = (config, seriaType, categories) => {\r\n  if (seriaType === 'BAR_SET' || seriaType === 'BAR_WITH_LABELS'){\r\n    const { height } = config.chart\r\n    , _height = 100 + 17*categories.length;\r\n    config.chart.height = _height < height\r\n       ? _height : height\r\n  }\r\n};\r\n\r\nconst _getTableId = ({ dfId, dfTable }) =>\r\n  dfId || dfTable;\r\n\r\nconst EuroStatFn = {\r\n   joinBy,\r\n   findMinY,\r\n\r\n  crData(json, {mapFrequency, isFilterZero}={}) {\r\n    const { timeIndex, value, status } = EuroStatFn.crTimeIndexAndValue(json)\r\n    let data = [];\r\n    _getKeys(timeIndex).forEach(key => {\r\n       if (_isYearOrMapFrequencyKey(key, mapFrequency)) {\r\n         const _valueIndex = timeIndex[key]\r\n         , y = value[_valueIndex];\r\n         if (y != null){\r\n           data.push(_crPoint(\r\n             EuroStatFn.convertToUTC(key),\r\n             y, status[_valueIndex]\r\n           ));\r\n         }\r\n       }\r\n    })\r\n    data.sort(compareByDate)\r\n    if (isFilterZero) {\r\n      data = filterTrimZero(data)\r\n    }\r\n    return {\r\n      data,\r\n      max: findMaxY(data),\r\n      min: findMinY(data)\r\n    };\r\n  },\r\n\r\n  toPointArr(json){\r\n    const { timeIndex, value, status } = EuroStatFn.crTimeIndexAndValue(json)\r\n    , data = [];\r\n    _getKeys(timeIndex).map((key) => {\r\n       const _valueIndex = timeIndex[key]\r\n       , y = value[_valueIndex];\r\n       if ( y != null ){\r\n         data.push(_crPoint(\r\n           key.replace('M', '-'),\r\n           y, status[_valueIndex]\r\n         ));\r\n       }\r\n    })\r\n\r\n    return data;\r\n  },\r\n\r\n  setDataAndInfo({ config, data, json, option }){\r\n    const { title, subtitle, seriaType } = option;\r\n    Chart.setDefaultTitle(config, title, subtitle);\r\n\r\n    config.zhConfig = EuroStatFn.crZhConfig(option);\r\n    config.info = _crDatasetInfo(json);\r\n\r\n    if (_isLineSeria(seriaType)){\r\n      config.valueMoving = valueMoving(data)\r\n    }\r\n\r\n    config.series[0].data = data;\r\n  },\r\n\r\n  setInfo({ config, json, option }){\r\n    config.info = _crDatasetInfo(json);\r\n  },\r\n\r\n  setCategories({\r\n    config, categories, min,\r\n    tooltip=Tooltip.category,\r\n    option\r\n  }){\r\n    const { time, isNotZoomToMinMax, seriaType } = option;\r\n    config.xAxis.categories = categories\r\n    _setZoomMinMaxTo(config, isNotZoomToMinMax, min)\r\n\r\n    config.series[0].name = time\r\n    config.tooltip = Chart.fTooltip(tooltip)\r\n\r\n    config.zhConfig.itemCaption = EuroStatFn.crItemCaption(option)\r\n    config.zhConfig.itemTime = time\r\n\r\n    _setHeightIfBarTo(config, seriaType, categories)\r\n  },\r\n\r\n  colorSeries(config){\r\n    _colorSeriaIn(config, C.EU_CODES, COLOR_EU)\r\n    _colorSeriaIn(config, C.EA_CODES, COLOR_EA)\r\n    _colorSeriaNotIn(config, C.EU_MEMBER, COLOR_NOT_EU_MEMBER)\r\n  },\r\n\r\n  addToCategoryConfig(config, { json, option, data, categories, min }){\r\n    if (option.isFilterZero) {\r\n      const _r = _filterZeroCategories(data, categories);\r\n      data = _r.data\r\n      categories = _r.categories\r\n    }\r\n    EuroStatFn.setDataAndInfo({ config, data, json, option })\r\n    EuroStatFn.setCategories({ config, categories, min, option })\r\n    EuroStatFn.colorSeries(config)\r\n  },\r\n\r\n  setTooltip({ config, tooltip }) {\r\n    config.tooltip = Chart.fTooltip(tooltip)\r\n  },\r\n\r\n  crCategoryTooltip: () => {\r\n    return Chart.fTooltip(Tooltip.categorySimple);\r\n  },\r\n\r\n\r\n  convertToUTC(str){\r\n    const _period = (str && str[4] || '').toUpperCase();\r\n    if (_period === 'M') {\r\n      const arrDate = str.split('M')\r\n      , _month = parseInt(arrDate[1], 10)-1\r\n      , _day = (_month === 1) ? 28 : 30;\r\n      return Date.UTC(arrDate[0], _month, _day);\r\n    }\r\n    if (_period === 'Q'){\r\n      const arrDate = str.split('Q')\r\n      , _month = (parseInt(arrDate[1], 10)*3) - 1;\r\n      return Date.UTC(arrDate[0], _month, 30);\r\n    }\r\n    if (_period === 'S') {\r\n      const _arrS = str.split('S');\r\n      return _arrS[1] === '1'\r\n        ? Date.UTC(_arrS[0], 5, 30)\r\n        : Date.UTC(_arrS[0], 11, 31);\r\n    }\r\n    return parseInt(str, 10) > 1970\r\n      ? Date.UTC(str, 11, 31)\r\n      : Date.UTC(1970, 11, 31);\r\n  },\r\n\r\n  setLineExtrems({ config, max, min, isNotZoomToMinMax }){\r\n    const plotLines = config.yAxis.plotLines;\r\n    setPlotLinesMinMax({ plotLines, min, max })\r\n\r\n    if (!isNotZoomToMinMax){\r\n      config.yAxis.min = calcMinY(min, max);\r\n    }\r\n  },\r\n\r\n  crItemCaption: ({ title='EU' }) => title,\r\n\r\n  crDataSource: dfProps => {\r\n    const _ds = dfProps.dataSource\r\n    , _prefix = _ds && _ds.indexOf('Eurostat') !== -1\r\n       ? _ds\r\n       : 'Eurostat'\r\n    return `${_prefix} (${_getTableId(dfProps) || ''})`;\r\n  },\r\n\r\n  crLinkConf: dfProps => ({\r\n    linkFn: 'ES',\r\n    item: {\r\n      dataset: _getTableId(dfProps)\r\n    }\r\n  }),\r\n\r\n  crZhConfig(option) {\r\n    const {\r\n      key, itemCaption,\r\n      url\r\n    } = option\r\n    , dataSource = EuroStatFn.crDataSource(option)\r\n    , itemConf = url\r\n        ? {\r\n            _itemKey: key,\r\n            ...crItemConf(option),\r\n            dataSource\r\n          }\r\n        : void 0;\r\n\r\n    return {\r\n      id: key, key, itemCaption,\r\n      itemConf,\r\n      dataSource,\r\n      ...EuroStatFn.crLinkConf(option)\r\n    };\r\n  },\r\n\r\n  crTimeIndexAndValue: (json) => {\r\n    const { dimension, value=[], status={} } = json\r\n    , { time } = dimension || {}\r\n    , { category } = time || {}\r\n    , { index:timeIndex=0 } = category || {};\r\n    return { timeIndex, value, status };\r\n  }\r\n}\r\n\r\nexport default EuroStatFn\r\n"],"file":"EuroStatFn.js"}
{"version":3,"sources":["../../../src/adapters/faostat/fnDescr.js"],"names":["_crBlackSpan","text","_crWrSpan","_crDescrRow","title","value","code","_codeText","fnDescr","toDescr","item","Area","Domain","Item","Element","Unit","_unit","toUpperCase","substr","DATASET_EMPTY","toInfo","json","subtitle","data","_itemNewest","length","_itemOldest","_dateNewest","Year","_dateOldest","_descr","description","frequency","name","newest_available_date","oldest_available_date"],"mappings":";;;;;;AACA;;;;;;AAEA,IAAMA,eAAe,SAAfA,YAAe;AAAA,SAAQC,yCAAqCA,IAArC,eAAoD,EAA5D;AAAA,CAArB;AACA,IAAMC,YAAY,SAAZA,SAAY;AAAA,SAAQD,8EAA0EA,IAA1E,eAAyF,EAAjG;AAAA,CAAlB;;AAEA,IAAME,cAAc,SAAdA,WAAc,CAACC,KAAD,EAAQC,KAAR,EAA2B;AAAA,MAAZC,IAAY,uEAAP,EAAO;;AAC7C,MAAMC,YAAYD,oBAAkBA,IAAlB,SAA4B,EAA9C;AACA,SAAOD,kBACKH,UAAUE,QAAM,GAAhB,CADL,SAC6BJ,aAAaK,KAAb,CAD7B,GACmDE,SADnD,cAEH,EAFJ;AAGD,CALD;;AAOA,IAAMC,UAAU;AACdC,WAAS,iBAACC,IAAD,EAAU;AAAA,qBAC4CA,IAD5C,CACTC,IADS;AAAA,QACTA,IADS,8BACJ,EADI;AAAA,uBAC4CD,IAD5C,CACAE,MADA;AAAA,QACAA,MADA,gCACO,EADP;AAAA,qBAC4CF,IAD5C,CACWG,IADX;AAAA,QACWA,IADX,8BACgB,EADhB;AAAA,wBAC4CH,IAD5C,CACoBI,OADpB;AAAA,QACoBA,OADpB,iCAC4B,EAD5B;AAAA,qBAC4CJ,IAD5C,CACgCK,IADhC;AAAA,QACgCA,IADhC,8BACqC,EADrC;AAAA,QAEXC,KAFW,GAEHD,OAAOA,KAAK,CAAL,EAAQE,WAAR,KAAwBF,KAAKG,MAAL,CAAY,CAAZ,CAA/B,GAAgD,EAF7C;;AAGjB,6BACIf,YAAY,MAAZ,EAAoBQ,IAApB,EAA0BD,KAAK,WAAL,CAA1B,CADJ,gBAEIP,YAAY,QAAZ,EAAsBS,MAAtB,EAA8BF,KAAK,aAAL,CAA9B,CAFJ,gBAGIP,YAAY,MAAZ,EAAoBU,IAApB,EAA0BH,KAAK,WAAL,CAA1B,CAHJ,gBAIIP,YAAY,SAAZ,EAAuBW,OAAvB,EAAgCJ,KAAK,cAAL,CAAhC,CAJJ,gBAKIP,YAAY,MAAZ,EAAoBa,KAApB,CALJ,sBAMSN,KAAK,kBAAL,KAA4B,eAAES,aANvC;AAQD,GAZa;;AAcdC,QAdc,kBAcPC,IAdO,EAcDjB,KAdC,EAcMkB,QAdN,EAcgB;AAAA,qBACRD,IADQ,CACpBE,IADoB;AAAA,QACpBA,IADoB,8BACf,EADe;AAAA,QAE1BC,WAF0B,GAEZD,KAAKA,KAAKE,MAAL,GAAY,CAAjB,KAAuB,EAFX;AAAA,QAG1BC,WAH0B,GAGZH,KAAK,CAAL,KAAW,EAHC;AAAA,QAI1BI,WAJ0B,GAIZH,YAAYI,IAAZ,IAAoB,EAJR;AAAA,QAK1BC,WAL0B,GAKZH,YAAYE,IAAZ,IAAoB,EALR;AAAA,QAM1BE,MAN0B,GAMjB,KAAKrB,OAAL,CAAae,WAAb,CANiB;;AAO5B,WAAO;AACLO,mBAAaD,MADR;AAELE,iBAAW,QAFN;AAGLC,YAAM7B,QAAQ,IAAR,GAAekB,QAHhB;AAILY,6BAAuBP,WAJlB;AAKLQ,6BAAuBN;AALlB,KAAP;AAOA;AA5BY,CAAhB;;kBA+BerB,O","file":"fnDescr.js","sourcesContent":["\r\nimport C from './conf'\r\n\r\nconst _crBlackSpan = text => text ? `<span style='color:black;'>${text}</span>`: '';\r\nconst _crWrSpan = text => text ? `<span style='display:inline-block;width:75px;text-align:right;'>${text}</span>`: '';\r\n\r\nconst _crDescrRow = (title, value, code='') => {\r\n  const _codeText = code ? ` (Code: ${code})` : '';\r\n  return value\r\n    ? `<div>${_crWrSpan(title+':')} ${_crBlackSpan(value)}${_codeText}</div>`\r\n    : '';\r\n}\r\n\r\nconst fnDescr = {\r\n  toDescr: (item) => {\r\n    const { Area='', Domain='', Item='', Element='', Unit='' } = item\r\n        , _unit = Unit ? Unit[0].toUpperCase() + Unit.substr(1) : '';\r\n    return `<div>\r\n      ${_crDescrRow('Area', Area, item['Area Code'])}\r\n      ${_crDescrRow('Domain', Domain, item['Domain Code'])}\r\n      ${_crDescrRow('Item', Item, item['Item Code'])}\r\n      ${_crDescrRow('Element', Element, item['Element Code'])}\r\n      ${_crDescrRow('Unit', _unit)}\r\n      <div>${item['Flag Description'] || C.DATASET_EMPTY}</div>\r\n    </div>`;\r\n  },\r\n\r\n  toInfo(json, title, subtitle) {\r\n    const { data=[] } = json\r\n    , _itemNewest = data[data.length-1] || {}\r\n    , _itemOldest = data[0] || {}\r\n    , _dateNewest = _itemNewest.Year || ''\r\n    , _dateOldest = _itemOldest.Year || ''\r\n    , _descr = this.toDescr(_itemNewest);\r\n    return {\r\n      description: _descr,\r\n      frequency: \"Annual\",\r\n      name: title + ': ' + subtitle,\r\n      newest_available_date: _dateNewest,\r\n      oldest_available_date: _dateOldest\r\n    };\r\n   }\r\n}\r\n\r\nexport default fnDescr\r\n"]}
{"version":3,"sources":["../../../src/adapters/faostat/FaoStatApi.js"],"names":["C","BASE","TAIL","MEM_YEAR","undefined","_crMemYear","year","Date","getUTCFullYear","arr","i","push","join","_getMemYear","_isTitle","qT","indexOf","length","FaoStatApi","getRequestUrl","option","proxy","one","two","three","dfElement","dfDomain","dfItemName","_element","_year","checkResponse","json","Array","isArray","data","addPropsTo","qA","qI","qE","title","Object","assign"],"mappings":";;;;AAAA,IAAMA,CAAC,GAAG;AACRC,EAAAA,IAAI,EAAE,qDADE;AAERC,EAAAA,IAAI,EAAE,2GAFE;AAGRC,EAAAA,QAAQ,EAAEC;AAHF,CAAV;;AAMA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,MAAMC,IAAI,GAAI,IAAIC,IAAJ,EAAD,CAAaC,cAAb,EAAb;AAAA,MACMC,GAAG,GAAG,EADZ;AAEA,MAAIC,CAAC,GAAG,IAAR;;AACA,SAAKA,CAAC,GAACJ,IAAP,EAAYI,CAAC,EAAb,EAAgB;AAAED,IAAAA,GAAG,CAACE,IAAJ,CAASD,CAAT;AAAa;;AAC/B,SAAOV,CAAC,CAACG,QAAF,GAAaM,GAAG,CAACG,IAAJ,CAAS,GAAT,CAApB;AACD,CAND;;AAOA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,SAAOb,CAAC,CAACG,QAAF,IAAcE,UAAU,EAA/B;AACD,CAFD;;AAIA,IAAMS,QAAQ,GAAG,SAAXA,QAAW,CAACC,EAAD,EAAQ;AACvB,SAAOA,EAAE,CAACC,OAAH,CAAW,OAAX,MAAwB,CAAC,CAAzB,IACDD,EAAE,CAACE,MAAH,GAAY,EADlB;AAED,CAHD;;AAKA,IAAMC,UAAU,GAAG;AACjBC,EAAAA,aADiB,yBACHC,MADG,EACI;AAAA,QAEXC,KAFW,GAORD,MAPQ,CAEXC,KAFW;AAAA,QAGXC,GAHW,GAORF,MAPQ,CAGXE,GAHW;AAAA,QAGNC,GAHM,GAORH,MAPQ,CAGNG,GAHM;AAAA,QAGDC,KAHC,GAORJ,MAPQ,CAGDI,KAHC;AAAA,QAIXC,SAJW,GAORL,MAPQ,CAIXK,SAJW;AAAA,2BAORL,MAPQ,CAKXM,QALW;AAAA,QAKXA,QALW,iCAKF,IALE;AAAA,6BAORN,MAPQ,CAMXO,UANW;AAAA,QAMXA,UANW,mCAMA,MANA;AAAA,QAQZC,QARY,GAQDJ,KAAK,IAAIC,SARR;AAAA,QASZI,KATY,GASJhB,WAAW,EATP;;AAWnB,gBAAUQ,KAAV,GAAkBrB,CAAC,CAACC,IAApB,SAA4ByB,QAA5B,iBAAgDE,QAAhD,cAAiEN,GAAjE,SAAwEK,UAAxE,SAAsFJ,GAAtF,cAAkGM,KAAlG,SAA2G7B,CAAC,CAACE,IAA7G;AACD,GAbgB;AAejB4B,EAAAA,aAfiB,yBAeHC,IAfG,EAeE;AACjB,WAAOA,IAAI,IAAIC,KAAK,CAACC,OAAN,CAAcF,IAAI,CAACG,IAAnB,CAAf;AACD,GAjBgB;AAmBjBC,EAAAA,UAnBiB,sBAmBNf,MAnBM,EAmBC;AAAA,QACRgB,EADQ,GACchB,MADd,CACRgB,EADQ;AAAA,QACJC,EADI,GACcjB,MADd,CACJiB,EADI;AAAA,QACAC,EADA,GACclB,MADd,CACAkB,EADA;AAAA,qBACclB,MADd,CACIL,EADJ;AAAA,QACIA,EADJ,2BACO,EADP;AAEhB,QAAMwB,KAAK,GAAGzB,QAAQ,CAACC,EAAD,CAAR,GAAeA,EAAf,GAAoB,EAAlC;AACAyB,IAAAA,MAAM,CAACC,MAAP,CAAcrB,MAAd,EAAsB;AACpBE,MAAAA,GAAG,EAAEc,EADe;AAEpBb,MAAAA,GAAG,EAAEc,EAFe;AAGpBb,MAAAA,KAAK,EAAEc,EAHa;AAIpBC,MAAAA,KAAK,EAALA;AAJoB,KAAtB;AAMD;AA5BgB,CAAnB;eA+BerB,U","sourcesContent":["const C = {\r\n  BASE: 'http://fenixservices.fao.org/faostat/api/v1/en/data',\r\n  TAIL: 'area_cs=FAO&item_cs=FAO&show_codes=true&show_unit=true&show_flags=true&null_values=false&output_type=json',\r\n  MEM_YEAR: undefined\r\n};\r\n\r\nconst _crMemYear = () => {\r\n  const year = (new Date()).getUTCFullYear()\r\n      , arr = [];\r\n  let i = 1980;\r\n  for(;i<year;i++){ arr.push(i) }\r\n  return C.MEM_YEAR = arr.join(',');\r\n};\r\nconst _getMemYear = () => {\r\n  return C.MEM_YEAR || _crMemYear();\r\n};\r\n\r\nconst _isTitle = (qT) => {\r\n  return qT.indexOf('World') !== -1\r\n     && qT.length < 22;\r\n};\r\n\r\nconst FaoStatApi = {\r\n  getRequestUrl(option){\r\n    const {\r\n            proxy,\r\n            one, two, three,\r\n            dfElement,\r\n            dfDomain='QC',\r\n            dfItemName='item'\r\n           } = option\r\n         , _element = three || dfElement\r\n         , _year = _getMemYear();\r\n\r\n    return `${proxy}${C.BASE}/${dfDomain}?element=${_element}&area=${one}&${dfItemName}=${two}&year=${_year}&${C.TAIL}`;\r\n  },\r\n\r\n  checkResponse(json){\r\n    return json && Array.isArray(json.data);\r\n  },\r\n\r\n  addPropsTo(option){\r\n    const { qA, qI, qE, qT='' } = option;\r\n    const title = _isTitle(qT) ? qT : '';\r\n    Object.assign(option, {\r\n      one: qA,\r\n      two: qI,\r\n      three: qE,\r\n      title\r\n    })\r\n  }\r\n};\r\n\r\nexport default FaoStatApi\r\n"],"file":"FaoStatApi.js"}
{"version":3,"sources":["../../../src/adapters/iex/IexApi.js"],"names":["C","BASE_URL","DF_SYMBOL","DF_PERIOD","_crUrlType1","option","value","_urlDividends","dfPeriod","_urlChart","one","two","symbol","_symbol","_period","_crUrlMarketList","url","q","_rUrl","DF","IT","ERN","DIV","CHART","COM","STA","ML","IexApi","getRequestUrl","dfType","apiKey","_url","checkResponse","json","errCaption","message"],"mappings":";;;;;;;AACA;;;;AAEA,IAAMA,CAAC,GAAG;AACRC,EAAAA,QAAQ,EAAE,wCADF;AAERC,EAAAA,SAAS,EAAE,MAFH;AAGRC,EAAAA,SAAS,EAAE;AAHH,CAAV,C,CAMA;;AACA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAC,MAAM,EAAI;AAAA,sBACPA,MADO,CACpBC,KADoB;AAAA,MACpBA,KADoB,8BACd,EADc;AAE5B,SAAUN,CAAC,CAACC,QAAZ,SAAwBK,KAAxB;AACD,CAHD;;AAKA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACF,MAAD,EAAY;AAAA,uBAI5BA,MAJ4B,CAE9BC,KAF8B;AAAA,MAE9BA,KAF8B,+BAExB,EAFwB;AAAA,MAG9BE,QAH8B,GAI5BH,MAJ4B,CAG9BG,QAH8B;AAKhC,SAAUR,CAAC,CAACC,QAAZ,SAAwBK,KAAxB,mBAA2CE,QAA3C;AACD,CAND;;AAQA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACJ,MAAD,EAAY;AAAA,MACpBK,GADoB,GACWL,MADX,CACpBK,GADoB;AAAA,MACfC,GADe,GACWN,MADX,CACfM,GADe;AAAA,MACVC,MADU,GACWP,MADX,CACVO,MADU;AAAA,MACFJ,QADE,GACWH,MADX,CACFG,QADE;AAAA,MAE1BK,OAF0B,GAEhBH,GAAG,IAAIE,MAAP,IAAiBZ,CAAC,CAACE,SAFH;AAAA,MAG1BY,OAH0B,GAGhBH,GAAG,IAAIH,QAAP,IAAmBR,CAAC,CAACG,SAHL;;AAI5BE,EAAAA,MAAM,CAACK,GAAP,GAAaG,OAAb;AACAR,EAAAA,MAAM,CAACM,GAAP,GAAaG,OAAb;AACA,SAAUd,CAAC,CAACC,QAAZ,SAAwBY,OAAxB,eAAyCC,OAAzC;AACD,CAPD;;AASA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACV,MAAD,EAAY;AAAA,MAC3BC,KAD2B,GACjBD,MADiB,CAC3BC,KAD2B;AAEnC,SAAO;AACLU,IAAAA,GAAG,EAAKhB,CAAC,CAACC,QAAP,qBAA+BK,KAD7B;AAELW,IAAAA,CAAC,EAAE;AAFE,GAAP;AAID,CAND;;AAQA,IAAMC,KAAK;AACTC,EAAAA,EAAE,EAAEV;AADK,UAERW,sBAAGC,GAFK,IAECjB,WAFD,SAGRgB,sBAAGE,GAHK,IAGCf,aAHD,SAIRa,sBAAGG,KAJK,IAIGd,SAJH,SAKRW,sBAAGI,GALK,IAKCpB,WALD,SAMRgB,sBAAGK,GANK,IAMCrB,WAND,SAORgB,sBAAGM,EAPK,IAOAX,gBAPA,SAAX;;AAUA,IAAMY,MAAM,GAAG;AACbC,EAAAA,aADa,yBACCvB,MADD,EACQ;AAAA,QACXwB,MADW,GACQxB,MADR,CACXwB,MADW;AAAA,QACHC,MADG,GACQzB,MADR,CACHyB,MADG;AAAA,QAEjBC,IAFiB,GAEV,CAACb,KAAK,CAACW,MAAD,CAAL,IAAiBX,KAAK,CAACC,EAAxB,EAA4Bd,MAA5B,CAFU;;AAGnB,WAAO0B,IAAI,CAACd,CAAL,GACAc,IAAI,CAACf,GADL,SACYe,IAAI,CAACd,CADjB,eAC4Ba,MAD5B,GAEAC,IAFA,eAEcD,MAFrB;AAGD,GAPY;AASbE,EAAAA,aATa,yBASCC,IATD,EASM;AACjB,QAAI,CAACA,IAAL,EAAW;AACT,YAAM;AACJC,QAAAA,UAAU,EAAE,OADR;AAEJC,QAAAA,OAAO,EAAE;AAFL,OAAN;AAID;;AACD,WAAO,IAAP;AACD;AAjBY,CAAf;eAoBeR,M","sourcesContent":["\r\nimport IT from './ItemTypes'\r\n\r\nconst C = {\r\n  BASE_URL: 'https://cloud.iexapis.com/stable/stock',\r\n  DF_SYMBOL: 'AAPL',\r\n  DF_PERIOD: '1m'\r\n};\r\n\r\n//earning, company, stats : symbol/suffix\r\nconst _crUrlType1 = option => {\r\n  const { value='' } = option;\r\n  return `${C.BASE_URL}/${value}`;\r\n};\r\n\r\nconst _urlDividends = (option) => {\r\n  const {\r\n    value='',\r\n    dfPeriod\r\n  } = option;\r\n  return `${C.BASE_URL}/${value}/dividends/${dfPeriod}`;\r\n};\r\n\r\nconst _urlChart = (option) => {\r\n  const { one, two, symbol, dfPeriod } = option\r\n  , _symbol = one || symbol || C.DF_SYMBOL\r\n  , _period = two || dfPeriod || C.DF_PERIOD;\r\n  option.one = _symbol\r\n  option.two = _period\r\n  return `${C.BASE_URL}/${_symbol}/chart/${_period}`;\r\n};\r\n\r\nconst _crUrlMarketList = (option) => {\r\n  const { value } = option;\r\n  return {\r\n    url: `${C.BASE_URL}/market/list/${value}`,\r\n    q: 'listLimit=20&displayPercent=true'\r\n  };\r\n};\r\n\r\nconst _rUrl = {\r\n  DF: _urlChart,\r\n  [IT.ERN]: _crUrlType1,\r\n  [IT.DIV]: _urlDividends,\r\n  [IT.CHART]: _urlChart,\r\n  [IT.COM]: _crUrlType1,\r\n  [IT.STA]: _crUrlType1,\r\n  [IT.ML]: _crUrlMarketList\r\n};\r\n\r\nconst IexApi = {\r\n  getRequestUrl(option){\r\n    const { dfType, apiKey } = option\r\n    , _url = (_rUrl[dfType] || _rUrl.DF)(option);\r\n    return _url.q\r\n      ? `${_url.url}?${_url.q}&token=${apiKey}`\r\n      : `${_url}?token=${apiKey}`;\r\n  },\r\n\r\n  checkResponse(json){\r\n    if (!json) {\r\n      throw {\r\n        errCaption: \"Error\",\r\n        message: 'Response is empty.'\r\n      };\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default IexApi\r\n"],"file":"IexApi.js"}
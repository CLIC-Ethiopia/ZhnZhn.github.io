{"version":3,"sources":["../../../src/adapters/crypto-compare/fnAdapter.js"],"names":["_assign","Object","assign","_crZhConfig","option","linkFn","value","item","_crInfo","itemCaption","name","_isNumber","v","_isHLOC","p","open","high","low","close","_addPointTo","arr","d","push","_addColumnPointTo","date","volume","_high","_low","_addHLPointTo","x","dayHigh","dayLow","crData","json","data","dVolume","dColumn","dToVolume","dHL","Data","forEach","time","_date","volumefrom","volumeto","crConfOption","zhConfig","info"],"mappings":"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","sourcesContent":["export { getValue } from '../AdapterFn';\r\nexport { crError } from '../crFn';\r\n\r\nimport {\r\n  roundBy,\r\n  crZhConfig\r\n} from '../AdapterFn';\r\nimport { crVolumePoint } from '../pointFn';\r\n\r\nexport const _assign = Object.assign\r\n\r\nconst _crZhConfig = (option) => {\r\n  const { linkFn, value } = option;\r\n  return _assign(crZhConfig(option), {\r\n    linkFn,\r\n    item: value\r\n  });\r\n}\r\n\r\nconst _crInfo = ({\r\n  itemCaption\r\n}) => ({\r\n  name: itemCaption\r\n});\r\n\r\nconst _isNumber = v => typeof v === 'number';\r\n\r\nconst _isHLOC = (p) => _isNumber(p.open)\r\n  && _isNumber(p.high)\r\n  && _isNumber(p.low)\r\n  && _isNumber(p.close);\r\n\r\nconst _addPointTo = (arr, d, value) => {\r\n  if (_isNumber(value)) {\r\n    //arr.push({ x: d, y: value })\r\n    arr.push([d, value ])\r\n  }\r\n};\r\nconst _addColumnPointTo = (\r\n  arr,\r\n  date,\r\n  p,\r\n  volume\r\n) => {\r\n  if (_isNumber(volume)){\r\n    arr.push(\r\n      crVolumePoint({\r\n         date: date,\r\n         open: p.open,\r\n         close: p.close,\r\n         volume: volume,\r\n         option: {\r\n            _high: p.high,\r\n            _low: p.low\r\n          }\r\n      })\r\n    )\r\n  }\r\n};\r\n\r\nconst _addHLPointTo = (\r\n  arr,\r\n  date,\r\n  p\r\n) => {\r\n    arr.push({\r\n      x: date,\r\n      high: roundBy(p.high - p.close, 2),\r\n      low: roundBy(p.low - p.close, 2),\r\n      open: p.open,\r\n      dayHigh: p.high,\r\n      dayLow: p.low,\r\n      close: p.close\r\n    })\r\n};\r\n\r\nexport const crData = (\r\n  json\r\n) => {\r\n  const data = []\r\n  , dVolume = []\r\n  , dColumn = []\r\n  , dToVolume = []\r\n  , dHL = [];\r\n  json.Data.forEach(p => {\r\n    if (_isNumber(p.time)) {\r\n      const _date = p.time*1000;\r\n      _addPointTo(data, _date, p.close)\r\n      _addPointTo(dVolume, _date, p.volumefrom)\r\n      _addPointTo(dToVolume, _date, p.volumeto)\r\n\r\n      if (_isHLOC(p)) {\r\n        _addColumnPointTo(dColumn,\r\n          _date, p, p.volumefrom\r\n        )\r\n        _addHLPointTo(dHL, _date, p)\r\n      }\r\n    }\r\n  })\r\n  return {\r\n    data,\r\n    dVolume,\r\n    dColumn,\r\n    dToVolume,\r\n    dHL\r\n  };\r\n}\r\n\r\nexport const crConfOption = (\r\n  option\r\n) => ({\r\n  zhConfig: _crZhConfig(option),\r\n  info: _crInfo(option)\r\n})\r\n"],"file":"fnAdapter.js"}
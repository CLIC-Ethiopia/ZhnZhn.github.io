{"version":3,"sources":["../../../src/adapters/crypto-compare/fnAdapter.js"],"names":["valueMoving","AdapterFn","volumeColumnPoint","_crZhConfig","option","title","dataSource","value","linkFn","id","key","itemCaption","isWithoutAdd","isWithLegend","item","_crInfo","name","_isNumber","v","_isHLOC","p","open","high","low","close","_addPointTo","arr","d","push","x","y","_addColumnPointTo","volume","date","_high","_low","_addHLPointTo","parseFloat","toFixed","dayHigh","dayLow","fnAdapter","crData","json","data","dVolume","dColumn","dToVolume","dHL","Data","forEach","time","_date","volumefrom","volumeto","crConfigOption","zhConfig","info"],"mappings":"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","sourcesContent":["\r\nimport AdapterFn from '../AdapterFn'\r\n\r\nconst {\r\n  valueMoving,  \r\n  volumeColumnPoint\r\n} = AdapterFn;\r\n\r\nconst _crZhConfig = (option) => {\r\n  const {\r\n          title, dataSource, value, linkFn\r\n        } = option;\r\n  return {\r\n    id: value, key: value,\r\n    itemCaption: title,\r\n    isWithoutAdd: true,\r\n    isWithLegend: false,\r\n    linkFn, item: value,\r\n    dataSource\r\n  };\r\n};\r\n\r\nconst _crInfo = ({ title }) => ({\r\n  name: title\r\n});\r\n\r\nconst _isNumber = v => typeof v === 'number';\r\n\r\nconst _isHLOC = (p) => {\r\n  return _isNumber(p.open)\r\n     && _isNumber(p.high)\r\n     && _isNumber(p.low)\r\n     && _isNumber(p.close);\r\n};\r\n\r\nconst _addPointTo = (arr, d, value) => {\r\n  if (_isNumber(value)) {\r\n    arr.push({ x: d, y: value })\r\n  }\r\n};\r\nconst _addColumnPointTo = (arr, d, p, volume) => {\r\n  if (_isNumber(volume)){\r\n    arr.push(\r\n      volumeColumnPoint({\r\n         date: d,\r\n         open: p.open,\r\n         close: p.close,\r\n         volume: volume,\r\n         option: {\r\n            _high: p.high,\r\n            _low: p.low\r\n          }\r\n      })\r\n    )\r\n  }\r\n};\r\nconst _addHLPointTo = (arr, d, p) => {\r\n    arr.push({\r\n      x: d,\r\n      high: parseFloat((p.high - p.close).toFixed(2)),\r\n      low: parseFloat((p.low - p.close).toFixed(2)),\r\n      open: p.open,\r\n      dayHigh: p.high,\r\n      dayLow: p.low,\r\n      close: p.close\r\n    })\r\n};\r\n\r\nconst fnAdapter = {\r\n  crData: (json) => {\r\n    const data = []\r\n        , dVolume = []\r\n        , dColumn = []\r\n        , dToVolume = []\r\n        , dHL = [];\r\n    json.Data.forEach(p => {\r\n      if (_isNumber(p.time)) {\r\n        const _date = p.time*1000;\r\n        _addPointTo(data, _date, p.close)\r\n        _addPointTo(dVolume, _date, p.volumefrom)\r\n        _addPointTo(dToVolume, _date, p.volumeto)\r\n\r\n        if (_isHLOC(p)) {\r\n          _addColumnPointTo(dColumn,\r\n            _date, p, p.volumefrom\r\n          )\r\n          _addHLPointTo(dHL, _date, p)\r\n        }\r\n      }\r\n    })\r\n    return {\r\n      data,\r\n      dVolume, dColumn,\r\n      dToVolume,\r\n      dHL\r\n    };\r\n  },\r\n\r\n  crConfigOption: ({ option, data }) => ({\r\n    zhConfig: _crZhConfig(option),\r\n    valueMoving: valueMoving(data),\r\n    info: _crInfo(option)\r\n  })\r\n};\r\n\r\nexport default fnAdapter\r\n"],"file":"fnAdapter.js"}
{"version":3,"sources":["../../../src/adapters/crypto-compare/fnAdapter.js"],"names":["crError","getValue","roundBy","AdapterFn","_crZhConfig","itemCaption","dataSource","_itemKey","value","linkFn","id","key","item","_crInfo","name","_isNumber","v","_isHLOC","p","open","high","low","close","_addPointTo","arr","d","push","_addColumnPointTo","volume","date","option","_high","_low","_addHLPointTo","x","dayHigh","dayLow","fnAdapter","crData","json","data","dVolume","dColumn","dToVolume","dHL","Data","forEach","time","_date","volumefrom","volumeto","crConfOption","zhConfig","info"],"mappings":"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","sourcesContent":["\r\nimport AdapterFn from '../AdapterFn'\r\nimport { crVolumePoint } from '../pointFn';\r\n\r\nconst {\r\n  crError,\r\n  getValue,\r\n  roundBy\r\n} = AdapterFn;\r\n\r\nconst _crZhConfig = ({\r\n  itemCaption,\r\n  dataSource,\r\n  _itemKey,\r\n  value,\r\n  linkFn\r\n}) => ({\r\n  id: _itemKey, key: _itemKey,\r\n  itemCaption,\r\n  linkFn,\r\n  item: value,\r\n  dataSource\r\n});\r\n\r\nconst _crInfo = ({ itemCaption }) => ({\r\n  name: itemCaption\r\n});\r\n\r\nconst _isNumber = v => typeof v === 'number';\r\n\r\nconst _isHLOC = (p) => _isNumber(p.open)\r\n  && _isNumber(p.high)\r\n  && _isNumber(p.low)\r\n  && _isNumber(p.close);\r\n\r\nconst _addPointTo = (arr, d, value) => {\r\n  if (_isNumber(value)) {\r\n    //arr.push({ x: d, y: value })\r\n    arr.push([d, value ])\r\n  }\r\n};\r\nconst _addColumnPointTo = (arr, d, p, volume) => {\r\n  if (_isNumber(volume)){\r\n    arr.push(\r\n      crVolumePoint({\r\n         date: d,\r\n         open: p.open,\r\n         close: p.close,\r\n         volume: volume,\r\n         option: {\r\n            _high: p.high,\r\n            _low: p.low\r\n          }\r\n      })\r\n    )\r\n  }\r\n};\r\nconst _addHLPointTo = (arr, d, p) => {\r\n    arr.push({\r\n      x: d,\r\n      high: roundBy(p.high - p.close, 2),\r\n      low: roundBy(p.low - p.close, 2),\r\n      open: p.open,\r\n      dayHigh: p.high,\r\n      dayLow: p.low,\r\n      close: p.close\r\n    })\r\n};\r\n\r\nconst fnAdapter = {\r\n  crError,\r\n  getValue,\r\n\r\n  crData: (json) => {\r\n    const data = []\r\n        , dVolume = []\r\n        , dColumn = []\r\n        , dToVolume = []\r\n        , dHL = [];\r\n    json.Data.forEach(p => {\r\n      if (_isNumber(p.time)) {\r\n        const _date = p.time*1000;\r\n        _addPointTo(data, _date, p.close)\r\n        _addPointTo(dVolume, _date, p.volumefrom)\r\n        _addPointTo(dToVolume, _date, p.volumeto)\r\n\r\n        if (_isHLOC(p)) {\r\n          _addColumnPointTo(dColumn,\r\n            _date, p, p.volumefrom\r\n          )\r\n          _addHLPointTo(dHL, _date, p)\r\n        }\r\n      }\r\n    })\r\n    return {\r\n      data,\r\n      dVolume, dColumn,\r\n      dToVolume,\r\n      dHL\r\n    };\r\n  },\r\n\r\n  crConfOption: (option) => ({\r\n    zhConfig: _crZhConfig(option),\r\n    info: _crInfo(option)\r\n  })\r\n};\r\n\r\nexport default fnAdapter\r\n"],"file":"fnAdapter.js"}
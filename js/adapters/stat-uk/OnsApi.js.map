{"version":3,"sources":["../../../src/adapters/stat-uk/OnsApi.js"],"names":["getValue","fnAdapter","crError","C","ROOT","EDT","OBS","QUERY_TIME","QUERY_TAIL","ERR_CAPTION","MSG_EMPTY","_isArr","Array","isArray","_crErr","bind","_crUrl","item","vers","_crTradeUrl","items","v1","v2","v3","_crCpiUrl","_crPhriUrl","_crGdpUrl","_rCrUrl","OnsApi","getRequestUrl","option","dfV","checkResponse","json","observations"],"mappings":"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","sourcesContent":["import fnAdapter from './fnAdapter'\r\n\r\nconst {\r\n  getValue,\r\n  crError\r\n} = fnAdapter\r\n\r\nconst C = {\r\n  ROOT: 'https://api.beta.ons.gov.uk/v1/datasets/',\r\n  EDT: '/editions/time-series/versions/',\r\n  OBS: '/observations?',\r\n  QUERY_TIME: '&time=*',\r\n  QUERY_TAIL: '&time=*&geography=K02000001',\r\n  ERR_CAPTION: 'Server Response',\r\n  MSG_EMPTY: 'Dataset is empty'\r\n}\r\n\r\nconst _isArr = Array.isArray\r\nconst _crErr = crError.bind(null, C.ERR_CAPTION, C.MSG_EMPTY);\r\n\r\nconst _crUrl = (item, vers) => C.ROOT+item+C.EDT+vers+C.OBS;\r\n\r\nconst _crTradeUrl = ({ items }) => {\r\n  const v1 = getValue(items[0])\r\n  , v2 = getValue(items[1])\r\n  , v3 = getValue(items[2]);\r\n  return `${_crUrl('trade', '21')}country=${v1}&commodity=${v2}&direction=${v3}${C.QUERY_TAIL}`;\r\n}\r\n\r\nconst _crCpiUrl = ({ items }) => {\r\n  const v1 = getValue(items[0]);\r\n  return `${_crUrl('cpih01', '34')}aggregate=${v1}${C.QUERY_TAIL}`;\r\n}\r\n\r\nconst _crPhriUrl = ({ items }) => {\r\n  const v1 = getValue(items[0])\r\n  , v2 = getValue(items[1]);\r\n  return `${_crUrl('index-private-housing-rental-prices', '20')}geography=${v1}&variable=${v2}${C.QUERY_TIME}`;\r\n}\r\n\r\nconst _crGdpUrl = ({ items }) => {\r\n  const v1 = getValue(items[0])\r\n  , v2 = getValue(items[1])\r\n  , v3 = getValue(items[2]);\r\n  return `${_crUrl('regional-gdp-by-quarter', '5')}geography=${v1}&sic=${v2}&measure=${v3}&prices=cvm${C.QUERY_TIME}`;\r\n}\r\n\r\nconst _rCrUrl = {\r\n  '21': _crTradeUrl,\r\n  '34': _crCpiUrl,\r\n  '20': _crPhriUrl,\r\n  '5': _crGdpUrl\r\n}\r\n\r\nconst OnsApi = {\r\n  getRequestUrl(option){\r\n    return _rCrUrl[option.dfV]?.(option);\r\n  },\r\n\r\n  checkResponse(json){\r\n    if (!(json && _isArr(json.observations))) {\r\n      throw _crErr();\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default OnsApi\r\n"],"file":"OnsApi.js"}
{"version":3,"sources":["../../../src/adapters/eia/EiaApi.js"],"names":["C","URL","S_URL","CAPTION","MSG","ERR","NOT_EXIST","EMPTY","DATA_EMPTY","_crErr","caption","message","errCaption","_getValue","obj","value","_crSeriaDf","option","sufix","items","_one","_two","_three","_sufix","_crSeriaPI2","prefix","_crSeriaPI321S","_rSeriaId","DF","pi2","pi231s","_crSeriaId","dfSeriaType","fn","EiaApi","getRequestUrl","apiKey","_seria_id","checkResponse","json","data","msgErr","error","indexOf","series"],"mappings":"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","sourcesContent":["const C = {\r\n  URL: \"https://api.eia.gov/category/\",\r\n  S_URL: \"https://api.eia.gov/series/\"\r\n};\r\nconst CAPTION = 'EIA';\r\nconst MSG = {\r\n  ERR: 'invalid series_id.',\r\n  NOT_EXIST: 'Data for enetered parameters is not existed.',\r\n  EMPTY: 'Response is empty.',\r\n  DATA_EMPTY: 'Data is empty.'\r\n};\r\n\r\nconst _crErr = (caption, message) => ({\r\n    errCaption: caption,\r\n    message: message\r\n})\r\n\r\nconst _getValue = (obj) => {\r\n  return obj && obj.value\r\n   ? obj.value\r\n   : '';\r\n};\r\n\r\n\r\nconst _crSeriaDf = (option) => {\r\n  const {\r\n    sufix,\r\n    items=[]\r\n  } = option\r\n  , _one = _getValue(items[0])\r\n  , _two = _getValue(items[1])\r\n  , _three = _getValue(items[2])\r\n  , _sufix = _three || sufix || '' ;\r\n\r\n  return `${_two}${_one}${_sufix}`;\r\n};\r\nconst _crSeriaPI2 = (option) => {\r\n  const {\r\n    prefix,\r\n    items=[]\r\n  } = option\r\n  , _one = _getValue(items[0])\r\n  , _two = _getValue(items[1])\r\n  return `${prefix}${_one}${_two}`;\r\n};\r\nconst _crSeriaPI321S = (option) => {\r\n  const {\r\n    prefix,\r\n    items=[],\r\n    sufix\r\n  } = option\r\n  , _one = _getValue(items[0])\r\n  , _two = _getValue(items[1])\r\n  , _three = _getValue(items[2])\r\n  return `${prefix}${_three}-${_two}-${_one}${sufix}`;\r\n};\r\n\r\nconst _rSeriaId = {\r\n  DF: _crSeriaDf,\r\n  pi2: _crSeriaPI2,\r\n  pi231s: _crSeriaPI321S\r\n};\r\n\r\nconst _crSeriaId = (option) => {\r\n  const { dfSeriaType } = option\r\n  , fn = _rSeriaId[dfSeriaType] || _rSeriaId.DF;\r\n  return fn(option);\r\n}\r\n\r\nconst EiaApi = {\r\n  getRequestUrl(option){\r\n    const { apiKey } = option\r\n    , _seria_id = _crSeriaId(option);\r\n\r\n    return `${C.S_URL}?api_key=${apiKey}&series_id=${_seria_id}`;\r\n  },\r\n\r\n  checkResponse(json){\r\n    if (!json) {\r\n      throw _crErr(CAPTION, MSG.EMPTY);\r\n    }\r\n    const { data={} } = json\r\n    , { error:msgErr } = data;\r\n    if (msgErr) {\r\n      if (msgErr.indexOf(MSG.ERR) !== -1) {\r\n        throw _crErr(CAPTION, MSG.NOT_EXIST);\r\n      }\r\n      throw _crErr(CAPTION, msgErr);\r\n    }\r\n    if (!json.series || !json.series[0]) {\r\n      throw _crErr(CAPTION, MSG.DATA_EMPTY);\r\n    }\r\n    return true;\r\n  }\r\n};\r\n\r\nexport default EiaApi\r\n"],"file":"EiaApi.js"}
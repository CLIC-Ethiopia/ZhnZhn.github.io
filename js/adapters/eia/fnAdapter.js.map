{"version":3,"sources":["../../../src/adapters/eia/fnAdapter.js"],"names":["valueMoving","AdapterFn","C","CHART_URL","_toUTC","str","length","_year","substr","_month","parseInt","_day","Date","UTC","_crZhConfig","json","option","dataSource","key","id","series","series_id","isWithoutAdd","_crDescr","s","description","units","source","updated","replace","_crInfo","_s","name","_getCaption","obj","caption","fnAdapter","crTitle","items","dfTitle","_s1","_s2","_s3","_subtitle","title","subtitle","crData","data","map","arr","x","y","reverse","crConfigOption","zhConfig","info"],"mappings":"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","sourcesContent":["import AdapterFn from '../AdapterFn'\r\n\r\nconst {\r\n  valueMoving\r\n} = AdapterFn;\r\n\r\nconst C = {\r\n  CHART_URL: \"https://www.eia.gov/opendata/embed.php?type=chart&series_id=\"\r\n};\r\n\r\nconst _toUTC = (str) => {\r\n  if (str.length === 6) {\r\n    const _year = str.substr(0, 4)\r\n        , _month = parseInt(str.substr(4), 10)-1\r\n        , _day = (_month === 1) ? 28 : 30;\r\n    return Date.UTC(_year, _month, _day);\r\n  }\r\n  if (str.length === 4) {\r\n    return Date.UTC(str, 11, 31);\r\n  }\r\n};\r\n\r\nconst _crZhConfig = (json, option) => {\r\n  const { dataSource, key } = option\r\n  , id = json.series[0].series_id;\r\n  return {\r\n    id, key,\r\n    //itemCaption: title,\r\n    isWithoutAdd: true,\r\n    dataSource\r\n  };\r\n};\r\n\r\nconst _crDescr = (s) => {\r\n  const {\r\n    description='',\r\n    units='',\r\n    source='',\r\n    series_id='',\r\n    updated\r\n  } = s;\r\n  return `<p>${description}</p>\r\n  <p>Units: ${units}</p>\r\n  <p>Source: ${source}</p>\r\n  <p>Updated: ${updated ? updated.replace('T', ' '): ''}</p>\r\n  <p>Id: ${series_id}</p>\r\n  <p><a href=\"${C.CHART_URL}${series_id}\" style=\"padding-top: 4px;\">EIA Chart</a></p>`;\r\n};\r\n\r\nconst _crInfo = (json) => {\r\n  const _s = json.series[0]\r\n  return {\r\n    name: _s.name,\r\n    description: _crDescr(_s)\r\n  };\r\n}\r\n\r\nconst _getCaption = (obj) => {\r\n  return obj && obj.caption\r\n    ? obj.caption\r\n    : '';\r\n};\r\n\r\nconst fnAdapter = {\r\n  /*\r\n  [ [\"201806\", 1000], ... ]\r\n  */\r\n  crTitle: (option) => {\r\n    const {\r\n      items=[],\r\n      dfTitle\r\n    } = option\r\n    , _s1 = _getCaption(items[0])\r\n    , _s2 = _getCaption(items[1])\r\n    , _s3 = _getCaption(items[2])\r\n    , _subtitle = `${_s2}${_s3 ? ':' : ''} ${_s3}`;\r\n\r\n    return {\r\n      title: `${_s1}: ${dfTitle}`,\r\n      subtitle: _subtitle\r\n    };\r\n  },\r\n  crData(json) {\r\n    return json.series[0].data.map(arr => ({\r\n      x: _toUTC(arr[0]),\r\n      y: arr[1]\r\n    }))\r\n    .reverse();\r\n  },\r\n\r\n  crConfigOption: ({ json, option, data }) => ({\r\n    zhConfig: _crZhConfig(json, option),\r\n    valueMoving: valueMoving(data),\r\n    info: _crInfo(json)\r\n  })\r\n}\r\n\r\nexport default fnAdapter\r\n"],"file":"fnAdapter.js"}
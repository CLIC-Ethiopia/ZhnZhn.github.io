{"version":3,"sources":["../../src/adapters/AdapterStockFn.js"],"names":["_isUndef","v","toStockSeriesData","arr","toDate","ymdhmsToUTC","seriaOption","option","isAllSeries","pnDate","isNotZoomToMinMax","isDrawDeltaExtrems","seriaType","seriaColor","seriaWidth","dC","dO","dH","dL","dV","dVc","dATH","dMfi","_prevClose","minClose","Number","POSITIVE_INFINITY","maxClose","NEGATIVE_INFINITY","forEach","item","open","high","low","close","volume","date","_date","push","_high","_low"],"mappings":"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","sourcesContent":["import { ymdhmsToUTC } from './AdapterFn';\r\nimport {\r\n  crVolumePoint,\r\n  crAthPoint\r\n} from './pointFn';\r\n\r\nconst _isUndef = v => typeof v === 'undefined';\r\n\r\nexport const toStockSeriesData = ({\r\n  arr=[],\r\n  toDate=ymdhmsToUTC,\r\n  seriaOption,\r\n  option\r\n}) => {\r\n  const {\r\n    isAllSeries=true,\r\n    pnDate='date',\r\n  } = seriaOption || {}\r\n  , {\r\n    isNotZoomToMinMax,\r\n    isDrawDeltaExtrems,\r\n    seriaType,\r\n    seriaColor,\r\n    seriaWidth\r\n  } = option || {};\r\n  const dC = [], dO = [], dH = [], dL = []\r\n  , dV = [], dVc = []\r\n  , dATH = [], dMfi = [];\r\n  let _prevClose\r\n  , minClose = Number.POSITIVE_INFINITY\r\n  , maxClose = Number.NEGATIVE_INFINITY;\r\n  arr.forEach(item => {\r\n    const {\r\n       open, high, low, close,\r\n       volume\r\n      } = item\r\n    , date = item[pnDate] || ''\r\n    , _date = toDate(date);\r\n\r\n    dC.push([_date, close])\r\n\r\n    if (isAllSeries) {\r\n      if (minClose > close) { minClose = close }\r\n      if (maxClose < close ) { maxClose = close }\r\n\r\n      dO.push([_date, open])\r\n      dH.push([_date, high])\r\n      dL.push([_date, low])\r\n      dV.push([_date, volume])\r\n      dVc.push(\r\n          crVolumePoint({\r\n             open, close, volume, date: _date,\r\n             option: { _high: high, _low: low }\r\n          })\r\n      )\r\n      dMfi.push([date, close, high, low, close, volume])\r\n      dATH.push(!_isUndef(_prevClose)\r\n        ? crAthPoint({\r\n           date: _date,\r\n           close: _prevClose,\r\n           open\r\n          })\r\n        : crAthPoint({\r\n           date: _date,\r\n           close: close,\r\n           open: close\r\n          })\r\n      )\r\n      _prevClose = close\r\n     }\r\n  })\r\n  return {\r\n    dC, dO, dH, dL,\r\n    minClose, maxClose,\r\n    dVc, dV,\r\n    dATH, dMfi,\r\n    isNotZoomToMinMax,\r\n    isDrawDeltaExtrems,\r\n    seriaType,\r\n    seriaColor,\r\n    seriaWidth\r\n  };\r\n}\r\n"],"file":"AdapterStockFn.js"}
{"version":3,"sources":["../../../src/adapters/barchart/fnAdapter.js"],"names":["getCaption","AdapterFn","getValue","crItemConf","crValueConf","valueMoving","joinBy","ymdToUTC","toSeriesData","AdapterStockFn","DESCR","DATA_SOURCE","_crInfo","title","subtitle","description","frequency","name","toDate","dt","getFromDate","fromDate","_crZhConfig","id","data","option","value","linkFn","dfT","items","dataSource","key","item","columnName","itemConf","_itemKey","legend","stockSeriesLegend","fnAdapter","crChartId","crOpenInterest","json","results","map","tradingDay","openInterest","crConfigOption","chartId","info","zhConfig"],"mappings":"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","sourcesContent":["\r\nimport dt from '../../utils/DateUtils'\r\n\r\nimport AdapterFn from '../AdapterFn'\r\nimport AdapterStockFn from '../AdapterStockFn'\r\n\r\nconst {\r\n  getCaption,\r\n  getValue,\r\n  crItemConf,\r\n  crValueConf,\r\n  valueMoving,\r\n  joinBy,\r\n  ymdToUTC\r\n} =AdapterFn;\r\nconst { toSeriesData } = AdapterStockFn;\r\n\r\nconst DESCR = \"Copyright Â© 2017. All <a href='https://www.barchartmarketdata.com'>market data</a> provided by Barchart Market Data Solutions.<br><br>\" +\r\n              \"BATS market data is at least 15-minutes delayed. Forex market data is at least 10-minutes delayed. AMEX, NASDAQ, NYSE and futures market data (CBOT, CME, COMEX and NYMEX) is end-of-day. Information is provided 'as is' and solely for informational purposes, not for trading purposes or advice, and is delayed. To see all exchange delays and terms of use, please see our <a href='https://www.barchart.com/agreement.php'>disclaimer.</a>\"\r\nconst DATA_SOURCE = \"Barchart Market Data Solutions\"\r\n\r\nconst _crInfo = ({ title='', subtitle='' }) => ({\r\n  description: DESCR,\r\n  frequency: \"Daily\",\r\n  name: `${title} ${subtitle}`,\r\n  toDate: dt.getFromDate(0),\r\n  fromDate: dt.getFromDate(1)\r\n});\r\n\r\nconst _crZhConfig = (id, data, option) => {\r\n  const { value, linkFn, dfT, items } = option\r\n  , dataSource = DATA_SOURCE;\r\n  return {\r\n    key: value,\r\n    item: value,\r\n    columnName: \"Close\",\r\n    dataSource,\r\n    id,\r\n    linkFn,\r\n    itemConf: {\r\n      _itemKey: value,\r\n      ...crItemConf(option),\r\n      ...crValueConf(data),\r\n      value, dataSource,\r\n      dfT, items\r\n    },\r\n    legend: AdapterFn.stockSeriesLegend()\r\n  }\r\n};\r\n\r\nconst fnAdapter = {\r\n  getCaption,\r\n  getValue,\r\n  toSeriesData,\r\n  joinBy,  \r\n\r\n  crChartId: ({ value='' }) => `B/${value}`,\r\n\r\n  crOpenInterest: (json, option) => {\r\n    if (option.dfT !== \"FT\") {\r\n      return;\r\n    }\r\n    const { results=[] } = json;\r\n    return results.map(({ tradingDay, openInterest }) => [\r\n      ymdToUTC(tradingDay), openInterest\r\n    ]);\r\n  },\r\n\r\n  crConfigOption: ({ chartId, option, data }) => ({\r\n    valueMoving: valueMoving(data),\r\n    info: _crInfo(option),\r\n    zhConfig: _crZhConfig(chartId, data, option)\r\n  })\r\n}\r\n\r\nexport default fnAdapter\r\n"],"file":"fnAdapter.js"}
{"version":3,"sources":["../../../src/adapters/barchart/BarchartAdapter.js"],"names":["crChartId","fnAdapter","crConfigOption","toSeriesData","crOpenInterest","joinBy","_getValue","obj","value","_getCaption","caption","_crDfKey","option","linkFn","_crFtKey","items","it1","it2","it3","subtitle","_rCrKey","DF","FT","BarchartAdapter","crKey","dfT","_crKey","toConfig","json","chartId","title","dataOption","arr","results","seriaOption","pnDate","data","dataMfi","dataInterest","config","stockConfig","addCaption","add","addZhPoints","addMiniVolume","btTitle","dVolume","dColumn","toSeries","parentId","_id","isAllSeries","stockSeria","toSeria"],"mappings":"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","sourcesContent":["\r\nimport Builder from '../../charts/ConfigBuilder'\r\n\r\nimport fnAdapter from './fnAdapter'\r\n\r\nconst {\r\n  crChartId,\r\n  crConfigOption,\r\n  toSeriesData,\r\n  crOpenInterest,\r\n  joinBy\r\n} = fnAdapter;\r\n\r\nconst _getValue = obj => obj && obj.value\r\n  || '';\r\nconst _getCaption = obj => obj && obj.caption\r\n  || '';\r\n\r\nconst _crDfKey = (option) => {\r\n  option.linkFn = \"NASDAQ\"\r\n  return option.value;\r\n};\r\n\r\nconst _crFtKey = (option) => {\r\n  const { items=[] } = option\r\n  , [it1, it2, it3 ] = items;\r\n  option.linkFn = \"BR\"\r\n  option.subtitle = joinBy(' ',\r\n    _getCaption(it2),\r\n    _getCaption(it3)\r\n  )\r\n  return (option.value = joinBy('',\r\n    _getValue(it1),\r\n    _getValue(it2),\r\n    _getValue(it3)\r\n  ));\r\n};\r\n\r\nconst _rCrKey = {\r\n  DF: _crDfKey,\r\n  FT: _crFtKey\r\n};\r\n\r\nconst BarchartAdapter = {\r\n  crKey(option){\r\n    const { dfT } = option\r\n    , _crKey = _rCrKey[dfT] || _rCrKey.DF;\r\n    return _crKey(option);\r\n  },\r\n  toConfig(json, option) {\r\n    const chartId = crChartId(option)\r\n    , { title='', subtitle='' } = option\r\n    , dataOption = toSeriesData({\r\n        arr: json.results,\r\n        seriaOption: { pnDate: 'tradingDay'},\r\n        option\r\n      })\r\n    , { data, dataMfi } = dataOption\r\n    , dataInterest = crOpenInterest(json, option)\r\n    , config = Builder()\r\n       .stockConfig(chartId, dataOption)\r\n       .addCaption(title, subtitle)\r\n       .add({\r\n         ...crConfigOption({\r\n            chartId, option, data\r\n         })\r\n        })\r\n        .addZhPoints(dataMfi)\r\n        .addMiniVolume({\r\n          btTitle: 'OpenInterest',\r\n          title: 'OpenInterest',\r\n          dVolume: dataInterest,\r\n          dColumn: dataInterest\r\n        })\r\n        .toConfig();\r\n\r\n      return { config };\r\n  },\r\n\r\n  toSeries(json={}, option) {\r\n    const { parentId } = option\r\n    , _id = `${parentId}_${crChartId(option)}`\r\n    , { data } = toSeriesData({\r\n         arr: json.results,\r\n         seriaOption: {\r\n           isAllSeries: false,\r\n           pnDate: 'tradingDay'\r\n         },\r\n         option\r\n       });\r\n    return Builder()\r\n      .stockSeria(_id, data)\r\n      .toSeria();\r\n  }\r\n}\r\n\r\nexport default BarchartAdapter\r\n"],"file":"BarchartAdapter.js"}
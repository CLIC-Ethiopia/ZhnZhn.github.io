{"version":3,"sources":["../../../src/adapters/barchart/BarchartAdapter.js"],"names":["crChartId","fnAdapter","crData","crConfigOption","toSeriesData","crOpenInterest","joinBy","findMinY","_getValue","obj","value","_getCaption","caption","_crDfKey","option","linkFn","_crFtKey","items","it1","it2","it3","subtitle","_rCrKey","DF","FT","BarchartAdapter","crKey","dfT","_crKey","toConfig","json","chartId","title","dataOption","data","dataMfi","dataInterest","config","stockConfig","addCaption","add","addZhPoints","addMiniVolume","btTitle","dVolume","dColumn","toSeries","parentId","_id","results","isAllSeries","pnDate","initSeria","minY","addPoints","toSeria"],"mappings":"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","sourcesContent":["\r\nimport Builder from '../../charts/ConfigBuilder'\r\n\r\nimport fnAdapter from './fnAdapter'\r\n\r\nconst {\r\n  crChartId,\r\n  crData,\r\n  crConfigOption,\r\n  toSeriesData,\r\n  crOpenInterest,\r\n  joinBy,\r\n  findMinY\r\n} = fnAdapter;\r\n\r\nconst _getValue = obj => obj && obj.value\r\n  || '';\r\nconst _getCaption = obj => obj && obj.caption\r\n  || '';\r\n\r\nconst _crDfKey = (option) => {\r\n  option.linkFn = \"NASDAQ\"\r\n  return option.value;\r\n};\r\n\r\nconst _crFtKey = (option) => {\r\n  const { items=[] } = option\r\n  , [it1, it2, it3 ] = items;\r\n  option.linkFn = \"BR\"\r\n  option.subtitle = joinBy(' ',\r\n    _getCaption(it2),\r\n    _getCaption(it3)\r\n  )\r\n  return (option.value = joinBy('',\r\n    _getValue(it1),\r\n    _getValue(it2),\r\n    _getValue(it3)\r\n  ));\r\n};\r\n\r\nconst _rCrKey = {\r\n  DF: _crDfKey,\r\n  FT: _crFtKey\r\n};\r\n\r\nconst BarchartAdapter = {\r\n  crKey(option){\r\n    const { dfT } = option\r\n    , _crKey = _rCrKey[dfT] || _rCrKey.DF;\r\n    return _crKey(option);\r\n  },\r\n  toConfig(json, option) {\r\n    const chartId = crChartId(option)\r\n    , { title='', subtitle='' } = option\r\n    , dataOption = crData(json, option)\r\n    , { data, dataMfi } = dataOption\r\n    , dataInterest = crOpenInterest(json, option)\r\n    , config = Builder()\r\n       .stockConfig(chartId, dataOption)\r\n       .addCaption(title, subtitle)\r\n       .add({\r\n         ...crConfigOption({\r\n            chartId, option, data\r\n         })\r\n        })\r\n        .addZhPoints(dataMfi)\r\n        .addMiniVolume({\r\n          btTitle: 'OpenInterest',\r\n          title: 'OpenInterest',\r\n          dVolume: dataInterest,\r\n          dColumn: dataInterest\r\n        })\r\n        .toConfig();\r\n\r\n      return { config };\r\n  },\r\n\r\n  toSeries(json={}, option) {\r\n    const { parentId } = option\r\n    , _id = `${parentId}_${crChartId(option)}`\r\n    , { data } = toSeriesData(json.results, {\r\n         isAllSeries: false,\r\n         pnDate: 'tradingDay'\r\n      });\r\n    return Builder()\r\n      .initSeria({ minY: findMinY(data) })\r\n      .addPoints(_id, data)\r\n      .toSeria();\r\n  }\r\n}\r\n\r\nexport default BarchartAdapter\r\n"],"file":"BarchartAdapter.js"}
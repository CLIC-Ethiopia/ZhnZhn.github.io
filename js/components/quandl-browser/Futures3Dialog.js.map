{"version":3,"sources":["../../../src/components/quandl-browser/Futures3Dialog.jsx"],"names":["yearOptions","caption","value","Futures3Dialog","createClass","getInitialState","year","undefined","toolbarButtons","onClick","_handlerClickInfo","validationMessages","shouldComponentUpdate","nextProps","nextState","props","isShow","descrUrl","onClickInfo","_handlerSelectYear","_handlerLoad","_handlerWithValidationLoad","_createValidationMessages","_createLoadOption","msgOnNotSelected","msgOnNotValidFormat","isContinious","msg","itemMonth","getValidation","isValid1","isValid","msg1","concat","push","fromDate","length","getValues","item","parent","month","child","getValue","_handlerClose","_handlerWithValidationClose","onClose","_renderFromDate","initFromDate","onTestDate","msgTestDate","c","render","onShow","futuresURI","onTestDateOrEmpty","msgTestDateOrEmpty","state","_commandButtons"],"mappings":";;;;;;;;AAAA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,cAAc,CAClB,EAAEC,SAAS,MAAX,EAAmBC,OAAO,IAA1B,EADkB,EAElB,EAAED,SAAS,MAAX,EAAmBC,OAAO,IAA1B,EAFkB,EAGlB,EAAED,SAAS,MAAX,EAAmBC,OAAO,IAA1B,EAHkB,EAIlB,EAAED,SAAS,MAAX,EAAmBC,OAAO,IAA1B,EAJkB,EAKlB,EAAED,SAAS,MAAX,EAAmBC,OAAO,IAA1B,EALkB,EAMlB,EAAED,SAAS,MAAX,EAAmBC,OAAO,IAA1B,EANkB,CAApB;;AASA,IAAMC,iBAAiB,gBAAMC,WAAN;AAAA;AAAA;AAGrBC,iBAHqB,6BAGJ;AACf,SAAKC,IAAL,GAAYC,SAAZ;AACA,SAAKC,cAAL,GAAsB,CACpB,EAAEP,SAAS,GAAX,EAAgBQ,SAAS,KAAKC,iBAA9B,EADoB,CAAtB;AAGA,WAAO;AACLC,0BAAqB;AADhB,KAAP;AAGD,GAXoB;AAarBC,uBAbqB,iCAaCC,SAbD,EAaYC,SAbZ,EAasB;AACzC,QAAI,KAAKC,KAAL,KAAeF,SAAnB,EAA6B;AAC1B,UAAI,KAAKE,KAAL,CAAWC,MAAX,KAAsBH,UAAUG,MAApC,EAA2C;AACxC,eAAO,KAAP;AACF;AACH;AACD,WAAO,IAAP;AACD,GApBoB;AAsBrBN,mBAtBqB,+BAsBF;AAAA,iBACe,KAAKK,KADpB;AAAA,QACVE,QADU,UACVA,QADU;AAAA,QACAC,WADA,UACAA,WADA;;AAEjBA,gBAAY,EAAED,kBAAF,EAAZ;AACD,GAzBoB;AA2BrBE,oBA3BqB,8BA2BFb,IA3BE,EA2BG;AACtB,SAAKA,IAAL,GAAYA,IAAZ;AACD,GA7BoB;AA+BrBc,cA/BqB,0BA+BP;AACZ,SAAKC,0BAAL,CACE,KAAKC,yBAAL,EADF,EAEE,KAAKC,iBAFP;AAID,GApCoB;AAqCrBD,2BArCqB,uCAqCM;AAAA,kBACuC,KAAKP,KAD5C;AAAA,QACjBS,gBADiB,WACjBA,gBADiB;AAAA,QACCC,mBADD,WACCA,mBADD;AAAA,QACsBC,YADtB,WACsBA,YADtB;;AAEzB,QAAMC,MAAM,EAAZ;;AAFyB,gCAIc,KAAKC,SAAL,CAAeC,aAAf,EAJd;AAAA,QAITC,QAJS,yBAIjBC,OAJiB;AAAA,QAIKC,IAJL,yBAICL,GAJD;;AAKzB,QAAI,CAACG,QAAL,EAAe;AAAEH,YAAMA,IAAIM,MAAJ,CAAWD,IAAX,CAAN;AAAyB;;AAE1C,QAAI,CAAC,KAAK1B,IAAV,EAAgB;AAAEqB,UAAIO,IAAJ,CAASV,iBAAiB,MAAjB,CAAT;AAAqC;;AAEvD,QAAIE,gBAAgB,CAAC,KAAKS,QAAL,CAAcJ,OAAd,EAArB,EAA6C;AAC3CJ,UAAIO,IAAJ,CAAST,oBAAoB,WAApB,CAAT;AACD;;AAEDE,QAAII,OAAJ,GAAeJ,IAAIS,MAAJ,KAAe,CAAhB,GAAqB,IAArB,GAA4B,KAA1C;AACA,WAAOT,GAAP;AACD,GApDoB;AAqDrBJ,mBArDqB,+BAqDF;AAAA,+BACoB,KAAKK,SAAL,CAAeS,SAAf,EADpB;AAAA,QACFC,IADE,wBACTC,MADS;AAAA,QACUC,KADV,wBACIC,KADJ;AAAA,QAETf,YAFS,GAEQ,KAAKX,KAFb,CAETW,YAFS;AAAA,QAGXS,QAHW,GAGCT,YAAD,GACL,KAAKS,QAAL,CAAcO,QAAd,EADK,GAELnC,SALK;AAMb;;;;;;;;;;AAUJ,WAAO,uBACL,KAAKQ,KADA,EAEL,EAAEuB,UAAF,EAAQE,YAAR,EAAelC,MAAO,KAAKA,IAA3B,EAAiC6B,kBAAjC,EAFK,CAAP;AAIA;;;;;;;;;;;AAWD,GApFoB;AAsFrBQ,eAtFqB,2BAsFN;AACb,SAAKC,2BAAL,CAAiC,KAAKtB,yBAAtC;AACA,SAAKP,KAAL,CAAW8B,OAAX;AACD,GAzFoB;AA2FrBC,iBA3FqB,2BA2FLC,YA3FK,EA2FSC,UA3FT,EA2FqBC,WA3FrB,EA2FiC;AAAA;;AACpD,WACG;AACG,WAAM;AAAA,eAAK,MAAKd,QAAL,GAAgBe,CAArB;AAAA,OADT;AAEG,kBAAW,YAFd;AAGG,iBAAWH,YAHd;AAIG,gBAAUE,WAJb;AAKG,kBAAYD;AALf,MADH;AASD,GArGoB;AAuGrBG,QAvGqB,oBAuGb;AAAA;;AAAA,kBAKI,KAAKpC,KALT;AAAA,QAEEC,MAFF,WAEEA,MAFF;AAAA,QAEUf,OAFV,WAEUA,OAFV;AAAA,QAEmBmD,MAFnB,WAEmBA,MAFnB;AAAA,QAGEC,UAHF,WAGEA,UAHF;AAAA,QAGc7B,gBAHd,WAGcA,gBAHd;AAAA,QAIEE,YAJF,WAIEA,YAJF;AAAA,QAIgBqB,YAJhB,WAIgBA,YAJhB;AAAA,QAI8BO,iBAJ9B,WAI8BA,iBAJ9B;AAAA,QAIiDC,kBAJjD,WAIiDA,kBAJjD;AAAA,QAME5C,kBANF,GAMyB,KAAK6C,KAN9B,CAME7C,kBANF;AAAA,QAOA8C,eAPA,GAOkB,CACf;AACG,WAAI,GADP;AAEG,YAAK,OAFR;AAGG,eAAQ,MAHX;AAIG,eAAS,KAAKrC;AAJjB,MADe,CAPlB;;;AAgBN,WACE;AAAA;AAAA;AACG,iBAASnB,OADZ;AAEG,gBAAQe,MAFX;AAGG,wBAAgByC,eAHnB;AAIG,qBAAaL,MAJhB;AAKG,iBAAS,KAAKT;AALjB;AAOK;AACG,iBAAS,KAAKnC;AADjB,QAPL;AAWK;AACI,aAAK;AAAA,iBAAK,OAAKoB,SAAL,GAAiBsB,CAAtB;AAAA,SADT;AAEI,gBAAQlC,MAFZ;AAGI,aAAKqC,UAHT;AAII,uBAAc,SAJlB;AAKI,2BAAkB,SALtB;AAMI,wBAAe,SANnB;AAOI,sBAAa,OAPjB;AAQI,0BAAkB7B;AARtB,QAXL;AAqBK;AACG,iBAAQ,MADX;AAEG,iBAASxB,WAFZ;AAGG,kBAAU,KAAKmB;AAHlB,QArBL;AA0BMO,sBAAgB,KAAKoB,eAAL,CAAqBC,YAArB,EAAmCO,iBAAnC,EAAsDC,kBAAtD,CA1BtB;AA2BK;AACG,4BAAoB5C;AADvB;AA3BL,KADF;AAkCD;AAzJoB,GAAvB;;kBA4JeR,c","file":"Futures3Dialog.js","sourcesContent":["import React from 'react';\r\n\r\nimport createLoadOptions from '../../flux/creaters/futures3'\r\n\r\nimport DraggableDialog from '../zhn-moleculs/DraggableDialog';\r\nimport WithValidation from '../dialogs/WithValidation';\r\nimport ToolbarButtonCircle from '../dialogs/ToolbarButtonCircle';\r\nimport SelectParentChild from '../dialogs/SelectParentChild';\r\nimport RowInputSelect from '../dialogs/RowInputSelect';\r\nimport RowDate from '../dialogs/RowDate';\r\nimport ActionButton from '../zhn/ActionButton';\r\nimport ValidationMessages from '../zhn/ValidationMessages';\r\n\r\nconst yearOptions = [\r\n  { caption: '2017', value: 2017 },\r\n  { caption: '2016', value: 2016 },\r\n  { caption: '2015', value: 2015 },\r\n  { caption: '2014', value: 2014 },\r\n  { caption: '2013', value: 2013 },\r\n  { caption: '2012', value: 2012 }\r\n]\r\n\r\nconst Futures3Dialog = React.createClass({\r\n  ...WithValidation,\r\n\r\n  getInitialState(){\r\n    this.year = undefined;\r\n    this.toolbarButtons = [\r\n      { caption: 'I', onClick: this._handlerClickInfo }\r\n    ];\r\n    return {\r\n      validationMessages : []\r\n    }\r\n  },\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  },\r\n\r\n  _handlerClickInfo(){\r\n    const {descrUrl, onClickInfo} = this.props;\r\n    onClickInfo({ descrUrl });\r\n  },\r\n\r\n  _handlerSelectYear(year){\r\n    this.year = year;\r\n  },\r\n\r\n  _handlerLoad(){\r\n    this._handlerWithValidationLoad(\r\n      this._createValidationMessages(),\r\n      this._createLoadOption\r\n    );\r\n  },\r\n  _createValidationMessages(){\r\n    const { msgOnNotSelected, msgOnNotValidFormat, isContinious } = this.props\r\n    let   msg = [];\r\n\r\n    const { isValid:isValid1, msg:msg1 } = this.itemMonth.getValidation();\r\n    if (!isValid1) { msg = msg.concat(msg1); }\r\n\r\n    if (!this.year) { msg.push(msgOnNotSelected('Year')); }\r\n\r\n    if (isContinious && !this.fromDate.isValid()){\r\n      msg.push(msgOnNotValidFormat('From Date'));\r\n    }\r\n\r\n    msg.isValid = (msg.length === 0) ? true : false;\r\n    return msg;\r\n  },\r\n  _createLoadOption(){\r\n    const { parent:item, child:month } = this.itemMonth.getValues()\r\n        , { isContinious } = this.props\r\n        , fromDate = (isContinious)\r\n              ? this.fromDate.getValue()\r\n              : undefined ;\r\n        /*\r\n        , { fnValue, columnName, dataColumn, seriaColumnNames, loadId, isContinious } = this.props\r\n        , _subtitle = (columnName)\r\n              ? `${month.caption}:${this.year.caption}:${columnName}`\r\n              : `${month.caption}:${this.year.caption}`\r\n        , _fromDate = (isContinious)\r\n              ? this.fromDate.getValue()\r\n              : undefined  ;\r\n        */\r\n\r\n    return createLoadOptions(\r\n      this.props,\r\n      { item, month, year : this.year, fromDate }\r\n    )\r\n    /*\r\n    return {\r\n       value : fnValue(item.value, month.value, this.year.value ),\r\n       title : item.caption,\r\n       subtitle : _subtitle,\r\n       columnName : columnName,\r\n       dataColumn : dataColumn,\r\n       loadId : loadId,\r\n       fromDate : _fromDate,\r\n       seriaColumnNames : seriaColumnNames\r\n    };*/\r\n  },\r\n\r\n  _handlerClose(){\r\n    this._handlerWithValidationClose(this._createValidationMessages);\r\n    this.props.onClose();\r\n  },\r\n\r\n  _renderFromDate(initFromDate, onTestDate, msgTestDate){\r\n    return (\r\n       <RowDate\r\n          ref={ c => this.fromDate = c}\r\n          labelTitle=\"From Date:\"\r\n          initValue={initFromDate}\r\n          errorMsg={msgTestDate}\r\n          onTestDate={onTestDate}\r\n       />\r\n    );\r\n  },\r\n\r\n  render(){\r\n    const {\r\n            isShow, caption, onShow,\r\n            futuresURI, msgOnNotSelected,\r\n            isContinious, initFromDate, onTestDateOrEmpty, msgTestDateOrEmpty\r\n          } = this.props\r\n        , { validationMessages } = this.state\r\n        , _commandButtons = [\r\n             <ActionButton\r\n                key=\"a\"\r\n                type=\"TypeC\"\r\n                caption=\"Load\"\r\n                onClick={this._handlerLoad}\r\n             />\r\n         ];\r\n\r\n    return (\r\n      <DraggableDialog\r\n         caption={caption}\r\n         isShow={isShow}\r\n         commandButtons={_commandButtons}\r\n         onShowChart={onShow}\r\n         onClose={this._handlerClose}\r\n       >\r\n           <ToolbarButtonCircle\r\n              buttons={this.toolbarButtons}\r\n           />\r\n\r\n           <SelectParentChild\r\n               ref={c => this.itemMonth = c}\r\n               isShow={isShow}\r\n               uri={futuresURI}\r\n               parentCaption=\"Futures\"\r\n               parentOptionNames=\"Futures\"\r\n               parentJsonProp=\"futures\"\r\n               childCaption=\"Month\"\r\n               msgOnNotSelected={msgOnNotSelected}\r\n           />\r\n           <RowInputSelect\r\n              caption=\"Year\"\r\n              options={yearOptions}\r\n              onSelect={this._handlerSelectYear}\r\n           />\r\n           {isContinious && this._renderFromDate(initFromDate, onTestDateOrEmpty, msgTestDateOrEmpty)}\r\n           <ValidationMessages\r\n              validationMessages={validationMessages}\r\n           />\r\n\r\n      </DraggableDialog>\r\n    );\r\n  }\r\n});\r\n\r\nexport default Futures3Dialog;\r\n"]}
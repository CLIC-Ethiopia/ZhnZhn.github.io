{"version":3,"sources":["../../../src/components/stock-markets/AlphaIndicatorDialog.jsx"],"names":["DF","INDICATOR","PERIOD","FOR_DAYS","HAS_SECOND_Y_AXIS","_testTicket","value","String","trim","_testInRangeOrEmpty","min","max","n","parseInt","Number","isNaN","_testPeriod","_testForDays","_crValue","indicator","period","AlphaIndicatorDialog","Decor","withToolbar","withLoad","withInitialState","props","_handleClickOptions","setState","isShowOptions","state","_handleSelectOne","item","_handleLoad","_period","periodComp","isValid","getValue","_forDays","forDaysComp","_ticket","ticketComp","undefined","_indicator","option","loadId","ticket","forDays","hasSecondYAxis","onLoad","_handleClose","onClose","_refTicket","comp","_refPeriod","_refForDays","_handleMode","propName","_menuMore","toggleToolBar","_toggleWithToolbar","onAbout","_clickInfoWithToolbar","toolbarButtons","_createType2WithToolbar","noDate","push","caption","title","onClick","_commandButtons","_crCommandsWithLoad","_isWithInitialState","shouldComponentUpdate","nextProps","nextState","isShow","render","oneURI","oneJsonProp","oneCaption","onShow","onFront","isToolbar","isShowLabels","bind","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport D from '../dialogs/DialogCell'\r\nimport Decor from '../dialogs/decorators/Decorators'\r\nimport crMenuMore from '../dialogs/MenuMore'\r\n\r\nconst DF = {\r\n  INDICATOR: 'SMA',\r\n  PERIOD: 30,\r\n  FOR_DAYS: 501\r\n};\r\nconst HAS_SECOND_Y_AXIS = 'hasSecondYAxis';\r\n\r\nconst _testTicket = value => String(value).trim() === ''\r\n  ? false\r\n  : true;\r\n\r\nconst _testInRangeOrEmpty = (min, max) => (value) => {\r\n  if (String(value).trim() === ''){\r\n    return true;\r\n  }\r\n  const n = parseInt(String(value).trim(), 10)  ;\r\n  if (!Number.isNaN(n) && n>min && n<max) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nconst _testPeriod = _testInRangeOrEmpty(0, 201)\r\nconst _testForDays = _testInRangeOrEmpty(250, 2500)\r\n\r\nconst _crValue = (indicator, period) => {\r\n  switch(indicator) {\r\n    case 'MACD': return 'MACD(12, 24, 9)';\r\n    case 'STOCH': return 'STOCH(5, 3, 3, SMA)';\r\n    default: return `${indicator} (${period})`;\r\n  }\r\n}\r\n\r\n@Decor.withToolbar\r\n@Decor.withLoad\r\n@Decor.withInitialState\r\nclass AlphaIndicatorDialog extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this._menuMore = crMenuMore(this, {\r\n      toggleToolBar: this._toggleWithToolbar,\r\n      onAbout: this._clickInfoWithToolbar\r\n    })\r\n\r\n    this.toolbarButtons = this._createType2WithToolbar(\r\n      props, { noDate: true }\r\n    )\r\n    this.toolbarButtons.push({\r\n      caption: 'O', title: 'Toggle Options Input',\r\n      onClick: this._handleClickOptions\r\n    })\r\n    this._commandButtons = this._crCommandsWithLoad(this)\r\n\r\n    this.state = {\r\n      ...this._isWithInitialState(),\r\n      isShowOptions: false\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _handleClickOptions = () => {\r\n    this.setState({ isShowOptions: !this.state.isShowOptions })\r\n  }\r\n\r\n  _handleSelectOne = (item) => {\r\n     this.indicator = item;\r\n  }\r\n\r\n  _handleLoad = () => {\r\n    const _period = (this.periodComp.isValid())\r\n             ? (this.periodComp.getValue() !== '')\r\n                 ? this.periodComp.getValue()\r\n                 : DF.PERIOD\r\n             : DF.PERIOD\r\n        , _forDays = (this.forDaysComp.isValid())\r\n             ? (this.forDaysComp.getValue() !== '')\r\n                   ? this.forDaysComp.getValue()\r\n                   : DF.FOR_DAYS\r\n             : DF.FOR_DAYS\r\n        , _ticket = (this.ticketComp.isValid())\r\n             ? this.ticketComp.getValue()\r\n             : undefined\r\n        , _indicator = this.indicator\r\n             ? this.indicator.value\r\n             : DF.INDICATOR;\r\n    const option = {\r\n      loadId: 'AL',\r\n      indicator: _indicator,\r\n      ticket: _ticket,\r\n      period: _period,\r\n      forDays: _forDays,\r\n      value: _crValue(_indicator, _period), //for label\r\n      hasSecondYAxis: this[HAS_SECOND_Y_AXIS]\r\n    }\r\n    this.props.onLoad(option)\r\n  }\r\n\r\n  _handleClose = () => {\r\n    //this._handleWithValidationClose(this._createValidationMessages);\r\n    this.props.onClose();\r\n  }\r\n\r\n  _refTicket = (comp) => {\r\n    this.ticketComp = comp\r\n  }\r\n  _refPeriod = (comp) => {\r\n    this.periodComp = comp\r\n  }\r\n  _refForDays = (comp) => {\r\n    this.forDaysComp = comp\r\n  }\r\n  _handleMode = (propName, value) => {\r\n     this[propName] = value\r\n  }\r\n\r\n  render() {\r\n    const {\r\n            isShow, caption,\r\n            oneURI, oneJsonProp, oneCaption,\r\n            onShow, onFront\r\n          } = this.props\r\n        , {\r\n            isToolbar,\r\n            isShowLabels, isShowOptions\r\n          } = this.state;\r\n\r\n    return (\r\n      <D.DraggableDialog\r\n           isShow={isShow}\r\n           caption={caption}\r\n           menuModel={this._menuMore}\r\n           commandButtons={this._commandButtons}\r\n           onShowChart={onShow}\r\n           onFront={onFront}\r\n           onClose={this._handleClose}\r\n       >\r\n           <D.Toolbar\r\n              isShow={isToolbar}\r\n              buttons={this.toolbarButtons}\r\n           />\r\n           <D.SelectWithLoad\r\n             isShow={isShow}\r\n             isShowLabels={isShowLabels}\r\n             uri={oneURI}\r\n             jsonProp={oneJsonProp}\r\n             caption={oneCaption}\r\n             optionNames=\"Items\"\r\n             onSelect={this._handleSelectOne}\r\n           />\r\n          <D.RowPattern\r\n            ref={this._refTicket}\r\n            isShowLabels={isShowLabels}\r\n            caption=\"Ticket\"\r\n            placeholder=\"Nyse or Nasdaq Ticket\"\r\n            onTest={_testTicket}\r\n            errorMsg=\"Not Empty\"\r\n          />\r\n          <D.ShowHide isShow={isShowOptions}>\r\n            <D.RowPattern\r\n              ref={this._refPeriod}\r\n              isShowLabels={isShowLabels}\r\n              caption=\"Period\"\r\n              placeholder={`Default: ${DF.PERIOD}`}\r\n              onTest={_testPeriod}\r\n              errorMsg=\"Number in range 1-200\"\r\n            />\r\n            <D.RowPattern\r\n              ref={this._refForDays}\r\n              isShowLabels={isShowLabels}\r\n              caption=\"For Days\"\r\n              placeholder={`Default: ${DF.FOR_DAYS} (2 Years)`}\r\n              onTest={_testForDays}\r\n              errorMsg=\"Number in range 250-2500\"\r\n            />\r\n\r\n          </D.ShowHide>\r\n          <D.RowCheckBox\r\n            initValue={false}\r\n            caption=\"Add Seria with Second YAxis\"\r\n            onCheck={this._handleMode.bind(null, HAS_SECOND_Y_AXIS, true)}\r\n            onUnCheck={this._handleMode.bind(null, HAS_SECOND_Y_AXIS, false)}\r\n          />\r\n      </D.DraggableDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AlphaIndicatorDialog\r\n"],"file":"AlphaIndicatorDialog.js"}
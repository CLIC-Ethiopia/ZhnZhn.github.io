{"version":3,"sources":["../../../src/components/stock-markets/AlphaIntradayDialog.jsx"],"names":["DAILY","D_ADJ","_isDaily","dfT","indexOf","_isDailyAdj","DF","INTERVAL","PERIOD","_testTicket","value","Boolean","trim","_intervalOptions","caption","_periodOptions","_r","INTRADAY","placeholder","options","_rDaily","indicator","interval","DAILY_ADJUSTED","_getConf","key","_getInterval","input","df","_crLoadOptions","_conf","outputsize","AlphaIntradayDialog","Decor","withToolbar","withLoad","withInitialState","props","_handleSelectInterval","item","_handleLoad","dataSource","loadId","_ticket","ticketComp","isValid","getValue","undefined","_options","_value","onLoad","ticket","hasDividend","_hasDividend","hasFilterZero","_hasFilterZero","_toggleDividend","_toggleFilterZero","_handleClose","onClose","_refTicket","comp","_menuMore","toggleToolBar","_toggleWithToolbar","onAbout","_clickInfoWithToolbar","toolbarButtons","_createType2WithToolbar","noDate","isToggleOptions","_commandButtons","_crCommandsWithLoad","state","_isWithInitialState","shouldComponentUpdate","nextProps","nextState","isShow","render","onShow","onFront","isToolbar","isShowLabels","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport D from '../dialogs/DialogCell'\r\nimport Decor from '../dialogs/decorators/Decorators'\r\nimport crMenuMore from '../dialogs/MenuMore'\r\n\r\nconst DAILY = 'DAILY';\r\nconst D_ADJ = 'DAILY_ADJUSTED';\r\n\r\nconst _isDaily = dfT => dfT.indexOf(DAILY) !== -1;\r\nconst _isDailyAdj = dfT => dfT === D_ADJ;\r\n\r\nconst DF = {\r\n  INTERVAL: '15min',\r\n  PERIOD: 'compact'\r\n};\r\n\r\nconst _testTicket = value => Boolean((''+value).trim());\r\n\r\nconst _intervalOptions = [\r\n  { caption: '1 min', value: '1min' },\r\n  { caption: '5 min', value: '5min' },\r\n  { caption: '15 min', value: '15min' },\r\n  { caption: '30 min', value: '30min' },\r\n  { caption: '60 min', value: '60min' }\r\n]\r\n\r\nconst _periodOptions = [\r\n  { caption: 'Compact (100 days)', value: 'compact' },\r\n  { caption: 'Full (of 20+ years, about 1MB)', value: 'full' },\r\n];\r\n\r\nconst _r = {\r\n  INTRADAY: {\r\n    caption: \"Interval\",\r\n    placeholder: \"Default: 15min\",\r\n    options: _intervalOptions\r\n  },\r\n  DAILY: {\r\n    caption: \"Period\",\r\n    placeholder: \"Default: Compact\",\r\n    options: _periodOptions\r\n  }\r\n}\r\n\r\nconst _rDaily = {\r\n  DAILY: {\r\n    indicator: 'TIME_SERIES_DAILY',\r\n    interval: 'Daily'\r\n  },\r\n  DAILY_ADJUSTED: {\r\n    indicator: 'TIME_SERIES_DAILY_ADJUSTED',\r\n    interval: 'Daily'\r\n    //interval: 'Daily Adjusted'\r\n  }\r\n};\r\n\r\nconst _getConf = (key) => _r[key] || _r.DAILY;\r\n\r\n\r\nconst _getInterval = (input, df) => input\r\n  ? input.value\r\n  : df;\r\nconst _crLoadOptions = (key, input) => {\r\n  if (key === 'INTRADAY') {\r\n   return {\r\n     indicator: 'TIME_SERIES_INTRADAY',\r\n     interval: _getInterval(input, DF.INTERVAL),\r\n     dfT: key\r\n    };\r\n  }\r\n  const _conf = _rDaily[key] || _rDaily.DAILY;\r\n  return {\r\n     ..._conf,\r\n     outputsize: _getInterval(input, DF.PERIOD),\r\n     dfT: key,\r\n   };\r\n}\r\n\r\n\r\n@Decor.withToolbar\r\n@Decor.withLoad\r\n@Decor.withInitialState\r\nclass AlphaIntradayDialog extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    const { dfT } = props\r\n    this._isDaily = _isDaily(dfT)\r\n    this._isDailyAdj = _isDailyAdj(dfT)\r\n    this._hasDividend = false\r\n    this._hasFilterZero = false\r\n\r\n    this._menuMore = crMenuMore(this, {\r\n      toggleToolBar: this._toggleWithToolbar,\r\n      onAbout: this._clickInfoWithToolbar\r\n    })\r\n\r\n    this.toolbarButtons = this._createType2WithToolbar(\r\n      props, { noDate: true, isToggleOptions: this._isDaily }\r\n    )\r\n    this._commandButtons = this._crCommandsWithLoad(this)\r\n\r\n    this.state = {\r\n      ...this._isWithInitialState(),\r\n      isToggleOptions: false\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _handleSelectInterval = (item) => {\r\n     this.interval = item;\r\n  }\r\n\r\n  _handleLoad = () => {\r\n    const { dfT, dataSource, loadId } = this.props\r\n    , _ticket = this.ticketComp.isValid()\r\n        ? this.ticketComp.getValue()\r\n        : undefined\r\n    , _options = _crLoadOptions(dfT, this.interval)\r\n    , _value = `${_ticket || ''} (${_options.interval})`;\r\n\r\n    this.props.onLoad({\r\n      loadId,\r\n      ..._options,\r\n      ticket: _ticket,\r\n      value: _value, //for label\r\n      hasDividend: this._hasDividend,\r\n      hasFilterZero: this._hasFilterZero,\r\n      dataSource\r\n    })\r\n  }\r\n\r\n  _toggleDividend = () => {\r\n    this._hasDividend = !this._hasDividend\r\n  }\r\n  _toggleFilterZero = () => {\r\n    this._hasFilterZero = !this._hasFilterZero\r\n  }\r\n\r\n  _handleClose = () => {\r\n    this.props.onClose();\r\n  }\r\n\r\n  _refTicket = (comp) => {\r\n    this.ticketComp = comp\r\n  }\r\n\r\n\r\n  render() {\r\n    const {\r\n      isShow, caption,\r\n      onShow, onFront,\r\n      dfT\r\n    } = this.props\r\n    , {\r\n      isToolbar,\r\n      isShowLabels,\r\n      isToggleOptions\r\n    } = this.state;\r\n\r\n    return (\r\n      <D.DraggableDialog\r\n           isShow={isShow}\r\n           caption={caption}\r\n           menuModel={this._menuMore}\r\n           commandButtons={this._commandButtons}\r\n           onShowChart={onShow}\r\n           onFront={onFront}\r\n           onClose={this._handleClose}\r\n       >\r\n           <D.Toolbar\r\n              isShow={isToolbar}\r\n              buttons={this.toolbarButtons}\r\n           />\r\n          <D.RowPattern\r\n            ref={this._refTicket}\r\n            isShowLabels={isShowLabels}\r\n            caption=\"Ticket\"\r\n            placeholder=\"Nyse or Nasdaq Ticket\"\r\n            onTest={_testTicket}\r\n            errorMsg=\"Not Empty\"\r\n          />\r\n          <D.RowInputSelect\r\n            isShowLabels={isShowLabels}\r\n            { ..._getConf(dfT)}\r\n            //caption=\"Interval\"\r\n            //placeholder=\"Default: 15min\"\r\n            //options={_intervalOptions}\r\n            onSelect={this._handleSelectInterval}\r\n          />\r\n          {this._isDaily && <D.ShowHide isShow={isToggleOptions}>\r\n              { this._isDailyAdj && <D.RowCheckBox\r\n                  initValue={false}\r\n                  caption=\"With Dividend History\"\r\n                  onToggle={this._toggleDividend}\r\n                />\r\n              }\r\n              <D.RowCheckBox\r\n                initValue={false}\r\n                caption=\"Filter Zero Values\"\r\n                onToggle={this._toggleFilterZero}\r\n              />\r\n           </D.ShowHide>\r\n         }\r\n      </D.DraggableDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AlphaIntradayDialog\r\n"],"file":"AlphaIntradayDialog.js"}
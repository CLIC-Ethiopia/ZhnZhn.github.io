{"version":3,"sources":["../../../src/components/browser-slider/Frame.jsx"],"names":["FOCUS_FIRST_MLS","_isArr","Array","isArray","_getProxy","store","dfProps","getProxy","lT","_fOnClick","proxy","rootId","pageNumber","onClickNext","fOnClickItem","item","text","id","type","bind","Frame","refFirstItem","style","title","pageCurrent","onClickPrev","loadItems","_refTitle","_refId","model","errMsg","state","setState","_fOnClickItem","rootUrl","then","Error","err","message","clearTimeout","current","setTimeout","_titleNode","focus","_isTitle"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useCallback, useEffect } from 'react'\r\n\r\nimport MenuTitle from './MenuTitle'\r\nimport MenuList from './MenuList'\r\nimport ErrMsg from './ErrMsg'\r\n\r\nconst FOCUS_FIRST_MLS = 1000;\r\n\r\nconst _isArr = Array.isArray;\r\n\r\nconst _getProxy = (store, dfProps) => store\r\n .getProxy(dfProps.lT);\r\n\r\nconst _fOnClick = (\r\n  proxy, rootId,\r\n  dfProps, pageNumber,\r\n  onClickNext, fOnClickItem,\r\n  item\r\n) => {\r\n  const { text, id, type } = item;\r\n  return type === 'l'\r\n     ? onClickNext.bind(null, `${rootId}/${id}`, text, pageNumber)\r\n     : fOnClickItem({\r\n         id: `${rootId}/${id}`,\r\n         ...dfProps,\r\n         text,\r\n         proxy\r\n       });\r\n};\r\n\r\nconst Frame = ({\r\n  refFirstItem,\r\n  style,\r\n  store,\r\n  title, id='',\r\n  dfProps={},\r\n  pageNumber, pageCurrent,\r\n  onClickPrev,\r\n  onClickNext,\r\n  fOnClickItem,\r\n  loadItems\r\n}) => {\r\n  const _refTitle = useRef()\r\n  , _refId = useRef()\r\n  , [state, setState] = useState({ model: [], errMsg: null})\r\n  , { model, errMsg } = state\r\n  , proxy = _getProxy(store, dfProps)\r\n  , _fOnClickItem = useCallback(\r\n      _fOnClick.bind(null,\r\n         proxy, id, dfProps, pageNumber,\r\n         onClickNext, fOnClickItem\r\n       )\r\n      , [proxy]);\r\n\r\n  useEffect(()=>{\r\n    if (title) {\r\n      loadItems(`${dfProps.rootUrl}/${id}`, proxy)\r\n        .then(model => {\r\n          if (_isArr(model)){\r\n            setState({ model, errMsg: null })\r\n          } else {\r\n            throw new Error('Response is not array')\r\n          }\r\n        })\r\n        .catch(err => setState({\r\n           model: [], errMsg: err.message\r\n         }))\r\n    }\r\n    return () => {\r\n      clearTimeout(_refId.current)\r\n      _refTitle.current = null\r\n    }\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    if ( pageNumber === pageCurrent ) {\r\n      _refId.current = setTimeout(()=>{\r\n        const _titleNode = _refTitle.current;\r\n        if (_titleNode) {\r\n          _titleNode.focus()\r\n        }\r\n      }, FOCUS_FIRST_MLS)\r\n    }\r\n  }, [pageNumber, pageCurrent])\r\n\r\n  const _isTitle = title && onClickPrev;\r\n\r\n  return (\r\n    <div style={style}>\r\n      { _isTitle && <MenuTitle\r\n          innerRef={_refTitle}\r\n          title={title}\r\n          onClick={onClickPrev.bind(null, pageNumber)}\r\n        />\r\n      }\r\n      <MenuList\r\n        refFirstItem={refFirstItem}\r\n        model={model}\r\n        fOnClickItem={_fOnClickItem}\r\n      />\r\n      <ErrMsg errMsg={errMsg} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Frame\r\n"],"file":"Frame.js"}
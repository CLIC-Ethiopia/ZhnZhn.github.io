{"version":3,"sources":["../../../src/components/browser-slider/Frame.jsx"],"names":["Frame","props","loadMenu","id","dfProps","loadItems","store","proxy","getProxy","rootUrl","then","Array","isArray","model","setState","errMsg","undefined","catch","err","message","_renderMenu","pageNumber","state","onClickNext","fOnClickItem","rootId","items","map","text","item","type","_onClick","bind","_refFirst","_firstNode","n","focusFirst","focus","title","rootStyle","onClickPrev","prevProps","pageCurrent","setTimeout"],"mappings":"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","file":"Frame.js","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport MenuTitle from './MenuTitle'\r\nimport MenuItem from './MenuItem'\r\nimport ErrMsg from './ErrMsg'\r\n\r\nclass Frame extends Component {\r\n\r\n  constructor(props){\r\n    super()\r\n    this.state = {\r\n      model: []\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    const { title, id } = this.props;\r\n    if (title) {\r\n      this.loadMenu(id)\r\n    }\r\n  }\r\n\r\n  loadMenu = (id) => {\r\n    const { dfProps, loadItems, store } = this.props\r\n        , proxy = store.getProxy();\r\n    loadItems(`${dfProps.rootUrl}/${id}`, proxy)\r\n      .then(model => {\r\n        if (Array.isArray(model)){\r\n           this.setState({ model, errMsg: undefined })\r\n        }\r\n      })\r\n      .catch(err => {\r\n         this.setState({ errMsg: err.message })\r\n      })\r\n  }\r\n\r\n  _renderMenu = () => {\r\n    const { dfProps, pageNumber, store } = this.props\r\n        , proxy = store.getProxy()\r\n        , { model } = this.state;\r\n    const {\r\n            onClickNext,\r\n            fOnClickItem,\r\n            id:rootId\r\n          } = this.props\r\n        , items = model.map(item => {\r\n            const { text, id, type } = item\r\n                , _onClick = type === 'l'\r\n                    ? onClickNext.bind(null, `${rootId}/${id}`, text, pageNumber)\r\n                    : fOnClickItem({\r\n                         id: `${rootId}/${id}`,\r\n                         ...dfProps,\r\n                         proxy\r\n                       })\r\n             return (\r\n               <MenuItem\r\n                 key={id}\r\n                 item={item}\r\n                 onClick={_onClick}\r\n               />\r\n              );\r\n          });\r\n\r\n    return (\r\n      <div>\r\n        {items}\r\n      </div>\r\n    );\r\n  }\r\n\r\n _refFirst = n => this._firstNode = n\r\n\r\n  render(){\r\n    const { title, rootStyle, pageNumber, onClickPrev } = this.props\r\n        , { errMsg } = this.state;\r\n\r\n    return (\r\n      <div\r\n        //className=\"with-scroll\"\r\n        style={rootStyle}\r\n      >\r\n        <MenuTitle\r\n          ref={this._refFirst}\r\n          title={title}\r\n          onClick={onClickPrev.bind(null, pageNumber)}\r\n        />\r\n        {this._renderMenu()}\r\n        <ErrMsg errMsg={errMsg} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  focusFirst = () => {\r\n    if (this._firstNode) {\r\n      this._firstNode.focus()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    const { pageNumber, pageCurrent } = this.props;\r\n    if ( pageNumber === pageCurrent ) {\r\n      setTimeout(this.focusFirst, 1000)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Frame\r\n"]}
{"version":3,"sources":["../../../src/components/browser-slider/Frame.jsx"],"names":["T_O_FOCUS_FIRST","Frame","props","loadMenu","id","dfProps","loadItems","store","lT","proxy","getProxy","rootUrl","then","model","Array","isArray","setState","errMsg","undefined","err","message","_renderMenu","pageNumber","state","onClickNext","fOnClickItem","rootId","items","map","item","text","type","_onClick","bind","_refFirst","n","_firstNode","focusFirst","focus","componentDidMount","title","render","rootStyle","onClickPrev","componentDidUpdate","prevProps","pageCurrent","setTimeout","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport MenuTitle from './MenuTitle'\r\nimport MenuItem from './MenuItem'\r\nimport ErrMsg from './ErrMsg'\r\n\r\nconst T_O_FOCUS_FIRST = 1000;\r\n\r\nclass Frame extends Component {\r\n\r\n  constructor(props){\r\n    super()\r\n    this.state = {\r\n      model: []\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    const { title, id } = this.props;\r\n    if (title) {\r\n      this.loadMenu(id)\r\n    }\r\n  }\r\n\r\n  loadMenu = (id) => {\r\n\r\n    const { dfProps={}, loadItems, store } = this.props\r\n        , { lT } = dfProps\r\n        , proxy = store.getProxy(lT);\r\n    loadItems(`${dfProps.rootUrl}/${id}`, proxy)\r\n      .then(model => {\r\n        if (Array.isArray(model)){\r\n           this.setState({ model, errMsg: undefined })\r\n        }\r\n      })\r\n      .catch(err => {\r\n         this.setState({ errMsg: err.message })\r\n      })\r\n  }\r\n\r\n  _renderMenu = () => {\r\n    const { dfProps={}, pageNumber, store } = this.props\r\n        , { lT } = dfProps\r\n        , proxy = store.getProxy(lT)\r\n        , { model } = this.state\r\n        , {\r\n            onClickNext,\r\n            fOnClickItem,\r\n            id:rootId\r\n          } = this.props\r\n        , items = model.map(item => {\r\n            const { text, id, type } = item\r\n                , _onClick = type === 'l'\r\n                    ? onClickNext.bind(null, `${rootId}/${id}`, text, pageNumber)\r\n                    : fOnClickItem({\r\n                         id: `${rootId}/${id}`,\r\n                         ...dfProps,\r\n                         proxy\r\n                       })\r\n             return (\r\n               <MenuItem\r\n                 key={id}\r\n                 item={item}\r\n                 onClick={_onClick}\r\n               />\r\n              );\r\n          });\r\n\r\n    return (\r\n      <div>\r\n        {items}\r\n      </div>\r\n    );\r\n  }\r\n\r\n _refFirst = n => this._firstNode = n\r\n\r\n  render(){\r\n    const { title, rootStyle, pageNumber, onClickPrev } = this.props\r\n        , { errMsg } = this.state;\r\n\r\n    return (\r\n      <div style={rootStyle}>\r\n        <MenuTitle\r\n          ref={this._refFirst}\r\n          title={title}\r\n          onClick={onClickPrev.bind(null, pageNumber)}\r\n        />\r\n        {this._renderMenu()}\r\n        <ErrMsg errMsg={errMsg} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  focusFirst = () => {\r\n    if (this._firstNode) {\r\n      this._firstNode.focus()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    const { pageNumber, pageCurrent } = this.props;\r\n    if ( pageNumber === pageCurrent ) {\r\n      setTimeout(this.focusFirst, T_O_FOCUS_FIRST)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Frame\r\n"],"file":"Frame.js"}
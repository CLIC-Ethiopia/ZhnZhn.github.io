{"version":3,"sources":["../../../src/components/items/ModalMenuIndicator.jsx"],"names":["INIT_SMA","INIT_MFI","STYLE","PANE","width","margin","CAPTION","display","color","fontWeight","MOM_ATH","paddingRight","ROW","paddingTop","fnSpan","paddingLeft","SMA_PLUS","marginLeft","ModalMenuIndicator","props","_checkIfAlreadyAdded","arrObj","id","result","find","obj","undefined","_handleAddSma","ev","isPlus","inputSmaPlus","getValue","inputSmaComp","plus","inputPlusSma","descr","state","period","onAddSma","setState","prevState","push","plusSma","_handleRemoveSma","onRemoveSma","filter","_handleRemoveMfi","onRemoveMfi","mfiDescrs","_handleAddMfi","_value","inputMfiComp","_id","onAddMfi","_handleAddMomAth","onAddMomAth","_renderIndicators","_descr","map","index","bind","_renderMfi","isMomAth","_divMomAth","isShow","isMfi","onClose","_mfiDom","c","ROOT","propTypes","rootStyle","object","bool","func"],"mappings":"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","file":"ModalMenuIndicator.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport ModalPopup from '../zhn-moleculs/ModalPopup'\r\n\r\nimport InputText from '../zhn/InputText';\r\nimport SvgPlus from '../zhn/SvgPlus';\r\nimport SvgMinus from '../zhn/SvgMinus';\r\n\r\nimport S from './ModalMenu.Style'\r\n\r\nconst INIT_SMA = \"50\"\r\n    , INIT_MFI = \"14\";\r\n\r\nconst STYLE = {\r\n  PANE: {\r\n    width: '240px',\r\n    margin: '8px'\r\n  },\r\n  CAPTION : {\r\n    display : 'inline-block',\r\n    color : 'black',\r\n    fontWeight : 'bold',\r\n    width : '48px'\r\n  },\r\n  MOM_ATH: {\r\n    display : 'inline-block',\r\n    color : 'black',\r\n    fontWeight : 'bold',\r\n    paddingRight: '6px'\r\n  },\r\n  ROW : {\r\n    paddingTop: '5px'\r\n  },\r\n  fnSpan : (color) => {\r\n    return { color: color, paddingLeft: '8px' };\r\n  },\r\n  SMA_PLUS: {\r\n    marginLeft: '16px',\r\n    color: 'black'\r\n  }\r\n}\r\n\r\nclass ModalMenuIndicator extends Component {\r\n  static propTypes = {\r\n    rootStyle: PropTypes.object,\r\n    isMfi: PropTypes.bool,\r\n    onAddSma: PropTypes.func,\r\n    onRemoveSma: PropTypes.func,\r\n    onAddMfi: PropTypes.func,\r\n    onRemoveMfi: PropTypes.func,\r\n    isMomAth: PropTypes.bool,\r\n    onAddMomAth: PropTypes.func,\r\n  }\r\n\r\n\r\n  constructor(props){\r\n    super()\r\n    const { isMomAth } = props;\r\n    this._divMomAth = isMomAth ? (\r\n      <div>\r\n        <span style={STYLE.MOM_ATH}>MOM(1) & ATH</span>\r\n        <SvgPlus onClick={this._handleAddMomAth.bind(this)} />\r\n      </div>\r\n    ) : null;\r\n\r\n    this.state = {\r\n      plusSma: 5,\r\n      descr : [],\r\n      mfiDescrs : []\r\n    }\r\n  }\r\n\r\n  _checkIfAlreadyAdded = (arrObj, id) => {\r\n    const result = arrObj.find(obj => obj.id === id);\r\n    if (result === undefined){\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  _handleAddSma = (ev, isPlus) => {\r\n    const period = (isPlus)\r\n            ? this.inputSmaPlus.getValue()\r\n            : this.inputSmaComp.getValue()\r\n        , plus = (isPlus)\r\n             ? this.inputPlusSma.getValue()\r\n             : undefined\r\n        , {descr} = this.state\r\n        , id = (isPlus)\r\n             ? `SMA+(${period}) +(${plus})`\r\n             : `SMA(${period})`;\r\n\r\n    if ( !this._checkIfAlreadyAdded(descr, id)  ){\r\n       const color = this.props.onAddSma({ id, period, isPlus, plus });\r\n       if (color){\r\n         this.setState(prevState => {\r\n            prevState.descr.push({ id, color })\r\n            if (isPlus) {\r\n              prevState.plusSma = plus\r\n            }\r\n            return prevState;\r\n         })\r\n       }\r\n    }\r\n  }\r\n\r\n  _handleRemoveSma = (id) => {\r\n    if (this.props.onRemoveSma(id)){\r\n       this.state.descr = this.state.descr.filter((descr) =>{\r\n         return descr.id !== id\r\n       });\r\n       this.setState({descr : this.state.descr});\r\n    }\r\n  }\r\n  _handleRemoveMfi = (id) => {\r\n    this.props.onRemoveMfi(id);\r\n    this.state.mfiDescrs = this.state.mfiDescrs.filter((descr) =>{\r\n         return descr.id !== id\r\n    });\r\n    this.setState({mfiDescrs : this.state.mfiDescrs});\r\n  }\r\n\r\n  _handleAddMfi = () => {\r\n    const {mfiDescrs} = this.state\r\n        , _value = this.inputMfiComp.getValue()\r\n        , _id = 'MFI(' + _value + ')';\r\n\r\n    if ( !this._checkIfAlreadyAdded(mfiDescrs, _id)  ){\r\n        this.props.onAddMfi(_value, _id);\r\n        mfiDescrs.push({\r\n            id : _id,\r\n            color : '#90ed7d'\r\n        });\r\n        this.setState({mfiDescrs : mfiDescrs});\r\n    }\r\n  }\r\n\r\n  _handleAddMomAth = () => {\r\n    this.props.onAddMomAth()\r\n  }\r\n\r\n  _renderIndicators = () => {\r\n    const _descr = this.state.descr.map((descr, index) => {\r\n      const {id, color} = descr;\r\n      return (\r\n        <div key={id} style={STYLE.ROW}>\r\n          <SvgMinus\r\n             onClick={this._handleRemoveSma.bind(null, id)}\r\n          />\r\n          <span style={STYLE.fnSpan(color)}>{id}</span>\r\n        </div>\r\n      )\r\n    });\r\n    return (\r\n      <div>\r\n         {_descr}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderMfi = () => {\r\n    const _descr = this.state.mfiDescrs.map((descr, index) => {\r\n      const {id, color} = descr;\r\n      return (\r\n        <div key={id} style={STYLE.ROW}>\r\n          <SvgMinus\r\n             onClick={this._handleRemoveMfi.bind(null, id)}\r\n          />\r\n          <span style={STYLE.fnSpan(color)}>{id}</span>\r\n        </div>\r\n      )\r\n    });\r\n    return (\r\n      <div>\r\n         {_descr}\r\n      </div>\r\n    )\r\n  }\r\n\r\n render(){\r\n    const { isShow, isMfi, onClose } = this.props\r\n        , { plusSma } = this.state;\r\n\r\n    const _mfiDom = (isMfi) ? (\r\n      <div>\r\n        <div style={STYLE.ROW}>\r\n          <span style={STYLE.CAPTION}>MFI</span>\r\n            <InputText\r\n              ref={c => this.inputMfiComp = c}\r\n              initValue={INIT_MFI}\r\n            />\r\n            <SvgPlus onClick={this._handleAddMfi} />\r\n        </div>\r\n        {this._renderMfi()}\r\n      </div>\r\n    ) : null;\r\n\r\n    return (\r\n      <ModalPopup\r\n        style={S.ROOT}\r\n        isShow={isShow}\r\n        onClose={onClose}\r\n      >\r\n        <div style={STYLE.PANE}>\r\n          <div>\r\n            <span style={STYLE.CAPTION}>SMA+</span>\r\n            <InputText\r\n               ref={c => this.inputSmaPlus = c}\r\n               initValue={INIT_SMA}\r\n            />\r\n            <SvgPlus onClick={this._handleAddSma.bind(null, true)} />\r\n            <span style={STYLE.SMA_PLUS}>\r\n              +\r\n            </span>\r\n            <InputText\r\n               ref={c => this.inputPlusSma = c}\r\n               initValue={plusSma}\r\n            />\r\n          </div>\r\n          <div>\r\n            <span style={STYLE.CAPTION}>SMA</span>\r\n            <InputText\r\n               ref={c => this.inputSmaComp = c}\r\n               initValue={INIT_SMA}\r\n            />\r\n            <SvgPlus onClick={this._handleAddSma} />\r\n          </div>\r\n          {this._renderIndicators()}\r\n          {_mfiDom}\r\n          {this._divMomAth}\r\n        </div>\r\n      </ModalPopup>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalMenuIndicator\r\n"]}
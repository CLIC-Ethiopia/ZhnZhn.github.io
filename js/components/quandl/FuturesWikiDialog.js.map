{"version":3,"sources":["../../../src/components/quandl/FuturesWikiDialog.jsx"],"names":["typeOptions","caption","value","FuturesWikiDialog","Decor","dialog","props","_handleSelectType","type","_handleLoad","_handleWithValidationLoad","_createValidationMessages","_createLoadOption","msgOnNotSelected","msgOnNotValidFormat","isFd","msg","_refExchangeItem","current","getValidation","isValid1","isValid","msg1","concat","push","_refFromDate","length","getValues","exchange","one","item","two","fromDate","getValue","loadFn","_handleClose","_handleWithValidationClose","_menuMore","toggleToolBar","_toggleWithToolbar","onAbout","_clickInfoWithToolbar","toolbarButtons","_createType2WithToolbar","noDate","React","createRef","_commandButtons","_crCommandsWithLoad","state","_isWithInitialState","shouldComponentUpdate","nextProps","nextState","isShow","render","onShow","onFront","futuresURI","initFromDate","isYmdOrEmpty","errNotYmdOrEmpty","isToolbar","isShowLabels","validationMessages","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport D from '../dialogs/DialogCell'\r\nimport crMenuMore from '../dialogs/MenuMore'\r\nimport Decor from '../dialogs/decorators/Decorators'\r\n\r\nconst typeOptions = [\r\n  { caption: 'Continuous Contract #1', value: 1 },\r\n  { caption: 'Continuous Contract #2', value: 2 },\r\n  { caption: 'Continuous Contract #3', value: 3 },\r\n  { caption: 'Continuous Contract #4', value: 4 },\r\n  { caption: 'Continuous Contract #5', value: 5 }\r\n]\r\n\r\n@Decor.dialog\r\nclass FuturesWikiDialog extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    //this.type = undefined\r\n\r\n    this._menuMore = crMenuMore(this, {\r\n      toggleToolBar: this._toggleWithToolbar,\r\n      onAbout: this._clickInfoWithToolbar\r\n    })\r\n\r\n    this.toolbarButtons = this._createType2WithToolbar(\r\n      props, { noDate: true }\r\n    )\r\n    this._refExchangeItem = React.createRef()\r\n    this._refFromDate = React.createRef()\r\n    this._commandButtons = this._crCommandsWithLoad(this)\r\n\r\n    this.state = {\r\n      ...this._isWithInitialState()\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _handleSelectType = (type) => {\r\n    this.type = type\r\n  }\r\n\r\n  _handleLoad = () => {\r\n    this._handleWithValidationLoad(\r\n      this._createValidationMessages(),\r\n      this._createLoadOption\r\n    )\r\n  }\r\n  _createValidationMessages = () => {\r\n    const { msgOnNotSelected, msgOnNotValidFormat, isFd } = this.props\r\n    let   msg = [];\r\n\r\n    const { isValid:isValid1, msg:msg1 } = this._refExchangeItem.current.getValidation();\r\n    if (!isValid1) { msg = msg.concat(msg1); }\r\n\r\n    if (!this.type) { msg.push(msgOnNotSelected('Type')); }\r\n\r\n    if (isFd && !this._refFromDate.current.isValid()){\r\n      msg.push(msgOnNotValidFormat('From Date'));\r\n    }\r\n\r\n    msg.isValid = msg.length === 0\r\n      ? true : false;\r\n    return msg;\r\n  }\r\n  _createLoadOption = () => {\r\n    const { one:exchange, two:item } = this._refExchangeItem.current.getValues()\r\n    , fromDate = this.props.isFd\r\n        ? this._refFromDate.current.getValue()\r\n        : void 0;\r\n    return this.props.loadFn(\r\n      this.props,\r\n      { exchange, item , type: this.type, fromDate }\r\n    );\r\n  }\r\n\r\n  _handleClose = () => {\r\n    this._handleWithValidationClose()\r\n  }\r\n\r\n  render(){\r\n    const {\r\n            isShow, caption, onShow, onFront,\r\n            futuresURI, msgOnNotSelected,\r\n            isFd, initFromDate, isYmdOrEmpty, errNotYmdOrEmpty\r\n          } = this.props\r\n        , {\r\n            isToolbar,\r\n            isShowLabels,\r\n            validationMessages\r\n          } = this.state;\r\n\r\n    return (\r\n      <D.DraggableDialog\r\n         isShow={isShow}\r\n         caption={caption}\r\n         menuModel={this._menuMore}\r\n         commandButtons={this._commandButtons}\r\n         onShowChart={onShow}\r\n         onFront={onFront}\r\n         onClose={this._handleClose}\r\n       >\r\n           <D.Toolbar\r\n              isShow={isToolbar}\r\n              buttons={this.toolbarButtons}\r\n           />\r\n           <D.SelectOneTwo\r\n               ref={this._refExchangeItem}\r\n               isShow={isShow}\r\n               isShowLabels={isShowLabels}\r\n               uri={futuresURI}\r\n               oneCaption=\"Exchange\"\r\n               oneOptionNames=\"Exchanges\"\r\n               oneJsonProp=\"futures\"\r\n               twoCaption=\"Asset\"\r\n               msgOnNotSelected={msgOnNotSelected}\r\n           />\r\n           <D.RowInputSelect\r\n              isShowLabels={isShowLabels}\r\n              caption=\"Type\"\r\n              options={typeOptions}\r\n              onSelect={this._handleSelectType}\r\n           />\r\n           {\r\n             isFd &&\r\n             <D.RowDate\r\n                innerRef={this._refFromDate}\r\n                isShowLabels={isShowLabels}\r\n                labelTitle=\"From Date:\"\r\n                initValue={initFromDate}\r\n                errorMsg={errNotYmdOrEmpty}\r\n                onTestDate={isYmdOrEmpty}\r\n             />\r\n           }\r\n           <D.ValidationMessages\r\n              validationMessages={validationMessages}\r\n           />\r\n      </D.DraggableDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FuturesWikiDialog\r\n"],"file":"FuturesWikiDialog.js"}
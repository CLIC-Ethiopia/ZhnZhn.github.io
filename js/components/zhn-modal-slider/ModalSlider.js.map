{"version":3,"sources":["../../../src/components/zhn-modal-slider/ModalSlider.jsx"],"names":["S","SHOW_HIDE","position","overflow","PAGES","display","flexFlow","alignItems","overflowX","transition","_crInitialState","model","INIT_ID","pageCurrent","pages","baseTitleCl","itemCl","ModalSlider","props","hPrevPage","pageNumber","setState","prevState","_addPage","id","title","push","hNextPage","_max","length","key","splice","_crTransform","state","_dX","_PAGE_WIDTH","transform","_refPages","n","_pagesNode","_renderPages","onClose","map","Page","index","React","cloneElement","style","_pageStyle","onNextPage","onPrevPage","pageWidth","maxPages","_pW","_maxP","_pagesStyle","width","bind","getDerivedStateFromProps","nextProps","render","isShow","className","rootStyle","_transform","_showHideStyle","_divStyle","Component","defaultProps","p0"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport throttleOnce from '../../utils/throttleOnce'\r\n\r\nimport ModalPane from '../zhn-moleculs/ModalPane'\r\nimport ShowHide from '../zhn/ShowHide'\r\n\r\nimport MenuPage from './MenuPage'\r\n\r\nconst S = {\r\n  SHOW_HIDE: {\r\n    position: 'absolute',\r\n    overflow: 'hidden'\r\n  },\r\n  PAGES: {\r\n    display: 'flex',\r\n    flexFlow: 'row nowrap',\r\n    alignItems: 'flex-start',\r\n    overflowX: 'hidden',\r\n    transition: 'all 750ms ease-out'\r\n  }\r\n};\r\n\r\nconst _crInitialState = (model, INIT_ID) => ({\r\n  pageCurrent: 1,\r\n  pages: [\r\n    <MenuPage\r\n      key={INIT_ID}\r\n      items={model[INIT_ID]}\r\n      baseTitleCl={model.baseTitleCl}\r\n      itemCl={model.itemCl}\r\n    />\r\n  ],\r\n  model\r\n});\r\n\r\nclass ModalSlider extends Component {\r\n  /*\r\n  static propTypes = {\r\n    rootStyle: PropTypes.object,\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n\r\n    pageWidth: PropTypes.number,\r\n    maxPages: PropTypes.number,\r\n    model: PropTypes.object,\r\n\r\n    onClose: PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    INIT_ID: 'p0',\r\n    model: {\r\n      pageWidth: 100,\r\n      maxPages: 2,\r\n      p0: []\r\n    }\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    const {\r\n      INIT_ID,\r\n      pageWidth, maxPages,\r\n      model\r\n    } = props\r\n    , _pW = model.pageWidth || pageWidth\r\n    , _maxP = model.maxPages || maxPages;\r\n\r\n    this._PAGE_WIDTH = _pW\r\n    this._pagesStyle = {\r\n      width: `${_maxP*_pW}px`\r\n    }\r\n    this._pageStyle = {\r\n      width: `${_pW}px`,\r\n    }\r\n\r\n    this.hNextPage = throttleOnce(\r\n      this.hNextPage.bind(this)\r\n    )\r\n    this.hPrevPage = throttleOnce(\r\n      this.hPrevPage.bind(this)\r\n    )\r\n\r\n    this.state = _crInitialState(model, INIT_ID)\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState){\r\n    const { model, INIT_ID } = nextProps;\r\n    return model !== prevState.model\r\n      ? _crInitialState(model, INIT_ID)\r\n      : null;\r\n  }\r\n\r\n  hPrevPage = (pageNumber) => {\r\n    this.setState(prevState => {\r\n      prevState.pageCurrent = pageNumber - 1\r\n      return prevState;\r\n    })\r\n  }\r\n\r\n  _addPage = (pages, id, title) => {\r\n    const { model } = this.props;\r\n    pages.push((\r\n      <MenuPage\r\n        key={id}\r\n        title={title}\r\n        items={model[id]}\r\n        baseTitleCl={model.baseTitleCl}\r\n        itemCl={model.itemCl}\r\n      />\r\n    ))\r\n  }\r\n\r\n  hNextPage = (id, title, pageNumber) => {\r\n    this.setState(prevState => {\r\n       const { pages } = prevState\r\n          , _max = pages.length-1;\r\n\r\n      if ( (_max+1) > pageNumber) {\r\n        if (pages[pageNumber] && pages[pageNumber].key !== id) {\r\n           if (pageNumber>0) {\r\n             prevState.pages.splice(pageNumber)\r\n           } else {\r\n             prevState.pages = []\r\n           }\r\n           this._addPage(prevState.pages, id, title)\r\n        }\r\n      } else {\r\n        this._addPage(pages, id, title)\r\n      }\r\n\r\n      prevState.pageCurrent = pageNumber + 1\r\n      return prevState;\r\n    })\r\n  }\r\n\r\n  _crTransform = () => {\r\n    const { pageCurrent } = this.state\r\n    , _dX = -1*this._PAGE_WIDTH*(pageCurrent - 1)+0;\r\n    return { transform: `translateX(${_dX}px)` };\r\n  }\r\n\r\n  _refPages = n => this._pagesNode = n\r\n\r\n  _renderPages = () => {\r\n    const { onClose } = this.props\r\n    , { pages, pageCurrent } = this.state;\r\n    return pages.map((Page, index) => React.cloneElement(Page, {\r\n      pageCurrent,\r\n      style: this._pageStyle,\r\n      pageNumber: index + 1,\r\n      onNextPage: index === 0 ? this.hNextPage : void 0,\r\n      onPrevPage: index !== 0 ? this.hPrevPage : void 0,\r\n      onClose\r\n    }));\r\n  }\r\n\r\n  render(){\r\n    const { _pagesStyle, _pageStyle } = this\r\n    , {\r\n        isShow, className,\r\n        rootStyle, style,\r\n        onClose\r\n      } = this.props\r\n    , _transform = this._crTransform()\r\n    , _showHideStyle = {\r\n        ...style,\r\n        ...S.SHOW_HIDE,\r\n        ..._pageStyle\r\n      }\r\n    , _divStyle = {\r\n        ...S.PAGES,\r\n        ..._pagesStyle,\r\n        ..._transform\r\n      };\r\n    return (\r\n      <ModalPane\r\n        isShow={isShow}\r\n        style={rootStyle}\r\n        onClose={onClose}\r\n      >\r\n        <ShowHide\r\n          className={className}\r\n          style={_showHideStyle}\r\n          isShow={isShow}\r\n        >\r\n          <div\r\n            ref={this._refPages}\r\n            style={_divStyle}\r\n          >\r\n            {this._renderPages()}\r\n          </div>\r\n        </ShowHide>\r\n      </ModalPane>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalSlider\r\n"],"file":"ModalSlider.js"}
{"version":3,"sources":["../../../src/components/watch-browser/ListCreatePane.jsx"],"names":["ListCreatePane","props","_onStore","actionType","data","actionCompleted","actionFailed","forActionType","store","isUpdateGroup","_handleClear","setState","groupOptions","getWatchGroups","validationMessages","messages","_handleSelectGroup","item","caption","captionGroup","inputText","setValue","state","length","_handleCreate","onCreate","msgOnNotSelect","msgOnIsEmptyName","captionList","getValue","msg","push","_primaryBt","unsubscribe","listen","onClose","c"],"mappings":"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","file":"ListCreatePane.js","sourcesContent":["import React, { Component } from 'react';\r\n//import PropTypes from \"prop-types\";\r\n\r\nimport A from './Atoms'\r\n\r\nclass ListCreatePane extends Component {\r\n  /*\r\n  static propTypes = {\r\n    store: PropTypes.shape({\r\n      listen: PropTypes.func,\r\n      getWatchGroups: PropTypes.func\r\n    }),\r\n    actionCompleted: PropTypes.string,\r\n    actionFailed: PropTypes.string,\r\n    forActionType: PropTypes.string,\r\n    msgOnNotSelect: PropTypes.func,\r\n    msgOnIsEmptyName: PropTypes.func,\r\n    onCreate: PropTypes.func,\r\n    onClose: PropTypes.func\r\n  }\r\n  */\r\n\r\n  constructor(props){\r\n    super()\r\n    this.captionGroup = null\r\n    this._primaryBt = <A.Button.Primary\r\n                         caption=\"Create\"\r\n                         title=\"Create New List\"\r\n                         onClick={this._handleCreate}\r\n                      />\r\n    this.state = {\r\n      groupOptions : props.store.getWatchGroups(),\r\n      isUpdateGroup : false,\r\n      validationMessages : []\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.unsubscribe = this.props.store.listen(this._onStore)\r\n  }\r\n  componentWillUnmount(){\r\n    this.unsubscribe()\r\n  }\r\n  _onStore = (actionType, data) => {\r\n    const { actionCompleted, actionFailed, forActionType, store } = this.props;\r\n    if (actionType === actionCompleted){\r\n        let isUpdateGroup = true;\r\n        if (data.forActionType === forActionType){\r\n          this._handleClear()\r\n          isUpdateGroup = false\r\n        }\r\n        this.setState({\r\n           groupOptions: store.getWatchGroups(),\r\n           isUpdateGroup\r\n        });\r\n    } else if (actionType === actionFailed && data.forActionType === forActionType){\r\n      this.setState({\r\n        validationMessages: data.messages,\r\n        isUpdateGroup:false\r\n      })\r\n    }\r\n  }\r\n\r\n  _handleSelectGroup = (item) => {\r\n    if (item && item.caption){\r\n      this.captionGroup = item.caption\r\n    } else {\r\n      this.captionGroup = null\r\n    }\r\n  }\r\n\r\n  _handleClear = () => {\r\n     this.inputText.setValue('')\r\n     if (this.state.validationMessages.length>0){\r\n       this.setState({ validationMessages: [], isUpdateGroup:false })\r\n     }\r\n  }\r\n\r\n  _handleCreate = () => {\r\n     const { onCreate, msgOnNotSelect, msgOnIsEmptyName } = this.props\r\n         , captionList = this.inputText.getValue();\r\n     if (this.captionGroup && captionList){\r\n       onCreate({\r\n          captionGroup : this.captionGroup,\r\n          captionList : captionList\r\n       });\r\n     } else {\r\n       const msg = [];\r\n       if (!this.captionGroup) { msg.push(msgOnNotSelect('In Group')); }\r\n       if (!captionList)       { msg.push(msgOnIsEmptyName('List')); }\r\n       this.setState({ validationMessages:msg, isUpdateGroup:false });\r\n     }\r\n  }\r\n\r\n  render(){\r\n    const { onClose } = this.props\r\n        , { groupOptions, validationMessages } = this.state;\r\n    return (\r\n      <div>\r\n        <A.RowInputSelect\r\n           caption=\"In Group:\"\r\n           options={groupOptions}\r\n           //isUpdateOptions={isUpdateGroup}\r\n           onSelect={this._handleSelectGroup}\r\n        />\r\n        <A.RowInputText\r\n           ref={c => this.inputText = c}\r\n           caption=\"List:\"\r\n        />\r\n        <A.ValidationMessages\r\n          validationMessages={validationMessages}\r\n        />\r\n        <A.RowButtons\r\n           Primary={this._primaryBt}\r\n           onClear={this._handleClear}\r\n           onClose={onClose}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ListCreatePane\r\n"]}
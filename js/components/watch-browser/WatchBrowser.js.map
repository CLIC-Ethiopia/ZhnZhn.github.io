{"version":3,"sources":["../../../src/components/watch-browser/WatchBrowser.jsx"],"names":["CL_SCROLL","CL_WATCH_ITEM","C_GROUP_OPEN","C_LIST_OPEN","S_BROWSER","paddingRight","S_BT_CIRCLE","position","top","marginLeft","S_GROUP_DIV","lineHeight","S_LIST_DIV","paddingLeft","borderLeftStyle","borderLeftWidth","borderLeftColor","S_MR_10","marginRight","DRAG","GROUP","C_GROUP_ENTER","LIST","C_LIST_ENTER","ITEM","WatchBrowser","withWatchDnD","Component","constructor","props","_onStore","actionType","data","browserType","showAction","updateAction","_handlerShow","setState","watchList","_handlerHide","isShow","_handlerToggleEditMode","isModeEdit","state","_renderWatchList","groups","map","group","index","caption","lists","_hDragStartGroup","_hDragEnterGroup","_hDragOverGroup","_hDragLeaveGroup","_hDropGroup","_renderLists","groupCaption","list","items","_hDragStartList","_hDragEnterList","_hDragOverList","_hDragLeaveList","_hDropList","_renderItems","listCaption","item","id","_handlerClickItem","_handlerRemoveItem","_hDragStartItem","_hDragOverItem","_hDragEnterItem","_hDragLeaveItem","_hDropItem","_bindDnDGroup","WatchActions","_bindDnDList","_bindDnDItem","isInitShow","store","getWatchList","componentDidMount","unsubscribe","listen","componentWillUnmount","_handlerSaveWatch","saveWatch","_handlerEditGroup","ComponentActions","showModalDialog","MDT_EDIT_WATCH_GROUP","_handlerEditList","MDT_EDIT_WATCH_LIST","MDT_LOAD_ITEM","option","event","stopPropagation","removeItem","render","_captionEV"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\n\r\nimport {\r\n  MDT_EDIT_WATCH_GROUP,\r\n  MDT_EDIT_WATCH_LIST,\r\n  MDT_LOAD_ITEM\r\n} from '../../constants/ModalDialogType';\r\nimport ComponentActions from '../../flux/actions/ComponentActions';\r\nimport { WatchActions } from '../../flux/actions/WatchActions';\r\n\r\nimport A from '../Comp'\r\n\r\nimport EditBar from './EditBar';\r\nimport WatchItem from './WatchItem';\r\n\r\nimport withWatchDnD from './decorators/withWatchDnD';\r\n\r\nconst CL_SCROLL = 'scroll-container-y scroll-watch'\r\n, CL_WATCH_ITEM = 'row__type2-topic not-selected'\r\n\r\n, C_GROUP_OPEN = '#1b75bb'\r\n, C_LIST_OPEN = '#80c040'\r\n\r\n, S_BROWSER = { paddingRight: 0 }\r\n, S_BT_CIRCLE = {\r\n  position: 'relative',\r\n  top: -4,\r\n  marginLeft: 20\r\n}\r\n, S_GROUP_DIV = { lineHeight: 2 }\r\n, S_LIST_DIV = {\r\n  marginLeft: 8,\r\n  paddingLeft: 2,\r\n  borderLeftStyle: 'solid',\r\n  borderLeftWidth: 2,\r\n  borderLeftColor: 'inherit',\r\n  lineHeight: 2\r\n}\r\n, S_MR_10 = { marginRight: 10 };\r\n\r\n\r\nconst DRAG = {\r\n  GROUP: 'GROUP',\r\n  C_GROUP_ENTER: C_GROUP_OPEN,\r\n  LIST: 'LIST',\r\n  C_LIST_ENTER: C_LIST_OPEN,\r\n  ITEM: 'ITEM'\r\n};\r\n\r\n@withWatchDnD\r\nclass WatchBrowser extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this._bindDnDGroup(DRAG, WatchActions)\r\n    this._bindDnDList(DRAG, WatchActions)\r\n    this._bindDnDItem(DRAG, WatchActions)\r\n\r\n    this.state = {\r\n      isShow : !!props.isInitShow,\r\n      isModeEdit : false,\r\n      watchList : props.store.getWatchList()\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.unsubscribe = this.props.store.listen(this._onStore)\r\n  }\r\n  componentWillUnmount(){\r\n    this.unsubscribe()\r\n  }\r\n  _onStore = (actionType, data) => {\r\n     const { browserType, showAction, updateAction } = this.props;\r\n     if (actionType === showAction && data === browserType ){\r\n      this._handlerShow()\r\n    } else if (actionType === updateAction) {\r\n      this.setState({ watchList: data })\r\n    }\r\n  }\r\n\r\n  _handlerHide = () => {\r\n     this.setState({ isShow : false })\r\n  }\r\n  _handlerShow = () => {\r\n     this.setState({ isShow : true })\r\n  }\r\n\r\n  _handlerSaveWatch() {\r\n    WatchActions.saveWatch()\r\n  }\r\n  _handlerToggleEditMode = () => {\r\n    this.setState({ isModeEdit : !this.state.isModeEdit })\r\n  }\r\n\r\n  _handlerEditGroup() {\r\n    ComponentActions.showModalDialog(MDT_EDIT_WATCH_GROUP)\r\n  }\r\n  _handlerEditList() {\r\n    ComponentActions.showModalDialog(MDT_EDIT_WATCH_LIST)\r\n  }\r\n\r\n  _renderWatchList = (watchList) => {\r\n     const { isModeEdit } = this.state;\r\n     return watchList.groups.map((group, index) => {\r\n       const {caption, lists} = group;\r\n       return (\r\n               <A.OpenClose2\r\n                  key={index}\r\n                  style={S_GROUP_DIV}\r\n                  //openColor={C_GROUP_OPEN}\r\n                  caption={caption}\r\n                  isDraggable={isModeEdit}\r\n                  option={{ caption }}\r\n                  onDragStart={this._hDragStartGroup}\r\n                  onDragEnter={this._hDragEnterGroup}\r\n                  onDragOver={this._hDragOverGroup}\r\n                  onDragLeave={this._hDragLeaveGroup}\r\n                  onDrop={this._hDropGroup}\r\n                >\r\n                {lists && this._renderLists(lists, caption)}\r\n              </A.OpenClose2>\r\n              );\r\n     });\r\n  }\r\n\r\n  _renderLists = (lists, groupCaption) => {\r\n    const { isModeEdit } = this.state;\r\n    return lists.map((list, index) => {\r\n      const {caption, items} = list;\r\n      return (\r\n        <A.OpenClose2\r\n           key={index}\r\n           style={S_LIST_DIV}\r\n           notSelectedStyle={S_MR_10}\r\n           openColor={C_LIST_OPEN}\r\n           caption={caption}\r\n           isDraggable={isModeEdit}\r\n           option={{ groupCaption, caption }}\r\n           onDragStart={this._hDragStartList}\r\n           onDragEnter={this._hDragEnterList}\r\n           onDragOver={this._hDragOverList}\r\n           onDragLeave={this._hDragLeaveList}\r\n           onDrop={this._hDropList}\r\n        >\r\n         {items && this._renderItems(items, groupCaption, caption)}\r\n       </A.OpenClose2>\r\n      );\r\n    });\r\n  }\r\n\r\n  _handlerClickItem(item) {\r\n    ComponentActions.showModalDialog(MDT_LOAD_ITEM, item)\r\n  }\r\n  _handlerRemoveItem(option, event) {\r\n    event.stopPropagation()\r\n    WatchActions.removeItem(option)\r\n  }\r\n\r\n  _renderItems = (items, groupCaption, listCaption) => {\r\n      const {isModeEdit} = this.state;\r\n      return items.map((item, index) => {\r\n        const { id, caption } = item;\r\n        return (\r\n            <WatchItem\r\n               key={id}\r\n               className={CL_WATCH_ITEM}\r\n               isModeEdit={isModeEdit}\r\n               item={item}\r\n               option={{ groupCaption, listCaption, caption }}\r\n               onClick={this._handlerClickItem}\r\n               onClose={this._handlerRemoveItem}\r\n               onDragStart={this._hDragStartItem}\r\n               onDragOver={this._hDragOverItem}\r\n               onDragEnter={this._hDragEnterItem}\r\n               onDragLeave={this._hDragLeaveItem}\r\n               onDrop={this._hDropItem}\r\n            />\r\n        );\r\n      });\r\n    }\r\n\r\n  render(){\r\n    const { caption } = this.props\r\n        , { isShow, isModeEdit, watchList } = this.state\r\n        , _captionEV = isModeEdit ? 'V' : 'E';\r\n    return (\r\n       <A.Browser isShow={isShow} style={S_BROWSER}>\r\n          <A.BrowserCaption\r\n            caption={caption}\r\n            onClose={this._handlerHide}\r\n          >\r\n           <A.ButtonCircle\r\n             caption=\"S\"\r\n             title=\"Save to LocalStorage\"\r\n             style={S_BT_CIRCLE}\r\n             onClick={this._handlerSaveWatch}\r\n           />\r\n           <A.ButtonCircle\r\n              caption={_captionEV}\r\n              title=\"Toggle Edit Mode: E/V\"\r\n              style={S_BT_CIRCLE}\r\n              onClick={this._handlerToggleEditMode}\r\n           />\r\n         </A.BrowserCaption>\r\n         <EditBar\r\n            isShow={isModeEdit}\r\n            onClickGroup={this._handlerEditGroup}\r\n            onClickList={this._handlerEditList}\r\n         />\r\n         <A.ScrollPane className={CL_SCROLL}>\r\n           {watchList && this._renderWatchList(watchList)}\r\n         </A.ScrollPane>\r\n      </A.Browser>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WatchBrowser\r\n"],"file":"WatchBrowser.js"}
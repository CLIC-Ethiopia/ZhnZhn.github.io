{"version":3,"sources":["../../../../src/components/watch-browser/decorators/withDnDItem.js"],"names":["_crDragStartItem","DRAG","ev","groupCaption","listCaption","caption","dragStartWithDnDStyle","LIST","ITEM","dataTransfer","effectAllowed","dropEffect","_data","dragId","xType","setData","JSON","stringify","_crDropItem","WatchActions","dropWithDnDStyle","parse","getData","data","dropId","preventDefault","dragDropItem","undefined","_crDragEnterItem","dragEnterWithDnDStyle","_handlerDragOverItem","_handlerDragLeaveItem","dragLeaveWithDnDStyle","withDnDItem","target","_proto","prototype","_handlerDragStartItem","_handlerDropItem","_handlerDragEnterItem"],"mappings":";;;;;;AACA,IAAMA,mBAAmB,SAAnBA,gBAAmB,CAACC,IAAD,EAAU;AACjC,SAAO,gBAA+CC,EAA/C,EAAkD;AAAA,QAAxCC,YAAwC,QAAxCA,YAAwC;AAAA,QAA1BC,WAA0B,QAA1BA,WAA0B;AAAA,QAAbC,OAAa,QAAbA,OAAa;;AACvD,SAAKC,qBAAL,CAA2BJ,EAA3B,EAA+B,CAACD,KAAKM,IAAN,EAAYN,KAAKO,IAAjB,CAA/B;AACAN,OAAGO,YAAH,CAAgBC,aAAhB,GAA8B,MAA9B;AACAR,OAAGO,YAAH,CAAgBE,UAAhB,GAA2B,MAA3B;AACA;AACA,QAAMC,QAAQ;AACZC,cAAYV,YAAZ,SAA4BC,WAA5B,SAA2CC,OAD/B;AAEZS,aAAQb,KAAKO;AAFD,KAAd;AAIAN,OAAGO,YAAH,CAAgBM,OAAhB,CAAwB,MAAxB,EAAgCC,KAAKC,SAAL,CAAeL,KAAf,CAAhC;AACD,GAVD;AAWD,CAZD;;AAcA,IAAMM,cAAc,SAAdA,WAAc,CAACjB,IAAD,EAAOkB,YAAP,EAAwB;AAC1C,SAAO,iBAAiDjB,EAAjD,EAAoD;AAAA,QAAzCC,YAAyC,SAAzCA,YAAyC;AAAA,QAA3BC,WAA2B,SAA3BA,WAA2B;AAAA,QAAdC,OAAc,SAAdA,OAAc;;AACxD,SAAKe,gBAAL,CAAsBlB,EAAtB;AACM,eAAOc,KAAKK,KAAL,CAAWnB,GAAGO,YAAH,CAAgBa,OAAhB,CAAwB,MAAxB,CAAX,CAAP;AAAA,QACER,KADF,GACoBS,IADpB,CACET,KADF;AAAA,QACSD,MADT,GACoBU,IADpB,CACSV,MADT;AAAA,QAEAW,MAFA,GAEYrB,YAFZ,SAE4BC,WAF5B,SAE2CC,OAF3C;;;AAIN,QAAIS,UAAUb,KAAKO,IAAnB,EAAyB;AACvB,UAAKK,WAAWW,MAAhB,EAAwB;AACtBtB,WAAGuB,cAAH;AACAN,qBAAaO,YAAb,CAA0B;AACxBb,kBAASA,MADe;AAExBW,kBAASA;AAFe,SAA1B;AAIF,OANA,MAMM;AACL,eAAOG,SAAP;AACD;AACF;AACF,GAjBD;AAkBD,CAnBD;;AAqBA,IAAMC,mBAAmB,SAAnBA,gBAAmB,CAAC3B,IAAD,EAAU;AACjC,SAAO,UAASC,EAAT,EAAY;AACjBA,OAAGuB,cAAH;AACA,SAAKI,qBAAL,CAA2B3B,EAA3B,EAA+BD,KAAKO,IAApC;AACF,GAHA;AAID,CALD;;AAOA,IAAMsB,uBAAuB,SAAvBA,oBAAuB,CAAS5B,EAAT,EAAY;AACtCA,KAAGuB,cAAH;AACF,CAFD;;AAIA,IAAMM,wBAAwB,SAAxBA,qBAAwB,CAAS7B,EAAT,EAAY;AACvCA,KAAGuB,cAAH;AACA,OAAKO,qBAAL,CAA2B9B,EAA3B;AACF,CAHD;;AAKA,IAAM+B,cAAc,SAAdA,WAAc,CAAChC,IAAD,EAAOkB,YAAP,EAAwB;AAC1C,SAAO,UAACe,MAAD,EAAY;AACjB,QAAMC,SAASD,OAAOE,SAAtB;AACAD,WAAOE,qBAAP,GAA+BrC,iBAAiBC,IAAjB,CAA/B;AACAkC,WAAOG,gBAAP,GAA0BpB,YAAYjB,IAAZ,EAAkBkB,YAAlB,CAA1B;AACAgB,WAAOI,qBAAP,GAA+BX,iBAAiB3B,IAAjB,CAA/B;AACAkC,WAAOL,oBAAP,GAA8BA,oBAA9B;AACAK,WAAOJ,qBAAP,GAA+BA,qBAA/B;AACD,GAPD;AAQD,CATD;;kBAWeE,W","file":"withDnDItem.js","sourcesContent":["\r\nconst _crDragStartItem = (DRAG) => {\r\n  return function({groupCaption, listCaption, caption}, ev){\r\n    this.dragStartWithDnDStyle(ev, [DRAG.LIST, DRAG.ITEM])\r\n    ev.dataTransfer.effectAllowed=\"move\"\r\n    ev.dataTransfer.dropEffect=\"move\"\r\n    //.setDragImage(img, 0, 0);\r\n    const _data = {\r\n      dragId : `${groupCaption};${listCaption};${caption}`,\r\n      xType : DRAG.ITEM\r\n    };\r\n    ev.dataTransfer.setData(\"text\", JSON.stringify(_data))\r\n  };\r\n};\r\n\r\nconst _crDropItem = (DRAG, WatchActions) => {\r\n  return function({ groupCaption, listCaption, caption }, ev){\r\n     this.dropWithDnDStyle(ev)\r\n     const data = JSON.parse(ev.dataTransfer.getData(\"text\"))\r\n         , { xType, dragId } = data\r\n         , dropId = `${groupCaption};${listCaption};${caption}`;\r\n\r\n     if (xType === DRAG.ITEM) {\r\n       if ( dragId !== dropId) {\r\n         ev.preventDefault()\r\n         WatchActions.dragDropItem({\r\n           dragId : dragId,\r\n           dropId : dropId\r\n         })\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nconst _crDragEnterItem = (DRAG) => {\r\n  return function(ev){\r\n    ev.preventDefault()\r\n    this.dragEnterWithDnDStyle(ev, DRAG.ITEM)\r\n };\r\n};\r\n\r\nconst _handlerDragOverItem = function(ev){\r\n   ev.preventDefault()\r\n};\r\n\r\nconst _handlerDragLeaveItem = function(ev){\r\n   ev.preventDefault()\r\n   this.dragLeaveWithDnDStyle(ev)\r\n};\r\n\r\nconst withDnDItem = (DRAG, WatchActions) => {\r\n  return (target) => {\r\n    const _proto = target.prototype;\r\n    _proto._handlerDragStartItem = _crDragStartItem(DRAG)\r\n    _proto._handlerDropItem = _crDropItem(DRAG, WatchActions)\r\n    _proto._handlerDragEnterItem = _crDragEnterItem(DRAG)\r\n    _proto._handlerDragOverItem = _handlerDragOverItem\r\n    _proto._handlerDragLeaveItem = _handlerDragLeaveItem\r\n  };\r\n}\r\n\r\nexport default withDnDItem\r\n"]}
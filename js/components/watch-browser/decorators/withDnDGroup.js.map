{"version":3,"sources":["../../../../src/components/watch-browser/decorators/withDnDGroup.js"],"names":["_crDragStartGroup","DRAG","ev","caption","dragStartWithDnDStyle","GROUP","dataTransfer","effectAllowed","dropEffect","_data","dragId","xType","setData","JSON","stringify","_crDropGroup","WatchActions","dropWithDnDStyle","parse","getData","data","dropId","preventDefault","dragDropGroup","undefined","LIST","dragDropList","_crDragEnterGroup","dragEnterWithDnDStyle","_handlerDragOverGroup","_handlerDragLeaveGroup","dragLeaveWithDnDStyle","withDnDGroup","target","_proto","prototype","_handlerDragStartGroup","_handlerDropGroup","_handlerDragEnterGroup"],"mappings":";;;;;AAAA,IAAMA,oBAAoB,SAApBA,iBAAoB,CAACC,IAAD,EAAU;AAClC,SAAO,gBAAqBC,EAArB,EAAwB;AAAA,QAAbC,OAAa,QAAbA,OAAa;;AAC5B,SAAKC,qBAAL,CAA2BF,EAA3B,EAA+B,CAACD,KAAKI,KAAN,CAA/B;AACAH,OAAGI,YAAH,CAAgBC,aAAhB,GAA8B,MAA9B;AACAL,OAAGI,YAAH,CAAgBE,UAAhB,GAA2B,MAA3B;AACA,QAAMC,QAAQ;AACZC,cAAYP,OAAZ,MADY;AAEZQ,aAAQV,KAAKI;AAFD,KAAd;AAIAH,OAAGI,YAAH,CAAgBM,OAAhB,CAAwB,MAAxB,EAAgCC,KAAKC,SAAL,CAAeL,KAAf,CAAhC;AACF,GATD;AAUD,CAXD;;AAaA,IAAMM,eAAe,SAAfA,YAAe,CAACd,IAAD,EAAOe,YAAP,EAAwB;AAC3C,SAAO,iBAAsBd,EAAtB,EAA0B;AAAA,QAAfC,OAAe,SAAfA,OAAe;;AAC/B,SAAKc,gBAAL,CAAsBf,EAAtB;AACM,eAAOW,KAAKK,KAAL,CAAWhB,GAAGI,YAAH,CAAgBa,OAAhB,CAAwB,MAAxB,CAAX,CAAP;AAAA,QACER,KADF,GACoBS,IADpB,CACET,KADF;AAAA,QACSD,MADT,GACoBU,IADpB,CACSV,MADT;AAAA,QAEAW,MAFA,GAEalB,OAFb;;;AAIN,QAAIQ,UAAUV,KAAKI,KAAnB,EAA0B;AACxB,UAAIK,WAAWW,MAAf,EAAuB;AACrBnB,WAAGoB,cAAH;AACAN,qBAAaO,aAAb,CAA2B;AACzBb,kBAASA,MADgB;AAEzBW,kBAASA;AAFgB,SAA3B;AAID,OAND,MAMO;AACL,eAAOG,SAAP;AACD;AACF,KAVD,MAUO,IAAIb,UAAUV,KAAKwB,IAAnB,EAAyB;AAC9BvB,SAAGoB,cAAH;AACAN,mBAAaU,YAAb,CAA0B;AACxBhB,gBAASA,MADe;AAExBW,gBAASA;AAFe,OAA1B;AAID;AACF,GAvBD;AAwBD,CAzBD;;AA4BA,IAAMM,oBAAoB,SAApBA,iBAAoB,CAAC1B,IAAD,EAAU;AAClC,SAAO,UAASC,EAAT,EAAY;AACjBA,OAAGoB,cAAH;AACA,SAAKM,qBAAL,CAA2B1B,EAA3B,EAA+BD,KAAKI,KAApC;AACD,GAHD;AAID,CALD;;AAOA,IAAMwB,wBAAwB,SAAxBA,qBAAwB,CAAS3B,EAAT,EAAY;AACvCA,KAAGoB,cAAH;AACF,CAFD;;AAIA,IAAMQ,yBAAyB,SAAzBA,sBAAyB,CAAS5B,EAAT,EAAY;AACxCA,KAAGoB,cAAH;AACA,OAAKS,qBAAL,CAA2B7B,EAA3B;AACF,CAHD;;AAKA,IAAM8B,eAAe,SAAfA,YAAe,CAAC/B,IAAD,EAAOe,YAAP,EAAwB;AAC3C,SAAO,UAACiB,MAAD,EAAY;AACjB,QAAMC,SAASD,OAAOE,SAAtB;AACAD,WAAOE,sBAAP,GAAgCpC,kBAAkBC,IAAlB,CAAhC;AACAiC,WAAOG,iBAAP,GAA2BtB,aAAad,IAAb,EAAmBe,YAAnB,CAA3B;AACAkB,WAAOI,sBAAP,GAAgCX,kBAAkB1B,IAAlB,CAAhC;AACAiC,WAAOL,qBAAP,GAA+BA,qBAA/B;AACAK,WAAOJ,sBAAP,GAAgCA,sBAAhC;AACD,GAPD;AAQD,CATD;;kBAWeE,Y","file":"withDnDGroup.js","sourcesContent":["const _crDragStartGroup = (DRAG) => {\r\n  return function({ caption}, ev){\r\n     this.dragStartWithDnDStyle(ev, [DRAG.GROUP])\r\n     ev.dataTransfer.effectAllowed=\"move\"\r\n     ev.dataTransfer.dropEffect=\"move\"\r\n     const _data = {\r\n       dragId : `${caption};`,\r\n       xType : DRAG.GROUP\r\n     }\r\n     ev.dataTransfer.setData(\"text\", JSON.stringify(_data))\r\n  };\r\n};\r\n\r\nconst _crDropGroup = (DRAG, WatchActions) => {\r\n  return function({ caption }, ev) {\r\n    this.dropWithDnDStyle(ev)\r\n    const data = JSON.parse(ev.dataTransfer.getData(\"text\"))\r\n       ,  { xType, dragId } = data\r\n       ,  dropId =  `${caption};`;\r\n\r\n    if (xType === DRAG.GROUP) {\r\n      if (dragId !== dropId) {\r\n        ev.preventDefault()\r\n        WatchActions.dragDropGroup({\r\n          dragId : dragId,\r\n          dropId : dropId\r\n        })\r\n      } else {\r\n        return undefined;\r\n      }\r\n    } else if (xType === DRAG.LIST) {\r\n      ev.preventDefault()\r\n      WatchActions.dragDropList({\r\n        dragId : dragId,\r\n        dropId : dropId\r\n      })\r\n    }\r\n  };\r\n};\r\n\r\n\r\nconst _crDragEnterGroup = (DRAG) => {\r\n  return function(ev){\r\n    ev.preventDefault()\r\n    this.dragEnterWithDnDStyle(ev, DRAG.GROUP)\r\n  };\r\n};\r\n\r\nconst _handlerDragOverGroup = function(ev){\r\n   ev.preventDefault()\r\n};\r\n\r\nconst _handlerDragLeaveGroup = function(ev){\r\n   ev.preventDefault()\r\n   this.dragLeaveWithDnDStyle(ev)\r\n};\r\n\r\nconst withDnDGroup = (DRAG, WatchActions) => {\r\n  return (target) => {\r\n    const _proto = target.prototype;\r\n    _proto._handlerDragStartGroup = _crDragStartGroup(DRAG)\r\n    _proto._handlerDropGroup = _crDropGroup(DRAG, WatchActions)\r\n    _proto._handlerDragEnterGroup = _crDragEnterGroup(DRAG)\r\n    _proto._handlerDragOverGroup = _handlerDragOverGroup\r\n    _proto._handlerDragLeaveGroup = _handlerDragLeaveGroup\r\n  };\r\n}\r\n\r\nexport default withDnDGroup\r\n"]}
{"version":3,"sources":["../../../../src/components/watch-browser/decorators/withDnDList.js"],"names":["_crDragStartList","DRAG","ev","groupCaption","caption","dragStartWithDnDStyle","GROUP","LIST","dataTransfer","effectAllowed","dropEffect","_data","dragId","xType","setData","JSON","stringify","_crDropList","WatchActions","dropWithDnDStyle","parse","getData","data","dropId","preventDefault","dragDropList","undefined","ITEM","dragDropItem","_crDragEnterList","dragEnterWithDnDStyle","_handlerDragOverList","_handlerDragLeaveList","dragLeaveWithDnDStyle","withDnDList","target","_proto","prototype","_handlerDragStartList","_handlerDropList","_handlerDragEnterList"],"mappings":";;;;;;AACA,IAAMA,mBAAmB,SAAnBA,gBAAmB,CAACC,IAAD,EAAU;AACjC,SAAO,gBAAmCC,EAAnC,EAAsC;AAAA,QAA3BC,YAA2B,QAA3BA,YAA2B;AAAA,QAAbC,OAAa,QAAbA,OAAa;;AAC3C,SAAKC,qBAAL,CAA2BH,EAA3B,EAA+B,CAACD,KAAKK,KAAN,EAAaL,KAAKM,IAAlB,CAA/B;AACAL,OAAGM,YAAH,CAAgBC,aAAhB,GAA8B,MAA9B;AACAP,OAAGM,YAAH,CAAgBE,UAAhB,GAA2B,MAA3B;AACA,QAAMC,QAAQ;AACZC,cAAYT,YAAZ,SAA4BC,OADhB;AAEZS,aAAQZ,KAAKM;AAFD,KAAd;AAIAL,OAAGM,YAAH,CAAgBM,OAAhB,CAAwB,MAAxB,EAAgCC,KAAKC,SAAL,CAAeL,KAAf,CAAhC;AACF,GATA;AAUD,CAXD;;AAaA,IAAMM,cAAc,SAAdA,WAAc,CAAChB,IAAD,EAAOiB,YAAP,EAAwB;AAC1C,SAAO,iBAAoChB,EAApC,EAAuC;AAAA,QAA5BC,YAA4B,SAA5BA,YAA4B;AAAA,QAAdC,OAAc,SAAdA,OAAc;;AAC7C,SAAKe,gBAAL,CAAsBjB,EAAtB;AACA;;AAEM,eAAOa,KAAKK,KAAL,CAAWlB,GAAGM,YAAH,CAAgBa,OAAhB,CAAwB,MAAxB,CAAX,CAAP;AAAA,QACER,KADF,GACoBS,IADpB,CACET,KADF;AAAA,QACSD,MADT,GACoBU,IADpB,CACSV,MADT;AAAA,QAEAW,MAFA,GAEapB,YAFb,SAE6BC,OAF7B;;;AAIN,QAAIS,UAAUZ,KAAKM,IAAnB,EAAyB;AACvB,UAAIK,WAAWW,MAAf,EAAuB;AACrBrB,WAAGsB,cAAH;AACAN,qBAAaO,YAAb,CAA0B;AACxBb,kBAASA,MADe;AAExBW,kBAASA;AAFe,SAA1B;AAID,OAND,MAMO;AACL,eAAOG,SAAP;AACD;AACF,KAVD,MAUO,IAAIb,UAAUZ,KAAK0B,IAAnB,EAAyB;AAC9BzB,SAAGsB,cAAH;AACAN,mBAAaU,YAAb,CAA0B;AACxBhB,gBAASA,MADe;AAExBW,gBAASA;AAFe,OAA1B;AAID;AACD,GAzBD;AA0BD,CA3BD;;AA6BA,IAAMM,mBAAmB,SAAnBA,gBAAmB,CAAC5B,IAAD,EAAU;AACjC,SAAO,UAASC,EAAT,EAAY;AACjBA,OAAGsB,cAAH;AACA,SAAKM,qBAAL,CAA2B5B,EAA3B,EAA+BD,KAAKM,IAApC;AACD,GAHD;AAID,CALD;;AAOA,IAAMwB,uBAAuB,SAAvBA,oBAAuB,CAAS7B,EAAT,EAAY;AACtCA,KAAGsB,cAAH;AACF,CAFD;;AAIA,IAAMQ,wBAAwB,SAAxBA,qBAAwB,CAAS9B,EAAT,EAAY;AACvCA,KAAGsB,cAAH;AACA,OAAKS,qBAAL,CAA2B/B,EAA3B;AACF,CAHD;;AAKA,IAAMgC,cAAc,SAAdA,WAAc,CAACjC,IAAD,EAAOiB,YAAP,EAAwB;AAC1C,SAAO,UAACiB,MAAD,EAAY;AACjB,QAAMC,SAASD,OAAOE,SAAtB;AACAD,WAAOE,qBAAP,GAA+BtC,iBAAiBC,IAAjB,CAA/B;AACAmC,WAAOG,gBAAP,GAA0BtB,YAAYhB,IAAZ,EAAkBiB,YAAlB,CAA1B;AACAkB,WAAOI,qBAAP,GAA+BX,iBAAiB5B,IAAjB,CAA/B;AACAmC,WAAOL,oBAAP,GAA8BA,oBAA9B;AACAK,WAAOJ,qBAAP,GAA+BA,qBAA/B;AACD,GAPD;AAQD,CATD;;kBAWeE,W","file":"withDnDList.js","sourcesContent":["\r\nconst _crDragStartList = (DRAG) => {\r\n  return function({ groupCaption, caption}, ev){\r\n    this.dragStartWithDnDStyle(ev, [DRAG.GROUP, DRAG.LIST])\r\n    ev.dataTransfer.effectAllowed=\"move\"\r\n    ev.dataTransfer.dropEffect=\"move\"\r\n    const _data = {\r\n      dragId : `${groupCaption};${caption}`,\r\n      xType : DRAG.LIST\r\n    };\r\n    ev.dataTransfer.setData(\"text\", JSON.stringify(_data))\r\n };\r\n};\r\n\r\nconst _crDropList = (DRAG, WatchActions) => {\r\n  return function({ groupCaption, caption }, ev){\r\n   this.dropWithDnDStyle(ev)\r\n   //ev.currentTarget.style.borderLeft = \"\";\r\n\r\n   const data = JSON.parse(ev.dataTransfer.getData(\"text\"))\r\n      ,  { xType, dragId } = data\r\n      ,  dropId =  `${groupCaption};${caption};`;\r\n\r\n   if (xType === DRAG.LIST) {\r\n     if (dragId !== dropId) {\r\n       ev.preventDefault()\r\n       WatchActions.dragDropList({\r\n         dragId : dragId,\r\n         dropId : dropId\r\n       })\r\n     } else {\r\n       return undefined;\r\n     }\r\n   } else if (xType === DRAG.ITEM) {\r\n     ev.preventDefault()\r\n     WatchActions.dragDropItem({\r\n       dragId : dragId,\r\n       dropId : dropId\r\n     })\r\n   }\r\n  };\r\n};\r\n\r\nconst _crDragEnterList = (DRAG) => {\r\n  return function(ev){\r\n    ev.preventDefault()\r\n    this.dragEnterWithDnDStyle(ev, DRAG.LIST)\r\n  };\r\n};\r\n\r\nconst _handlerDragOverList = function(ev){\r\n   ev.preventDefault()\r\n};\r\n\r\nconst _handlerDragLeaveList = function(ev){\r\n   ev.preventDefault()\r\n   this.dragLeaveWithDnDStyle(ev)\r\n}\r\n\r\nconst withDnDList = (DRAG, WatchActions) => {\r\n  return (target) => {\r\n    const _proto = target.prototype;\r\n    _proto._handlerDragStartList = _crDragStartList(DRAG)\r\n    _proto._handlerDropList = _crDropList(DRAG, WatchActions)\r\n    _proto._handlerDragEnterList = _crDragEnterList(DRAG)\r\n    _proto._handlerDragOverList = _handlerDragOverList\r\n    _proto._handlerDragLeaveList = _handlerDragLeaveList\r\n  };\r\n}\r\n\r\nexport default withDnDList\r\n"]}
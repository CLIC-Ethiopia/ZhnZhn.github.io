{"version":3,"sources":["../../../src/components/toolbars/ChartToolBar.jsx"],"names":["CL","SCROLL","BT_R","S","BT_IND","left","M_IND","top","BT_LEGEND","BT_FN","M_FN","BT_ADD","BT_MINI","width","M_MINI","_isFn","fn","_isNumber","n","_isHrzScrollable","node","scrollWidth","clientWidth","_scrollNodeToLeft","scroll","behavior","scrollLeft","INDICATOR_TAB_TYPES","_isIndicatorTab","isWithoutIndicator","series","Array","isArray","indexOf","type","_crModalMenuStyle","ChartToolbar","state","isShowInd","isShowFn","isShowMini","_hShowInd","setState","_hCloseInd","_hShowFn","fnStyle","_nodeToolbar","_hCloseFn","_hShowMini","miniStyle","_hCloseMini","_hClickR","_refToolbar","render","props","style","config","chartId","onMiniChart","getChart","onAddMfi","onRemoveMfi","onClickLegend","onClick2H","onAddToWatch","onCopy","onPasteTo","onMinMax","onZoom","onClickInfo","zhConfig","info","zhMiniConfigs","isWithoutAdd","legend","_arrModalMenu","_btTabIndicator","push","_btLegend","_btAdd","_btInfo","_btTabMini","length","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n//import PropTypes from \"prop-types\";\r\n\r\nimport ButtonTab from '../zhn/ButtonTab'\r\n\r\nimport ModalMenuIndicator from './ModalMenuIndicator'\r\nimport ModalMenuFn from './ModalMenuFn'\r\nimport ModalMenuMini from './ModalMenuMini'\r\n\r\nconst CL = {\r\n  SCROLL: \"with-scroll-x\",\r\n  BT_R: \"with-scroll-x__bt-r\"\r\n};\r\n\r\nconst S = {\r\n  BT_IND: {\r\n    left: 8\r\n  },\r\n  M_IND: {\r\n    top: 60,\r\n    left: 5\r\n  },\r\n  BT_LEGEND: {\r\n    left: 115\r\n  },\r\n  BT_FN: {\r\n    left: 190\r\n  },\r\n  M_FN: {\r\n    top: 60,\r\n    left: 150\r\n  },\r\n  BT_ADD: {\r\n    left: 250\r\n  },\r\n  BT_MINI: {\r\n    left: 350,\r\n    width: 68\r\n  },\r\n  M_MINI: {\r\n    top: 60,\r\n    left: 290\r\n  },  \r\n  BT_R: {\r\n    left: 440,\r\n    width: 36\r\n  }\r\n};\r\n\r\nconst _isFn = fn => typeof fn === 'function';\r\nconst _isNumber = n => typeof n === 'number';\r\n\r\nconst _isHrzScrollable = node  => node\r\n  && node.scrollWidth > node.clientWidth;\r\n\r\nconst _scrollNodeToLeft = (node, left) => {\r\n  if ( _isHrzScrollable(node) ) {\r\n   if (_isFn(node.scroll)) {\r\n     node.scroll({ left, behavior: 'smooth'})\r\n   } else {\r\n     node.scrollLeft = left\r\n   }\r\n  }\r\n};\r\n\r\nconst INDICATOR_TAB_TYPES = [ 'area', 'spline', 'line' ];\r\nconst _isIndicatorTab = ({ series }, isWithoutIndicator) => !isWithoutIndicator\r\n  && Array.isArray(series)\r\n  && series[0]\r\n  && INDICATOR_TAB_TYPES.indexOf(series[0].type) !== -1;\r\n\r\n\r\nconst _crModalMenuStyle = (node, left) => {\r\n  if (node && _isNumber(node.scrollLeft)) {\r\n    return { left: left - node.scrollLeft };\r\n  }\r\n  return void 0;\r\n};\r\n\r\nclass ChartToolbar extends Component {\r\n  /*\r\n  static propTypes = {\r\n    style: PropTypes.object,\r\n    config: PropTypes.object\r\n  }\r\n  */\r\n  state = {\r\n    isShowInd: false,\r\n    isShowFn: false,\r\n    isShowMini: false\r\n  }\r\n\r\n  _hShowInd = () => {\r\n    this.setState({ isShowInd: true })\r\n  }\r\n  _hCloseInd = () => {\r\n    this.setState({ isShowInd: false })\r\n  }\r\n\r\n  _hShowFn = () => {\r\n    this.setState({\r\n      isShowFn: true,\r\n      fnStyle: _crModalMenuStyle(this._nodeToolbar, S.BT_FN.left)\r\n    })\r\n  }\r\n  _hCloseFn = () => {\r\n    this.setState({ isShowFn: false })\r\n  }\r\n\r\n  _hShowMini = () => {\r\n    this.setState({\r\n      isShowMini: true,\r\n      miniStyle: _crModalMenuStyle(this._nodeToolbar, S.M_MINI.left)\r\n    })\r\n  }\r\n  _hCloseMini = () => {\r\n    this.setState({ isShowMini: false })\r\n  }\r\n\r\n  _hClickR = () => {\r\n    _scrollNodeToLeft(this._nodeToolbar, 0)\r\n  }\r\n\r\n  /*\r\n  shouldComponentUpdate(){\r\n    return false;\r\n  }\r\n  */\r\n  _refToolbar = node => this._nodeToolbar = node\r\n\r\n  render(){\r\n    const {\r\n            style, config={},\r\n            chartId,\r\n            onMiniChart,\r\n            getChart,\r\n            onAddMfi, onRemoveMfi,\r\n            onClickLegend,\r\n            onClick2H,\r\n            onAddToWatch,\r\n            onCopy,\r\n            onPasteTo,\r\n            onMinMax,\r\n            onZoom,\r\n            onClickInfo\r\n          } = this.props\r\n        , { zhConfig={}, info, zhMiniConfigs } = config\r\n        , { isWithoutIndicator, isWithoutAdd, legend } = zhConfig\r\n        , { isShowInd,\r\n            isShowFn, fnStyle,\r\n            isShowMini, miniStyle\r\n          } = this.state\r\n        , _arrModalMenu = [];\r\n\r\n    let _btTabIndicator = null;\r\n    if (_isIndicatorTab(config, isWithoutIndicator)) {\r\n      _btTabIndicator = (<ButtonTab\r\n        style= {S.BT_IND}\r\n        caption=\"Indicator\"\r\n        isMenu={true}\r\n        onClick={this._hShowInd}\r\n      />)\r\n      _arrModalMenu.push(<ModalMenuIndicator\r\n        key=\"menu_ind\"\r\n        isShow={isShowInd}\r\n        style={S.M_IND}\r\n        chartId={chartId}\r\n        config={config}\r\n        getChart={getChart}\r\n        onAddMfi={onAddMfi}\r\n        onRemoveMfi={onRemoveMfi}\r\n        onClose={this._hCloseInd}\r\n      />)\r\n    }\r\n\r\n    const _btLegend = legend ? (\r\n      <ButtonTab\r\n        style={S.BT_LEGEND}\r\n        caption=\"Legend\"\r\n        onClick={onClickLegend}\r\n      />\r\n    ) : null;\r\n\r\n    const _btAdd = !isWithoutAdd ? (\r\n      <ButtonTab\r\n        style={S.BT_ADD}\r\n        caption=\"Add\"\r\n        isUpdatable={false}\r\n        onClick={onAddToWatch}\r\n      />\r\n    ) : null;\r\n\r\n    const _btInfo = info ? (\r\n      <ButtonTab\r\n        caption=\"Info\"\r\n        onClick={onClickInfo}\r\n      />\r\n    ) : null;\r\n\r\n    let _btTabMini = null;\r\n    if (zhMiniConfigs && zhMiniConfigs.length) {\r\n      _btTabMini = (<ButtonTab\r\n         style= {S.BT_MINI}\r\n         caption=\"Mini\"\r\n         isMenu={true}\r\n         onClick={this._hShowMini}\r\n      />)\r\n      _arrModalMenu.push(<ModalMenuMini\r\n        key=\"menu_mini\"\r\n        isShow={isShowMini}\r\n        style={{...S.M_MINI, ...miniStyle}}\r\n        configs={zhMiniConfigs}\r\n        onClickItem={onMiniChart}\r\n        onClose={this._hCloseMini}\r\n      />)\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <ModalMenuFn\r\n          isShow={isShowFn}\r\n          style={{...S.M_FN, ...fnStyle}}\r\n          config={config}\r\n          getChart={getChart}\r\n          onX2H={onClick2H}\r\n          onMinMax={onMinMax}\r\n          onZoom={onZoom}\r\n          onCopy={onCopy}\r\n          onPasteTo={onPasteTo}\r\n          onClose={this._hCloseFn}\r\n        />\r\n        {_arrModalMenu}\r\n        <div\r\n           ref={this._refToolbar}\r\n           className={CL.SCROLL}\r\n           style={style}\r\n        >\r\n           {_btTabIndicator}\r\n           {_btLegend}\r\n           <ButtonTab\r\n             style={S.BT_FN}\r\n             caption=\"Fn\"\r\n             isMenu={true}\r\n             onClick={this._hShowFn}\r\n           />\r\n           {_btAdd}\r\n           {_btInfo}\r\n           {_btTabMini}\r\n           {_btTabMini && <ButtonTab\r\n              className={CL.BT_R}\r\n              style={S.BT_R}\r\n              caption=\">\"\r\n              onClick={this._hClickR}\r\n            />\r\n           }\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChartToolbar\r\n"],"file":"ChartToolBar.js"}
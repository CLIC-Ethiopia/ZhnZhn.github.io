{"version":3,"sources":["../../../src/components/dialogs/DialogEurostat.jsx"],"names":["DialogEurostat","props","_handleSelectOne","one","_handleSelectTwo","two","_handleLoad","_handleWithValidationLoad","_createValidationMessages","_createLoadOption","oneCaption","twoCaption","msg","push","msgOnNotSelected","isValid","length","_handleClose","_handleWithValidationClose","onClose","toolbarButtons","caption","onClick","_clickInfoWithToolbar","bind","state","validationMessages","nextProps","nextState","isShow","onShow","oneURI","oneJsonProp","twoURI","twoJsonProp","_commandButtons","propTypes","bool","string","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;IAIMA,c;;;AAiBJ,0BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAAA,UAsBlBC,gBAtBkB,GAsBC,UAACC,GAAD,EAAS;AAC1B,YAAKA,GAAL,GAAWA,GAAX;AACD,KAxBiB;;AAAA,UAyBlBC,gBAzBkB,GAyBC,UAACC,GAAD,EAAS;AAC1B,YAAKA,GAAL,GAAWA,GAAX;AACD,KA3BiB;;AAAA,UA6BlBC,WA7BkB,GA6BJ,YAAM;AAClB,YAAKC,yBAAL,CACE,MAAKC,yBAAL,EADF,EAEE,MAAKC,iBAFP;AAID,KAlCiB;;AAAA,UAmClBD,yBAnCkB,GAmCU,YAAM;AAAA,wBACI,MAAKP,KADT;AAAA,UACvBS,UADuB,eACvBA,UADuB;AAAA,UACXC,UADW,eACXA,UADW;;AAE/B,UAAIC,MAAM,EAAV;;AAEA,UAAI,CAAC,MAAKT,GAAV,EAAe;AAAES,YAAIC,IAAJ,CAAS,MAAKZ,KAAL,CAAWa,gBAAX,CAA4BJ,UAA5B,CAAT;AAAoD;AACrE,UAAI,CAAC,MAAKL,GAAV,EAAe;AAAEO,YAAIC,IAAJ,CAAS,MAAKZ,KAAL,CAAWa,gBAAX,CAA4BH,UAA5B,CAAT;AAAoD;;AAErEC,UAAIG,OAAJ,GAAeH,IAAII,MAAJ,KAAe,CAAhB,GAAqB,IAArB,GAA4B,KAA1C;AACA,aAAOJ,GAAP;AACF,KA5CiB;;AAAA,UA6ClBH,iBA7CkB,GA6CE,YAAM;AACxB,aAAO,wBACL,MAAKR,KADA,EAEL,EAAEE,KAAM,MAAKA,GAAb,EAAkBE,KAAM,MAAKA,GAA7B,EAFK,CAAP;AAID,KAlDiB;;AAAA,UAoDlBY,YApDkB,GAoDH,YAAM;AACnB,YAAKC,0BAAL,CAAgC,MAAKV,yBAArC;AACA,YAAKP,KAAL,CAAWkB,OAAX;AACD,KAvDiB;;AAEhB,UAAKhB,GAAL,GAAW,IAAX;AACA,UAAKE,GAAL,GAAW,IAAX;AACA,UAAKe,cAAL,GAAsB,CACpB,EAAEC,SAAS,GAAX,EAAgBC,SAAS,MAAKC,qBAAL,CAA2BC,IAA3B,OAAzB,EADoB,CAAtB;;AAIA,UAAKC,KAAL,GAAa;AACXC,0BAAoB;AADT,KAAb;AARgB;AAWjB;;;;0CAEqBC,S,EAAWC,S,EAAU;AACzC,UAAI,KAAK3B,KAAL,KAAe0B,SAAnB,EAA6B;AAC1B,YAAI,KAAK1B,KAAL,CAAW4B,MAAX,KAAsBF,UAAUE,MAApC,EAA2C;AACxC,iBAAO,KAAP;AACF;AACH;AACD,aAAO,IAAP;AACD;;;6BAqCO;AAAA,mBAKI,KAAK5B,KALT;AAAA,UAECoB,OAFD,UAECA,OAFD;AAAA,UAEUQ,MAFV,UAEUA,MAFV;AAAA,UAEkBC,MAFlB,UAEkBA,MAFlB;AAAA,UAGCpB,UAHD,UAGCA,UAHD;AAAA,UAGaqB,MAHb,UAGaA,MAHb;AAAA,UAGqBC,WAHrB,UAGqBA,WAHrB;AAAA,UAICrB,UAJD,UAICA,UAJD;AAAA,UAIasB,MAJb,UAIaA,MAJb;AAAA,UAIqBC,WAJrB,UAIqBA,WAJrB;AAAA,UAMER,kBANF,GAMyB,KAAKD,KAN9B,CAMEC,kBANF;AAAA,UAOAS,eAPA,GAOkB,CACrB;AACG,cAAK,OADR;AAEG,iBAAQ,MAFX;AAGG,iBAAS,KAAK7B;AAHjB,QADqB,CAPlB;;;AAeN,aACI;AAAA;AAAA;AACK,mBAASe,OADd;AAEK,kBAAQQ,MAFb;AAGK,0BAAgBM,eAHrB;AAIK,uBAAaL,MAJlB;AAKK,mBAAS,KAAKb;AALnB;AAOK;AACE,mBAAS,KAAKG;AADhB,UAPL;AAWK;AACE,kBAAQS,MADV;AAEE,eAAKE,MAFP;AAGE,oBAAUC,WAHZ;AAIE,mBAAStB,UAJX;AAKE,uBAAa,OALf;AAME,oBAAU,KAAKR;AANjB,UAXL;AAoBK;AACE,kBAAQ2B,MADV;AAEE,eAAKI,MAFP;AAGE,oBAAUC,WAHZ;AAIE,mBAASvB,UAJX;AAKE,uBAAa,OALf;AAME,oBAAU,KAAKP;AANjB,UApBL;AA6BK;AACI,8BAAoBsB;AADxB;AA7BL,OADJ;AAmCD;;;;;wCA5HG1B,c,CACGoC,S,GAAY;AACjBP,UAAQ,iBAAUQ,IADD;AAEjBhB,WAAS,iBAAUiB,MAFF;;AAIjB5B,cAAY,iBAAU4B,MAJL;AAKjBP,UAAQ,iBAAUO,MALD;AAMjBN,eAAa,iBAAUM,MANN;;AAQjB3B,cAAY,iBAAU2B,MARL;AASjBL,UAAQ,iBAAUK,MATD;AAUjBJ,eAAa,iBAAUI,MAVN;;AAYjBxB,oBAAkB,iBAAUyB,IAZX;AAajBT,UAAQ,iBAAUS;AAbD,C;kBA8HNvC,c","file":"DialogEurostat.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\r\n\r\nimport createLoadOptions from '../../flux/creaters/eurostat'\r\n\r\nimport DraggableDialog from '../zhn-moleculs/DraggableDialog';\r\nimport ToolbarButtonCircle from './ToolbarButtonCircle';\r\nimport SelectWithLoad from './SelectWithLoad';\r\nimport ActionButton from '../zhn/ActionButton';\r\n\r\nimport ValidationMessages from '../zhn/ValidationMessages';\r\n\r\nimport withToolbar from './decorators/withToolbar';\r\nimport withValidationLoad from './decorators/withValidationLoad';\r\n\r\n@withToolbar\r\n@withValidationLoad\r\nclass DialogEurostat extends Component {\r\n  static propTypes = {\r\n    isShow: PropTypes.bool,\r\n    caption: PropTypes.string,\r\n\r\n    oneCaption: PropTypes.string,\r\n    oneURI: PropTypes.string,\r\n    oneJsonProp: PropTypes.string,\r\n\r\n    twoCaption: PropTypes.string,\r\n    twoURI: PropTypes.string,\r\n    twoJsonProp: PropTypes.string,\r\n\r\n    msgOnNotSelected: PropTypes.func,\r\n    onShow: PropTypes.func\r\n  }\r\n\r\n  constructor(props){\r\n    super();\r\n    this.one = null;\r\n    this.two = null;\r\n    this.toolbarButtons = [\r\n      { caption: 'I', onClick: this._clickInfoWithToolbar.bind(this) }\r\n    ];\r\n\r\n    this.state = {\r\n      validationMessages: []\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _handleSelectOne = (one) => {\r\n    this.one = one;\r\n  }\r\n  _handleSelectTwo = (two) => {\r\n    this.two = two;\r\n  }\r\n\r\n  _handleLoad = () => {\r\n    this._handleWithValidationLoad(\r\n      this._createValidationMessages(),\r\n      this._createLoadOption\r\n    );\r\n  }\r\n  _createValidationMessages = () => {\r\n     const { oneCaption, twoCaption } = this.props;\r\n     let msg = [];\r\n\r\n     if (!this.one) { msg.push(this.props.msgOnNotSelected(oneCaption)); }\r\n     if (!this.two) { msg.push(this.props.msgOnNotSelected(twoCaption)); }\r\n\r\n     msg.isValid = (msg.length === 0) ? true : false;\r\n     return msg;\r\n  }\r\n  _createLoadOption = () => {\r\n    return createLoadOptions(\r\n      this.props,\r\n      { one : this.one, two : this.two }\r\n    )\r\n  }\r\n\r\n  _handleClose = () => {\r\n    this._handleWithValidationClose(this._createValidationMessages);\r\n    this.props.onClose();\r\n  }\r\n\r\n  render(){\r\n    const {\r\n           caption, isShow, onShow,\r\n           oneCaption, oneURI, oneJsonProp,\r\n           twoCaption, twoURI, twoJsonProp\r\n          } = this.props\r\n        , { validationMessages } = this.state\r\n        , _commandButtons = [\r\n       <ActionButton          \r\n          type=\"TypeC\"\r\n          caption=\"Load\"\r\n          onClick={this._handleLoad}\r\n       />\r\n    ];\r\n\r\n    return(\r\n        <DraggableDialog\r\n             caption={caption}\r\n             isShow={isShow}\r\n             commandButtons={_commandButtons}\r\n             onShowChart={onShow}\r\n             onClose={this._handleClose}\r\n         >\r\n             <ToolbarButtonCircle\r\n               buttons={this.toolbarButtons}\r\n             />\r\n\r\n             <SelectWithLoad\r\n               isShow={isShow}\r\n               uri={oneURI}\r\n               jsonProp={oneJsonProp}\r\n               caption={oneCaption}\r\n               optionNames={'Items'}\r\n               onSelect={this._handleSelectOne}\r\n             />\r\n\r\n             <SelectWithLoad\r\n               isShow={isShow}\r\n               uri={twoURI}\r\n               jsonProp={twoJsonProp}\r\n               caption={twoCaption}\r\n               optionNames={'Items'}\r\n               onSelect={this._handleSelectTwo}\r\n             />\r\n\r\n             <ValidationMessages\r\n                 validationMessages={validationMessages}\r\n             />\r\n        </DraggableDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogEurostat\r\n"]}
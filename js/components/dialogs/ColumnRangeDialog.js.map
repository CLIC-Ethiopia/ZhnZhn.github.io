{"version":3,"sources":["../../../src/components/dialogs/ColumnRangeDialog.jsx"],"names":["S","TEXT","paddingTop","paddingLeft","fontWeight","ROW","INLINE","display","CAPTION_1","width","CAPTION_2","INPUT","INIT","POIN_WIDTH","R1","R2","SERIA_OPTION","name","type","borderWidth","pointWidth","_getNames","s","n1","n2","fromIndex","toIndex","_setRadius","value","seria","_","options","marker","radius","update","_fHeValue","propName","min","max","v","parseInt","_crSeriaOptions","ColumnRangeDialog","props","_hAdd","_fromIndex","_toIndex","data","onClose","chart","_series","series","_s1","_s2","_d","fn","columnRange","_heWidth","_refW","current","getValue","_heRadius1","_refR1","_heRadius2","_refR2","_r1","_r2","zhAddSeriaToYAxis","color","_color","yIndex","_pointWidth","zhEnableDataLables","_heColor","_commandButtons","bind","React","createRef","shouldComponentUpdate","nextProps","nextState","isShow","render","_s","c1","c2","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport fn from '../../charts/seriaFns'\r\n\r\nimport ModalDialog from '../zhn-moleculs/ModalDialog';\r\nimport D from './DialogCell'\r\n\r\nconst S = {\r\n  TEXT: {\r\n    paddingTop: 16,\r\n    paddingLeft: 16,\r\n    fontWeight: 600\r\n  },\r\n  ROW: {\r\n    paddingLeft: 8,\r\n  },\r\n  INLINE: {\r\n    display: 'inline-block'\r\n  },\r\n  CAPTION_1: {\r\n    width: 60\r\n  },\r\n  CAPTION_2: {\r\n    width: 100\r\n  },\r\n  INPUT: {\r\n    width: 40\r\n  }\r\n};\r\n\r\n\r\nconst INIT = {\r\n  POIN_WIDTH: 1,\r\n  R1: 4,\r\n  R2: 0\r\n};\r\n\r\nconst SERIA_OPTION = {\r\n  name: 'Range',\r\n  type: 'columnrange',\r\n  borderWidth: 0,\r\n  pointWidth: INIT.POIN_WIDTH\r\n};\r\n\r\nconst _getNames = s => {\r\n  const n1 = s[0].name, n2 = s[1].name;\r\n  return n1 <= n2\r\n    ? { n1, n2, fromIndex: 0, toIndex: 1 }\r\n    : { n1: n2, n2: n1, fromIndex: 1, toIndex: 0 };\r\n};\r\n\r\nconst _setRadius = (value, seria) => {\r\n  const _ = seria.options;\r\n  _.marker.radius = value\r\n  seria.update(_, false)\r\n}\r\n\r\nconst _fHeValue = (propName, min, max) => function(v) {\r\n  const _ = parseInt(v, 10);\r\n  if ( _>min && _<max) {\r\n    this[propName] = v\r\n  }\r\n}\r\n\r\nconst _crSeriaOptions = (pointWidth) => ({\r\n  ...SERIA_OPTION,\r\n  ...{ pointWidth }\r\n});\r\n\r\nclass ColumnRangeDialog extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this._commandButtons = [\r\n      <D.Button.Flat\r\n         key=\"yes\"\r\n         caption=\"Yes, Connect\"\r\n         //accessKey=\"y\"\r\n         isPrimary={true}\r\n         onClick={this._hAdd}\r\n      />\r\n    ]\r\n    this._heWidth = _fHeValue('_pointWidth', -1, 7).bind(this)\r\n    this._heRadius1 = _fHeValue('_r1', -1, 9).bind(this)\r\n    this._heRadius2 = _fHeValue('_r2', -1, 9).bind(this)\r\n    this._r1 = INIT.R1\r\n    this._r2 = INIT.R1\r\n    this._pointWidth = INIT.POIN_WIDTH\r\n\r\n    this._refW = React.createRef()\r\n    this._refR1 = React.createRef()\r\n    this._refR2 = React.createRef()\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (nextProps !== this.props\r\n        && nextProps.isShow === this.props.isShow) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _hAdd = () => {\r\n    const { _fromIndex, _toIndex, props } = this\r\n     const { data, onClose } = props\r\n     , { chart } = data\r\n     , _series = chart.series\r\n     , _s1 = _series[_fromIndex]\r\n     , _s2 = _series[_toIndex]\r\n     , _d = fn.columnRange(_s1.data, _s2.data);\r\n\r\n     this._heWidth(this._refW.current.getValue())\r\n     this._heRadius1(this._refR1.current.getValue())\r\n     this._heRadius2(this._refR2.current.getValue())\r\n\r\n     _setRadius(this._r1, _s1)\r\n     _setRadius(this._r2, _s2)\r\n\r\n     chart.zhAddSeriaToYAxis({\r\n       data: _d,\r\n       color: this._color,\r\n       yIndex: 0,\r\n     }, _crSeriaOptions(this._pointWidth))\r\n\r\n     chart.zhEnableDataLables()\r\n     onClose()\r\n  }\r\n\r\n  _heColor = (color) => {\r\n    this._color = color\r\n  }\r\n\r\n  render(){\r\n    const { isShow,\r\n      data,\r\n      onClose\r\n    } = this.props\r\n    , { chart } = data\r\n    , _s = chart.series\r\n    , { n1, n2, fromIndex, toIndex } = _getNames(_s)\r\n    , c1 = _s[fromIndex].color\r\n    , c2 = _s[toIndex].color;\r\n\r\n    this._fromIndex = fromIndex\r\n    this._toIndex = toIndex\r\n    this._color = c1\r\n    return(\r\n      <ModalDialog\r\n        caption=\"Add ColumnRange\"\r\n        isShow={isShow}\r\n        commandButtons={this._commandButtons}\r\n        onClose={onClose}\r\n      >\r\n        <div style={S.TEXT}>\r\n          Connect dots series by column range?\r\n        </div>\r\n        <div style={S.ROW}>\r\n          <D.RowInputColor\r\n            styleRoot={S.INLINE}\r\n            styleCaption={S.CAPTION_1}\r\n            initValue={c1}\r\n            onEnter={this._heColor}\r\n            maxLength={7}\r\n          />\r\n          <D.RowInputText\r\n             ref={this._refW}\r\n             styleRoot={S.INLINE}\r\n             styleCaption={S.CAPTION_1}\r\n             styleInput={S.INPUT}\r\n             caption=\"Width\"\r\n             initValue={INIT.POIN_WIDTH}\r\n             maxLength={2}\r\n             type=\"number\"\r\n             min={0}\r\n             max={6}\r\n             step={1}\r\n          />\r\n        </div>\r\n        <div style={S.ROW}>\r\n          <D.RowInputText\r\n             ref={this._refR1}\r\n             styleRoot={S.INLINE}\r\n             styleCaption={{ ...S.CAPTION_2, ...{ color: c1 }}}\r\n             styleInput={S.INPUT}\r\n             caption={`R ${n1}`}\r\n             initValue={INIT.R1}\r\n             type=\"number\"\r\n             maxLength={2}\r\n          />\r\n          <D.RowInputText\r\n             ref={this._refR2}\r\n             styleRoot={S.INLINE}\r\n             styleCaption={{ ...S.CAPTION_2, ...{ color: c2 }}}\r\n             styleInput={S.INPUT}\r\n             caption={`R ${n2}`}\r\n             initValue={INIT.R2}\r\n             type=\"number\"\r\n             maxLength={2}\r\n          />\r\n       </div>\r\n      </ModalDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ColumnRangeDialog\r\n"],"file":"ColumnRangeDialog.js"}
{"version":3,"sources":["../../../src/components/dialogs/DialogEurostat2.jsx"],"names":["DATE_PLACEHOLDER","MAP_FREQUENCY_DF","AREA","MAP","categoryTypes","chartTypeOptions","caption","value","compType","EUROSTAT_MAP","isCategoryType","chartType","DialogEurostat2","props","_handleSelectOne","one","_updateForDate","date","two","mapFrequency","mapDateDf","config","frequency","createEurostatSelect","dateDefault","options","setState","isShowDate","dateOptions","_handleSelectTwo","_handleSelectChartType","_handleSelectDate","_handleLoad","_handleWithValidationLoad","_createValidationMessages","_createLoadOption","oneCaption","twoCaption","msg","push","msgOnNotSelected","isValid","length","state","_handleClose","_handleWithValidationClose","onClose","toolbarButtons","onClick","_clickInfoWithToolbar","bind","validationMessages","nextProps","nextState","isShow","onShow","oneURI","oneJsonProp","twoURI","twoJsonProp","_commandButtons","propTypes","bool","string","oneOf","number","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;AAEA;;AACA;;;;AACA;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;AAEA,IAAOA,mBAAmB,yBAA1B;AAAA,IACOC,mBAAmB,GAD1B;AAAA,IAEOC,OAAO,MAFd;AAAA,IAGOC,MAAM,KAHb;AAAA,IAIOC,gBAAgB,CAAE,KAAF,EAAS,QAAT,EAAmB,KAAnB,CAJvB;;AAMA,IAAMC,mBAAmB,CACrB,EAAEC,SAAU,gBAAZ,EAA8BC,OAAOL,IAArC,EADqB,EAErB,EAAEI,SAAU,qBAAZ,EAAoCC,OAAOJ,GAA3C,EAAgDK,UAAW,mBAAaC,YAAxE,EAFqB,EAGrB,EAAEH,SAAU,wBAAZ,EAAsCC,OAAO,QAA7C,EAHqB,EAIrB,EAAED,SAAU,qBAAZ,EAAmCC,OAAO,KAA1C,EAJqB,CAAzB;;AAOA,IAAMG,iBAAiB,SAAjBA,cAAiB,CAACC,SAAD,EAAe;AACpC,MAAI,CAACA,SAAL,EAAe;AACb,WAAO,KAAP;AACD;AACD,SAAO,oBAAWA,UAAUJ,KAArB,EAA4BH,aAA5B,CAAP;AACD,CALD;;IAUMQ,e;;;AAqBJ,2BAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAAA,UA4BlBC,gBA5BkB,GA4BC,UAACC,GAAD,EAAS;AAC1B,YAAKA,GAAL,GAAWA,GAAX;AACD,KA9BiB;;AAAA,UAgClBC,cAhCkB,GAgCD,YAAM;AACrB,YAAKC,IAAL,GAAY,IAAZ;AACM,sBAAa,MAAKC,GAAN,GACN,MAAKL,KAAL,CAAWM,YAAZ,GACK,MAAKN,KAAL,CAAWM,YADhB,GAEM,MAAKD,GAAL,CAASC,YAAV,GACK,MAAKD,GAAL,CAASC,YADd,GAEKlB,gBALH,GAMP,IANL;AAAA,UAOGmB,SAPH,GAOiB,MAAKP,KAPtB,CAOGO,SAPH;AAAA,UAQCC,MARD,GAQWC,SAAD,GACL,oBAAUC,oBAAV,CAA+BD,SAA/B,EAA0CF,SAA1C,CADK,GAEL,EAAEI,aAAcxB,gBAAhB,EAAmCyB,SAAU,EAA7C,EAVL;;;AAYN,YAAKC,QAAL,CAAc;AACXC,oBAAa,IADF;AAEXH,qBAAcH,OAAOG,WAFV;AAGXI,qBAAcP,OAAOI;AAHV,OAAd;AAKD,KAnDiB;;AAAA,UAqDlBI,gBArDkB,GAqDC,UAACX,GAAD,EAAS;AAC1B,YAAKA,GAAL,GAAWA,GAAX;AACA,UAAGR,eAAe,MAAKC,SAApB,CAAH,EAAkC;AAChC,cAAKK,cAAL;AACD;AACF,KA1DiB;;AAAA,UA4DlBc,sBA5DkB,GA4DO,UAACnB,SAAD,EAAe;AACtC,YAAKA,SAAL,GAAiBA,SAAjB;AACA,UAAGD,eAAe,MAAKC,SAApB,CAAH,EAAkC;AAChC,cAAKK,cAAL;AACD,OAFD,MAEO;AACL,cAAKU,QAAL,CAAc,EAAEC,YAAa,KAAf,EAAd;AACD;AACF,KAnEiB;;AAAA,UAqElBI,iBArEkB,GAqEE,UAACd,IAAD,EAAU;AAC5B,YAAKA,IAAL,GAAYA,IAAZ;AACD,KAvEiB;;AAAA,UAyElBe,WAzEkB,GAyEJ,YAAM;AAClB,YAAKC,yBAAL,CACE,MAAKC,yBAAL,EADF,EAEE,MAAKC,iBAFP;AAID,KA9EiB;;AAAA,UA+ElBD,yBA/EkB,GA+EU,YAAM;AAAA,wBACI,MAAKrB,KADT;AAAA,UACvBuB,UADuB,eACvBA,UADuB;AAAA,UACXC,UADW,eACXA,UADW;;AAE/B,UAAIC,MAAM,EAAV;;AAEA,UAAG,CAAC5B,eAAe,MAAKC,SAApB,CAAJ,EAAmC;AAChC,YAAI,CAAC,MAAKI,GAAV,EAAe;AAAEuB,cAAIC,IAAJ,CAAS,MAAK1B,KAAL,CAAW2B,gBAAX,CAA4BJ,UAA5B,CAAT;AAAoD;AACvE;AACD,UAAI,CAAC,MAAKlB,GAAV,EAAe;AAAEoB,YAAIC,IAAJ,CAAS,MAAK1B,KAAL,CAAW2B,gBAAX,CAA4BH,UAA5B,CAAT;AAAoD;;AAErEC,UAAIG,OAAJ,GAAeH,IAAII,MAAJ,KAAe,CAAhB,GAAqB,IAArB,GAA4B,KAA1C;AACA,aAAOJ,GAAP;AACF,KA1FiB;;AAAA,UA2FlBH,iBA3FkB,GA2FE,YAAM;AAAA,UAChBpB,GADgB,SAChBA,GADgB;AAAA,UACXG,GADW,SACXA,GADW;AAAA,UACNP,SADM,SACNA,SADM;AAAA,UACKM,IADL,SACKA,IADL;AAAA,UAEhBO,WAFgB,GAEA,MAAKmB,KAFL,CAEhBnB,WAFgB;;AAGxB,aAAO,wBACL,MAAKX,KADA,EAEL,EAAEE,QAAF,EAAOG,QAAP,EAAYP,oBAAZ,EAAuBM,UAAvB,EAA6BO,wBAA7B,EAFK,CAAP;AAID,KAlGiB;;AAAA,UAoGlBoB,YApGkB,GAoGH,YAAM;AACnB,YAAKC,0BAAL,CAAgC,MAAKX,yBAArC;AACA,YAAKrB,KAAL,CAAWiC,OAAX;AACD,KAvGiB;;AAEhB,UAAK/B,GAAL,GAAW,IAAX;AACA,UAAKG,GAAL,GAAW,IAAX;AACA,UAAKD,IAAL,GAAY,IAAZ;AACA,UAAKN,SAAL,GAAiB,IAAjB;;AAEA,UAAKoC,cAAL,GAAsB,CACpB,EAAEzC,SAAS,GAAX,EAAgB0C,SAAS,MAAKC,qBAAL,CAA2BC,IAA3B,OAAzB,EADoB,CAAtB;;AAIA,UAAKP,KAAL,GAAa;AACXhB,kBAAa,KADF;AAEXH,mBAAcxB,gBAFH;AAGX4B,mBAAc,EAHH;AAIXuB,0BAAoB;AAJT,KAAb;AAXgB;AAiBjB;;;;0CAEqBC,S,EAAWC,S,EAAU;AACzC,UAAI,KAAKxC,KAAL,KAAeuC,SAAnB,EAA6B;AAC1B,YAAI,KAAKvC,KAAL,CAAWyC,MAAX,KAAsBF,UAAUE,MAApC,EAA2C;AACxC,iBAAO,KAAP;AACF;AACH;AACD,aAAO,IAAP;AACD;;;6BA+EO;AAAA,mBAKI,KAAKzC,KALT;AAAA,UAECP,OAFD,UAECA,OAFD;AAAA,UAEUgD,MAFV,UAEUA,MAFV;AAAA,UAEkBC,MAFlB,UAEkBA,MAFlB;AAAA,UAGCnB,UAHD,UAGCA,UAHD;AAAA,UAGaoB,MAHb,UAGaA,MAHb;AAAA,UAGqBC,WAHrB,UAGqBA,WAHrB;AAAA,UAICpB,UAJD,UAICA,UAJD;AAAA,UAIaqB,MAJb,UAIaA,MAJb;AAAA,UAIqBC,WAJrB,UAIqBA,WAJrB;AAAA,mBAM+D,KAAKhB,KANpE;AAAA,UAMEhB,UANF,UAMEA,UANF;AAAA,UAMcH,WANd,UAMcA,WANd;AAAA,UAM2BI,WAN3B,UAM2BA,WAN3B;AAAA,UAMwCuB,kBANxC,UAMwCA,kBANxC;AAAA,UAOAS,eAPA,GAOkB,CACrB;AACG,cAAK,OADR;AAEG,iBAAQ,MAFX;AAGG,iBAAS,KAAK5B;AAHjB,QADqB,CAPlB;;;AAeN,aACI;AAAA;AAAA;AACK,mBAAS1B,OADd;AAEK,kBAAQgD,MAFb;AAGK,0BAAgBM,eAHrB;AAIK,uBAAaL,MAJlB;AAKK,mBAAS,KAAKX;AALnB;AAOK;AACE,mBAAS,KAAKG;AADhB,UAPL;AAUK;AACE,kBAAQO,MADV;AAEE,eAAKE,MAFP;AAGE,oBAAUC,WAHZ;AAIE,mBAASrB,UAJX;AAKE,uBAAa,OALf;AAME,oBAAU,KAAKtB;AANjB,UAVL;AAkBK;AACE,kBAAQwC,MADV;AAEE,eAAKI,MAFP;AAGE,oBAAUC,WAHZ;AAIE,mBAAStB,UAJX;AAKE,uBAAa,OALf;AAME,oBAAU,KAAKR;AANjB,UAlBL;AA0BK;AACE,mBAAS,YADX;AAEE,uBAAa,eAFf;AAGE,mBAASxB,gBAHX;AAIE,oBAAU,KAAKyB;AAJjB,UA1BL;AAgCK;AAAA;AAAA,YAAU,QAAQH,UAAlB;AACE;AACG,qBAAS,UADZ;AAEG,yBAAaH,WAFhB;AAGG,qBAASI,WAHZ;AAIG,sBAAU,KAAKG;AAJlB;AADF,SAhCL;AAwCK;AACI,8BAAoBoB;AADxB;AAxCL,OADJ;AA8CD;;;;;wCA3LGvC,e,CAEGiD,S,GAAY;AACjBP,UAAQ,iBAAUQ,IADD;AAEjBxD,WAAS,iBAAUyD,MAFF;;AAIjB3B,cAAY,iBAAU2B,MAJL;AAKjBP,UAAQ,iBAAUO,MALD;AAMjBN,eAAa,iBAAUM,MANN;;AAQjB1B,cAAY,iBAAU0B,MARL;AASjBL,UAAQ,iBAAUK,MATD;AAUjBJ,eAAa,iBAAUI,MAVN;;AAYjB5C,gBAAc,iBAAU6C,KAAV,CAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,CAZG;AAajB5C,aAAW,iBAAU6C,MAbJ;;AAejBzB,oBAAkB,iBAAU0B,IAfX;AAgBjBX,UAAQ,iBAAUW;AAhBD,C;kBA4LNtD,e","file":"DialogEurostat2.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\r\n\r\nimport createLoadOptions from '../../flux/creaters/eurostat2'\r\n\r\nimport { CompItemType } from '../../constants/Type';\r\nimport DateUtils from '../../utils/DateUtils';\r\nimport { isStrInArr } from '../../utils/is';\r\n\r\nimport DraggableDialog from '../zhn-moleculs/DraggableDialog';\r\n\r\nimport ToolbarButtonCircle from './ToolbarButtonCircle';\r\nimport SelectWithLoad from './SelectWithLoad';\r\nimport ActionButton from '../zhn/ActionButton';\r\nimport ShowHide from '../zhn/ShowHide';\r\nimport RowInputSelect from './RowInputSelect';\r\n\r\nimport ValidationMessages from '../zhn/ValidationMessages';\r\n\r\nimport withToolbar from './decorators/withToolbar';\r\nimport withValidationLoad from './decorators/withValidationLoad';\r\n\r\nconst  DATE_PLACEHOLDER = 'Before Select Indicator'\r\n     , MAP_FREQUENCY_DF = 'M'\r\n     , AREA = 'AREA'\r\n     , MAP = 'MAP'\r\n     , categoryTypes = [ 'MAP', 'COLUMN', 'BAR'];\r\n\r\nconst chartTypeOptions = [\r\n    { caption : 'Default : Area', value: AREA },\r\n    { caption : 'Map : All Countries' , value: MAP, compType : CompItemType.EUROSTAT_MAP },\r\n    { caption : 'Column : All Countries', value: 'COLUMN' },\r\n    { caption : 'Bar : All Countries', value: 'BAR' }\r\n]\r\n\r\nconst isCategoryType = (chartType) => {\r\n  if (!chartType){\r\n    return false;\r\n  }\r\n  return isStrInArr(chartType.value)(categoryTypes);\r\n}\r\n\r\n\r\n@withToolbar\r\n@withValidationLoad\r\nclass DialogEurostat2 extends Component {\r\n\r\n  static propTypes = {\r\n    isShow: PropTypes.bool,\r\n    caption: PropTypes.string,\r\n\r\n    oneCaption: PropTypes.string,\r\n    oneURI: PropTypes.string,\r\n    oneJsonProp: PropTypes.string,\r\n\r\n    twoCaption: PropTypes.string,\r\n    twoURI: PropTypes.string,\r\n    twoJsonProp: PropTypes.string,\r\n\r\n    mapFrequency: PropTypes.oneOf(['M', 'Q', 'Y']),\r\n    mapDateDf: PropTypes.number,\r\n\r\n    msgOnNotSelected: PropTypes.func,\r\n    onShow: PropTypes.func\r\n  }\r\n\r\n  constructor(props){\r\n    super();\r\n    this.one = null;\r\n    this.two = null;\r\n    this.date = null;\r\n    this.chartType = null;\r\n\r\n    this.toolbarButtons = [\r\n      { caption: 'I', onClick: this._clickInfoWithToolbar.bind(this) }\r\n    ];\r\n\r\n    this.state = {\r\n      isShowDate : false,\r\n      dateDefault : DATE_PLACEHOLDER,\r\n      dateOptions : [],\r\n      validationMessages: []\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if (this.props !== nextProps){\r\n       if (this.props.isShow === nextProps.isShow){\r\n          return false;\r\n       }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _handleSelectOne = (one) => {\r\n    this.one = one;\r\n  }\r\n\r\n  _updateForDate = () => {\r\n    this.date = null;\r\n    const frequency = (this.two)\r\n             ? (this.props.mapFrequency)\r\n                  ? this.props.mapFrequency\r\n                  : (this.two.mapFrequency)\r\n                       ? this.two.mapFrequency\r\n                       : MAP_FREQUENCY_DF\r\n             : null\r\n         , { mapDateDf } = this.props\r\n         , config = (frequency)\r\n             ? DateUtils.createEurostatSelect(frequency, mapDateDf)\r\n             : { dateDefault : DATE_PLACEHOLDER , options : [] };\r\n\r\n    this.setState({\r\n       isShowDate : true,\r\n       dateDefault : config.dateDefault,\r\n       dateOptions : config.options\r\n    });\r\n  }\r\n\r\n  _handleSelectTwo = (two) => {\r\n    this.two = two;\r\n    if(isCategoryType(this.chartType)){\r\n      this._updateForDate();\r\n    }\r\n  }\r\n\r\n  _handleSelectChartType = (chartType) => {\r\n    this.chartType = chartType;\r\n    if(isCategoryType(this.chartType)){\r\n      this._updateForDate();\r\n    } else {\r\n      this.setState({ isShowDate : false });\r\n    }\r\n  }\r\n\r\n  _handleSelectDate = (date) => {\r\n    this.date = date;\r\n  }\r\n\r\n  _handleLoad = () => {\r\n    this._handleWithValidationLoad(\r\n      this._createValidationMessages(),\r\n      this._createLoadOption\r\n    );\r\n  }\r\n  _createValidationMessages = () => {\r\n     const { oneCaption, twoCaption } = this.props;\r\n     let msg = [];\r\n\r\n     if(!isCategoryType(this.chartType)){\r\n        if (!this.one) { msg.push(this.props.msgOnNotSelected(oneCaption)); }\r\n     }\r\n     if (!this.two) { msg.push(this.props.msgOnNotSelected(twoCaption)); }\r\n\r\n     msg.isValid = (msg.length === 0) ? true : false;\r\n     return msg;\r\n  }\r\n  _createLoadOption = () => {\r\n    const { one, two, chartType, date } = this\r\n        , { dateDefault } = this.state;\r\n    return createLoadOptions(\r\n      this.props,\r\n      { one, two, chartType, date, dateDefault }\r\n    );\r\n  }\r\n\r\n  _handleClose = () => {\r\n    this._handleWithValidationClose(this._createValidationMessages);\r\n    this.props.onClose();\r\n  }\r\n\r\n  render(){\r\n    const {\r\n           caption, isShow, onShow,\r\n           oneCaption, oneURI, oneJsonProp,\r\n           twoCaption, twoURI, twoJsonProp\r\n          } = this.props\r\n        , { isShowDate, dateDefault, dateOptions, validationMessages } = this.state\r\n        , _commandButtons = [\r\n       <ActionButton          \r\n          type=\"TypeC\"\r\n          caption=\"Load\"\r\n          onClick={this._handleLoad}\r\n       />\r\n    ];\r\n\r\n    return(\r\n        <DraggableDialog\r\n             caption={caption}\r\n             isShow={isShow}\r\n             commandButtons={_commandButtons}\r\n             onShowChart={onShow}\r\n             onClose={this._handleClose}\r\n         >\r\n             <ToolbarButtonCircle\r\n               buttons={this.toolbarButtons}\r\n             />\r\n             <SelectWithLoad\r\n               isShow={isShow}\r\n               uri={oneURI}\r\n               jsonProp={oneJsonProp}\r\n               caption={oneCaption}\r\n               optionNames={'Items'}\r\n               onSelect={this._handleSelectOne}\r\n             />\r\n             <SelectWithLoad\r\n               isShow={isShow}\r\n               uri={twoURI}\r\n               jsonProp={twoJsonProp}\r\n               caption={twoCaption}\r\n               optionNames={'Items'}\r\n               onSelect={this._handleSelectTwo}\r\n             />\r\n             <RowInputSelect\r\n               caption={'Chart Type'}\r\n               placeholder={'Default: Area'}\r\n               options={chartTypeOptions}\r\n               onSelect={this._handleSelectChartType}\r\n             />\r\n             <ShowHide isShow={isShowDate}>\r\n               <RowInputSelect\r\n                  caption={'For Date'}\r\n                  placeholder={dateDefault}\r\n                  options={dateOptions}\r\n                  onSelect={this._handleSelectDate}\r\n               />\r\n             </ShowHide>\r\n             <ValidationMessages\r\n                 validationMessages={validationMessages}\r\n             />\r\n        </DraggableDialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogEurostat2\r\n"]}
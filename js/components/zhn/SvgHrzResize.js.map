{"version":3,"sources":["../../../src/components/zhn/SvgHrzResize.jsx"],"names":["CL","S","ROOT_DIV","display","LEFT_DIV","marginLeft","_isFn","fn","SvgHrzResize","props","_increaseStepValue","countStep","step","maxDelta","delta","minDelta","_resizeLeft","currentWidth","initWidth","domNode","style","width","_resizeRight","_updateDelta","w","parseInt","isNaN","_startResize","fnResize","evt","id","_stopResize","setInterval","isOnResizeAfter","clearInterval","isResizeAfter","onResizeAfter","_hStartResizeLeft","bind","_hStartResizeRight","_hStopResize","state","componentDidMount","comp","minWidth","maxWidth","ReactDOM","findDOMNode","render","btStyle","_btStyle","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst CL = \"svg-resize not-selected\";\r\n\r\nconst S = {\r\n  ROOT_DIV: {\r\n    display: 'inline-block'    \r\n  },\r\n  LEFT_DIV: {\r\n    marginLeft: 10\r\n  }\r\n};\r\n\r\nconst _isFn = fn => typeof fn === 'function';\r\n\r\nclass SvgHrzResize extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.id = null;\r\n    this.domNode = null;\r\n    this.delta = 0;\r\n    this.step = 1;\r\n    this.countStep = 0;\r\n    this.isResizeAfter = _isFn(props.onResizeAfter)\r\n\r\n    this._hStartResizeLeft = this._startResize.bind(null, this._resizeLeft)\r\n    this._hStartResizeRight = this._startResize.bind(null, this._resizeRight)\r\n    this._hStopResize = this._stopResize.bind(null, true)\r\n\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidMount(){\r\n     const { comp, initWidth, minWidth, maxWidth } = this.props;\r\n     this.domNode = ReactDOM.findDOMNode(comp);\r\n     //this.initWidth = this.domNode.getBoundingClientRect().width;\r\n     this.initWidth = initWidth;\r\n     this.currentWidth = this.initWidth;\r\n     this.minDelta = minWidth - this.initWidth;\r\n     this.maxDelta = maxWidth - this.initWidth;\r\n  }\r\n\r\n  _increaseStepValue = () => {\r\n    this.countStep +=1;\r\n    if ( this.countStep > 30){\r\n      this.step = 3;\r\n    } else if ( this.countStep > 15){\r\n      this.step = 2;\r\n    }\r\n    if ( (this.maxDelta - this.delta) < 20 ||\r\n         (this.delta - this.minDelta) < 20    ){\r\n      this.step = 1;\r\n    }\r\n  }\r\n\r\n  _resizeLeft = () => {\r\n    if (this.delta > this.minDelta){\r\n      this.delta -= this.step;\r\n      this.currentWidth = this.initWidth + this.delta;\r\n      this.domNode.style.width = this.currentWidth + 'px';\r\n      this._increaseStepValue();\r\n    }\r\n  }\r\n  _resizeRight = () => {\r\n    if (this.delta < this.maxDelta){\r\n      this.delta += this.step;\r\n      this.currentWidth = this.initWidth + this.delta;\r\n      this.domNode.style.width = this.currentWidth + 'px';\r\n      this._increaseStepValue();\r\n    }\r\n  }\r\n\r\n  _updateDelta = () => {\r\n    const w = parseInt(this.domNode.style.width);\r\n    if (!isNaN(w)) {\r\n      this.delta = w - this.initWidth\r\n    }\r\n  }\r\n  _startResize = (fnResize, evt) => {\r\n    //evt.preventDefault()\r\n    this._updateDelta()\r\n    if (this.id !== null){\r\n      this._stopResize(false);\r\n    }\r\n    this.id = setInterval(fnResize, 5);\r\n  }\r\n  _stopResize = (isOnResizeAfter) => {\r\n    clearInterval(this.id);\r\n    this.id = null;\r\n    this.step = 1;\r\n    this.countStep = 0;\r\n\r\n    if (isOnResizeAfter && this.isResizeAfter){\r\n      this.props.onResizeAfter(this.currentWidth);\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const { btStyle } = this.props\r\n    , _btStyle = {...S.LEFT_DIV, ...btStyle };\r\n    return (\r\n      <div style={S.ROOT_DIV}>\r\n        <button\r\n           className={CL}\r\n           style={_btStyle}\r\n           title=\"Resize container to left\"\r\n           onMouseDown={this._hStartResizeLeft}\r\n           onMouseUp={this._hStopResize}\r\n           onTouchStart={this._hStartResizeLeft}\r\n           onTouchEnd={this._hStopResize}\r\n        >\r\n           <svg viewBox=\"0 0 12 12\" width=\"100%\" height=\"100%\"\r\n               preserveAspectRatio=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n                <path\r\n                   d=\"M 1,6 L 11,6\"\r\n                   strokeWidth=\"2\"\r\n                   strokeLinecap=\"round\"\r\n                />\r\n               <path\r\n                   d=\"M 6,2 L 1,6 6,10\"\r\n                   strokeWidth=\"2\"\r\n                   strokeLinecap=\"round\"\r\n                   fill=\"none\"\r\n               />\r\n          </svg>\r\n      </button>\r\n      <button\r\n         className={CL}\r\n         style={_btStyle}\r\n         title=\"Resize container to right\"\r\n         onMouseDown={this._hStartResizeRight}\r\n         onMouseUp={this._hStopResize}\r\n         onTouchStart={this._hStartResizeRight}\r\n         onTouchEnd={this._hStopResize}\r\n      >\r\n        <svg viewBox=\"0 0 12 12\" width=\"100%\" height=\"100%\"\r\n             preserveAspectRatio=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n               d=\"M 1,6 L 11,6\"\r\n               strokeWidth=\"2\"\r\n               strokeLinecap=\"round\"\r\n            />\r\n            <path\r\n               d=\"M 6,2 L 11,6 6,10\"\r\n               strokeWidth=\"2\"\r\n               strokeLinecap=\"round\"\r\n               fill=\"none\"\r\n             />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n   );\r\n  }\r\n}\r\n\r\n\r\nexport default SvgHrzResize\r\n"],"file":"SvgHrzResize.js"}
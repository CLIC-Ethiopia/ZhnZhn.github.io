{"version":3,"sources":["../../../src/components/zhn/InputSlider.jsx"],"names":["S","ROOT","userSelect","cursor","height","width","position","marginTop","marginBottom","ROOT_LINE","top","left","LINE_BEFORE","transition","backgroundColor","marginRight","LINE_AFTER","right","marginLeft","LINE_HOVERED","ROOT_CIRCLE","boxSizing","pointerEvents","zIndex","margin","backgroundClip","border","borderRadius","transform","overflow","outline","CIRCLE_DRAGGED","CIRCLE_INNER","CIRCLE_INNER_EL","EMBER","_fnToPercent","value","min","max","_percent","isNaN","_fnWidthCalc","percent","_fnLeftPercent","InputSlider","props","_handleMouseEnter","setState","hovered","_handleMouseLeave","_handleMouseDown","event","preventDefault","document","addEventListener","_handleDragMouseMove","_handleDragMouseUp","dragged","_onDragUpdate","removeEventListener","dragRunning","requestAnimationFrame","clientX","_calcTrackOffset","_setValueFromPosition","trackComp","getBoundingClientRect","positionMax","step","onChange","Math","round","parseFloat","toFixed","state","_lineAfterStyle","_circleStyle","_emberStyle","_circleInnerEl","_widthBeforeStyle","_widthAfterStyle","_leftStyle","comp","defaultProps","propTypes","number","func"],"mappings":"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","file":"InputSlider.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\r\n\r\n/*\r\n Mostly from\r\n https://github.com/callemall/material-ui/blob/master/src/Slider/Slider.js\r\n*/\r\n\r\nconst S = {\r\n  ROOT : {\r\n    userSelect : 'none',\r\n    cursor: 'default',\r\n    height: '18px',\r\n    width: '100%',\r\n    position: 'relative',\r\n    marginTop: '8px',\r\n    marginBottom: '8px'\r\n  },\r\n  ROOT_LINE : {\r\n    position: 'absolute',\r\n    top: '8px',\r\n    left: '0px',\r\n    width: '100%',\r\n    height: '2px'\r\n  },\r\n  LINE_BEFORE : {\r\n    position: 'absolute',\r\n    height: '100%',\r\n    transition: 'margin 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms',\r\n    left: '0px',\r\n    backgroundColor: 'rgb(0, 188, 212)',\r\n    marginRight: '6px',\r\n    width: 'calc(15%)'\r\n  },\r\n  LINE_AFTER : {\r\n    position: 'absolute',\r\n    height: '100%',\r\n    transition: 'margin 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms',\r\n    right: '0px',\r\n    backgroundColor: 'rgb(189, 189, 189)',\r\n    marginLeft: '6px',\r\n    width: 'calc(85%)'\r\n  },\r\n  LINE_HOVERED : {\r\n    backgroundColor: 'rgb(158, 158, 158)',\r\n  },\r\n  ROOT_CIRCLE : {\r\n    boxSizing: 'borderBox',\r\n    position: 'absolute',\r\n    cursor: 'pointer',\r\n    pointerEvents: 'inherit',\r\n    top: '0px',\r\n    left: '15%',\r\n    zIndex: '1',\r\n    margin: '1px 0px 0px',\r\n    width: '12px',\r\n    height: '12px',\r\n    backgroundColor: 'rgb(0, 188, 212)',\r\n    backgroundClip: 'padding-box',\r\n    border: '0px solid transparent',\r\n    borderRadius: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    overflow: 'visible',\r\n    outline: 'none',\r\n    transition: 'background 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms'\r\n  },\r\n  CIRCLE_DRAGGED : {\r\n    width: '20px',\r\n    height: '20px '\r\n  },\r\n  CIRCLE_INNER : {\r\n    position: 'absolute',\r\n    overflow: 'visible',\r\n    height: '12px',\r\n    width: '12px',\r\n    top: '0px',\r\n    left: '0px'\r\n  },\r\n  CIRCLE_INNER_EL : {\r\n    position: 'absolute',\r\n    height: '36px',\r\n    width: '300%',\r\n    borderRadius: '50%',\r\n    //opacity: '0.16',\r\n    backgroundColor: 'rgba(0, 188, 212, 0.16)',\r\n    top: '-12px',\r\n    left: '-12px',\r\n    transform: 'scale(1)'\r\n  },\r\n  EMBER : {\r\n    top: '-12px' ,\r\n    left: '-12px',\r\n    height: '44px',\r\n    width: '220%',\r\n    border: '1px solid #4caf50'\r\n  }\r\n}\r\n\r\nconst _fnToPercent = (value, min, max) => {\r\n  let _percent = (value - min ) / (max - min)\r\n  return isNaN(_percent) ? 0 : _percent*100;\r\n}\r\nconst _fnWidthCalc = (percent) => {\r\n  return { width: `calc(${percent}%)`};\r\n}\r\nconst _fnLeftPercent = (percent) => {\r\n  return { left: `${percent}%`};\r\n}\r\n\r\nclass InputSlider extends Component {\r\n\r\n  static propTypes = {\r\n    step : PropTypes.number,\r\n    min : PropTypes.number,\r\n    max : PropTypes.number,\r\n    onChange : PropTypes.func\r\n  }\r\n\r\n  static defaultProps = {\r\n    min : 0,\r\n    max : 20,\r\n    step : 1\r\n  }\r\n\r\n  constructor(props){\r\n    super()\r\n    this.state = {\r\n      hovered : false,\r\n      dragged : false,\r\n      value : 4\r\n    }\r\n  }\r\n\r\n\r\n  _handleMouseEnter = () => {\r\n    this.setState({ hovered: true })\r\n  }\r\n  _handleMouseLeave = () => {\r\n    this.setState({ hovered: false })\r\n  }\r\n  _handleMouseDown = (event) => {\r\n    // Cancel text selection\r\n    event.preventDefault()\r\n    document.addEventListener('mousemove', this._handleDragMouseMove)\r\n    document.addEventListener('mouseup', this._handleDragMouseUp)\r\n    this.setState({\r\n      dragged : true\r\n    })\r\n  }\r\n\r\n  _handleDragMouseMove = (event) => {\r\n    this._onDragUpdate(event)\r\n  }\r\n  _handleDragMouseUp = () => {\r\n     document.removeEventListener('mousemove', this._handleDragMouseMove)\r\n     document.removeEventListener('mouseup', this._handleDragMouseUp)\r\n     this.setState({\r\n       dragged : false\r\n     })\r\n  }\r\n\r\n  _onDragUpdate = (event) => {\r\n    if (this.dragRunning) {\r\n      return;\r\n    }\r\n    this.dragRunning = true;\r\n    requestAnimationFrame(() => {\r\n      this.dragRunning = false;\r\n      const position = event.clientX - this._calcTrackOffset()\r\n      this._setValueFromPosition(event, position)\r\n    })\r\n  }\r\n\r\n  _calcTrackOffset = () => {\r\n    return this.trackComp.getBoundingClientRect()['left'];\r\n  }\r\n\r\n  _setValueFromPosition = (event, position) => {\r\n    const positionMax = this.trackComp['clientWidth']\r\n    if (position < 0) {\r\n      position = 0;\r\n    } else if (position > positionMax) {\r\n      position = positionMax\r\n    }\r\n\r\n    const { step, min, max, onChange } = this.props\r\n    let value\r\n    value = position/positionMax * (max - min)\r\n    value = Math.round(value / step) * step + min\r\n    value = parseFloat(value.toFixed(5))\r\n\r\n    if (value > max) {\r\n      value = max\r\n    } else if (value < min ) {\r\n      value = min\r\n    }\r\n\r\n    if (this.state.value !== value) {\r\n      this.setState({\r\n        value: value\r\n      })\r\n\r\n      if (typeof onChange === 'function'){\r\n        onChange(event, value)\r\n      }\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const { step, min , max } = this.props\r\n    , { hovered, dragged, value } = this.state\r\n    , _lineAfterStyle = (hovered)\r\n          ? {...S.LINE_AFTER, ...S.LINE_HOVERED}\r\n          : S.LINE_AFTER\r\n    , _circleStyle = (dragged) ? S.CIRCLE_DRAGGED : null\r\n    , _emberStyle = (dragged) ? S.EMBER : null\r\n    , _circleInnerEl = (hovered || dragged)\r\n          ? ( <div style={{ ...S.CIRCLE_INNER_EL, ..._emberStyle }}></div> )\r\n          : null\r\n    , _percent = _fnToPercent(value, min, max)\r\n    , _widthBeforeStyle = _fnWidthCalc(_percent)\r\n    , _widthAfterStyle = _fnWidthCalc(100 - _percent)\r\n    , _leftStyle = _fnLeftPercent(_percent)\r\n\r\n    return (\r\n      <div style={S.ROOT}\r\n        onMouseDown={this._handleMouseDown}\r\n        onMouseEnter={this._handleMouseEnter}\r\n        onMouseLeave={this._handleMouseLeave}\r\n      >\r\n        <div\r\n           ref={comp => this.trackComp = comp}\r\n           style={S.ROOT_LINE}\r\n        >\r\n          <div style={{...S.LINE_BEFORE, ..._widthBeforeStyle }} />\r\n          <div style={{..._lineAfterStyle, ..._widthAfterStyle }} />\r\n          <div\r\n             tabIndex={0}\r\n             style={{...S.ROOT_CIRCLE, ..._circleStyle, ..._leftStyle }}\r\n          >\r\n            <div style={{ ...S.CIRCLE_INNER, ..._circleStyle}} >\r\n              {_circleInnerEl}\r\n            </div>\r\n          </div>\r\n          <input\r\n            type=\"hidden\"\r\n            step={step}\r\n            min={min}\r\n            max={max}\r\n            value={value}\r\n            required={true}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputSlider\r\n"]}
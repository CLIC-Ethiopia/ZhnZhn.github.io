{"version":3,"sources":["../../../src/components/zhn-select/InputSelect.jsx"],"names":["MAX_WITHOUT_ANIMATION","INPUT_PREFIX","NO_RESULT","_crInputItem","inputValue","propCaption","isWithInput","maxInput","_inputValue","substring","_caption","value","_crWidthStyle","width","style","indexOf","_crFooterIndex","options","initialOptions","_nFiltered","length","_nAll","S","BLOCK","display","NONE","ARROW_SHOW","borderColor","_crInitialStateFromProps","optionName","optionNames","isShowOption","isValidDomOptionsCache","isLocalMode","_crValue","str","replace","trim","InputSelect","props","_initFromProps","domOptionsCache","indexActiveOption","_setStateToInit","setState","_getActiveItemComp","_decorateActiveRowComp","comp","classList","add","CL","OPTIONS_ROW_ACTIVE","indexNode","textContent","_undecorateActiveRowComp","_comp","remove","_makeVisibleActiveRowComp","offsetTop","scrollTop","optionsComp","_filterOptions","valueFor","toLowerCase","filter","option","_crFilterOptions","token","tokenLn","valueLn","state","_options","_arr","push","_hInputChange","event","regInput","target","test","_startAfterInputAnimation","arrowCell","startAnimation","_stopAfterInputAnimation","stopAnimation","_setShowOptions","_showOptions","ms","isShowOptionAnim","setTimeout","_stepDownOption","prevComp","nextComp","_stepUpOption","bottomComp","_selectItem","item","onSelect","_value","caption","isInput","_hInputKeyDown","keyCode","preventDefault","_hToggleOptions","_hClickItem","index","_refOptionsComp","c","_refIndexNode","n","_createDomOptionsWithCache","ItemOptionComp","_propCaption","_domOptions","map","OPTIONS_ROW","bind","renderOptions","rootOptionsStyle","_styleOptions","_rootWidthStyle","OPTIONS","OPTIONS_DIV","clearInput","_refArrowCell","_crAfterInputEl","isLoading","isLoadingFailed","placeholder","onLoadOption","_placeholder","_afterInputEl","SPINNER","SPINNER_FAILED","afterInputEl","_refDomInputText","domInputText","getDerivedStateFromProps","componentDidUpdate","prevProps","prevState","render","rootStyle","ROOT","INPUT","INPUT_HR","focusInput","focus","focusNotValidInput","Component","defaultProps","ItemOptionDf"],"mappings":";;;;;;;;;;;;;AAAA;;AAGA;;AAEA;;AACA;;AACA;;AACA;;AAPA;AASA,IAAMA,qBAAqB,GAAG,GAA9B;AAEA,IAAMC,YAAY,GAAG,aAArB;AACA,IAAMC,SAAS,GAAG,UAAlB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,UAAD,QAAwD;AAAA;;AAAA,MAAzCC,WAAyC,QAAzCA,WAAyC;AAAA,MAA5BC,WAA4B,QAA5BA,WAA4B;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAC3E,MAAMC,WAAW,GAAGJ,UAAU,CAACK,SAAX,CAAqB,CAArB,EAAwBF,QAAxB,CAApB;AAAA,MACEG,QAAQ,GAAGJ,WAAW,GACdL,YADc,SACEO,WADF,GAEjB,kBAHP;;AAIA,2BACGH,WADH,IACiBK,QADjB,QAEEC,KAFF,GAEST,SAFT,QAGEE,UAHF,GAGcI,WAHd;AAKD,CAVD;;AAYA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAQC,KAAR;AAAA,SAAkBD,KAAK,GACxC,CAAC,KAAGA,KAAJ,EAAWE,OAAX,CAAmB,GAAnB,MAA4B,CAAC,CAA9B,iCACSD,KADT;AACgBD,IAAAA,KAAK,EAAEA;AADvB,qCAESC,KAFT;AAEgBD,IAAAA,KAAK,EAAEA,KAAK,GAAG;AAF/B,IADyC,GAIzC,IAJkB;AAAA,CAAtB;;AAOA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB;AAAA,MAAGC,OAAH,SAAGA,OAAH;AAAA,MAAYC,cAAZ,SAAYA,cAAZ;AAAA,SAAkC;AACvDC,IAAAA,UAAU,EAAGF,OAAO,CAAC,CAAD,CAAP,IAAeA,OAAO,CAAC,CAAD,CAAP,CAAWN,KAAX,KAAqBT,SAArC,GACNe,OAAO,CAACG,MADF,GACW,CAFgC;AAGvDC,IAAAA,KAAK,EAAEH,cAAc,GAAGA,cAAc,CAACE,MAAlB,GAA2B;AAHO,GAAlC;AAAA,CAAvB;;AAMA,IAAME,CAAC,GAAG;AACRC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE;AADJ,GADC;AAIRC,EAAAA,IAAI,EAAE;AACJD,IAAAA,OAAO,EAAE;AADL,GAJE;AAORE,EAAAA,UAAU,EAAE;AACVC,IAAAA,WAAW,EAAE;AADH;AAPJ,CAAV;;AAYA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B;AAAA,MAAGC,UAAH,SAAGA,UAAH;AAAA,MAAeC,WAAf,SAAeA,WAAf;AAAA,MAA4Bb,OAA5B,SAA4BA,OAA5B;AAAA,SAA2C;AAC1EN,IAAAA,KAAK,EAAE,EADmE;AAE1EoB,IAAAA,YAAY,EAAE,KAF4D;AAG1Eb,IAAAA,cAAc,EAAED,OAH0D;AAI1EA,IAAAA,OAAO,EAAEA,OAJiE;AAK1Ea,IAAAA,WAAW,EAAEA,WAAW,IAAID,UAAf,IAA6B,EALgC;AAM1EG,IAAAA,sBAAsB,EAAE,KANkD;AAO1EC,IAAAA,WAAW,EAAE;AAP6D,GAA3C;AAAA,CAAjC;;AAUA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,GAAG;AAAA,SAAIA,GAAG,CACxBC,OADqB,CACbnC,YADa,EACC,EADD,EAErBoC,IAFqB,EAAJ;AAAA,CAApB;;IAIMC,W;;;AACJ;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,uBAAYC,MAAZ,EAAkB;AAAA;;AAChB,kCAAMA,MAAN;;AADgB,UAMlBC,cANkB,GAMD,iBAAqB;AAAA,UAAlBnC,WAAkB,SAAlBA,WAAkB;AACpC,YAAKoC,eAAL,GAAuB,IAAvB;AACA,YAAKC,iBAAL,GAAyB,CAAzB;AACA,YAAKrC,WAAL,GAAmBA,WAAnB;AACD,KAViB;;AAAA,UAiClBsC,eAjCkB,GAiCA,UAACJ,KAAD,EAAW;AAC3B,YAAKC,cAAL,CAAoBD,KAApB;;AACA,YAAKK,QAAL,CAAchB,wBAAwB,CAACW,KAAD,CAAtC;AACD,KApCiB;;AAAA,UAsClBM,kBAtCkB,GAsCG,YAAM;AACzB,aAAO,YAAS,MAAKH,iBAAd,CAAP;AACD,KAxCiB;;AAAA,UAyClBI,sBAzCkB,GAyCO,UAACC,IAAD,EAAU;AACjC,UAAIA,IAAJ,EAAS;AACPA,QAAAA,IAAI,CAACC,SAAL,CAAeC,GAAf,CAAmBC,eAAGC,kBAAtB;AACD;;AACD,UAAI,MAAKC,SAAT,EAAoB;AAClB,cAAKA,SAAL,CAAeC,WAAf,GAA6B,MAAKX,iBAAL,GAAyB,CAAtD;AACD;AACF,KAhDiB;;AAAA,UAiDlBY,wBAjDkB,GAiDS,UAACP,IAAD,EAAU;AAClC,UAAMQ,KAAK,GAAGR,IAAI,IAAI,MAAKF,kBAAL,EAAtB;;AACA,UAAIU,KAAJ,EAAU;AACTA,QAAAA,KAAK,CAACP,SAAN,CAAgBQ,MAAhB,CAAuBN,eAAGC,kBAA1B;AACA;AACH,KAtDiB;;AAAA,UAwDlBM,yBAxDkB,GAwDU,UAAAV,IAAI,EAAI;AAClC,UAAIA,IAAJ,EAAS;AACA,YAAEW,SAAF,GAAgBX,IAAhB,CAAEW,SAAF;AAAA,YACHC,SADG,GACW,MAAKC,WADhB,CACHD,SADG;;AAEP,YAAID,SAAS,GAAGC,SAAZ,GAAwB,EAA5B,EAA+B;AAC5B,gBAAKC,WAAL,CAAiBD,SAAjB,IAA8BD,SAAS,GAAGC,SAAZ,GAAwB,EAAtD;AACF;;AACD,YAAID,SAAS,GAAGC,SAAZ,GAAwB,CAA5B,EAA8B;AAC5B,gBAAKC,WAAL,CAAiBD,SAAjB,GAA6B,CAA7B;AACD;AACF;AACF,KAnEiB;;AAAA,UAqElBE,cArEkB,GAqED,UAAC5C,OAAD,EAAUN,KAAV,EAAoB;AAClC,UAAMmD,QAAQ,GAAGnD,KAAK,CAACoD,WAAN,EAAjB;AAAA,UACErD,QAAQ,GAAG,MAAKL,WADlB;AAEA,aAAOY,OAAO,CAAC+C,MAAR,CAAe,UAAAC,MAAM;AAAA,eAAIA,MAAM,CAACvD,QAAD,CAAN,CAC5BqD,WAD4B,GAE5BhD,OAF4B,CAEpB+C,QAFoB,MAEN,CAAC,CAFC;AAAA,OAArB,CAAP;AAIF,KA5EiB;;AAAA,UA8ElBI,gBA9EkB,GA8EC,UAACC,KAAD,EAAQC,OAAR,EAAiBC,OAAjB,EAA6B;AAAA,wBACV,MAAKC,KADK;AAAA,UACtCrD,OADsC,eACtCA,OADsC;AAAA,UAC7BC,cAD6B,eAC7BA,cAD6B;AAAA,UAE5CqD,QAF4C,GAEjCH,OAAO,GAAGC,OAAV,GACPpD,OADO,GACGC,cAH8B;AAAA,UAI5CsD,IAJ4C,GAIrC,MAAKX,cAAL,CAAoBU,QAApB,EAA8BJ,KAA9B,CAJqC;;AAK9C,UAAIK,IAAI,CAACpD,MAAL,KAAgB,CAApB,EAAsB;AACpBoD,QAAAA,IAAI,CAACC,IAAL,CAAUtE,YAAY,CAACgE,KAAD,EAAQ,MAAK5B,KAAb,CAAtB;AACD;;AACD,aAAOiC,IAAP;AACD,KAvFiB;;AAAA,UAyFlBE,aAzFkB,GAyFF,UAACC,KAAD,EAAW;AAAA,wBACS,MAAKpC,KADd;AAAA,UACjBjC,WADiB,eACjBA,WADiB;AAAA,UACJsE,QADI,eACJA,QADI;AAAA,UAEvBT,KAFuB,GAEfQ,KAAK,CAACE,MAAN,CAAalE,KAFE;AAAA,UAGvByD,OAHuB,GAGbD,KAAK,CAAC/C,MAHO;AAAA,UAIrBT,KAJqB,GAIX,MAAK2D,KAJM,CAIrB3D,KAJqB;AAAA,UAKvB0D,OALuB,GAKb1D,KAAK,CAACS,MALO;;AAOzB,UAAKd,WAAW,IACR8D,OAAO,GAAC,CADX,IAEG,CAACQ,QAAQ,CAACE,IAAT,CAAcX,KAAK,CAACC,OAAO,GAAC,CAAT,CAAnB,CAFT,EAE0C;AACxC;AACD;;AAED,UAAIA,OAAO,KAAKC,OAAhB,EAAwB;AACtB,cAAKf,wBAAL;;AACA,cAAKZ,iBAAL,GAAyB,CAAzB;;AACA,cAAKE,QAAL,CAAc;AACZjC,UAAAA,KAAK,EAAEwD,KADK;AAEZpC,UAAAA,YAAY,EAAE,IAFF;AAGZC,UAAAA,sBAAsB,EAAE,KAHZ;AAIZf,UAAAA,OAAO,EAAE,MAAKiD,gBAAL,CAAsBC,KAAtB,EAA6BC,OAA7B,EAAsCC,OAAtC;AAJG,SAAd;AAMD;AACF,KAhHiB;;AAAA,UAkHlBU,yBAlHkB,GAkHU,YAAM;AAChC,UAAI,MAAKT,KAAL,CAAWrD,OAAX,CAAmBG,MAAnB,GAA0BpB,qBAA9B,EAAoD;AAClD,cAAKgF,SAAL,CAAeC,cAAf;AACD;AACF,KAtHiB;;AAAA,UAuHlBC,wBAvHkB,GAuHS,YAAM;AAC/B,YAAKF,SAAL,CAAeG,aAAf;AACD,KAzHiB;;AAAA,UA0HlBC,eA1HkB,GA0HA,YAAM;AACtB,YAAKxC,QAAL,CACE;AAAEb,QAAAA,YAAY,EAAE;AAAhB,OADF,EAEE,MAAKmD,wBAFP;AAID,KA/HiB;;AAAA,UAgIlBG,YAhIkB,GAgIH,UAACC,EAAD,EAAQ;AACrB,UAAI,MAAK/C,KAAL,CAAWgD,gBAAf,EAAiC;AAC/B,cAAKR,yBAAL;;AACAS,QAAAA,UAAU,CAAE,MAAKJ,eAAP,EAAwBE,EAAxB,CAAV;AACD,OAHD,MAGO;AACL,cAAK1C,QAAL,CAAc;AAAEb,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACD;AACF,KAvIiB;;AAAA,UAyIlB0D,eAzIkB,GAyIA,YAAM;AACtB,UAAMC,QAAQ,GAAG,MAAK7C,kBAAL,EAAjB;;AAEA,UAAI6C,QAAJ,EAAa;AACV,cAAKpC,wBAAL,CAA8BoC,QAA9B;;AAEA,cAAKhD,iBAAL,IAA0B,CAA1B;;AACA,YAAI,MAAKA,iBAAL,IAAwB,MAAK4B,KAAL,CAAWrD,OAAX,CAAmBG,MAA/C,EAAsD;AACnD,gBAAKsB,iBAAL,GAAyB,CAAzB;AACA,gBAAKkB,WAAL,CAAiBD,SAAjB,GAA6B,CAA7B;AACF;;AAED,YAAMgC,QAAQ,GAAG,MAAK9C,kBAAL,EAAjB;;AACA,cAAKC,sBAAL,CAA4B6C,QAA5B;;AAEA,YAAMjC,SAAS,GAAGiC,QAAQ,CAACjC,SAA3B;AACA,YAAMC,SAAS,GAAG,MAAKC,WAAL,CAAiBD,SAAnC;;AACA,YAAMD,SAAS,GAAGC,SAAb,GAA0B,EAA/B,EAAkC;AAC/B,gBAAKC,WAAL,CAAiBD,SAAjB,IAA+BD,SAAS,GAAGC,SAAZ,GAAwB,EAAvD;AACF;AACH;AACF,KA9JiB;;AAAA,UAgKlBiC,aAhKkB,GAgKF,YAAM;AACpB,UAAMF,QAAQ,GAAG,MAAK7C,kBAAL,EAAjB;;AACA,UAAI6C,QAAJ,EAAa;AACX,cAAKpC,wBAAL,CAA8BoC,QAA9B;;AAEA,cAAKhD,iBAAL,IAA0B,CAA1B;;AACA,YAAI,MAAKA,iBAAL,GAAyB,CAA7B,EAA+B;AAC7B,gBAAKA,iBAAL,GAAyB,MAAK4B,KAAL,CAAWrD,OAAX,CAAmBG,MAAnB,GAA4B,CAArD;;AACA,cAAMyE,UAAU,GAAG,MAAKhD,kBAAL,EAAnB;;AACA,gBAAKe,WAAL,CAAiBD,SAAjB,GAA6BkC,UAAU,CAACnC,SAAxC;AACD;;AAED,YAAMiC,QAAQ,GAAG,MAAK9C,kBAAL,EAAjB;;AACA,cAAKC,sBAAL,CAA4B6C,QAA5B;;AAEA,YAAMjC,SAAS,GAAGiC,QAAQ,CAACjC,SAA3B;AACA,YAAMC,SAAS,GAAG,MAAKC,WAAL,CAAiBD,SAAnC;;AACA,YAAMD,SAAS,GAAGC,SAAb,GAA0B,EAA/B,EAAkC;AAChC,gBAAKC,WAAL,CAAiBD,SAAjB,IAAgC,MAAMD,SAAS,GAAGC,SAAlB,CAAhC;AACD;AACF;AACF,KArLiB;;AAAA,UAuLlBmC,WAvLkB,GAuLJ,UAAAC,IAAI,EAAI;AAAA,yBACc,MAAKxD,KADnB;AAAA,UACZyD,QADY,gBACZA,QADY;AAAA,UACF1F,WADE,gBACFA,WADE;;AAEpB,UAAI,CAACyF,IAAL,EAAW;AACTC,QAAAA,QAAQ;AACT,OAFD,MAEO,IAAID,IAAI,CAACpF,KAAL,KAAeT,SAAnB,EAA8B;AACnC8F,QAAAA,QAAQ,CAACD,IAAD,CAAR;AACD,OAFM,MAEA,IAAI,CAACzF,WAAL,EAAkB;AACvB0F,QAAAA,QAAQ;AACT,OAFM,MAEA;AACL,YAAMC,MAAM,GAAGF,IAAI,CAAC3F,UAAL,CAAgBiC,IAAhB,EAAf;;AACA,YAAI,CAAC4D,MAAL,EAAa;AACXD,UAAAA,QAAQ;AACT,SAFD,MAEO;AACLA,UAAAA,QAAQ,CAAC;AACRE,YAAAA,OAAO,EAAED,MADD;AAERtF,YAAAA,KAAK,EAAEsF,MAFC;AAGRE,YAAAA,OAAO,EAAE;AAHD,WAAD,CAAR;AAKD;AACF;AACF,KA3MiB;;AAAA,UA6MlBC,cA7MkB,GA6MD,UAACzB,KAAD,EAAW;AAC1B,cAAOA,KAAK,CAAC0B,OAAb;AACE;AACA,aAAK,EAAL;AAAQ;AACL,gBAAMN,IAAI,GAAG,MAAKzB,KAAL,CAAWrD,OAAX,CAAmB,MAAKyB,iBAAxB,CAAb;;AAEA,gBAAIqD,IAAI,IAAIA,IAAI,CAAC,MAAK1F,WAAN,CAAhB,EAAmC;AACjC,oBAAKuC,QAAL,CAAc;AACZjC,gBAAAA,KAAK,EAAEuB,QAAQ,CAAC6D,IAAI,CAAC,MAAK1F,WAAN,CAAL,CADH;AAEZ0B,gBAAAA,YAAY,EAAE,KAFF;AAGZC,gBAAAA,sBAAsB,EAAE;AAHZ,eAAd;;AAKA,oBAAK8D,WAAL,CAAiBC,IAAjB;AACD;;AACJ;AAAQ;AACR;;AACA,aAAK,EAAL;AAAS,aAAK,EAAL;AAAS;AAChBpB,YAAAA,KAAK,CAAC2B,cAAN;;AACA,gBAAI,MAAKhC,KAAL,CAAWvC,YAAf,EAA4B;AAC1B,oBAAKa,QAAL,CAAc;AAAEb,gBAAAA,YAAY,EAAE;AAAhB,eAAd;AACD,aAFD,MAEO;AACL,oBAAKuB,wBAAL;;AACA,oBAAKX,eAAL,CAAqB,MAAKJ,KAA1B;;AACA,oBAAKuD,WAAL;AACD;;AACH;AAAO;;AACP,aAAK,EAAL;AAAS;AACP,cAAI,CAAC,MAAKxB,KAAL,CAAWvC,YAAhB,EAA6B;AAC3B,kBAAKsD,YAAL,CAAkB,CAAlB;AACD,WAFD,MAEO;AACLV,YAAAA,KAAK,CAAC2B,cAAN;;AACA,kBAAKb,eAAL;AACD;;AACD;;AACF,aAAK,EAAL;AAAS;AACP,cAAI,MAAKnB,KAAL,CAAWvC,YAAf,EAA4B;AAC1B4C,YAAAA,KAAK,CAAC2B,cAAN;;AACA,kBAAKV,aAAL;AACD;;AACD;;AACF;AAAS;AAvCX;AAyCD,KAvPiB;;AAAA,UAyPlBW,eAzPkB,GAyPA,YAAM;AACtB,UAAI,MAAKjC,KAAL,CAAWvC,YAAf,EAA4B;AAC1B,cAAKa,QAAL,CAAc;AAAEb,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACD,OAFD,MAEO;AACL,cAAKsD,YAAL,CAAkB,CAAlB;AACD;AACF,KA/PiB;;AAAA,UAiQlBmB,WAjQkB,GAiQJ,UAACT,IAAD,EAAOU,KAAP,EAAiB;AAC7B,YAAKnD,wBAAL;;AACA,YAAKZ,iBAAL,GAAyB+D,KAAzB;;AACA,YAAK7D,QAAL,CAAc;AACZjC,QAAAA,KAAK,EAAEuB,QAAQ,CAAC6D,IAAI,CAAC,MAAK1F,WAAN,CAAL,CADH;AAEZ0B,QAAAA,YAAY,EAAE;AAFF,OAAd;;AAIA,YAAK+D,WAAL,CAAiBC,IAAjB;AACD,KAzQiB;;AAAA,UA2QlBW,eA3QkB,GA2QA,UAAAC,CAAC;AAAA,aAAI,MAAK/C,WAAL,GAAmB+C,CAAvB;AAAA,KA3QD;;AAAA,UA4QlBC,aA5QkB,GA4QF,UAAAC,CAAC;AAAA,aAAI,MAAKzD,SAAL,GAAiByD,CAArB;AAAA,KA5QC;;AAAA,UA8QlBC,0BA9QkB,GA8QW,YAAM;AAC3B,UACJC,cADI,GAEF,MAAKxE,KAFH,CACJwE,cADI;AAAA,yBAMF,MAAKzC,KANH;AAAA,UAIJrD,OAJI,gBAIJA,OAJI;AAAA,UAKJe,sBALI,gBAKJA,sBALI;AAAA,UAOJgF,YAPI,GAOW,MAAK3G,WAPhB;;AASN,UAAI4G,WAAJ;;AACA,UAAIhG,OAAJ,EAAY;AACV,YAAI,CAACe,sBAAL,EAA4B;AACzB;AACAiF,UAAAA,WAAW,GAAGhG,OAAO,CAACiG,GAAR,CAAY,UAACnB,IAAD,EAAOU,KAAP;AAAA,gCAAiB;AACtC,cAAA,IAAI,EAAC,QADiC;AAEtC,+BAAe,MAAK/D,iBAAL,KAA2B+D,KAFJ;AAGtC,cAAA,QAAQ,EAAC,GAH6B;AAItC,cAAA,GAAG,EAAEA,KAJiC;AAKtC,cAAA,SAAS,EAAEvD,eAAGiE,WALwB;AAMtC,cAAA,GAAG,EAAE,aAAAR,CAAC;AAAA,uBAAI,YAASF,KAAT,IAAoBE,CAAxB;AAAA,eANgC;AAOtC,cAAA,OAAO,EAAE,MAAKH,WAAL,CAAiBY,IAAjB,CAAsB,IAAtB,EAA4BrB,IAA5B,EAAkCU,KAAlC;AAP6B,4BAStC,gCAAC,cAAD;AACG,cAAA,IAAI,EAAEV,IADT;AAEG,cAAA,WAAW,EAAEiB;AAFhB,cATsC,CAAjB;AAAA,WAAZ,CAAd;AAeA;;AACA,gBAAKvE,eAAL,GAAuBwE,WAAvB;AACD,SAnBF,MAmBQ;AACLA,UAAAA,WAAW,GAAG,MAAKxE,eAAnB;AACD;AACH;;AACD,aAAOwE,WAAP;AACD,KAlTiB;;AAAA,UAoTlBI,aApTkB,GAoTF,YAAM;AAAA,yBACgB,MAAK9E,KADrB;AAAA,UACZ+E,gBADY,gBACZA,gBADY;AAAA,UACMzG,KADN,gBACMA,KADN;AAAA,UAEhBkB,YAFgB,GAEC,MAAKuC,KAFN,CAEhBvC,YAFgB;AAAA,UAGlBkF,WAHkB,GAGJ,MAAKH,0BAAL,EAHI;AAAA,UAIlBS,aAJkB,GAIFxF,YAAY,GAAGT,CAAC,CAACC,KAAL,GAAaD,CAAC,CAACG,IAJzB;AAAA,UAKlB+F,eALkB,GAKA5G,aAAa,CAACC,KAAD,EAAQ0G,aAAR,CALb;AAAA,4BAMMvG,cAAc,CAAC,MAAKsD,KAAN,CANpB;AAAA,UAMhBnD,UANgB,mBAMhBA,UANgB;AAAA,UAMJE,KANI,mBAMJA,KANI;;AAQpB,0BACI;AACG,QAAA,SAAS,EAAE6B,eAAGuE,OADjB;AAEG,QAAA,KAAK,EAAED,eAFV;AAGG,2BAAiB;AAHpB,sBAKE;AACG,QAAA,GAAG,EAAE,MAAKd,eADb;AAEG,QAAA,SAAS,EAAExD,eAAGwE,WAFjB;AAGG,QAAA,KAAK,gCAAMJ,gBAAN,EAA2BE,eAA3B;AAHR,SAKGP,WALH,CALF,eAYE,gCAAC,yBAAD;AACE,QAAA,GAAG,EAAE,MAAKL,aADZ;AAEE,QAAA,iBAAiB,EAAE,MAAKlE,iBAF1B;AAGE,QAAA,IAAI,EAAErB,KAHR;AAIE,QAAA,SAAS,EAAEF,UAJb;AAKE,QAAA,QAAQ,EAAE,MAAKyE,aALjB;AAME,QAAA,UAAU,EAAE,MAAKH,eANnB;AAOE,QAAA,OAAO,EAAE,MAAKkC;AAPhB,QAZF,CADJ;AAwBD,KApViB;;AAAA,UAsVlBC,aAtVkB,GAsVF,UAAAjB,CAAC;AAAA,aAAI,MAAK3B,SAAL,GAAiB2B,CAArB;AAAA,KAtVC;;AAAA,UAwVlBkB,eAxVkB,GAwVA,YAAM;AAAA,yBAIjB,MAAKtF,KAJY;AAAA,UAEnBuF,SAFmB,gBAEnBA,SAFmB;AAAA,UAERC,eAFQ,gBAERA,eAFQ;AAAA,UAGnBC,WAHmB,gBAGnBA,WAHmB;AAAA,UAGNnG,UAHM,gBAGNA,UAHM;AAAA,UAGMoG,YAHN,gBAGMA,YAHN;AAAA,yBAKY,MAAK3D,KALjB;AAAA,UAKlBvC,YALkB,gBAKlBA,YALkB;AAAA,UAKJD,WALI,gBAKJA,WALI;;AAOtB,UAAIoG,YAAJ,EAAkBC,aAAlB;;AACA,UAAI,CAACL,SAAD,IAAc,CAACC,eAAnB,EAAmC;AAChCG,QAAAA,YAAY,GAAGF,WAAW,gBAAcnG,UAAd,QAA1B;AACAsG,QAAAA,aAAa,gBACX,gCAAC,qBAAD;AACE,UAAA,GAAG,EAAE,MAAKP,aADZ;AAEE,UAAA,UAAU,EAAE7F,YAAY,GAAGT,CAAC,CAACI,UAAL,GAAkB,KAAK,CAFjD;AAGE,UAAA,OAAO,EAAE,MAAK6E;AAHhB,UADF;AAOF,OATD,MASO,IAAIuB,SAAJ,EAAc;AACnBI,QAAAA,YAAY,gBAAcpG,WAAd,QAAZ;AACAqG,QAAAA,aAAa,gBACX;AACE,UAAA,SAAS,EAAEjF,eAAGkF,OADhB;AAEE,yBAAY;AAFd,UADF;AAMD,OARM,MAQA,IAAIL,eAAJ,EAAqB;AACzBG,QAAAA,YAAY,gBAAYpG,WAAZ,YAAZ;AACAqG,QAAAA,aAAa,gBACX,gCAAC,wBAAD;AACE,UAAA,SAAS,EAAEjF,eAAGmF,cADhB;AAEE,yBAAY,eAFd;AAGE,UAAA,OAAO,EAAEJ;AAHX,UADF;AAOF;;AACD,aAAO;AACLD,QAAAA,WAAW,EAAEE,YADR;AAELI,QAAAA,YAAY,EAAEH;AAFT,OAAP;AAID,KA/XiB;;AAAA,UAiYlBI,gBAjYkB,GAiYC,UAAA5B,CAAC;AAAA,aAAI,MAAK6B,YAAL,GAAoB7B,CAAxB;AAAA,KAjYF;;AAAA,UAmalBgB,UAnakB,GAmaL,YAAM;AACjB,YAAKrE,wBAAL;;AACA,YAAKwC,WAAL;;AACA,YAAKnD,eAAL,CAAqB,MAAKJ,KAA1B;AACD,KAvaiB;;AAEhB,UAAKC,cAAL,CAAoBD,MAApB;;AACA,UAAK+B,KAAL,GAAa1C,wBAAwB,CAACW,MAAD,CAArC;AAHgB;AAIjB;;cAQMkG,wB,GAAP,kCAAgClG,KAAhC,EAAuC+B,KAAvC,EAA6C;AAC1C;AACA,QAAI/B,KAAK,CAACtB,OAAN,KAAkBqD,KAAK,CAACpD,cAA5B,EAA4C;AAC1C,aAAOU,wBAAwB,CAACW,KAAD,CAA/B;AACD;;AACD,WAAO,IAAP;AACF,G;;;;SAEDmG,kB,GAAA,4BAAmBC,SAAnB,EAA8BC,SAA9B,EAAwC;AACtC;AACA,QAAIA,SAAS,CAAC1H,cAAV,KAA6B,KAAKoD,KAAL,CAAWpD,cAA5C,EAA4D;AAC1D,WAAKsB,cAAL,CAAoB,KAAKD,KAAzB;AACD,KAJqC,CAKrC;;;AACA,QAAI,KAAK+B,KAAL,CAAWvC,YAAf,EAA4B;AAC1B,UAAMgB,IAAI,GAAG,KAAKF,kBAAL,EAAb;;AACA,WAAKC,sBAAL,CAA4BC,IAA5B;;AACA,WAAKU,yBAAL,CAA+BV,IAA/B;AACF;AACF,G;;SAoWD8F,M,GAAA,kBAAQ;AAAA,uBACuB,KAAKtG,KAD5B;AAAA,QACEuG,SADF,gBACEA,SADF;AAAA,QACajI,KADb,gBACaA,KADb;AAAA,uBAEmC,KAAKyD,KAFxC;AAAA,QAEF3D,KAFE,gBAEFA,KAFE;AAAA,QAEKsB,WAFL,gBAEKA,WAFL;AAAA,QAEkBF,YAFlB,gBAEkBA,YAFlB;AAAA,QAGJyF,eAHI,GAGc5G,aAAa,CAACC,KAAD,EAAQiI,SAAR,CAH3B;AAAA,gCAI4B,KAAKjB,eAAL,EAJ5B;AAAA,QAIFS,YAJE,yBAIFA,YAJE;AAAA,QAIYN,WAJZ,yBAIYA,WAJZ;;AAMN,wBACE;AACE,MAAA,SAAS,EAAE9E,eAAG6F,IADhB;AAEE,MAAA,KAAK,EAAEvB;AAFT,oBAIE;AACG,MAAA,GAAG,EAAE,KAAKe,gBADb;AAEG,MAAA,SAAS,EAAErF,eAAG8F,KAFjB;AAGG,MAAA,IAAI,EAAC,MAHR;AAIG,MAAA,IAAI,EAAC,QAJR;AAKG,MAAA,YAAY,EAAC,KALhB;AAMG,MAAA,WAAW,EAAC,KANf;AAOG,MAAA,cAAc,EAAC,KAPlB;AAQG,MAAA,UAAU,EAAE,KARf;AASG,MAAA,KAAK,EAAErI,KATV;AAUG,MAAA,WAAW,EAAEqH,WAVhB;AAWG,MAAA,QAAQ,EAAE,KAAKtD,aAXlB;AAYG,MAAA,SAAS,EAAE,KAAK0B;AAZnB,MAJF,EAkBGkC,YAlBH,eAmBE;AAAI,MAAA,SAAS,EAAEpF,eAAG+F;AAAlB,MAnBF,EAoBG,CAAChH,WAAW,IAAIF,YAAhB,KAAiC,KAAKsF,aAAL,EApBpC,CADF;AAwBD,G;;SAQD6B,U,GAAA,sBAAY;AACV,SAAKV,YAAL,CAAkBW,KAAlB;AACD,G;;SACDC,kB,GAAA,8BAAoB;AAClB,SAAKZ,YAAL,CAAkBW,KAAlB;AACD,G;;;EAxduBE,gB;;AAApB/G,W,CA4BGgH,Y,GAAe;AACpBjJ,EAAAA,WAAW,EAAE,SADO;AAEpB0G,EAAAA,cAAc,EAAEwC,wBAFI;AAGpBtI,EAAAA,OAAO,EAAE,EAHW;AAIpBY,EAAAA,UAAU,EAAE,EAJQ;AAKpBC,EAAAA,WAAW,EAAE,EALO;AAMpBxB,EAAAA,WAAW,EAAE,KANO;AAOpBC,EAAAA,QAAQ,EAAE,EAPU;AAQpBqE,EAAAA,QAAQ,EAAE,gBARU;AASpB;AACAoB,EAAAA,QAAQ,EAAE,oBAAM,CAAE,CAVE;AAWpBiC,EAAAA,YAAY,EAAE,wBAAM,CAAE;AAXF,C;eAgcT3F,W","sourcesContent":["import React, { Component } from 'react';\r\n//import PropTypes from 'prop-types'\r\n\r\nimport ArrowCell from './ArrowCell';\r\n\r\nimport BtCircle from '../zhn/ButtonCircle2';\r\nimport ItemOptionDf from './ItemOptionDf'\r\nimport OptionsFooter from './OptionsFooter'\r\nimport CL from './CL'\r\n\r\nconst MAX_WITHOUT_ANIMATION = 800;\r\n\r\nconst INPUT_PREFIX = 'From input:';\r\nconst NO_RESULT = 'noresult';\r\n\r\nconst _crInputItem = (inputValue, { propCaption, isWithInput, maxInput }) => {\r\n  const _inputValue = inputValue.substring(0, maxInput)\r\n  , _caption = isWithInput\r\n       ? `${INPUT_PREFIX} ${_inputValue}`\r\n       : 'No results found';\r\n  return {\r\n    [propCaption]: _caption,\r\n    value: NO_RESULT,\r\n    inputValue: _inputValue\r\n  };\r\n};\r\n\r\nconst _crWidthStyle = (width, style) => width\r\n  ? ((''+width).indexOf('%') !== -1)\r\n      ? { ...style, width: width }\r\n      : { ...style, width: width + 'px'}\r\n  : null;\r\n\r\n\r\nconst _crFooterIndex = ({ options, initialOptions }) => ({\r\n  _nFiltered: (options[0] && (options[0].value !== NO_RESULT))\r\n      ? options.length : 0,\r\n  _nAll: initialOptions ? initialOptions.length : 0\r\n});\r\n\r\nconst S = {\r\n  BLOCK: {\r\n    display: 'block'\r\n  },\r\n  NONE: {\r\n    display: 'none'\r\n  },\r\n  ARROW_SHOW: {\r\n    borderColor: '#1b75bb transparent transparent'\r\n  }\r\n};\r\n\r\nconst _crInitialStateFromProps = ({ optionName, optionNames, options }) => ({\r\n  value: '',\r\n  isShowOption: false,\r\n  initialOptions: options,\r\n  options: options,\r\n  optionNames: optionNames || optionName || '',\r\n  isValidDomOptionsCache: false,\r\n  isLocalMode: false\r\n});\r\n\r\nconst _crValue = str => str\r\n  .replace(INPUT_PREFIX, '')\r\n  .trim();\r\n\r\nclass InputSelect extends Component {\r\n  /*\r\n  static propTypes = {\r\n     propCaption: PropTypes.string,\r\n     ItemOptionComp: PropTypes.element,\r\n     width: PropTypes.string,\r\n     isShowOptionAnim: PropTypes.bool,\r\n     options: PropTypes.arrayOf(PropTypes.shape({\r\n        caption: PropTypes.string,\r\n        value: PropTypes.oneOfType([\r\n          PropTypes.string,\r\n          PropTypes.number\r\n        ])\r\n     })),\r\n     optionName: PropTypes.string,\r\n     optionNames: PropTypes.string,\r\n     placeholder: PropTypes.string,\r\n     isWithInput: PropTypes.bool,\r\n     prefixInput: PropTypes.string\r\n\r\n     isLoading: PropTypes.bool,\r\n     isLoadingFailed: PropTypes.bool,\r\n\r\n     onSelect: PropTypes.func,\r\n     onLoadOption: PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    propCaption: 'caption',\r\n    ItemOptionComp: ItemOptionDf,\r\n    options: [],\r\n    optionName: '',\r\n    optionNames: '',\r\n    isWithInput: false,\r\n    maxInput: 10,\r\n    regInput: /[A-Za-z0-9() ]/,\r\n    //prefixInput: 'From Input:',\r\n    onSelect: () => {},\r\n    onLoadOption: () => {}\r\n  }\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this._initFromProps(props)\r\n    this.state = _crInitialStateFromProps(props)\r\n  }\r\n\r\n  _initFromProps = ({ propCaption }) => {\r\n    this.domOptionsCache = null\r\n    this.indexActiveOption = 0\r\n    this.propCaption = propCaption\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state){\r\n     //Init state for new options from props\r\n     if (props.options !== state.initialOptions) {\r\n       return _crInitialStateFromProps(props);\r\n     }\r\n     return null;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    // Init from props for new options from props\r\n    if (prevState.initialOptions !== this.state.initialOptions) {\r\n      this._initFromProps(this.props)\r\n    }\r\n     //Decorate Active Option\r\n     if (this.state.isShowOption){\r\n       const comp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(comp);\r\n       this._makeVisibleActiveRowComp(comp);\r\n    }\r\n  }\r\n\r\n  _setStateToInit = (props) => {\r\n    this._initFromProps(props)\r\n    this.setState(_crInitialStateFromProps(props))\r\n  }\r\n\r\n  _getActiveItemComp = () => {\r\n    return this[`v${this.indexActiveOption}`];\r\n  }\r\n  _decorateActiveRowComp = (comp) => {\r\n    if (comp){\r\n      comp.classList.add(CL.OPTIONS_ROW_ACTIVE);\r\n    }\r\n    if (this.indexNode) {\r\n      this.indexNode.textContent = this.indexActiveOption + 1\r\n    }\r\n  }\r\n  _undecorateActiveRowComp = (comp) => {\r\n     const _comp = comp || this._getActiveItemComp();\r\n     if (_comp){\r\n      _comp.classList.remove(CL.OPTIONS_ROW_ACTIVE);\r\n     }\r\n  }\r\n\r\n  _makeVisibleActiveRowComp = comp => {\r\n    if (comp){\r\n      const  { offsetTop } = comp\r\n      , { scrollTop } = this.optionsComp;\r\n      if (offsetTop - scrollTop > 70){\r\n         this.optionsComp.scrollTop += offsetTop - scrollTop - 70;\r\n      }\r\n      if (offsetTop - scrollTop < 0){\r\n        this.optionsComp.scrollTop = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  _filterOptions = (options, value) => {\r\n     const valueFor = value.toLowerCase()\r\n     , _caption = this.propCaption;\r\n     return options.filter(option => option[_caption]\r\n        .toLowerCase()\r\n        .indexOf(valueFor) !== -1\r\n     );\r\n  }\r\n\r\n  _crFilterOptions = (token, tokenLn, valueLn) => {\r\n    const { options, initialOptions } = this.state\r\n    , _options = tokenLn > valueLn\r\n        ? options : initialOptions\r\n    , _arr = this._filterOptions(_options, token);\r\n    if (_arr.length === 0){\r\n      _arr.push(_crInputItem(token, this.props))\r\n    }\r\n    return _arr;\r\n  }\r\n\r\n  _hInputChange = (event) => {\r\n    const { isWithInput, regInput } = this.props\r\n    , token = event.target.value\r\n    , tokenLn = token.length\r\n    , { value } = this.state\r\n    , valueLn = value.length;\r\n\r\n    if ( isWithInput\r\n         && tokenLn>0\r\n         && !regInput.test(token[tokenLn-1])) {\r\n      return;\r\n    }\r\n\r\n    if (tokenLn !== valueLn){\r\n      this._undecorateActiveRowComp()\r\n      this.indexActiveOption = 0;\r\n      this.setState({\r\n        value: token,\r\n        isShowOption: true,\r\n        isValidDomOptionsCache: false,\r\n        options: this._crFilterOptions(token, tokenLn, valueLn)\r\n      })\r\n    }\r\n  }\r\n\r\n  _startAfterInputAnimation = () => {\r\n    if (this.state.options.length>MAX_WITHOUT_ANIMATION){\r\n      this.arrowCell.startAnimation()\r\n    }\r\n  }\r\n  _stopAfterInputAnimation = () => {\r\n    this.arrowCell.stopAnimation()\r\n  }\r\n  _setShowOptions = () => {\r\n    this.setState(\r\n      { isShowOption: true },\r\n      this._stopAfterInputAnimation\r\n    )\r\n  }\r\n  _showOptions = (ms) => {\r\n    if (this.props.isShowOptionAnim) {\r\n      this._startAfterInputAnimation()\r\n      setTimeout( this._setShowOptions, ms )\r\n    } else {\r\n      this.setState({ isShowOption: true })\r\n    }\r\n  }\r\n\r\n  _stepDownOption = () => {\r\n    const prevComp = this._getActiveItemComp();\r\n\r\n    if (prevComp){\r\n       this._undecorateActiveRowComp(prevComp);\r\n\r\n       this.indexActiveOption += 1;\r\n       if (this.indexActiveOption>=this.state.options.length){\r\n          this.indexActiveOption = 0;\r\n          this.optionsComp.scrollTop = 0;\r\n       }\r\n\r\n       const nextComp = this._getActiveItemComp();\r\n       this._decorateActiveRowComp(nextComp)\r\n\r\n       const offsetTop = nextComp.offsetTop\r\n       const scrollTop = this.optionsComp.scrollTop;\r\n       if ( (offsetTop - scrollTop) > 70){\r\n          this.optionsComp.scrollTop += (offsetTop - scrollTop - 70);\r\n       }\r\n    }\r\n  }\r\n\r\n  _stepUpOption = () => {\r\n    const prevComp = this._getActiveItemComp();\r\n    if (prevComp){\r\n      this._undecorateActiveRowComp(prevComp);\r\n\r\n      this.indexActiveOption -= 1;\r\n      if (this.indexActiveOption < 0){\r\n        this.indexActiveOption = this.state.options.length - 1;\r\n        const bottomComp = this._getActiveItemComp()\r\n        this.optionsComp.scrollTop = bottomComp.offsetTop\r\n      }\r\n\r\n      const nextComp = this._getActiveItemComp();\r\n      this._decorateActiveRowComp(nextComp);\r\n\r\n      const offsetTop = nextComp.offsetTop;\r\n      const scrollTop = this.optionsComp.scrollTop;\r\n      if ( (offsetTop - scrollTop) < 70){\r\n        this.optionsComp.scrollTop -= ( 70 - (offsetTop - scrollTop) );\r\n      }\r\n    }\r\n  }\r\n\r\n  _selectItem = item => {\r\n    const { onSelect, isWithInput } = this.props;\r\n    if (!item) {\r\n      onSelect()\r\n    } else if (item.value !== NO_RESULT) {\r\n      onSelect(item)\r\n    } else if (!isWithInput) {\r\n      onSelect()\r\n    } else {\r\n      const _value = item.inputValue.trim();\r\n      if (!_value) {\r\n        onSelect()\r\n      } else {\r\n        onSelect({\r\n         caption: _value,\r\n         value: _value,\r\n         isInput: true\r\n       })\r\n      }\r\n    }\r\n  }\r\n\r\n  _hInputKeyDown = (event) => {\r\n    switch(event.keyCode){\r\n      // enter\r\n      case 13:{\r\n         const item = this.state.options[this.indexActiveOption];\r\n\r\n         if (item && item[this.propCaption]){\r\n           this.setState({\r\n             value: _crValue(item[this.propCaption]),\r\n             isShowOption: false,\r\n             isValidDomOptionsCache: true\r\n           });\r\n           this._selectItem(item)\r\n         }\r\n      break; }\r\n      //escape, delete\r\n      case 27: case 46: {\r\n        event.preventDefault()\r\n        if (this.state.isShowOption){\r\n          this.setState({ isShowOption: false });\r\n        } else {\r\n          this._undecorateActiveRowComp();\r\n          this._setStateToInit(this.props);\r\n          this._selectItem()\r\n        }\r\n      break;}\r\n      case 40: //down\r\n        if (!this.state.isShowOption){\r\n          this._showOptions(0)\r\n        } else {\r\n          event.preventDefault()\r\n          this._stepDownOption()\r\n        }\r\n        break;\r\n      case 38: //up\r\n        if (this.state.isShowOption){\r\n          event.preventDefault()\r\n          this._stepUpOption()\r\n        }\r\n        break;\r\n      default: return;\r\n    }\r\n  }\r\n\r\n  _hToggleOptions = () => {\r\n    if (this.state.isShowOption){\r\n      this.setState({ isShowOption: false })\r\n    } else {\r\n      this._showOptions(1)\r\n    }\r\n  }\r\n\r\n  _hClickItem = (item, index) => {\r\n    this._undecorateActiveRowComp()\r\n    this.indexActiveOption = index;\r\n    this.setState({\r\n      value: _crValue(item[this.propCaption]),\r\n      isShowOption: false\r\n    });\r\n    this._selectItem(item)\r\n  }\r\n\r\n  _refOptionsComp = c => this.optionsComp = c\r\n  _refIndexNode = n => this.indexNode = n\r\n\r\n  _createDomOptionsWithCache = () => {\r\n    const {\r\n      ItemOptionComp\r\n    } = this.props\r\n    , {\r\n      options,\r\n      isValidDomOptionsCache\r\n    } = this.state\r\n    , _propCaption = this.propCaption;\r\n\r\n    let _domOptions;\r\n    if (options){\r\n      if (!isValidDomOptionsCache){\r\n         /*eslint-disable jsx-a11y/click-events-have-key-events*/\r\n         _domOptions = options.map((item, index)=>( <div\r\n              role=\"option\"\r\n              aria-selected={this.indexActiveOption === index}\r\n              tabIndex=\"0\"\r\n              key={index}\r\n              className={CL.OPTIONS_ROW}\r\n              ref={c => this[`v${index}`] = c}\r\n              onClick={this._hClickItem.bind(null, item, index)}\r\n            >\r\n              <ItemOptionComp\r\n                 item={item}\r\n                 propCaption={_propCaption}\r\n              />\r\n            </div>\r\n         ));\r\n         /*eslint-enable jsx-a11y/click-events-have-key-events*/\r\n         this.domOptionsCache = _domOptions;\r\n       } else {\r\n         _domOptions = this.domOptionsCache;\r\n       }\r\n    }\r\n    return _domOptions;\r\n  }\r\n\r\n  renderOptions = () => {\r\n    const { rootOptionsStyle, width } = this.props\r\n    , { isShowOption } = this.state\r\n    , _domOptions = this._createDomOptionsWithCache()\r\n    , _styleOptions = isShowOption ? S.BLOCK : S.NONE\r\n    , _rootWidthStyle = _crWidthStyle(width, _styleOptions)\r\n    , { _nFiltered, _nAll } = _crFooterIndex(this.state);\r\n\r\n    return (\r\n        <div\r\n           className={CL.OPTIONS}\r\n           style={_rootWidthStyle}\r\n           data-scrollable={true}\r\n         >\r\n          <div\r\n             ref={this._refOptionsComp}\r\n             className={CL.OPTIONS_DIV}\r\n             style={{...rootOptionsStyle, ..._rootWidthStyle}}\r\n           >\r\n            {_domOptions}\r\n          </div>\r\n          <OptionsFooter\r\n            ref={this._refIndexNode}\r\n            indexActiveOption={this.indexActiveOption}\r\n            nAll={_nAll}\r\n            nFiltered={_nFiltered}\r\n            onStepUp={this._stepUpOption}\r\n            onStepDown={this._stepDownOption}\r\n            onClear={this.clearInput}\r\n          />\r\n        </div>\r\n    );\r\n  }\r\n\r\n  _refArrowCell = c => this.arrowCell = c\r\n\r\n  _crAfterInputEl = () => {\r\n    const {\r\n       isLoading, isLoadingFailed,\r\n       placeholder, optionName, onLoadOption\r\n     } = this.props\r\n    , { isShowOption, optionNames } = this.state;\r\n\r\n    let _placeholder, _afterInputEl;\r\n    if (!isLoading && !isLoadingFailed){\r\n       _placeholder = placeholder || `Select ${optionName}...`;\r\n       _afterInputEl = (\r\n         <ArrowCell\r\n           ref={this._refArrowCell}\r\n           arrowStyle={isShowOption ? S.ARROW_SHOW : void 0}\r\n           onClick={this._hToggleOptions}\r\n         />\r\n      );\r\n    } else if (isLoading){\r\n      _placeholder = `Loading ${optionNames}...`;\r\n      _afterInputEl = (\r\n        <span\r\n          className={CL.SPINNER}\r\n          data-loader=\"circle\"\r\n        />\r\n      );\r\n    } else if (isLoadingFailed) {\r\n       _placeholder=`Loading ${optionNames} Failed`;\r\n       _afterInputEl = (\r\n         <BtCircle\r\n           className={CL.SPINNER_FAILED}\r\n           data-loader=\"circle-failed\"\r\n           onClick={onLoadOption}\r\n         />\r\n       )\r\n    }\r\n    return {\r\n      placeholder: _placeholder,\r\n      afterInputEl: _afterInputEl\r\n    };\r\n  }\r\n\r\n  _refDomInputText = c => this.domInputText = c\r\n\r\n  render(){\r\n    const { rootStyle, width } = this.props\r\n    , { value, isLocalMode, isShowOption } = this.state\r\n    , _rootWidthStyle = _crWidthStyle(width, rootStyle)\r\n    , { afterInputEl, placeholder } = this._crAfterInputEl();\r\n\r\n    return (\r\n      <div\r\n        className={CL.ROOT}\r\n        style={_rootWidthStyle}\r\n      >\r\n        <input\r\n           ref={this._refDomInputText}\r\n           className={CL.INPUT}\r\n           type=\"text\"\r\n           name=\"select\"\r\n           autoComplete=\"off\"\r\n           autoCorrect=\"off\"\r\n           autoCapitalize=\"off\"\r\n           spellCheck={false}\r\n           value={value}\r\n           placeholder={placeholder}\r\n           onChange={this._hInputChange}\r\n           onKeyDown={this._hInputKeyDown}\r\n        />\r\n        {afterInputEl}\r\n        <hr className={CL.INPUT_HR} />\r\n        {(isLocalMode || isShowOption) && this.renderOptions()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  clearInput = () => {\r\n    this._undecorateActiveRowComp()\r\n    this._selectItem()\r\n    this._setStateToInit(this.props)\r\n  }\r\n\r\n  focusInput(){\r\n    this.domInputText.focus()\r\n  }\r\n  focusNotValidInput(){\r\n    this.domInputText.focus()\r\n  }\r\n\r\n}\r\n\r\nexport default InputSelect\r\n"],"file":"InputSelect.js"}
{"version":3,"sources":["../../src/charts/handleMouseOver.js"],"names":["C","DATE_PATTERN","DATE_EMPTY","ATTR_LABEL","zIndex","CSS_LABEL","color","fontWeight","fontSize","CL_DX","CL_DY","DX_CATEGORY","DY_CATEGORY","DX_Y_AXIS","_crDelta","chart","dX","dY","xDeltaCrossLabel","yDeltaCrossLabel","options","_crCrossParam","point","_d","x","y","date","_crCategoryCrossParam","_isCrossParam","isCategory","c","_getCrCrossParam","_crXCrossLabelX","plotX","_yAxisOffset","_crXCrossLabelY","plotTop","_crYCrossLabelX","yAxis","width","plotLeft","_crYCrossLabelY","plotY","_crCrossLabel","text","renderer","attr","css","add","handleMouserOverPoint","event","series","xCrossLabel","yCrossLabel","xLX","yLX","xLY","yLY"],"mappings":"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","sourcesContent":["import formatNumber from '../utils/formatNumber';\r\nimport { formatDate } from './dateFormat';\r\nimport calcYAxisOffset from './calcYAxisOffset';\r\n\r\nconst C = {\r\n  DATE_PATTERN : '%d-%m-%Y',\r\n  DATE_EMPTY: '01-01-1970',\r\n\r\n  ATTR_LABEL : {\r\n    zIndex : 100\r\n  },\r\n  CSS_LABEL : {\r\n    //color: '#f1d600',\r\n    color: 'black',\r\n    fontWeight: 'bold',\r\n    fontSize: '14px'\r\n  },\r\n\r\n  CL_DX: -4,\r\n  CL_DY: -1,\r\n\r\n  DX_CATEGORY: 40,\r\n  DY_CATEGORY: 32,\r\n\r\n  DX_Y_AXIS: 10\r\n};\r\n\r\nconst _crDelta = (chart, dX=0, dY=0) => {\r\n  const { xDeltaCrossLabel=0, yDeltaCrossLabel=0 } = chart.options.chart;\r\n  return {\r\n    dX: xDeltaCrossLabel - dX,\r\n    dY: yDeltaCrossLabel - dY\r\n  };\r\n};\r\n\r\nconst _crCrossParam = (point, chart) => {\r\n  const _d = formatDate(C.DATE_PATTERN, point.x);\r\n  return {\r\n    y: point.y,\r\n    date: _d !== C.DATE_EMPTY ? _d : '',\r\n    ..._crDelta(chart)\r\n  };\r\n};\r\n\r\nconst _crCategoryCrossParam = (point, chart) => ({\r\n  y: formatNumber(point.y),\r\n  date: point.x,\r\n  ..._crDelta(chart, C.DX_CATEGORY, C.DY_CATEGORY)\r\n});\r\n\r\nconst _isCrossParam = point =>\r\n  !point.isCategory || point.c;\r\n\r\nconst _getCrCrossParam = point => _isCrossParam(point)\r\n  ? _crCrossParam\r\n  : _crCategoryCrossParam;\r\n\r\nconst _crXCrossLabelX = (chart, plotX) => {\r\n  const _yAxisOffset = calcYAxisOffset(chart);\r\n  return  _yAxisOffset\r\n    ? plotX + _yAxisOffset - C.DX_Y_AXIS\r\n    : plotX\r\n};\r\n\r\nconst _crXCrossLabelY = (chart, dY) => chart.plotTop - dY;\r\n\r\nconst _crYCrossLabelX = (chart, dX) => {\r\n  return chart.yAxis[0].width + chart.plotLeft + dX + C.CL_DX;\r\n};\r\nconst _crYCrossLabelY = (chart, plotY) => {\r\n  return plotY + chart.plotTop + C.CL_DY;\r\n};\r\n\r\nconst _crCrossLabel = (chart, text, x, y) => chart\r\n .renderer\r\n .text(text, x, y)\r\n .attr(C.ATTR_LABEL)\r\n .css(C.CSS_LABEL)\r\n .add();\r\n\r\nconst handleMouserOverPoint = function(event){\r\n  const { plotX, plotY, series } = this\r\n  , chart = series.chart\r\n  , { xCrossLabel, yCrossLabel } = chart\r\n  , { y, date, dX, dY } = _getCrCrossParam(this)(this, chart)\r\n  , xLX = _crXCrossLabelX(chart, plotX)\r\n  , yLX = _crXCrossLabelY(chart, dY)\r\n  , xLY = _crYCrossLabelX(chart, dX)\r\n  , yLY = _crYCrossLabelY(chart, plotY);\r\n\r\n  if (xCrossLabel) {\r\n    xCrossLabel.attr({ x: xLX, text: date });\r\n    yCrossLabel.attr({ x: xLY, y: yLY, text: y });\r\n  } else {\r\n    chart.xCrossLabel = _crCrossLabel(chart, date, xLX, yLX)\r\n    chart.yCrossLabel = _crCrossLabel(chart, y, xLY, yLY)\r\n  }\r\n};\r\n\r\nexport default handleMouserOverPoint\r\n"],"file":"handleMouseOver.js"}
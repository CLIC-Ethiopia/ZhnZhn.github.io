{"version":3,"sources":["../../src/charts/WithAreaChartFn.js"],"names":["CHART","SCATTER_MARGIN_BOTTOM","LONG_FORM","chart","marginBottom","credits","enabled","_checkIsWithScatter","max","series","length","i","seria","visible","options","type","data","_fOptionShortForm","spacingBottom","WithAreaChartFn","arMetricOption","isShow","arCalcDeltaYAxis","delta","yAxis","forEach","_yAxis","opposite","getExtremes","_maxLen","_maxLabelLenght","maxLabelLength","_offset","Math","round"],"mappings":";;;;;AAAA,IAAMA,QAAQ;AACZC,yBAAuB,EADX;AAEZC,aAAW;AACTC,WAAO;AACLC,oBAAc;AADT,KADE;AAITC,aAAS;AACPC,eAAS;AADF;AAJA;AAFC,CAAd;;AAYA,IAAMC,sBAAsB,SAAtBA,mBAAsB,QAAS;AACnC,MAAMC,MAAML,MAAMM,MAAN,CAAaC,MAAzB;AACA,MAAIC,IAAE,CAAN;AACA,SAAOA,IAAEH,GAAT,EAAcG,GAAd,EAAmB;AACjB,QAAMC,QAAQT,MAAMM,MAAN,CAAaE,CAAb,CAAd;AACA,QAAIC,MAAMC,OAAN,IACGD,MAAME,OAAN,CAAcC,IAAd,KAAuB,SAD1B,IAEGH,MAAME,OAAN,CAAcE,IAFjB,IAGGJ,MAAME,OAAN,CAAcE,IAAd,CAAmBN,MAAnB,GAA4B,CAHnC,EAIE;AACA,aAAO,IAAP;AACD;AACF;AACD,SAAO,KAAP;AACD,CAdD;;AAgBA,IAAMO,oBAAoB,SAApBA,iBAAoB,GAAoB;AAAA,MAAnBb,YAAmB,uEAAN,CAAM;;AAC5C,SAAO;AACLD,WAAO;AACLe,qBAAe,CADV;AAELd;AAFK,KADF;AAKLC,aAAS;AACPC,eAAS;AADF;AALJ,GAAP;AASD,CAVD;;AAYA,IAAMa,kBAAkB;AAEtBC,gBAFsB,0BAEPjB,KAFO,EAEAkB,MAFA,EAEQ;AAC5B,QAAI,CAACA,MAAL,EAAa;AACX,UAAK,CAACd,oBAAoBJ,KAApB,CAAN,EAAmC;AACjC,eAAOc,mBAAP;AACD,OAFD,MAEO;AACL,eAAOA,kBAAkBjB,MAAMC,qBAAxB,CAAP;AACD;AACF,KAND,MAMO;AACL,aAAOD,MAAME,SAAb;AACD;AACF,GAZqB;AActBoB,kBAdsB,4BAcLnB,KAdK,EAcE;AACtB,QAAIoB,QAAQ,CAAZ;AACApB,UAAMqB,KAAN,CAAYC,OAAZ,CAAoB,kBAAU;AAC5B,UAAI,CAACC,OAAOC,QAAZ,EAAsB;AAAA,iCACJD,OAAOE,WAAP,EADI;AAAA,YACZpB,GADY,sBACZA,GADY;AAAA,YAEdqB,OAFc,GAEJrB,MAAM,CAAC,KAAGA,GAAJ,EAASE,MAAf,GAAwB,CAFpB;AAAA,YAGdoB,eAHc,GAGIJ,OAAOK,cAHX;AAAA,YAIdC,OAJc,GAIJT,UAAU,CAAV,GAAc,EAAd,GAAmB,EAJf;;AAKpBA,gBAAQM,YAAY,CAAZ,GACJN,QAAQS,OAAR,GAAkBC,KAAKC,KAAL,CAAWJ,eAAX,CADd,GAEJP,KAFJ;AAGD;AACF,KAVD;AAWA,WAAOA,KAAP;AACD;AA5BqB,CAAxB;;kBAgCeJ,e","file":"WithAreaChartFn.js","sourcesContent":["const CHART = {\r\n  SCATTER_MARGIN_BOTTOM: 24,\r\n  LONG_FORM: {\r\n    chart: {\r\n      marginBottom: 40\r\n    },\r\n    credits: {\r\n      enabled: true\r\n    }\r\n  }\r\n};\r\n\r\nconst _checkIsWithScatter = chart => {\r\n  const max = chart.series.length;\r\n  let i=0;\r\n  for (; i<max; i++) {\r\n    const seria = chart.series[i];\r\n    if (seria.visible\r\n        && seria.options.type === 'scatter'\r\n        && seria.options.data\r\n        && seria.options.data.length > 0\r\n    ) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst _fOptionShortForm = (marginBottom=0) => {\r\n  return {\r\n    chart: {\r\n      spacingBottom: 0,\r\n      marginBottom\r\n    },\r\n    credits: {\r\n      enabled: false\r\n    }\r\n  };\r\n};\r\n\r\nconst WithAreaChartFn = {\r\n\r\n  arMetricOption(chart, isShow) {\r\n    if (!isShow) {\r\n      if ( !_checkIsWithScatter(chart) ) {\r\n        return _fOptionShortForm();\r\n      } else {\r\n        return _fOptionShortForm(CHART.SCATTER_MARGIN_BOTTOM);\r\n      }\r\n    } else {\r\n      return CHART.LONG_FORM;\r\n    }\r\n  },\r\n\r\n  arCalcDeltaYAxis(chart) {\r\n    let delta = 0;\r\n    chart.yAxis.forEach(_yAxis => {\r\n      if (!_yAxis.opposite) {\r\n        const { max } = _yAxis.getExtremes()\r\n            , _maxLen = max ? (''+max).length : 0\r\n            , _maxLabelLenght = _yAxis.maxLabelLength\r\n            , _offset = delta === 0 ? 25 : 15;\r\n        delta = _maxLen !== 0\r\n          ? delta + _offset + Math.round(_maxLabelLenght)\r\n          : delta\r\n      }\r\n    })    \r\n    return delta;\r\n  }\r\n\r\n};\r\n\r\nexport default WithAreaChartFn\r\n"]}
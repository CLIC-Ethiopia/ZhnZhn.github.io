{"version":3,"sources":["../../src/charts/ChartConfig.js"],"names":["merge","Highcharts","_crScatterSeria","color","pointFormatter","data","zhSeriaId","type","tooltip","Chart","fTooltip","ChartConfig","WithIndicator","WithPie","WithStackedArea","WithStackedColumn","WithTreeMap","init","setOptions","ChartTheme","seriaOption","option","Object","assign","visible","marker","radius","symbol","setSerieData","config","index","name","options","series","lineWidth","point","fEventsMouseOver","handleMouseOver","_zhSeriaId","id","setStockSerias","dClose","dHigh","dLow","dOpen","COLOR","S_HIGH","S_LOW","S_OPEN","getColor","seriaIndex","colors","length","crDividendSeria","chartId","EX_DIVIDEND","Tooltip","exDividend","crSplitRatioSeria","SPLIT_RATIO","splitRatio","fnNumberFormat","value","arrSplit","split","decimal","numberFormat","fBaseAreaConfig","fBaseConfig","chart","zoomType","resetZoomButton","fResetZoomButton","position","x","xDeltaCrossLabel","yDeltaCrossLabel","zhDetailCharts","xAxis","fXAxisOpposite","events","afterSetExtremes","ChartFn","zoomIndicatorCharts","yAxis","tickLength","offset","labels","y","afterSetExtremesYAxis","plotLines","fPlotLine","HIGH","LOW","fMarkerExDividend","dataLabelsY","exValue","fillColor","lineColor","states","hover","enable","PLOT","dataLabels","enabled","inside","style","fill","stroke","fontSize","fontWeight","textShadow","textOutline","crop","overflow","formatter","fMarkerSplitRatio","fSeries","seriaType","_type","toLowerCase","fnBasePointFormatter"],"mappings":"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","sourcesContent":["import Highcharts from 'highcharts';\r\nimport HighchartsMore from 'highcharts/highcharts-more';\r\nimport HighchartsTreemap from 'highcharts/modules/treemap';\r\nimport HighchartsExporting from 'highcharts/modules/exporting';\r\nimport HighchartsOfflineExporting from 'highcharts/modules/offline-exporting';\r\n\r\nimport HighchartsZhn from './plugin/zhn-highcharts'\r\n\r\n//import HighchartsMore from 'highcharts/lib/highcharts-more';\r\n//import HighchartsTreemap from 'highcharts/lib/modules/treemap';\r\n//import HighchartsExporting from 'highcharts/lib/modules/exporting';\r\n//import HighchartsOfflineExporting from 'highcharts/lib/modules/offline-exporting';\r\n\r\nimport COLOR from '../constants/Color';\r\nimport Chart from './Chart';\r\nimport ChartFn from './ChartFn';\r\nimport Tooltip from './Tooltip';\r\n\r\nimport ChartTheme from './ChartTheme'\r\nimport handleMouseOver from './handleMouseOver'\r\n\r\nimport WithIndicator from './WithIndicatorConfig';\r\nimport WithPie from './WithPieConfig';\r\nimport WithStackedArea from './WithStackedAreaConfig';\r\nimport WithStackedColumn from './WithStackedColumnConfig';\r\nimport WithTreeMap from './WithTreeMapConfig';\r\n\r\nconst merge = Highcharts.merge;\r\n\r\nconst _crScatterSeria = (color, pointFormatter, data, zhSeriaId) => ({\r\n  type: 'scatter',\r\n  color: color,\r\n  tooltip: Chart.fTooltip(pointFormatter),\r\n  data: data,\r\n  zhSeriaId: zhSeriaId\r\n});\r\n\r\nconst ChartConfig = {\r\n  ...WithIndicator,\r\n  ...WithPie,\r\n  ...WithStackedArea,\r\n  ...WithStackedColumn,\r\n  ...WithTreeMap,\r\n\r\n  init(){\r\n    HighchartsMore(Highcharts);\r\n    HighchartsTreemap(Highcharts);\r\n    HighchartsExporting(Highcharts);\r\n    HighchartsOfflineExporting(Highcharts);\r\n\r\n    HighchartsZhn(Highcharts)\r\n\r\n    Highcharts.setOptions(ChartTheme);\r\n  },\r\n\r\n  seriaOption(color, option) {\r\n    return Object.assign({\r\n      type: 'line', visible: false, color,\r\n      marker: {\r\n        radius: 3,\r\n        symbol: \"circle\"\r\n      }\r\n    }, option)\r\n  },\r\n\r\n  setSerieData(config, data, index, name, options) {\r\n    config.series[index] = Object.assign({\r\n      type: 'area',\r\n      name: name,\r\n      data: data,\r\n      lineWidth: 1\r\n    }, options)\r\n\r\n    config.series[index].point = Chart.fEventsMouseOver(\r\n      handleMouseOver\r\n    )\r\n  },\r\n\r\n  _zhSeriaId(id){\r\n    return { zhSeriaId: id };\r\n  },\r\n\r\n  setStockSerias(config, dClose, dHigh, dLow, dOpen, id){\r\n    this.setSerieData(config, dClose, 0, 'Close',\r\n      this._zhSeriaId(id)\r\n    )\r\n    this.setSerieData(config, dHigh, 1, 'High',\r\n      this.seriaOption(COLOR.S_HIGH, this._zhSeriaId(id+'H'))\r\n    )\r\n    this.setSerieData(config, dLow, 2, 'Low',\r\n      this.seriaOption(COLOR.S_LOW, this._zhSeriaId(id+'L'))\r\n    )\r\n    this.setSerieData(config, dOpen, 3, 'Open',\r\n      this.seriaOption(COLOR.S_OPEN, this._zhSeriaId(id+'O'))\r\n    )\r\n  },\r\n\r\n  getColor(seriaIndex) {\r\n    const colors = ChartTheme.colors;\r\n    return colors[seriaIndex % colors.length];\r\n  },\r\n\r\n  crDividendSeria: (data, chartId) => _crScatterSeria(\r\n    COLOR.EX_DIVIDEND,\r\n    Tooltip.exDividend,\r\n    data,\r\n    chartId + '_ExDivident'\r\n  ),\r\n\r\n  crSplitRatioSeria: (data, chartId) => _crScatterSeria(\r\n    COLOR.SPLIT_RATIO,\r\n    Tooltip.splitRatio,\r\n    data,\r\n    chartId + '_SplitRatio'\r\n  )\r\n\r\n};\r\n\r\nChartConfig.fnNumberFormat = function(value){\r\n  const arrSplit = (value+'').split('.')\r\n      , decimal = ( arrSplit[1] )\r\n          ? arrSplit[1].length\r\n          : 0;\r\n\r\n  return Highcharts.numberFormat(value, decimal, '.', ' ');\r\n}\r\n\r\nChartConfig.fBaseAreaConfig = function(options) {\r\n  const config = Highcharts.merge(\r\n    Chart.fBaseConfig(options), {\r\n    chart: {\r\n      zoomType: 'xy',\r\n      resetZoomButton: Chart.fResetZoomButton({\r\n        position: {x: -10}\r\n      }),\r\n      xDeltaCrossLabel: 4,\r\n      yDeltaCrossLabel: 20\r\n    },\r\n    zhDetailCharts: []\r\n  });\r\n\r\n  config.xAxis = Object.assign( Chart.fXAxisOpposite(config.xAxis), {\r\n    events: {\r\n      afterSetExtremes : ChartFn.zoomIndicatorCharts\r\n    }\r\n  })\r\n  config.yAxis = Object.assign(config.yAxis, {\r\n    lineWidth: 0,\r\n    tickLength: 0,\r\n    offset: 4,\r\n    labels: {\r\n      x: 8,\r\n      y: 5\r\n    },\r\n    events: {\r\n      afterSetExtremes: ChartFn.afterSetExtremesYAxis\r\n    }\r\n  })\r\n\r\n\r\n  config.yAxis.plotLines = [\r\n    Chart.fPlotLine(COLOR.HIGH, 'max'),\r\n    Chart.fPlotLine(COLOR.LOW, 'min')\r\n  ]\r\n\r\n  return config;\r\n};\r\n\r\nChartConfig.fMarkerExDividend = function(\r\n  color=COLOR.EX_DIVIDEND,\r\n  dataLabelsY=32\r\n){\r\n  return {\r\n    y: 0,\r\n    exValue: 0.5,\r\n    marker : {\r\n      symbol: 'circle',\r\n      fillColor : color,\r\n      lineColor: color,\r\n      radius: 6,\r\n      states: {\r\n        hover: {\r\n          enable: true,\r\n          fillColor: COLOR.PLOT,\r\n          lineColor: color,\r\n          lineWidth: 2,\r\n          radius: 6\r\n        }\r\n      }\r\n    },\r\n    dataLabels : {\r\n      enabled: true,\r\n      inside: true,\r\n      color: color,\r\n      style : {\r\n        fill: color,\r\n        stroke: color,\r\n        color: color,\r\n        fontSize: '12px',\r\n        fontWeight: 'normal',\r\n        textShadow: 'none',\r\n        textOutline: '0px transparent'\r\n      },\r\n      crop: false,\r\n      overflow: 'none',\r\n      y: dataLabelsY,\r\n      formatter : function(){\r\n        return this.point.exValue;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nChartConfig.fMarkerSplitRatio = function(){\r\n  const point = ChartConfig.fMarkerExDividend(COLOR.SPLIT_RATIO);\r\n  point.dataLabels.formatter = function() { return this.point.splitRatio};\r\n  return point;\r\n}\r\n\r\n/*\r\nconst _fScatterSeria = function(color, pointFormatter, data, zhSeriaId){\r\n  return {\r\n    type: 'scatter',\r\n    color: color,\r\n    tooltip : Chart.fTooltip(pointFormatter),\r\n    data : data,\r\n    zhSeriaId : zhSeriaId\r\n  }\r\n}\r\n*/\r\n/*\r\nChartConfig.fExDividendSeria = function(data, chartId){\r\n  return _fScatterSeria(\r\n    COLOR.EX_DIVIDEND,\r\n    Tooltip.exDividend,\r\n    data,\r\n    chartId + '_ExDivident'\r\n  );\r\n}\r\nChartConfig.fSplitRatioSeria = function(data, chartId){\r\n  return _fScatterSeria(\r\n    COLOR.SPLIT_RATIO,\r\n    Tooltip.splitRatio,\r\n    data,\r\n    chartId + '_SplitRatio'\r\n  );\r\n}\r\n*/\r\n\r\nChartConfig.fSeries = function(option={}){\r\n  const { seriaType } = option\r\n  , _type = typeof seriaType === 'string'\r\n      ? seriaType.toLowerCase()\r\n      : 'spline';\r\n  return merge(\r\n    false, {\r\n      type: _type,\r\n      //type: 'spline',\r\n      lineWidth: 1,\r\n      tooltip: Chart.fTooltip(Tooltip.fnBasePointFormatter)\r\n    }, option\r\n  );\r\n}\r\n\r\nexport default ChartConfig\r\n"],"file":"ChartConfig.js"}
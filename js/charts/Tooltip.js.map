{"version":3,"sources":["../../src/charts/Tooltip.jsx"],"names":["SPARKLINES_SUFFIX_ID","SPARKLINES_BAR_SUFFIX_ID","WIDTH_CHAR","WIDTH_VALUE","WIDTH_TOTAL","WIDTH_SPARK","Tooltip","_fnNumberFormat","value","arrSplit","split","decimal","numberFormat","_fnTooltipHeader","date","id","cssClass","_fnTooltipSparkType4","fullWidth","width","year","total","percent","_fnBaseTooltip","valueText","_fnExDividend","point","exValue","price","_fnSplitRatio","splitRatio","_fnVolumeTooltip","_open","_close","_low","_high","_fnATHTooltip","color","y","close","open","_fnHighLowTooltip","dayHigh","dayLow","_fnPieTooltip","nameFull","_fnCalcWidthSparkType4","_width1","length","_width2","_fnStackedAreaTooltip","category","_total","_fnTreeMapTooltip","_value","_fnAddHandlerClose","setTimeout","document","getElementById","addEventListener","_fnHide","removeEventListener","series","chart","zhTooltip","hide","_fnAddHandlerCloseAndSparklines","sparkLinesData","sparkBarsData","pointIndex","sparkvalues","sparkpercent","seriesData","data","forEach","item","itemIndex","push","percentage","index","sparklines","createSparklines","sparkbars","createSparkbars","_fnBasePointFormatter","option","fnTemplate","onAfterRender","isWithValueText","isWithValue","options","zhSeriaId","dateFormat","x","userOptions","zhValueText","fnBasePointFormatter","fnExDividendPointFormatter","fnSplitRatioPointFormatter","fnVolumePointFormatter","fnATHPointFormatter","fnHighLowPointFormatter","fnPiePointFormatter","fnStackedAreaPointFormatter","fnTreeMapPointFormatter"],"mappings":"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","file":"Tooltip.js","sourcesContent":["import Highcharts from 'highcharts';\r\nimport { render } from 'react-dom';\r\n\r\nimport SparkFactory from '../components/factories/SparkFactory';\r\n\r\nconst SPARKLINES_SUFFIX_ID = 'sparklines'\r\n    , SPARKLINES_BAR_SUFFIX_ID = 'sparklines_bar'\r\n    , WIDTH_CHAR = 10\r\n    , WIDTH_VALUE = 54\r\n    , WIDTH_TOTAL = 50\r\n    , WIDTH_SPARK = 20 + 80 + 16;\r\n\r\nconst Tooltip = {};\r\n\r\n\r\nconst _fnNumberFormat = function(value){\r\n  const arrSplit = (value+'').split('.')\r\n      , decimal = (arrSplit[1]) ? 2 : 0;\r\n  return Highcharts.numberFormat(value, decimal, '.', ' ');\r\n};\r\n\r\nconst _fnTooltipHeader = function(date, id, cssClass=''){\r\n  return `<div id=\"${id}\" class=\"tp__header not-selected ${cssClass}\">\r\n  <span class=\"tp__header__caption\">${date}</span>\r\n  <span class=\"tp__header__close\">X</span>\r\n  </div>`\r\n}\r\n\r\nconst _fnTooltipSparkType4 = function({\r\n  fullWidth, width, year, value, total, percent, id\r\n}){\r\n  return `<div class=\"tp__body\">\r\n  <div class=\"tp__body__part1\" style=\"width:${fullWidth}px;\" >\r\n    <div style=\"float:left;padding-right:10px;width:${width}px;\">\r\n      <span class=\"tp__body__title\">Year: </span>\r\n      <span class=\"tp__body__year\">${year}</span></br>\r\n      <span class=\"tp__body__title\">Value: </span>\r\n      <span class=\"tp__body__value\">${value}</span></br>\r\n    </div>\r\n    <div id=\"${id}_${SPARKLINES_SUFFIX_ID}\" class=\"tp__body__sparklines\">\r\n    </div>\r\n  </div>\r\n  <div class=\"tp__body__part1\" style=\"width:${fullWidth}px;\" >\r\n    <div style=\"float:left;padding-right:10px;width:${width}px;\">\r\n      <span class=\"tp__body__title\">Total: </span>\r\n      <span class=\"tp__body__value\">${total}</span></br>\r\n      <span class=\"tp__body__title\">Percent: </span>\r\n      <span class=\"tp__body__value\">${percent}</span></br>\r\n    </div>\r\n    <div id=\"${id}_${SPARKLINES_BAR_SUFFIX_ID}\" class=\"tp__body__sparklines\">\r\n    </div>\r\n  </div>`\r\n}\r\n\r\nconst _fnBaseTooltip = function({date, id, valueText, value}){\r\n  return _fnTooltipHeader(date, id) +\r\n  `<div class=\"tp__body\">\r\n  <span class=\"tp__body__title\">${valueText}:&nbsp;</span>\r\n  <span class=\"tp__body__value\">${value}</span>\r\n  </div>`\r\n}\r\n\r\nconst _fnExDividend = function({date, id, valueText, value, point}){\r\n  return _fnTooltipHeader(date, id) +\r\n  `<div class=\"tp__body\">\r\n  <span class=\"tp__body__title\">Ex-Dividend: </span>\r\n  <span style=\"color: green;\">${point.exValue}</span><br/>\r\n  <span class=\"tp__body__title\">Close: </span>\r\n  <span class=\"tp__body__value\">${point.price}</span>\r\n  </div>`\r\n}\r\n\r\nconst _fnSplitRatio = function({date, id, valueText, value, point}){\r\n  return _fnTooltipHeader(date, id) +\r\n  `<div class=\"tp__body\">\r\n  <span class=\"tp__body__title\">Split Ratio: </span>\r\n  <span style=\"color: #ED5813;\">${point.splitRatio}</span><br/>\r\n  <span class=\"tp__body__title\">Close: </span>\r\n  <span class=\"tp__body__value\">${point.price}</span>\r\n  </div>`\r\n}\r\n\r\nconst _fnVolumeTooltip = function({ date, id, value, point }){\r\n  const { _open='', _close='', _low='', _high='' } = point;\r\n  return _fnTooltipHeader(date, id) +\r\n  `<div class=\"tp__body\">\r\n  <span class=\"tp__body__title\">Volume: </span>\r\n  <span class=\"tp__body__value\">${value}</span><br/>\r\n  <span class=\"tp__body__title\">Open: </span>\r\n  <span class=\"tp__body__value\">${_open}</span>\r\n  <span class=\"tp__body__title\"> Close: </span>\r\n  <span class=\"tp__body__value\">${_close}</span><br/>\r\n  <span class=\"tp__body__title\">Low: </span>\r\n  <span class=\"tp__body__value\">${_low}</span>\r\n  <span class=\"tp__body__title\"> High: </span>\r\n  <span class=\"tp__body__value\">${_high}</span>\r\n  </div>`\r\n}\r\n\r\nconst _fnATHTooltip = function({date, id, value, point}){\r\n   return _fnTooltipHeader(date, id) +\r\n   `<div class=\"tp__body\">\r\n   <span class=\"tp__body__title\">ATH: </span>\r\n   <span class=\"tp__body__value\" style=\"color:${point.color};\">${point.y}%</span><br/>\r\n   <span class=\"tp__body__title\">Prev Close: </span>\r\n   <span class=\"tp__body__value\">${point.close}</span><br/>\r\n   <span class=\"tp__body__title\">Next Open: </span>\r\n   <span class=\"tp__body__value\">${point.open}</span><br/>\r\n   </div>`\r\n}\r\n\r\nconst _fnHighLowTooltip = function({date, id, value, point}){\r\n  return _fnTooltipHeader(date, id) +\r\n  `<div class=\"tp__body\">\r\n  <span class=\"tp__body__title\">Open: </span>\r\n  <span class=\"tp__body__value\">${point.open}</span><br/>\r\n  <span class=\"tp__body__title\">High: </span>\r\n  <span class=\"tp__body__value\">${point.dayHigh}</span><br/>\r\n  <span class=\"tp__body__title\">Low: </span>\r\n  <span class=\"tp__body__value\">${point.dayLow}</span><br/>\r\n  <span class=\"tp__body__title\">Close: </span>\r\n  <span class=\"tp__body__value\">${point.close}</span>\r\n  </div>`\r\n}\r\n\r\nconst _fnPieTooltip = function({id, value, point}){\r\n  return _fnTooltipHeader(point.nameFull, id) +\r\n  `<div class=\"tp__body\">\r\n  <span class=\"tp__body__title\">Value: </span>\r\n  <span class=\"tp__body__value\">${value}</span></br>\r\n  </div>`\r\n}\r\n\r\nconst _fnCalcWidthSparkType4 = function(value, total){\r\n  const _width1 = WIDTH_VALUE + value.length*WIDTH_CHAR\r\n      , _width2 = WIDTH_TOTAL + total.length*WIDTH_CHAR\r\n      , width = (_width1>_width2) ? _width1 : _width2\r\n      , fullWidth = width + WIDTH_SPARK;\r\n  return { fullWidth, width }\r\n}\r\n\r\nconst _fnStackedAreaTooltip = function({id, value, point}){\r\n  const {nameFull, category, percent='0.0', total=0} = point\r\n      , _total = _fnNumberFormat(total)\r\n      , { fullWidth, width } = _fnCalcWidthSparkType4(value, _total);\r\n\r\n  return _fnTooltipHeader(nameFull, id) + _fnTooltipSparkType4({\r\n    fullWidth, width, year: category, value, total: _total, percent, id\r\n  });\r\n}\r\n\r\nconst _fnTreeMapTooltip = function({id, point}){\r\n  const {nameFull, year, value='0.0', percent='0.0', total=0} = point\r\n      , _value = _fnNumberFormat(value)\r\n      , _total = _fnNumberFormat(total)\r\n      , { fullWidth, width } = _fnCalcWidthSparkType4(_value, _total);\r\n\r\n  return _fnTooltipHeader(nameFull, id) + _fnTooltipSparkType4({\r\n    fullWidth, width, year, value: _value, total: _total, percent, id\r\n  })\r\n}\r\n\r\n\r\nconst _fnAddHandlerClose = function(id, point){\r\n  setTimeout( function(){\r\n          document.getElementById(id)\r\n             .addEventListener('click', function _fnHide(){\r\n                    document.getElementById(id).removeEventListener('click', _fnHide);\r\n                    point.series.chart.zhTooltip.hide();\r\n         })\r\n  }, 1);\r\n}\r\n\r\nconst _fnAddHandlerCloseAndSparklines = function(id, point){\r\n  setTimeout( function(){\r\n          document.getElementById(id)\r\n             .addEventListener('click', function _fnHide(){\r\n                    document.getElementById(id).removeEventListener('click', _fnHide);\r\n                    point.series.chart.zhTooltip.hide();\r\n         })\r\n\r\n         let  sparkLinesData = []\r\n            , sparkBarsData = []\r\n            , pointIndex;\r\n\r\n         if (point.sparkvalues) {\r\n           sparkLinesData = point.sparkvalues;\r\n           sparkBarsData = point.sparkpercent;\r\n           pointIndex = (point.sparkvalues.length !== 0)\r\n                            ?  point.sparkvalues.length - 1 : 0 ;\r\n         }  else {\r\n           const seriesData = point.series.data\r\n           seriesData.forEach((item, itemIndex) => {\r\n              sparkLinesData.push(item.y);\r\n              sparkBarsData.push(item.percentage)\r\n           })\r\n           pointIndex = point.index\r\n         }\r\n\r\n         const sparklines = SparkFactory.createSparklines(sparkLinesData, pointIndex)\r\n             , sparkbars = SparkFactory.createSparkbars(sparkBarsData, pointIndex);\r\n         render( sparklines, document.getElementById(`${id}_${SPARKLINES_SUFFIX_ID}`))\r\n         render( sparkbars, document.getElementById(`${id}_${SPARKLINES_BAR_SUFFIX_ID}`))\r\n  }, 1);\r\n}\r\n\r\nconst _fnBasePointFormatter = function( option ){\r\n  return function(){\r\n    var {\r\n          fnTemplate, onAfterRender=_fnAddHandlerClose,\r\n          isWithValueText=false, isWithValue=false\r\n        } = option\r\n      , point = this\r\n      , id = point.series.options.zhSeriaId\r\n      , date = Highcharts.dateFormat('%A, %b %d, %Y', point.x)\r\n      , valueText = (isWithValueText) ? point.series.userOptions.zhValueText : null\r\n      , value = (isWithValue) ? _fnNumberFormat(point.y) : null;\r\n\r\n      onAfterRender(id, point);\r\n\r\n      return fnTemplate({date, id, valueText, value, point});\r\n  }\r\n}\r\n\r\nTooltip.fnBasePointFormatter = _fnBasePointFormatter({\r\n  fnTemplate : _fnBaseTooltip, isWithValueText: true, isWithValue: true\r\n});\r\nTooltip.fnExDividendPointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnExDividend\r\n});\r\nTooltip.fnSplitRatioPointFormatter = _fnBasePointFormatter({\r\n  fnTemplate : _fnSplitRatio\r\n});\r\n\r\nTooltip.fnVolumePointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnVolumeTooltip, isWithValue: true\r\n});\r\nTooltip.fnATHPointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnATHTooltip\r\n});\r\nTooltip.fnHighLowPointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnHighLowTooltip\r\n});\r\n\r\nTooltip.fnPiePointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnPieTooltip, isWithValue: true\r\n});\r\nTooltip.fnStackedAreaPointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnStackedAreaTooltip,\r\n  onAfterRender: _fnAddHandlerCloseAndSparklines,\r\n  isWithValue: true\r\n});\r\nTooltip.fnTreeMapPointFormatter = _fnBasePointFormatter({\r\n  fnTemplate: _fnTreeMapTooltip,\r\n  onAfterRender: _fnAddHandlerCloseAndSparklines,\r\n  isWithValue: true\r\n});\r\n\r\nexport default Tooltip\r\n"]}
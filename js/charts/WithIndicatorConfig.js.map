{"version":3,"sources":["../../src/charts/WithIndicatorConfig.js"],"names":["C","MFI","MOM","CLOSE_OPEN","HIGH_LOW","_configCrossLabel","chart","option","Object","assign","xDeltaCrossLabel","yDeltaCrossLabel","_legendVolume","enabled","align","verticalAlign","x","y","floating","symbolHeight","symbolWidth","symbolRadius","itemStyle","color","CHART_TITLE","fontSize","itemHoverStyle","LEGEND_ITEM_HOVER","itemHiddenStyle","LEGEND_ITEM_HIDDEN","_addColumnSeria","config","series","_seria","type","visible","tooltip","fTooltip","fnBasePointFormatter","data","push","WithIndicatorConfig","fBaseIndicatorConfig","fBaseConfig","yAxis","navigation","buttonOptions","menuStyle","position","top","left","height","spacingTop","spacingBottom","startOnTick","endOnTick","tickPixelInterval","offset","lineWidth","tickLength","labels","fIndicatorMfiConfig","id","parentId","title","fTitleIndicator","zhSeriaId","zhValueText","name","point","fEventsMouseOver","handlerMouserOverPoint","fIndicatorVolumeConfig","chartId","dataColumn","legend","turboThreshold","borderWidth","pointPlacement","groupPadding","states","hover","brightness","fnVolumePointFormatter","fIndicatorATHConfig","minPointLength","fnATHPointFormatter","fnMomAthConfig","dataMom","dataAth","dataSum","plotOptions","column","grouping","shadow","pointPadding","fIndicatorHighLowConfig","fnHighLowPointFormatter"],"mappings":"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","file":"WithIndicatorConfig.js","sourcesContent":["import Tooltip from './Tooltip'\r\nimport ChartFn from './ChartFn'\r\nimport Chart from './Chart'\r\n\r\nimport COLOR from '../constants/Color'\r\n\r\nconst C = {\r\n  MFI: \"#90ed7d\",\r\n\r\n  MOM: '#f7a35c',\r\n  CLOSE_OPEN: 'rgba(144, 237, 125, 0.75)',\r\n\r\n  HIGH_LOW: '#2D7474'\r\n}\r\n\r\nconst _configCrossLabel = (chart, option) => {\r\n  Object.assign(chart, {\r\n    xDeltaCrossLabel: 4,\r\n    yDeltaCrossLabel: -10\r\n  }, option)\r\n}\r\n\r\nconst _legendVolume = {\r\n   enabled: true,\r\n   align: 'left',\r\n   verticalAlign: 'top',\r\n   x: 124,\r\n   y: -8,\r\n   floating: true,\r\n\r\n   symbolHeight: 12,\r\n   symbolWidth: 12,\r\n   symbolRadius: 6,\r\n\r\n   itemStyle: {\r\n     color: COLOR.CHART_TITLE,\r\n     fontSize: '16px'\r\n   },\r\n   itemHoverStyle: {\r\n     color: COLOR.LEGEND_ITEM_HOVER\r\n   },\r\n   itemHiddenStyle: {\r\n     color: COLOR.LEGEND_ITEM_HIDDEN\r\n   }\r\n}\r\n\r\nconst _addColumnSeria = (config, option) => {\r\n  const { series } = config\r\n      , _seria = Object.assign({\r\n             type: \"column\",\r\n             visible: true,\r\n             tooltip: Chart.fTooltip(Tooltip.fnBasePointFormatter)\r\n         }, option);\r\n  if (!series[0].data) {\r\n    Object.assign(config.series[0], _seria)\r\n  } else {\r\n    series.push(_seria)\r\n  }\r\n}\r\n\r\nconst WithIndicatorConfig = {\r\n\r\n  fBaseIndicatorConfig(){\r\n    const config = Chart.fBaseConfig()\r\n       , { chart, yAxis } = config;\r\n\r\n    config.navigation = {\r\n       buttonOptions: {\r\n          y: 20\r\n       },\r\n       menuStyle: {\r\n         position: 'relative',\r\n         top: '-24px',\r\n         left: '28px'\r\n       }\r\n    }\r\n    Object.assign(chart, {\r\n      height: 160,\r\n      spacingTop: 8,\r\n      spacingBottom: 10\r\n    })\r\n    Object.assign(yAxis, {\r\n      startOnTick: true,\r\n      endOnTick: true,\r\n      tickPixelInterval: 60,\r\n      offset: 4,\r\n      lineWidth: 0,\r\n      tickLength: 0,\r\n      labels: {\r\n        x: 8,\r\n        y: 5\r\n      }\r\n    })\r\n    return config;\r\n  },\r\n\r\n  fIndicatorMfiConfig(id, parentId, title, data){\r\n    const config = this.fBaseIndicatorConfig();\r\n    config.title = Chart.fTitleIndicator(title)\r\n    _configCrossLabel(config.chart)\r\n    Object.assign(config.series[0], {\r\n      zhSeriaId: parentId + '_' + id,\r\n      zhValueText: id,\r\n      data: data,\r\n      name: \"MFI\",\r\n      type: \"spline\",\r\n      color: C.MFI,\r\n      point: Chart.fEventsMouseOver(ChartFn.handlerMouserOverPoint)\r\n    })\r\n    return config;\r\n  },\r\n\r\n  fIndicatorVolumeConfig(chartId, dataColumn, data){\r\n    const config = this.fBaseIndicatorConfig();\r\n    Object.assign(config, {\r\n      title: Chart.fTitleIndicator('Volume:'),\r\n      legend: _legendVolume\r\n    })\r\n    _configCrossLabel(config.chart)\r\n    Object.assign(config.yAxis, {\r\n      endOnTick: false,\r\n      tickPixelInterval: 40,\r\n    })\r\n    Object.assign(config.series[0], {\r\n      zhSeriaId: chartId + '_VolumeArea',\r\n      zhValueText: \"Volume\",\r\n      data: data,\r\n      name: \"Spline\",\r\n      point: Chart.fEventsMouseOver(ChartFn.handlerMouserOverPoint)\r\n    })\r\n    config.series.push({\r\n      zhSeriaId: chartId + '_VolumeColumn',\r\n      zhValueText: \"Volume\",\r\n      turboThreshold: 20000,\r\n      type: \"column\",\r\n      name: \"Column\",\r\n      data: dataColumn,\r\n      visible: false,\r\n      borderWidth: 0,\r\n      pointPlacement: 'on',\r\n      groupPadding: 0.1,\r\n      states: {\r\n        hover: {\r\n          enabled: true,\r\n          brightness: 0.07\r\n        }\r\n      },\r\n      tooltip: Chart.fTooltip(Tooltip.fnVolumePointFormatter)\r\n    });\r\n\r\n    return config;\r\n  },\r\n\r\n  fIndicatorATHConfig(chartId, data){\r\n    const config = this.fBaseIndicatorConfig();\r\n    config.title = Chart.fTitleIndicator('ATH');\r\n\r\n    _addColumnSeria(config, {\r\n       zhSeriaId: chartId + \"_ATH\",\r\n       name: \"ATH\",\r\n       borderWidth: 0,\r\n       pointPlacement: 'on',\r\n       minPointLength: 4,\r\n       groupPadding: 0.1,\r\n       data: data,\r\n       tooltip: Chart.fTooltip(Tooltip.fnATHPointFormatter)\r\n    })\r\n\r\n    return config;\r\n  },\r\n\r\n  fnMomAthConfig(dataMom, dataAth, dataSum, id){\r\n    const config = this.fBaseIndicatorConfig();\r\n    Object.assign(config, {\r\n      title: Chart.fTitleIndicator(''),\r\n      legend: _legendVolume,\r\n      plotOptions: {\r\n        column : {\r\n          grouping: false,\r\n          shadow: false,\r\n          borderWidth: 0,\r\n          pointPlacement: 'on',\r\n          pointPadding: 0,\r\n          groupPadding: 0,\r\n          turboThreshold: 20000,\r\n          tooltip: Chart.fTooltip(Tooltip.fnBasePointFormatter)\r\n        }\r\n      }\r\n    })\r\n    _addColumnSeria(config, {\r\n       zhSeriaId: id + \"_MOM\",\r\n       zhValueText: \"MOM(1)\",\r\n       name: \"MOM(1)\",\r\n       color: C.MOM,\r\n       pointPadding: 0.3,\r\n       data: dataMom\r\n    })\r\n    _addColumnSeria(config, {\r\n       zhSeriaId: id + \"_ATH\",\r\n       name: \"ATH\",\r\n       data: dataAth\r\n    })\r\n    _addColumnSeria(config, {\r\n       zhSeriaId: id + \"_CLOSE_OPEN\",\r\n       name: \"Close-Open\",\r\n       color: C.CLOSE_OPEN,\r\n       visible: false,\r\n       data: dataSum\r\n    })\r\n\r\n    Object.assign(config.yAxis, {\r\n       startOnTick: false,\r\n       endOnTick: false,\r\n       tickPixelInterval: 20\r\n    })\r\n    return config;\r\n  },\r\n\r\n  fIndicatorHighLowConfig(chartId, data){\r\n    const config = this.fBaseIndicatorConfig();\r\n    config.title = Chart.fTitleIndicator('HighLow')\r\n\r\n    Object.assign(config.series[0], {\r\n      zhSeriaId: chartId + '_HL',\r\n      name: \"HL\",\r\n      visible: true,\r\n      type: \"arearange\",\r\n      color: C.HIGH_LOW,\r\n      data: data,\r\n      tooltip: Chart.fTooltip(Tooltip.fnHighLowPointFormatter)\r\n    })\r\n\r\n    return config;\r\n  }\r\n\r\n};\r\n\r\nexport default WithIndicatorConfig\r\n"]}
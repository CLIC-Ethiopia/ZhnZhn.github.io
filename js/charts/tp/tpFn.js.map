{"version":3,"sources":["../../../src/charts/tp/tpFn.js"],"names":["crTpId","ChartFn","toNumberFormat","toNumberFormatAll","toDateFormatDMY","toDateFormatDMYT","C","TITLE_C","YEAR_C","VALUE_C","EX_DIVIDEND_C","TITLE_STYLE","FONT_STYLE","_isFn","fn","_fHideTooltip","point","series","chart","zhTooltip","hide","_addClickOnceById","id","listener","node","document","getElementById","addEventListener","isSupportOptions","once","tpFn","crSpan","t","v","color","_vStyle","_t","_v","crRow","option","crHeader","date","cssClass","addHideHandler"],"mappings":"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","sourcesContent":["\r\nimport isSupportOptions from '../../utils/isSupportOptions'\r\nimport ChartFn from '../ChartFn'\r\n\r\nconst {\r\n  crTpId,\r\n  toNumberFormat,\r\n  toNumberFormatAll,\r\n  toDateFormatDMY,\r\n  toDateFormatDMYT\r\n} = ChartFn;\r\n\r\nconst C = {\r\n  TITLE_C: '#a487d4',\r\n  YEAR_C: '#fdb316',\r\n  VALUE_C: '#2f7ed8',\r\n  EX_DIVIDEND_C: 'green'\r\n}\r\n\r\nconst TITLE_STYLE = `style=\"color:${C.TITLE_C};\"`;\r\nconst FONT_STYLE = 'font-size:16px;font-weight:bold';\r\n\r\nconst _isFn = fn => typeof fn === 'function';\r\n\r\nconst _fHideTooltip = (point={}, fn) => () => {\r\n  if (point.series) {\r\n     point.series.chart.zhTooltip.hide();\r\n  }\r\n  if (_isFn(fn)) {\r\n    fn(point)\r\n  }\r\n};\r\nconst _addClickOnceById = (id, listener) => {\r\n  const node = document.getElementById(id);\r\n  if (node) {\r\n    node.addEventListener('click', listener,\r\n      isSupportOptions ? { once: true } : false\r\n    )\r\n  }\r\n};\r\n\r\nconst tpFn = {\r\n  crSpan: (t='', v='', { color=C.VALUE_C }={}) => {\r\n    const _vStyle = `style=\"color:${color};${FONT_STYLE}\"`\r\n        , _t = t ? `${t}: `: ''\r\n        , _v = v !== null ? v: '';\r\n    return `\r\n    <span ${TITLE_STYLE}>${_t}</span>\r\n    <span ${_vStyle}>${_v}</span>`;\r\n  },\r\n  crRow: (t='', v='', option) => {\r\n    return `<div>${tpFn.crSpan(t, v, option)}</div>`;\r\n  },\r\n\r\n  crHeader: (date='&nbsp;', id, cssClass='') => {\r\n    return `<div id=\"${id}\" class=\"tp__header not-selected ${cssClass}\">\r\n      <span class=\"tp__header__caption\">${date}</span>\r\n      <span class=\"tp__header__close\">X</span>\r\n    </div>`;\r\n  },\r\n\r\n  crTpId,\r\n  toNumberFormat,\r\n  toNumberFormatAll,\r\n  toDateFormatDMY,\r\n  toDateFormatDMYT,\r\n\r\n  addHideHandler: (id, point, fn) => {\r\n    _addClickOnceById(id, _fHideTooltip(point, fn))\r\n  }\r\n\r\n};\r\n\r\nexport default tpFn\r\n"],"file":"tpFn.js"}
{"version":3,"sources":["../../../src/charts/tp/tpFn.js"],"names":["crTpId","ChartFn","toNumberFormat","toNumberFormatAll","toDateFormatDMY","toDateFormatDMYT","C","TITLE_C","YEAR_C","VALUE_C","EX_DIVIDEND_C","TITLE_STYLE","FONT_STYLE","_isFn","fn","_fHideTooltip","point","series","chart","zhTooltip","hide","_addClickOnceById","id","listener","node","document","getElementById","addEventListener","isSupportOptions","once","_isValueEmpty","v","tpFn","crSpan","t","color","_vStyle","_t","_v","crNotEmptySpan","title","crRow","option","crHeader","date","cssClass","addHideHandler"],"mappings":"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","sourcesContent":["\r\nimport isSupportOptions from '../../utils/isSupportOptions'\r\nimport ChartFn from '../ChartFn'\r\n\r\nconst {\r\n  crTpId,\r\n  toNumberFormat,\r\n  toNumberFormatAll,\r\n  toDateFormatDMY,\r\n  toDateFormatDMYT\r\n} = ChartFn;\r\n\r\nconst C = {\r\n  TITLE_C: '#a487d4',\r\n  YEAR_C: '#fdb316',\r\n  VALUE_C: '#2f7ed8',\r\n  EX_DIVIDEND_C: 'green'\r\n}\r\n\r\nconst TITLE_STYLE = `style=\"color:${C.TITLE_C};\"`;\r\nconst FONT_STYLE = 'font-size:16px;font-weight:bold';\r\n\r\nconst _isFn = fn => typeof fn === 'function';\r\n\r\nconst _fHideTooltip = (point={}, fn) => () => {\r\n  if (point.series) {\r\n     point.series.chart.zhTooltip.hide();\r\n  }\r\n  if (_isFn(fn)) {\r\n    fn(point)\r\n  }\r\n};\r\nconst _addClickOnceById = (id, listener) => {\r\n  const node = document.getElementById(id);\r\n  if (node) {\r\n    node.addEventListener('click', listener,\r\n      isSupportOptions ? { once: true } : false\r\n    )\r\n  }\r\n};\r\n\r\nconst _isValueEmpty = v => v === 'NoData'\r\n || v === ''\r\n || v == null;\r\n\r\nconst tpFn = {\r\n  crSpan: (t='', v='', { color=C.VALUE_C }={}) => {\r\n    const _vStyle = `style=\"color:${color};${FONT_STYLE}\"`\r\n        , _t = t ? `${t}: `: ''\r\n        , _v = v !== null ? v: '';\r\n    return `\r\n    <span ${TITLE_STYLE}>${_t}</span>\r\n    <span ${_vStyle}>${_v}</span>`;\r\n  },\r\n  crNotEmptySpan: (title, v) => _isValueEmpty(v)\r\n    ? ''\r\n    : tpFn.crSpan(title, v),\r\n  crRow: (t='', v='', option) => {\r\n    return `<div>${tpFn.crSpan(t, v, option)}</div>`;\r\n  },\r\n\r\n  crHeader: (date='&nbsp;', id, cssClass='') => {\r\n    return `<div id=\"${id}\" class=\"tp__header not-selected ${cssClass}\">\r\n      <span class=\"tp__header__caption\">${date}</span>\r\n      <span class=\"tp__header__close\">X</span>\r\n    </div>`;\r\n  },\r\n\r\n  crTpId,\r\n  toNumberFormat,\r\n  toNumberFormatAll,\r\n  toDateFormatDMY,\r\n  toDateFormatDMYT,\r\n\r\n  addHideHandler: (id, point, fn) => {\r\n    _addClickOnceById(id, _fHideTooltip(point, fn))\r\n  }\r\n\r\n};\r\n\r\nexport default tpFn\r\n"],"file":"tpFn.js"}
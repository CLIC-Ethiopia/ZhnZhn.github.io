{"version":3,"sources":["../../src/charts/IndicatorBuilder.js"],"names":["sma","tsIndicators","mfi","momAth","crMfiConfig","ChartConfig","crMomAthConfig","_addDataAsSeriaToChart","chart","option","seria","crSeria","addSeries","options","colors","IndicatorBuilder","removeSeriaFrom","zhValueText","series","i","max","length","userOptions","remove","addSmaTo","id","period","plus","parentId","zhConfig","data","dataSma","zhSeriaId","lineWidth","console","log","zhPoints","dataMfi","nNotFullPoint","titleNotFullPoint"],"mappings":"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","sourcesContent":["import tsIndicators from '../math/tsIndicators'\r\n\r\nimport ChartConfig from './ChartConfig';\r\n\r\nconst { sma, mfi, momAth } = tsIndicators;\r\nconst {\r\n  crMfiConfig,\r\n  crMomAthConfig\r\n} = ChartConfig;\r\n\r\nconst _addDataAsSeriaToChart = (chart, option) => {\r\n  const seria = ChartConfig.crSeria(option);  \r\n  chart.addSeries(seria, true, true)\r\n  return chart.options.colors[seria['_colorIndex']];\r\n};\r\n\r\nconst IndicatorBuilder = {\r\n  removeSeriaFrom: (chart, zhValueText) => {\r\n     const series = chart.series;\r\n     for (let i=0, max=series.length; i<max; i++){\r\n       if (series[i].userOptions.zhValueText === zhValueText){\r\n         series[i].remove(true);\r\n         return true;\r\n       }\r\n     }\r\n     return false;\r\n  },\r\n\r\n  addSmaTo: (chart, option) => {\r\n    const { id, period, plus } = option\r\n        , parentId = chart.options.zhConfig.id\r\n        , data = chart.series[0].data\r\n        , dataSma = sma(data, period, plus);\r\n\r\n    if (dataSma.length>0){\r\n      return _addDataAsSeriaToChart(chart, {\r\n        zhSeriaId: parentId + '_' + id,\r\n        zhValueText: id,\r\n        lineWidth: 2,\r\n        data: dataSma\r\n      });\r\n    } else {\r\n      console.log('It seems, there are not enough data for SMA(' + period + ')')\r\n      return void 0;\r\n    }\r\n  },\r\n\r\n  crMfiConfig: (chart, period, id) => {\r\n    const data = chart.options.zhPoints\r\n    , parentId = chart.options.zhConfig.id\r\n    , { dataMfi, nNotFullPoint } = mfi(data, period)\r\n    , titleNotFullPoint = (nNotFullPoint !== 0)\r\n        ? ' Not Full Data HL:' + nNotFullPoint\r\n        : '';\r\n    return crMfiConfig(\r\n         id, parentId, id + titleNotFullPoint, dataMfi\r\n     );\r\n  },\r\n\r\n  crMomAthConfig: (chart, id) => {\r\n    const data = chart.options.zhPoints;\r\n    return crMomAthConfig(id, momAth(data));\r\n  }\r\n\r\n};\r\n\r\nexport default IndicatorBuilder\r\n"],"file":"IndicatorBuilder.js"}
{"version":3,"sources":["../../src/charts/ChartFn.js"],"names":["C","SERIA_LABEL_CHARS","SERIA_LABELS_IN_ROW","SERIA_LABEL_X_DELTA","SERIA_LABEL_Y_DELTA","SERIA_LABEL_WIDTH","SERIA_LABEL_HEIGHT","DATE_PATTERN","ATTR_LABEL","zIndex","CSS_LABEL","color","fontSize","ChartFn","addSeriaWithRenderLabel","chart","series","label","options","zhSeries","seriesText","length","substring","seriesCount","count","row","Math","floor","x","y","addSeries","renderer","text","css","colors","_colorIndex","add","minY","undefined","yAxis","min","update","startOnTick","handlerMouserOverPoint","event","plotX","plotY","date","dateFormat","dX","xDeltaCrossLabel","dY","yDeltaCrossLabel","xCrossLabel","attr","yCrossLabel","width","plotLeft","plotTop","toggleSeria","item","name","index","isSecondAxes","seria","visible","addAxis","fSecondYAxis","get","remove","hide","show","zoomIndicatorCharts","zhDetailCharts","userMin","forEach","xAxis","setExtremes","userMax","max"],"mappings":"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","file":"ChartFn.js","sourcesContent":["import Highcharts from 'highcharts';\r\n\r\nimport Chart from './Chart';\r\n\r\nconst C = {\r\n  SERIA_LABEL_CHARS : 12,\r\n  SERIA_LABELS_IN_ROW : 3,\r\n  SERIA_LABEL_X_DELTA : 145,\r\n  SERIA_LABEL_Y_DELTA : 95,\r\n  SERIA_LABEL_WIDTH : 125,\r\n  SERIA_LABEL_HEIGHT : 20,\r\n  DATE_PATTERN : '%d-%m-%Y',\r\n  ATTR_LABEL : {\r\n    zIndex : 100\r\n  },\r\n  CSS_LABEL : {\r\n    color: 'yellow',\r\n    fontSize: '15px'\r\n  }\r\n}\r\n\r\nconst ChartFn = {\r\n  addSeriaWithRenderLabel(chart, series, label){\r\n    const options = chart.options;\r\n    if (!options.zhSeries){\r\n      options.zhSeries = {}\r\n    }                       \r\n    const seriesText = (label.length>C.SERIA_LABEL_CHARS)\r\n              ? label.substring(0,C.SERIA_LABEL_CHARS)\r\n              : label\r\n        , seriesCount = options.zhSeries.count\r\n        , row = Math.floor(seriesCount/C.SERIA_LABELS_IN_ROW)\r\n        , x = C.SERIA_LABEL_X_DELTA\r\n              + C.SERIA_LABEL_WIDTH*seriesCount\r\n              - row*(C.SERIA_LABEL_WIDTH*C.SERIA_LABELS_IN_ROW)\r\n        , y = C.SERIA_LABEL_Y_DELTA + C.SERIA_LABEL_HEIGHT*row;\r\n\r\n    chart.addSeries(series, true, true);\r\n    chart.renderer.text(seriesText, x, y)\r\n          .css({ color: options.colors[series._colorIndex], 'font-size': '16px' })\r\n          .add();\r\n\r\n    options.zhSeries.count +=1;\r\n\r\n    if ( (series.minY !== undefined) && options.yAxis[0].min>series.minY ){\r\n        chart.yAxis[0].update({ min: series.minY, startOnTick: true });\r\n    }\r\n\r\n  },\r\n\r\n  handlerMouserOverPoint(event){\r\n     const chart = this.series.chart\r\n         , x = this.x\r\n         , y = this.y\r\n         , plotX = this.plotX\r\n         , plotY = this.plotY\r\n         , date = Highcharts.dateFormat(C.DATE_PATTERN, x)\r\n         , dX = chart.options.chart.xDeltaCrossLabel\r\n         , dY = chart.options.chart.yDeltaCrossLabel;\r\n\r\n\r\n     if (chart.xCrossLabel) {\r\n       chart.xCrossLabel.attr({\r\n         x : plotX,\r\n         text: date\r\n       });\r\n       chart.yCrossLabel.attr({\r\n         x : chart.yAxis[0].width + chart.plotLeft + dX,\r\n         y: plotY + chart.plotTop,\r\n         text: y\r\n       });\r\n     } else {\r\n       chart.xCrossLabel = chart.renderer.text(date, plotX, chart.plotTop - dY)\r\n                             .attr(C.ATTR_LABEL)\r\n                             .css(C.CSS_LABEL)\r\n                             .add();\r\n       chart.yCrossLabel = chart.renderer.text(y, chart.yAxis[0].width + chart.plotLeft + dX , plotY + chart.plotTop)\r\n                             .attr(C.ATTR_LABEL)\r\n                             .css(C.CSS_LABEL)\r\n                             .add();\r\n     }\r\n  },\r\n\r\n  toggleSeria(chart, item){\r\n    const { name, color, index, isSecondAxes, seria } = item;\r\n\r\n    if (isSecondAxes){\r\n      if (!seria.visible){\r\n        chart.addAxis(\r\n          Chart.fSecondYAxis(name, color)\r\n        );\r\n        seria.yAxis = name;\r\n        seria.visible = true;\r\n        chart.addSeries(seria);\r\n      } else {\r\n        seria.visible = false;\r\n        chart.get(name).remove();\r\n      }\r\n    } else {\r\n      const seria = chart.series[index];\r\n      if (seria.visible){\r\n        seria.hide()\r\n      }  else {\r\n        seria.show();\r\n      }\r\n    }\r\n  },\r\n\r\n  zoomIndicatorCharts(event){\r\n    const zhDetailCharts = this.chart.options.zhDetailCharts;\r\n    if (event.userMin){\r\n      zhDetailCharts.forEach((chart)=>{\r\n        chart.xAxis[0].setExtremes(\r\n          event.userMin, event.userMax, true, true\r\n        );\r\n      })\r\n    } else {\r\n      zhDetailCharts.forEach((chart) => {\r\n        chart.xAxis[0].setExtremes(\r\n          event.min, event.max, true, true\r\n        );\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default ChartFn\r\n"]}
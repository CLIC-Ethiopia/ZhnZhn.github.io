{"version":3,"sources":["../../../src/flux/stores/ComponentSlice.js"],"names":["ItemDialogLogic","showItemDialog","slice","itemConf","type","browserType","conf","Promise","resolve","key","Factory","createDialog","then","Comp","showOptionDialog","options","data","dialogType","createOptionDialog","CheckBoxChartLogic","toggle","isCheck","checkBox","chart","activeCheckbox","setUnchecked","activeChart","uncheckActive","chartType","ChbContLogic","_check","activeContChb","_uncheck","ComponentSlice","dialogInit","showAlertDialog","option","modalDialogType","ModalDialog","ALERT","trigger","CAT","SHOW_MODAL_DIALOG","onShowAbout","SHOW_ABOUT","onShowDialog","r","SHOW_DIALOG","onCloseDialog","CLOSE_DIALOG","caption","props","onShowOptionDialog","err","alertCaption","alertDescr","message","onCloseChartContainer","uncheckActiveContChb","uncheckActiveCheckbox","isWithItemCounter","setMenuItemClose","BAT","UPDATE_BROWSER_MENU","onCloseChartContainer2","CLOSE_CHART_CONTAINER_2","onSetActiveContainer","isLoadToChart","zhConfig","id","getActiveChart","onSetActiveCheckbox","onShowModalDialog","onChangeTheme","themeName","CHANGE_THEME"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AAEA;;AAEA,IAAMA,eAAe,GAAG;AAEtBC,EAAAA,cAFsB,0BAEPC,KAFO,EAEAC,QAFA,EAES;AAAA,QACrBC,IADqB,GACQD,QADR,CACrBC,IADqB;AAAA,QACdC,WADc,GACQF,QADR,CACdE,WADc;AAAA,QACDC,IADC,GACQH,QADR,CACDG,IADC;;AAE7B,QAAIJ,KAAK,CAACE,IAAD,CAAT,EAAgB;AACd,aAAOG,OAAO,CAACC,OAAR,CAAgB;AAAEC,QAAAA,GAAG,EAAEL;AAAP,OAAhB,CAAP;AACD,KAFD,MAEO;AACL,aAAOM,oBAAQC,YAAR,CAAqBP,IAArB,EAA2BC,WAA3B,EAAwCC,IAAxC,EACJM,IADI,CACC,UAAAC,IAAI,EAAI;AACTX,QAAAA,KAAK,CAACE,IAAD,CAAL,GAAc,IAAd;AACA,eAAO;AAAEK,UAAAA,GAAG,EAACL,IAAN;AAAYS,UAAAA,IAAI,EAAJA;AAAZ,SAAP;AACH,OAJG,CAAP;AAKD;AACF,GAbqB;AAetBC,EAAAA,gBAfsB,4BAeLZ,KAfK,EAeEa,OAfF,EAeU;AAAA,QACtBX,IADsB,GACPW,OADO,CACtBX,IADsB;AAAA,QAChBY,IADgB,GACPD,OADO,CAChBC,IADgB;;AAE9B,QAAId,KAAK,CAACE,IAAD,CAAT,EAAiB;AACf,aAAOG,OAAO,CAACC,OAAR,CAAgB;AAAEC,QAAAA,GAAG,EAAEL,IAAP;AAAaY,QAAAA,IAAI,EAAJA;AAAb,OAAhB,CAAP;AACD,KAFD,MAEO;AACLD,MAAAA,OAAO,CAACE,UAAR,GAAqBb,IAArB;AACA,aAAOM,oBAAQQ,kBAAR,CAA2BH,OAA3B,EACHH,IADG,CACE,UAAAC,IAAI,EAAI;AACVX,QAAAA,KAAK,CAACE,IAAD,CAAL,GAAc,IAAd;AACA,eAAO;AAAEK,UAAAA,GAAG,EAAEL,IAAP;AAAaS,UAAAA,IAAI,EAAJA,IAAb;AAAmBG,UAAAA,IAAI,EAAJA;AAAnB,SAAP;AACH,OAJG,CAAP;AAKD;AACF;AA3BqB,CAAxB;AA+BA,IAAMG,kBAAkB,GAAG;AACzBC,EAAAA,MADyB,kBAClBlB,KADkB,EACXa,OADW,EACH;AAAA,QACZM,OADY,GACiBN,OADjB,CACZM,OADY;AAAA,QACHC,QADG,GACiBP,OADjB,CACHO,QADG;AAAA,QACOC,KADP,GACiBR,OADjB,CACOQ,KADP;;AAEpB,QAAIF,OAAJ,EAAY;AACT,UAAMG,cAAc,GAAGtB,KAAK,CAACsB,cAA7B;;AACA,UAAIA,cAAc,IAAIA,cAAc,KAAKF,QAAzC,EAAkD;AAC/CE,QAAAA,cAAc,CAACC,YAAf;AACF;;AACDvB,MAAAA,KAAK,CAACsB,cAAN,GAAuBF,QAAvB;AACApB,MAAAA,KAAK,CAACwB,WAAN,GAAoBH,KAApB;AACF,KAPD,MAOO;AACLrB,MAAAA,KAAK,CAACsB,cAAN,GAAuB,IAAvB;AACAtB,MAAAA,KAAK,CAACwB,WAAN,GAAoB,IAApB;AACD;AACF,GAdwB;AAgBzBC,EAAAA,aAhByB,yBAgBXzB,KAhBW,EAgBJ0B,SAhBI,EAgBM;AAC7B,QAAMJ,cAAc,GAAGtB,KAAK,CAACsB,cAA7B;;AACA,QAAKA,cAAc,KACjB,CAACI,SAAD,IAAcJ,cAAc,CAACI,SAAf,KAA6BA,SAD1B,CAAnB,EACyD;AACtDJ,MAAAA,cAAc,CAACC,YAAf;AACAvB,MAAAA,KAAK,CAACsB,cAAN,GAAuB,IAAvB;AACAtB,MAAAA,KAAK,CAACwB,WAAN,GAAoB,IAApB;AACF;AACF;AAxBwB,CAA3B;AA2BA,IAAMG,YAAY,GAAG;AACnBC,EAAAA,MADmB,kBACZ5B,KADY,EACLoB,QADK,EACK;AACtB,QAAIpB,KAAK,CAAC6B,aAAV,EAAyB;AACvB7B,MAAAA,KAAK,CAAC6B,aAAN,CAAoBN,YAApB;AACD;;AACDvB,IAAAA,KAAK,CAAC6B,aAAN,GAAsBT,QAAtB;AACD,GANkB;AAOnBU,EAAAA,QAPmB,oBAOV9B,KAPU,EAOH;AACdA,IAAAA,KAAK,CAAC6B,aAAN,CAAoBN,YAApB;AACAvB,IAAAA,KAAK,CAAC6B,aAAN,GAAsB,IAAtB;AACD,GAVkB;AAYnBX,EAAAA,MAZmB,kBAYZlB,KAZY,QAYiB;AAAA,QAApBmB,OAAoB,QAApBA,OAAoB;AAAA,QAAXC,QAAW,QAAXA,QAAW;;AAClC,QAAID,OAAJ,EAAa;AACX,WAAKS,MAAL,CAAY5B,KAAZ,EAAmBoB,QAAnB;AACD,KAFD,MAEO;AACL,WAAKU,QAAL,CAAc9B,KAAd;AACD;AACF,GAlBkB;AAoBnByB,EAAAA,aApBmB,yBAoBLzB,KApBK,EAoBE0B,SApBF,EAoBa;AAC9B,QAAI1B,KAAK,CAAC6B,aAAV,EAAyB;AACvB,WAAKC,QAAL,CAAc9B,KAAd;AACD;AACF;AAxBkB,CAArB;AA2BA,IAAM+B,cAAc,GAAG;AACrBC,EAAAA,UAAU,EAAG,EADQ;AAGrBC,EAAAA,eAHqB,2BAGLC,MAHK,EAGK;AAAA,QAAVA,MAAU;AAAVA,MAAAA,MAAU,GAAH,EAAG;AAAA;;AACxBA,IAAAA,MAAM,CAACC,eAAP,GAAyBC,kBAAYC,KAArC;AACA,SAAKC,OAAL,CAAaC,uCAAIC,iBAAjB,EAAoCN,MAApC;AACD,GANoB;AAQrBO,EAAAA,WARqB,yBAQR;AACX,SAAKH,OAAL,CAAaC,uCAAIG,UAAjB;AACD,GAVoB;AAYrBC,EAAAA,YAZqB,wBAYRzC,IAZQ,EAYFC,WAZE,EAYWC,IAZX,EAYgB;AAAA;;AACnCN,IAAAA,eAAe,CAACC,cAAhB,CACE,KAAKiC,UADP,EACmB;AAAE9B,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,WAAW,EAAXA,WAAR;AAAqBC,MAAAA,IAAI,EAAJA;AAArB,KADnB,EAEEM,IAFF,CAEO,UAAAkC,CAAC,EAAI;AACT,MAAA,KAAI,CAACN,OAAL,CAAaC,uCAAIM,WAAjB,EAA8BD,CAA9B;AACF,KAJD;AAKD,GAlBoB;AAoBrBE,EAAAA,aApBqB,yBAoBPnC,IApBO,EAoBD;AAClB,SAAK2B,OAAL,CAAaC,uCAAIQ,YAAjB,EAA+B;AAC7B7C,MAAAA,IAAI,EAAES,IAAI,CAACJ,GADkB;AAE7ByC,MAAAA,OAAO,EAAErC,IAAI,CAACsC,KAAL,CAAWD;AAFS,KAA/B;AAID,GAzBoB;AA2BrBE,EAAAA,kBA3BqB,8BA2BFhD,IA3BE,EA2BIgC,MA3BJ,EA2BW;AAAA;;AAC9BpC,IAAAA,eAAe,CAACc,gBAAhB,CACE,KAAKoB,UADP,EACmB;AAAE9B,MAAAA,IAAI,EAAJA,IAAF;AAAQY,MAAAA,IAAI,EAAEoB;AAAd,KADnB,EAEExB,IAFF,CAEO,UAAAkC,CAAC,EAAI;AACV,MAAA,MAAI,CAACN,OAAL,CAAaC,uCAAIM,WAAjB,EAA8BD,CAA9B;AACD,KAJD,WAKO,UAAAO,GAAG,EAAI;AACZ,MAAA,MAAI,CAACb,OAAL,CAAaC,uCAAIC,iBAAjB,EAAoC;AAClCL,QAAAA,eAAe,EAAE,OADiB;AAElCiB,QAAAA,YAAY,EAAE,aAFoB;AAGlCC,QAAAA,UAAU,EAAEF,GAAG,CAACG;AAHkB,OAApC;AAKD,KAXD;AAYD,GAxCoB;AA0CrBC,EAAAA,qBA1CqB,iCA0CC7B,SA1CD,EA0CYvB,WA1CZ,EA0CwB;AAC3C,SAAKqD,oBAAL,CAA0B9B,SAA1B;AACA,SAAK+B,qBAAL,CAA2B/B,SAA3B;;AACA,QAAG,KAAKgC,iBAAL,CAAuBvD,WAAvB,CAAH,EAAuC;AACrC,WAAKwD,gBAAL,CAAsBjC,SAAtB,EAAiCvB,WAAjC;AACA,WAAKmC,OAAL,CAAasB,mCAAIC,mBAAjB,EAAsC1D,WAAtC;AACD;AACF,GAjDoB;AAkDrB2D,EAAAA,sBAlDqB,kCAkDEpC,SAlDF,EAkDavB,WAlDb,EAkDyB;AAC5C,SAAKmC,OAAL,CAAaC,uCAAIwB,uBAAjB,EAA0CrC,SAA1C;AACD,GApDoB;AAqDrBsC,EAAAA,oBArDqB,gCAqDA7C,OArDA,EAqDSC,QArDT,EAqDkB;AACrCO,IAAAA,YAAY,CAACT,MAAb,CAAoB,IAApB,EAA0B;AAAEC,MAAAA,OAAO,EAAPA,OAAF;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAA1B;AACD,GAvDoB;AAwDrBoC,EAAAA,oBAxDqB,gCAwDA9B,SAxDA,EAwDU;AAC7BC,IAAAA,YAAY,CAACF,aAAb,CAA2B,IAA3B,EAAiCC,SAAjC;AACD,GA1DoB;AA4DrBuC,EAAAA,aA5DqB,2BA4DN;AACb,QAAI,KAAKzC,WAAT,EAAqB;AACnB,aAAO,KAAKA,WAAL,CAAiBX,OAAjB,CAAyBqD,QAAzB,CAAkCC,EAAzC;AACD,KAFD,MAEO;AACL,aAAO,KAAP;AACD;AACF,GAlEoB;AAmErBC,EAAAA,cAnEqB,4BAmEL;AACd,WAAO,KAAK5C,WAAZ;AACD,GArEoB;AAsErB6C,EAAAA,mBAtEqB,+BAsEDlD,OAtEC,EAsEQC,QAtER,EAsEkBC,KAtElB,EAsEwB;AAC3CJ,IAAAA,kBAAkB,CAACC,MAAnB,CAA0B,IAA1B,EAAgC;AAACC,MAAAA,OAAO,EAAPA,OAAD;AAAUC,MAAAA,QAAQ,EAARA,QAAV;AAAoBC,MAAAA,KAAK,EAALA;AAApB,KAAhC;AACD,GAxEoB;AAyErBoC,EAAAA,qBAzEqB,iCAyEC/B,SAzED,EAyEW;AAC9BT,IAAAA,kBAAkB,CAACQ,aAAnB,CAAiC,IAAjC,EAAuCC,SAAvC;AACD,GA3EoB;AA6ErB4C,EAAAA,iBA7EqB,6BA6EHnC,eA7EG,EA6EcD,MA7Ed,EA6EwB;AAAA,QAAVA,MAAU;AAAVA,MAAAA,MAAU,GAAH,EAAG;AAAA;;AAC3CA,IAAAA,MAAM,CAACC,eAAP,GAAyBA,eAAzB;AACA,SAAKG,OAAL,CAAaC,uCAAIC,iBAAjB,EAAoCN,MAApC;AACD,GAhFoB;AAkFrBqC,EAAAA,aAlFqB,yBAkFPC,SAlFO,EAkFG;AACtB,SAAKlC,OAAL,CAAaC,uCAAIkC,YAAjB,EAA+BD,SAA/B;AACD;AApFoB,CAAvB;eAuFezC,c","sourcesContent":["\r\nimport { ComponentActionTypes as CAT } from '../actions/ComponentActions';\r\nimport { BrowserActionTypes as BAT } from '../actions/BrowserActions';\r\nimport Factory from '../logic/Factory';\r\n\r\nimport { ModalDialog } from '../../constants/Type';\r\n\r\nconst ItemDialogLogic = {\r\n\r\n  showItemDialog(slice, itemConf){\r\n    const { type , browserType, conf } = itemConf;\r\n    if (slice[type]){\r\n      return Promise.resolve({ key: type });\r\n    } else {\r\n      return Factory.createDialog(type, browserType, conf)\r\n        .then(Comp => {\r\n             slice[type] = true\r\n             return { key:type, Comp };\r\n         });\r\n    }\r\n  },\r\n\r\n  showOptionDialog(slice, options){\r\n    const { type, data } = options;\r\n    if (slice[type]) {\r\n      return Promise.resolve({ key: type, data });\r\n    } else {\r\n      options.dialogType = type\r\n      return Factory.createOptionDialog(options)\r\n         .then(Comp => {\r\n             slice[type] = true\r\n             return { key: type, Comp, data };\r\n         })\r\n    }\r\n  }\r\n\r\n}\r\n\r\nconst CheckBoxChartLogic = {\r\n  toggle(slice, options){\r\n    const { isCheck, checkBox, chart } = options;\r\n    if (isCheck){\r\n       const activeCheckbox = slice.activeCheckbox;\r\n       if (activeCheckbox && activeCheckbox !== checkBox){\r\n          activeCheckbox.setUnchecked()\r\n       }\r\n       slice.activeCheckbox = checkBox\r\n       slice.activeChart = chart\r\n    } else {\r\n      slice.activeCheckbox = null\r\n      slice.activeChart = null\r\n    }\r\n  },\r\n\r\n  uncheckActive(slice, chartType){\r\n    const activeCheckbox = slice.activeCheckbox;\r\n    if ( activeCheckbox &&\r\n     (!chartType || activeCheckbox.chartType === chartType) ){\r\n       activeCheckbox.setUnchecked()\r\n       slice.activeCheckbox = null\r\n       slice.activeChart = null\r\n    }\r\n  }\r\n};\r\n\r\nconst ChbContLogic = {\r\n  _check(slice, checkBox) {\r\n    if (slice.activeContChb) {\r\n      slice.activeContChb.setUnchecked()\r\n    }\r\n    slice.activeContChb = checkBox\r\n  },\r\n  _uncheck(slice) {\r\n    slice.activeContChb.setUnchecked()\r\n    slice.activeContChb = null\r\n  },\r\n\r\n  toggle(slice, { isCheck, checkBox }){\r\n    if (isCheck) {\r\n      this._check(slice, checkBox)\r\n    } else {\r\n      this._uncheck(slice)\r\n    }\r\n  },\r\n\r\n  uncheckActive(slice, chartType) {\r\n    if (slice.activeContChb) {\r\n      this._uncheck(slice)\r\n    }\r\n  }\r\n};\r\n\r\nconst ComponentSlice = {\r\n  dialogInit : {},\r\n\r\n  showAlertDialog(option={}){\r\n    option.modalDialogType = ModalDialog.ALERT;\r\n    this.trigger(CAT.SHOW_MODAL_DIALOG, option);\r\n  },\r\n\r\n  onShowAbout(){\r\n    this.trigger(CAT.SHOW_ABOUT);\r\n  },\r\n\r\n  onShowDialog(type, browserType, conf){\r\n    ItemDialogLogic.showItemDialog(\r\n      this.dialogInit, { type, browserType, conf }\r\n    ).then(r => {\r\n       this.trigger(CAT.SHOW_DIALOG, r)\r\n    });\r\n  },\r\n\r\n  onCloseDialog(Comp) {\r\n    this.trigger(CAT.CLOSE_DIALOG, {\r\n      type: Comp.key,\r\n      caption: Comp.props.caption\r\n    })\r\n  },\r\n\r\n  onShowOptionDialog(type, option){\r\n    ItemDialogLogic.showOptionDialog(\r\n      this.dialogInit, { type, data: option }\r\n    ).then(r => {\r\n      this.trigger(CAT.SHOW_DIALOG, r)\r\n    })\r\n    .catch(err => {\r\n      this.trigger(CAT.SHOW_MODAL_DIALOG, {\r\n        modalDialogType: 'alert',\r\n        alertCaption: 'Failed Load',\r\n        alertDescr: err.message\r\n      })\r\n    });\r\n  },\r\n\r\n  onCloseChartContainer(chartType, browserType){\r\n    this.uncheckActiveContChb(chartType);\r\n    this.uncheckActiveCheckbox(chartType);\r\n    if(this.isWithItemCounter(browserType)){\r\n      this.setMenuItemClose(chartType, browserType);\r\n      this.trigger(BAT.UPDATE_BROWSER_MENU, browserType);\r\n    }\r\n  },\r\n  onCloseChartContainer2(chartType, browserType){\r\n    this.trigger(CAT.CLOSE_CHART_CONTAINER_2, chartType);\r\n  },\r\n  onSetActiveContainer(isCheck, checkBox){\r\n    ChbContLogic.toggle(this, { isCheck, checkBox })\r\n  },\r\n  uncheckActiveContChb(chartType){\r\n    ChbContLogic.uncheckActive(this, chartType)\r\n  },\r\n\r\n  isLoadToChart(){\r\n    if (this.activeChart){\r\n      return this.activeChart.options.zhConfig.id;\r\n    } else {\r\n      return false;\r\n    }\r\n  },\r\n  getActiveChart(){\r\n    return this.activeChart;\r\n  },\r\n  onSetActiveCheckbox(isCheck, checkBox, chart){\r\n    CheckBoxChartLogic.toggle(this, {isCheck, checkBox, chart})\r\n  },\r\n  uncheckActiveCheckbox(chartType){\r\n    CheckBoxChartLogic.uncheckActive(this, chartType)\r\n  },\r\n\r\n  onShowModalDialog(modalDialogType, option={}){\r\n    option.modalDialogType = modalDialogType;\r\n    this.trigger(CAT.SHOW_MODAL_DIALOG, option);\r\n  },\r\n\r\n  onChangeTheme(themeName){\r\n    this.trigger(CAT.CHANGE_THEME, themeName)\r\n  }\r\n}\r\n\r\nexport default ComponentSlice\r\n"],"file":"ComponentSlice.js"}
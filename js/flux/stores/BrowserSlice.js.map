{"version":3,"sources":["../../../src/flux/stores/BrowserSlice.js"],"names":["fnFindObj","menu","chartType","i","maxPart","length","j","maxItem","items","id","fnSetIsOpen","browserMenu","browserType","value","obj","isOpen","fnAddCounter","counter","BrowserSlice","routeDialog","QE","WL","getBrowserMenu","isWithItemCounter","withoutItemCounter","setMenuItemOpen","setMenuItemClose","addMenuItemCounter","minusMenuItemCounter","getSourceConfig","browserId","sourceId","indexOf","STOCKS_BY_SECTORS","onShowBrowser","trigger","SHOW_BROWSER","onShowBrowserDynamic","option","elBrowser","createBrowserDynamic","INIT_BROWSER_DYNAMIC","SHOW_BROWSER_DYNAMIC","onLoadBrowserDynamicCompleted","json","elMenu","createMenu","LOAD_BROWSER_DYNAMIC_COMPLETED","menuItems","onLoadBrowserDynamicFailed","alertItemId","caption","showAlertDialog"],"mappings":"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","file":"BrowserSlice.js","sourcesContent":["\r\nimport BrowserMenu from '../../constants/BrowserMenu';\r\nimport BrowserConfig from '../../constants/BrowserConfig';\r\nimport { BrowserType } from '../../constants/Type';\r\n\r\nimport Factory from '../logic/Factory';\r\nimport { BrowserActionTypes } from '../actions/BrowserActions';\r\n\r\nimport DataQE from '../../constants/DataQE';\r\nimport DataWL from '../../constants/DataWL';\r\n\r\nconst fnFindObj = function(menu, chartType){\r\n  for (var i=0, maxPart=menu.length; i<maxPart; i++){\r\n    for(var j=0, maxItem=menu[i].items.length; j<maxItem; j++){\r\n      if (menu[i].items[j].id === chartType){\r\n        return menu[i].items[j];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst fnSetIsOpen = function(chartType, browserMenu, browserType, value){\r\n  const obj = fnFindObj(browserMenu[browserType], chartType);\r\n  obj.isOpen = value;\r\n};\r\n\r\nconst fnAddCounter = function(chartType, browserType, browserMenu, value){\r\n  const obj = fnFindObj(browserMenu[browserType], chartType);\r\n  obj.counter += value;\r\n  obj.isOpen = true;\r\n};\r\n\r\nconst BrowserSlice = {\r\n  browserMenu : BrowserMenu,\r\n  routeDialog : {\r\n    QE : DataQE,\r\n    WL : DataWL\r\n  },\r\n\r\n  getBrowserMenu(browserType){\r\n     return this.browserMenu[browserType];\r\n  },\r\n  isWithItemCounter(browserType){\r\n    return !BrowserConfig[browserType].withoutItemCounter;\r\n  },\r\n  setMenuItemOpen(chartType, browserType){\r\n    if (this.isWithItemCounter(browserType)){\r\n       fnSetIsOpen(chartType, this.browserMenu, browserType, true);\r\n    }\r\n  },\r\n  setMenuItemClose(chartType, browserType){\r\n    if (this.isWithItemCounter(browserType)){\r\n      fnSetIsOpen(chartType, this.browserMenu, browserType, false);\r\n    }\r\n  },\r\n  addMenuItemCounter(chartType, browserType){\r\n    if (this.isWithItemCounter(browserType)){\r\n      fnAddCounter(chartType, browserType, this.browserMenu, 1);\r\n    }\r\n  },\r\n  minusMenuItemCounter(chartType, browserType){\r\n    if (this.isWithItemCounter(browserType)){\r\n      fnAddCounter(chartType, browserType, this.browserMenu, -1);\r\n    }\r\n  },\r\n\r\n  getSourceConfig(browserId, sourceId){\r\n    if (sourceId.indexOf(BrowserType.STOCKS_BY_SECTORS) > 0){\r\n      return BrowserConfig[browserId];\r\n    }\r\n\r\n    return this.routeDialog[browserId][sourceId];\r\n  },\r\n\r\n  onShowBrowser(browserType){\r\n    this.trigger(BrowserActionTypes.SHOW_BROWSER, browserType);\r\n  },\r\n\r\n  onShowBrowserDynamic(option){\r\n    const { browserType } = option;    \r\n    if (!this.browserMenu[browserType]) {\r\n       const elBrowser = Factory.createBrowserDynamic(option);\r\n       this.browserMenu[browserType] = [];\r\n       this.trigger(BrowserActionTypes.INIT_BROWSER_DYNAMIC, elBrowser);\r\n    } else {\r\n       this.trigger(BrowserActionTypes.SHOW_BROWSER_DYNAMIC, browserType);\r\n    }\r\n  },\r\n  onLoadBrowserDynamicCompleted(option){\r\n    const { json, browserType } = option;\r\n    if (this.isWithItemCounter(browserType)){\r\n      const { menu, items } = json\r\n          , elMenu = BrowserMenu.createMenu(menu, items, browserType);\r\n\r\n      this.routeDialog[browserType] = items;\r\n      this.browserMenu[browserType] = elMenu;\r\n      this.trigger(BrowserActionTypes.LOAD_BROWSER_DYNAMIC_COMPLETED, {\r\n         menuItems : elMenu, browserType: browserType\r\n      })\r\n    } else {\r\n      this.trigger(BrowserActionTypes.LOAD_BROWSER_DYNAMIC_COMPLETED, {\r\n               json, browserType\r\n      })\r\n    }\r\n  },\r\n  onLoadBrowserDynamicFailed(option){\r\n    option.alertItemId = (option.alertItemId)\r\n              ? option.alertItemId\r\n              : option.caption;\r\n    this.showAlertDialog(option);\r\n  }\r\n\r\n}\r\n\r\nexport default BrowserSlice\r\n"]}
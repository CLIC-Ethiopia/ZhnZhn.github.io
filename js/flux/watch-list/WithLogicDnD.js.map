{"version":3,"sources":["../../../src/flux/watch-list/WithLogicDnD.js"],"names":["WithLogicDnD","dragDropItem","watchList","dragId","dropId","dragArr","split","dragGroup","dragList","dragIndex","items","dragItem","dropArr","dropGroup","dropList","dropIndex","caption","isDone","dragDropList","dragGroupCaption","dragListCaption","dropGroupCaption","dropListCaption","lists","dragDropGroup","groups"],"mappings":"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","sourcesContent":["import {\r\n  crAlertItemExisted,\r\n  crAlertListExisted,\r\n\r\n  findGroup,\r\n  findList,\r\n  findIndex,\r\n\r\n  isInArraySameCaption,\r\n  filter,\r\n  insertItemInArray\r\n} from './LogicFn';\r\n\r\nconst WithLogicDnD = {\r\n\r\n  dragDropItem(watchList, {dragId, dropId}){\r\n    const dragArr = dragId.split(';')\r\n        , dragGroup = findGroup(watchList, dragArr[0])\r\n        , dragList = findList(dragGroup, dragArr[1])\r\n        , dragIndex = findIndex(dragList.items, dragArr[2])\r\n        , dragItem = dragList.items[dragIndex];\r\n\r\n    const dropArr = dropId.split(';')\r\n        , dropGroup = findGroup(watchList, dropArr[0])\r\n        , dropList = findList(dropGroup, dropArr[1])\r\n        , dropIndex = (dropArr[2])\r\n             ? findIndex(dropList.items, dropArr[2])\r\n             : 0;\r\n\r\n    //dragArr[3] => dragArr[2]\r\n    if ( dragList.caption !== dropList.caption &&\r\n         isInArraySameCaption(dropList.items, dragArr[2]) )\r\n    {\r\n        return crAlertItemExisted(dropArr[1], dragArr[2]);\r\n    }\r\n\r\n    dragList.items = filter(dragList.items, dragArr[2])\r\n    dropList.items = insertItemInArray(dragItem, dropIndex, dropList.items);\r\n\r\n    return { isDone: true };\r\n  },\r\n\r\n  dragDropList(watchList, {dragId, dropId}){\r\n    const [ dragGroupCaption, dragListCaption ] = dragId.split(';')\r\n        , dragGroup = findGroup(watchList, dragGroupCaption)\r\n        , dragList = findList(dragGroup, dragListCaption);\r\n\r\n    const [ dropGroupCaption, dropListCaption ] = dropId.split(';')\r\n        , dropGroup = findGroup(watchList, dropGroupCaption)\r\n        , dropIndex = (dropListCaption)\r\n              ? findIndex(dropGroup.lists, dropListCaption)\r\n              : 0;\r\n\r\n    if ( dragGroup.caption !== dropGroup.caption &&\r\n         isInArraySameCaption(dropGroup.lists, dragListCaption) )\r\n    {\r\n      return crAlertListExisted(dropGroupCaption, dragListCaption)\r\n    }\r\n\r\n    dragGroup.lists = filter(dragGroup.lists, dragListCaption);\r\n    dropGroup.lists = insertItemInArray(dragList, dropIndex, dropGroup.lists);\r\n\r\n    return { isDone: true };\r\n  },\r\n\r\n  dragDropGroup(watchList, {dragId, dropId}){\r\n     const [ dragGroupCaption ] = dragId.split(';')\r\n         , dragGroup = findGroup(watchList, dragGroupCaption)\r\n\r\n         , [ dropGroupCaption ] = dropId.split(';')\r\n         , dropIndex = (dropGroupCaption)\r\n               ? findIndex(watchList.groups, dropGroupCaption)\r\n               : 0;\r\n\r\n      watchList.groups = filter(watchList.groups, dragGroupCaption);\r\n      watchList.groups = insertItemInArray(dragGroup, dropIndex, watchList.groups)\r\n\r\n      return { isDone: true };\r\n  }\r\n\r\n};\r\n\r\nexport default WithLogicDnD\r\n"],"file":"WithLogicDnD.js"}
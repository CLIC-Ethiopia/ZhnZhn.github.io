{"version":3,"sources":["../../../src/flux/watch-list/WithLogicDnD.js"],"names":["crAlertItemExisted","LogicFn","crAlertListExisted","findGroup","findList","findIndex","isInArraySameCaption","filter","insertItemInArray","WithLogicDnD","dragDropItem","watchList","dragId","dropId","dragArr","split","dragGroup","dragList","dragIndex","items","dragItem","dropArr","dropGroup","dropList","dropIndex","caption","isDone","dragDropList","dragGroupCaption","dragListCaption","dropGroupCaption","dropListCaption","lists","dragDropGroup","groups"],"mappings":"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","sourcesContent":["import LogicFn from './LogicFn';\r\n\r\nconst {\r\n  crAlertItemExisted,\r\n  crAlertListExisted,\r\n\r\n  findGroup,\r\n  findList,\r\n  findIndex,\r\n\r\n  isInArraySameCaption,\r\n  filter,\r\n  insertItemInArray\r\n} = LogicFn;\r\n\r\nconst WithLogicDnD = {\r\n\r\n  dragDropItem(watchList, {dragId, dropId}){\r\n    const dragArr = dragId.split(';')\r\n        , dragGroup = findGroup(watchList, dragArr[0])\r\n        , dragList = findList(dragGroup, dragArr[1])\r\n        , dragIndex = findIndex(dragList.items, dragArr[2])\r\n        , dragItem = dragList.items[dragIndex];\r\n\r\n    const dropArr = dropId.split(';')\r\n        , dropGroup = findGroup(watchList, dropArr[0])\r\n        , dropList = findList(dropGroup, dropArr[1])\r\n        , dropIndex = (dropArr[2])\r\n             ? findIndex(dropList.items, dropArr[2])\r\n             : 0;\r\n\r\n    //dragArr[3] => dragArr[2]\r\n    if ( dragList.caption !== dropList.caption &&\r\n         isInArraySameCaption(dropList.items, dragArr[2]) )\r\n    {\r\n        return crAlertItemExisted(dropArr[1], dragArr[2]);\r\n    }\r\n\r\n    dragList.items = filter(dragList.items, dragArr[2])\r\n    dropList.items = insertItemInArray(dragItem, dropIndex, dropList.items);\r\n\r\n    return { isDone: true };\r\n  },\r\n\r\n  dragDropList(watchList, {dragId, dropId}){\r\n    const [ dragGroupCaption, dragListCaption ] = dragId.split(';')\r\n        , dragGroup = findGroup(watchList, dragGroupCaption)\r\n        , dragList = findList(dragGroup, dragListCaption);\r\n\r\n    const [ dropGroupCaption, dropListCaption ] = dropId.split(';')\r\n        , dropGroup = findGroup(watchList, dropGroupCaption)\r\n        , dropIndex = (dropListCaption)\r\n              ? findIndex(dropGroup.lists, dropListCaption)\r\n              : 0;\r\n\r\n    if ( dragGroup.caption !== dropGroup.caption &&\r\n         isInArraySameCaption(dropGroup.lists, dragListCaption) )\r\n    {\r\n      return crAlertListExisted(dropGroupCaption, dragListCaption)\r\n    }\r\n\r\n    dragGroup.lists = filter(dragGroup.lists, dragListCaption);\r\n    dropGroup.lists = insertItemInArray(dragList, dropIndex, dropGroup.lists);\r\n\r\n    return { isDone: true };\r\n  },\r\n\r\n  dragDropGroup(watchList, {dragId, dropId}){\r\n     const [ dragGroupCaption ] = dragId.split(';')\r\n         , dragGroup = findGroup(watchList, dragGroupCaption)\r\n\r\n         , [ dropGroupCaption ] = dropId.split(';')\r\n         , dropIndex = (dropGroupCaption)\r\n               ? findIndex(watchList.groups, dropGroupCaption)\r\n               : 0;\r\n\r\n      watchList.groups = filter(watchList.groups, dragGroupCaption);\r\n      watchList.groups = insertItemInArray(dragGroup, dropIndex, watchList.groups)\r\n\r\n      return { isDone: true };\r\n  }\r\n\r\n};\r\n\r\nexport default WithLogicDnD\r\n"],"file":"WithLogicDnD.js"}
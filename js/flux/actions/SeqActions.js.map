{"version":3,"sources":["../../../src/flux/actions/SeqActions.js"],"names":["C","TIMEOUT","SeqActions","arr","max","length","index","unsubscribe","listen","_onStore","bind","_timeID","setTimeout","_clearByTime","_runStep","clearTimeout","step","action","args","type","_clear","typeFail"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,IAAI;AACRC,WAAS;AADD,CAAV;;IAIMC,U;AAEJ,sBAAYC,GAAZ,EAAgB;AAAA;;AACd,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAWD,IAAIE,MAAJ,GAAa,CAAxB;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,WAAL,GAAmB,qBAAMC,MAAN,CAAa,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAb,CAAnB;AACD;;;;0BAEK;AACJ,WAAKC,OAAL,GAAeC,WAAW,KAAKC,YAAhB,EAA8Bb,EAAEC,OAAhC,CAAf;AACA,WAAKa,QAAL;AACD;;;mCAEc;AACb,UAAI,OAAO,KAAKP,WAAZ,KAA4B,UAAhC,EAA4C;AACzC,aAAKA,WAAL;AACF;AACF;;;6BACO;AACNQ,mBAAa,KAAKJ,OAAlB;AACA,WAAKJ,WAAL;AACD;;;+BAEU;AACT,UAAMS,OAAO,KAAKb,GAAL,CAAS,KAAKG,KAAd,CAAb;AACAU,WAAKC,MAAL,8CAAeD,KAAKE,IAApB;AACD;;;6BAESC,I,EAAK;AACZ,UAAMH,OAAO,KAAKb,GAAL,CAAS,KAAKG,KAAd,CAAb;AACA,UAAIa,SAASH,KAAKG,IAAlB,EAAwB;AACtB,YAAI,KAAKb,KAAL,GAAa,KAAKF,GAAtB,EAA2B;AACzB,eAAKE,KAAL,IAAa,CAAb;AACA,eAAKQ,QAAL;AACD,SAHD,MAGO;AACL,eAAKM,MAAL;AACD;AACF,OAPD,MAOO,IAAID,QAAQA,SAASH,KAAKK,QAA1B,EAAoC;AACzC,aAAKD,MAAL;AACD;AACF;;;;;kBAIWlB,U","file":"SeqActions.js","sourcesContent":["import Store from '../stores/ChartStore'\r\n\r\nconst C = {\r\n  TIMEOUT: 10000\r\n};\r\n\r\nclass SeqActions {\r\n\r\n  constructor(arr){\r\n    this.arr = arr\r\n    this.max = arr.length - 1\r\n    this.index = 0\r\n    this.unsubscribe = Store.listen(this._onStore.bind(this))\r\n  }\r\n\r\n  run() {\r\n    this._timeID = setTimeout(this._clearByTime, C.TIMEOUT)\r\n    this._runStep()\r\n  }\r\n\r\n  _clearByTime() {\r\n    if (typeof this.unsubscribe === 'function') {\r\n       this.unsubscribe()\r\n    }\r\n  }\r\n  _clear(){\r\n    clearTimeout(this._timeID)\r\n    this.unsubscribe()\r\n  }\r\n\r\n  _runStep() {\r\n    const step = this.arr[this.index];\r\n    step.action(...step.args)\r\n  }\r\n\r\n   _onStore(type){\r\n     const step = this.arr[this.index];\r\n     if (type === step.type) {\r\n       if (this.index < this.max) {\r\n         this.index +=1;\r\n         this._runStep()\r\n       } else {\r\n         this._clear()\r\n       }\r\n     } else if (type && type === step.typeFail) {\r\n       this._clear()\r\n     }\r\n   }\r\n\r\n}\r\n\r\nexport default SeqActions\r\n"]}
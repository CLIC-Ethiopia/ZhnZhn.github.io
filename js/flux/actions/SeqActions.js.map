{"version":3,"sources":["../../../src/flux/actions/SeqActions.js"],"names":["C","TIMEOUT","SeqActions","arr","max","length","index","unsubscribe","Store","listen","_onStore","bind","run","_timeID","setTimeout","_clearByTime","_runStep","_clear","clearTimeout","step","action","args","type","typeFail"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,CAAC,GAAG;AACRC,EAAAA,OAAO,EAAE;AADD,CAAV;;IAIMC,U;AAEJ,sBAAYC,GAAZ,EAAgB;AACd,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAWD,GAAG,CAACE,MAAJ,GAAa,CAAxB;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,WAAL,GAAmBC,uBAAMC,MAAN,CAAa,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAb,CAAnB;AACD;;;;SAEDC,G,GAAA,eAAM;AACJ,SAAKC,OAAL,GAAeC,UAAU,CAAC,KAAKC,YAAN,EAAoBf,CAAC,CAACC,OAAtB,CAAzB;;AACA,SAAKe,QAAL;AACD,G;;SAEDD,Y,GAAA,wBAAe;AACb,QAAI,OAAO,KAAKR,WAAZ,KAA4B,UAAhC,EAA4C;AACzC,WAAKA,WAAL;AACF;AACF,G;;SACDU,M,GAAA,kBAAQ;AACNC,IAAAA,YAAY,CAAC,KAAKL,OAAN,CAAZ;AACA,SAAKN,WAAL;AACD,G;;SAEDS,Q,GAAA,oBAAW;AACT,QAAMG,IAAI,GAAG,KAAKhB,GAAL,CAAS,KAAKG,KAAd,CAAb;AACAa,IAAAA,IAAI,CAACC,MAAL,OAAAD,IAAI,EAAWA,IAAI,CAACE,IAAhB,CAAJ;AACD,G;;SAEAX,Q,GAAA,kBAASY,IAAT,EAAc;AACZ,QAAMH,IAAI,GAAG,KAAKhB,GAAL,CAAS,KAAKG,KAAd,CAAb;;AACA,QAAIgB,IAAI,KAAKH,IAAI,CAACG,IAAlB,EAAwB;AACtB,UAAI,KAAKhB,KAAL,GAAa,KAAKF,GAAtB,EAA2B;AACzB,aAAKE,KAAL,IAAa,CAAb;;AACA,aAAKU,QAAL;AACD,OAHD,MAGO;AACL,aAAKC,MAAL;AACD;AACF,KAPD,MAOO,IAAIK,IAAI,IAAIA,IAAI,KAAKH,IAAI,CAACI,QAA1B,EAAoC;AACzC,WAAKN,MAAL;AACD;AACF,G;;;;;eAIWf,U","sourcesContent":["import Store from '../stores/ChartStore'\r\n\r\nconst C = {\r\n  TIMEOUT: 10000\r\n};\r\n\r\nclass SeqActions {\r\n\r\n  constructor(arr){\r\n    this.arr = arr\r\n    this.max = arr.length - 1\r\n    this.index = 0\r\n    this.unsubscribe = Store.listen(this._onStore.bind(this))\r\n  }\r\n\r\n  run() {\r\n    this._timeID = setTimeout(this._clearByTime, C.TIMEOUT)\r\n    this._runStep()\r\n  }\r\n\r\n  _clearByTime() {\r\n    if (typeof this.unsubscribe === 'function') {\r\n       this.unsubscribe()\r\n    }\r\n  }\r\n  _clear(){\r\n    clearTimeout(this._timeID)\r\n    this.unsubscribe()\r\n  }\r\n\r\n  _runStep() {\r\n    const step = this.arr[this.index];\r\n    step.action(...step.args)\r\n  }\r\n\r\n   _onStore(type){\r\n     const step = this.arr[this.index];\r\n     if (type === step.type) {\r\n       if (this.index < this.max) {\r\n         this.index +=1;\r\n         this._runStep()\r\n       } else {\r\n         this._clear()\r\n       }\r\n     } else if (type && type === step.typeFail) {\r\n       this._clear()\r\n     }\r\n   }\r\n\r\n}\r\n\r\nexport default SeqActions\r\n"],"file":"SeqActions.js"}